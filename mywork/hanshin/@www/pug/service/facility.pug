//- 常用參數
include ../layout/_var.pug

-
    var breadcrumbs =[
        {
            title:"首頁",
            link:"../home/index.html"},
        {
            title:"顧客服務",
            link:"../service/index.html"},
        {
            title:"貼心服務 設施指南",
            link:"../service/facility.html"},
    ]

    var table=[
        {
            type: "各樓貼心服務",
            place:[
                {
                    placeName:"修改室",
                    linkSrc:"",
                    where:"5F"},
                {
                    placeName:"自動提款機",
                    linkSrc:"",
                    where:"B1F (高雄銀行、永豐銀行) ； 2F、5F、7F (永豐銀行)"},
                {
                    placeName:"置物櫃",
                    linkSrc:"",
                    where:"B1F、1F、2F、4F、5F"},
                {
                    placeName:"咖啡廳",
                    linkSrc:"../service/facilityLibox.html",
                    where:"1F (漢來咖啡)、2F (STARBUCKS)、8F (Café del SOL、simtree)"},
            ]},
        {
            type: "嬰幼童服務",
            place:[
                {
                    placeName:"哺集乳室",
                    linkSrc:"",
                    where:"6F (備有飲水機、尿布)"},
                {
                    placeName:"親子廁所",
                    linkSrc:"",
                    where:"各樓層皆設有親子廁所"},
                {
                    placeName:"兒童專用廁所",
                    linkSrc:"",
                    where:"6F"},
                {
                    placeName:"尿布檯",
                    linkSrc:"",
                    where:"B1F、1F、2F、3F、4F、5F、6F、7F、8F"},
            ]},
        {
            type: "女性貼心服務",
            place:[
                {
                    placeName:"衛生用品提供",
                    linkSrc:"",
                    where:"1F 服務台、2F卡友服務中心備有女性衛生用品(提供緊急備用)"},
                {
                    placeName:"女性專用化(補)妝室",
                    linkSrc:"",
                    where:"各樓層皆設有親子廁所 (僅 6F 無設置)"},
            ]},
        {
            type: "雨天貼心服務",
            place:[
                {
                    placeName:"出借服務",
                    linkSrc:"",
                    where:"1F 服務台提供『愛心傘』出借及『防水保護套』出借服務，當無預警陣雨來臨時，保護您及購買的商品"},
            ]},
    ]


    var moreService = [
        {
            img:"../../upload/fa2/service/index/icon1_50_50.png",
            ch:"1F 服務台",
            en:"information desk",
            link:"../service/other.html"},
        {
            img:"../../upload/fa2/service/index/icon2_50_50.png",
            ch:"4F 卡友服務中心",
            en:"card member service center",
            link:"../service/other.html"},
        {
            img:"../../upload/fa2/service/index/icon3_50_50.png",
            ch:"4F 貴賓廳",
            en:"VIP lounge",
            link:"../service/other.html"},
        {
            img:"../../upload/fa2/service/index/icon4_50_50.png",
            ch:"B3F 諮詢台",
            en:"information desk",
            link:"../service/other.html"},
        {
            img:"../../upload/fa2/service/index/icon5_50_50.png",
            ch:"失物招領",
            en:" lost and found",
            link:"../service/lost.html"},
        {
            img:"../../upload/fa2/service/index/icon6_50_50.png",
            ch:"禮卷專區",
            en:"gift certificate",
            link:"../service/other.html"},
        {
            img:"../../upload/fa2/service/index/icon7_50_50.png",
            ch:"退稅服務",
            en:"tax refund service",
            link:"../service/tax.html"},
        {
            img:"../../upload/fa2/service/index/icon8_50_50.png",
            ch:"停車優惠辦法",
            en:"parking offer",
            link:"../service/other.html"},
        {
            img:"../../upload/fa2/service/index/icon9_50_50.png",
            ch:"商品券相關注意事項",
            en:"product ticket",
            link:"../service/other.html"},
        {
            img:"../../upload/fa2/service/index/icon10_50_50.png",
            ch:"貼心服務 設施指南",
            en:"service facility guide",
            link:"../service/facility.html"},
        {
            img:"../../upload/fa2/service/index/icon11_50_50.png",
            ch:"常見問題",
            en:"Q&A",
            link:"../service/FQ.html"},
        {
            img:"../../upload/fa2/service/index/icon12_50_50.png",
            ch:"購物配送服務",
            en:"shopping delivery",
            link:"../service/other.html"},
        {
            img:"../../upload/fa2/service/index/icon13_50_50.png",
            ch:"電子發票",
            en:"electronic invoice",
            link:"../service/other.html"},
        {
            img:"../../upload/fa2/service/index/icon14_50_50.png",
            ch:"聯絡我們",
            en:"contact us",
            link:"../service/contact.html"},
    ]

doctype html
|
|
<html lang="en">
|
|
+head
|
|
body#service.facility
    include ../layout/_header.pug
    
    main
        article.banner
            section.breadcrumbs
                ul
                    each val in breadcrumbs
                        li
                            a(href=val.link )=val.title
            setion._title(style="background-image:url('../../upload/fa2/service/facility/bannerBg_1670_410.jpg')")
                p.ch 貼心服務 設施指南
                p.en Service facility guide

        article.content
            section.topTitle
                p.en FACILITY
                p.words 全方位、客製化的深度服務，為您營造一個寬敞舒適的購物環境
            section.table
                each val in table
                    .type
                        .typeName
                            p=val.type
                        ul
                            each item in val.place
                                li
                                    .place(data-src=item.linkSrc)
                                        p=item.placeName
                                    .where
                                        p=item.where

        article.moreService
            section._title
                p.en 觀看更多服務
                p.ch More service
            section.link(style="background: linear-gradient(90deg,#eaecf1,#b0c9fd,#eaecf1)")
                ._slick
                    ul
                        each val in moreService
                            li
                                a(href=val.link)
                                    figure
                                        img(data-lazy=val.img, alt="")
                                    ._text
                                        p.ch=val.ch
                                        p.en=val.en
                    .arrows
                        span.icon-arrowLeft
                        span.icon-arrowRight

    include ../layout/_footer.pug
+script
script.
    var facilityLibox = {

        open: function (target) {
            var src = $(target).attr("data-src")
            $("body").append("<article class='facilityLibox'></article>")

            if (!mobile() && !$("body").hasClass("guide")) {
                $("body").css({"overflow-y":"hidden","padding-right":"1rem"})
            }else{
                $("body").css("overflow-y", "hidden")
            }

            alreadyHidden = true
                
            $.ajax({
                    // 載入資料
                    url: src,
                })
                .done(function (data) {
                    // 將資料塞入結構
                    $(".facilityLibox").html(data);
                    facilityLibox.all();
                });
        },

        close_click: function () {
            $(".facilityLibox .liboxClose").click(function () {
                facilityLibox.close();
            });
            $(".facilityLibox").click(function (e) {
                if ($(e.target).hasClass("facilityLibox")){facilityLibox.close(); }
            })
        },

        close: function () {
            $(".facilityLibox").addClass("close");
            if (!mobile()) {$("body").css({"overflow-y":"visible","padding-right":"0rem"})}
            else{ $("body").css("overflow-y", "visible")}
            alreadyHidden = false
            setTimeout(function () {
                $(".facilityLibox").remove()
            }, 500)
        },

        slick:function(){
            $(".facilityLibox ._slick ul").slick({
                prevArrow: ".facilityLibox ._slick .arrows span.icon-arrowLeft",
                nextArrow: ".facilityLibox ._slick .arrows span.icon-arrowRight",
                dots:true,
                speed:700,
                autoplay: true,
                autoplaySpeed: 5000,
                responsive: [{
                    breakpoint: 1025,
                    settings: {
                        arrows: false,
                    }
                }
            ]
            })

            $('.facilityLibox ._slick ul').on('lazyLoaded', function(){
                facilityLibox.waypoint();
                facilityLibox.Blazy();
            });
        },

        row:function(){
            $(".facilityLibox .rows .row>div:not(.table):nth-child(odd)").each(function () {
                var thisClassNmae = $(this).attr("class")
                var nextClassName = $(this).next().attr("class")
                var targetClassName=(nextClassName == "table") ? thisClassNmae : 
                                    (nextClassName == undefined) ? thisClassNmae : nextClassName
                if (thisClassNmae !== targetClassName) {
                    $(this).addClass("half");
                    $(this).next().addClass("half");
                }
            })
        },

        waypoint:function(){
            eachWaypoint(".facilityLibox section .rows .row ._img","80%")
            eachWaypoint(".facilityLibox section .rows .row ._text","80%")

            function eachWaypoint(target, offsetValue){
                $(target).each(function (index, element) {
                    $(element).waypoint({
                        context: ".facilityLibox section",
                        handler: function () {
                            $(element).addClass('show');
                        },
                        offset: offsetValue
                    });
                });
            }
        },

        Blazy:function(){
            var liboxBLazy = new Blazy({
                container:".facilityLibox section",
                offset: 100,
                success: function (ele) {
                    $(ele).closest("figure").addClass("in");
                    Waypoint.refreshAll();
                }
            });
        },

        all:function(){
            facilityLibox.close_click();
            facilityLibox.slick();
            facilityLibox.row();
            openVideoLibox(".facilityLibox section ._slick ul li")
        }
    }
|
|
</html>