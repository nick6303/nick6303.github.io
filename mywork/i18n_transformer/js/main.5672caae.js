(function(e){function t(t){for(var c,a,s=t[0],l=t[1],b=t[2],d=0,j=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&j.push(o[a][0]),o[a]=0;for(c in l)Object.prototype.hasOwnProperty.call(l,c)&&(e[c]=l[c]);i&&i(t);while(j.length)j.shift()();return r.push.apply(r,b||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],c=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(c=!1)}c&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var c={},o={main:0},r=[];function a(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=c,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(n,c,function(t){return e[t]}.bind(null,c));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/mywork/i18n_transformer/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var b=0;b<s.length;b++)t(s[b]);var i=l;r.push(["cd49","chunk-vendors"]),n()})({"089f":function(e,t,n){},"5d94":function(e,t,n){"use strict";n("089f")},7808:function(e,t,n){},abc3:function(e,t,n){"use strict";n("7808")},b6f5:function(e,t,n){},c30b:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var c=n("3fd4"),o=(n("7dd6"),n("7a23"));function r(e,t,n,c,r,a){const s=Object(o["M"])("Main");return Object(o["D"])(),Object(o["i"])(s)}const a=Object(o["fb"])("data-v-10cb5d99");Object(o["G"])("data-v-10cb5d99");const s={class:"row"};Object(o["E"])();const l=a((e,t,n,c,r,a)=>{const l=Object(o["M"])("Upload"),b=Object(o["M"])("TextArea"),i=Object(o["M"])("TextTable"),d=Object(o["M"])("UploadTable"),j=Object(o["M"])("DownLoad");return Object(o["D"])(),Object(o["i"])(o["b"],null,[Object(o["m"])("div",s,[Object(o["m"])(l),Object(o["m"])(b)]),e.jsonText?(Object(o["D"])(),Object(o["i"])(i,{key:0})):Object(o["j"])("",!0),e.ObjectLength>0?(Object(o["D"])(),Object(o["i"])(o["b"],{key:1},[Object(o["m"])(d),Object(o["m"])(j)],64)):Object(o["j"])("",!0)],64)});var b=n("5502");const i=Object(o["fb"])("data-v-d42d2f76");Object(o["G"])("data-v-d42d2f76");const d={class:"downLoadBox"},j=Object(o["l"])("下載 Json 檔"),u={key:0},O=Object(o["m"])("p",null,"請確認無誤後再產生json檔",-1);Object(o["E"])();const p=i((e,t,n,c,r,a)=>{const s=Object(o["M"])("el-button"),l=Object(o["M"])("el-dialog");return Object(o["D"])(),Object(o["i"])("div",d,[Object(o["m"])(s,{type:"primary",icon:"el-icon-download",onClick:e.downLoadFile},{default:i(()=>[j]),_:1},8,["onClick"]),Object(o["m"])(l,{modelValue:e.showError,"onUpdate:modelValue":t[1]||(t[1]=t=>e.showError=t),width:"250px","lock-scroll":!1,"show-close":!1,"before-close":e.beforeClose,title:e.i18nError.length>0?`[${e.i18nError.join("、")}]：以上項目重複定義`:"i18n參數未填寫"},{default:i(()=>[e.i18nError.length>0?(Object(o["D"])(),Object(o["i"])("span",u,"(表格中反紅處)")):Object(o["j"])("",!0),O]),_:1},8,["modelValue","before-close","title"])])});n("13d5"),n("0643"),n("4e3e"),n("9d4a");var f=n("c4e3"),v=n.n(f),m=Object(o["n"])({name:"DownLoad",setup(){const e=Object(b["b"])(),t=Object(o["g"])(()=>e.state.hasError),n=Object(o["g"])(()=>e.state.jsonObject),c=Object(o["g"])(()=>e.state.i18nError),r=Object(o["I"])(!1),a=Object(o["g"])(()=>0!==c.value.length&&r.value||t.value&&r.value),s=Object(o["I"])([]),l=()=>{r.value=!1},i=()=>{r.value=!0,n.value.csvHead.forEach((t,c)=>{const o=/([(][a-zA-Z])\w+/;if(o.test(t)){const o=t.split("(")[1].replace(")",""),r={},a=n.value.csvHead.findIndex(e=>e.indexOf("i18n")>-1);if(a<0)return e.dispatch("setHasError",!0),!1;n.value.csvBody.forEach(t=>{const n=t[a].split(".");n.reduce((o,r,a,s)=>{const l=/object|undefined/,b=s.slice(0,a+1);if(!l.test(typeof o))return e.dispatch("setI18nError",b.join(".")),e.dispatch("setHasError",!0),!1;if(a!==n.length-1){var i;o[r]=null!==(i=o[r])&&void 0!==i?i:{}}else{if(o[r])return e.dispatch("setI18nError",b.join(".")),e.dispatch("setHasError",!0),!1;o[r]=t[c]}return o[r]},r)}),s.value.push({fileName:o,fileData:JSON.stringify(r)})}}),t.value||d()},d=()=>{const e=new v.a;s.value.forEach(t=>{const n=e.folder(t.fileName);n&&n.file("index.json",t.fileData)}),e.generateAsync({type:"base64"}).then(e=>{j(e)})},j=e=>{var t=document.createElement("a");t.setAttribute("href","data:application/zip;base64,"+e),t.setAttribute("download","i18n"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)};return{showError:a,i18nError:c,downLoadFile:i,beforeClose:l}}}),h=(n("ed76"),n("d959")),y=n.n(h);const E=y()(m,[["render",p],["__scopeId","data-v-d42d2f76"]]);var g=E;const x=Object(o["fb"])("data-v-26ab5710");Object(o["G"])("data-v-26ab5710");const w={class:"previews"},T=Object(o["m"])("h2",null,"預覽",-1);Object(o["E"])();const _=x((e,t,n,c,r,a)=>{const s=Object(o["M"])("el-table-column"),l=Object(o["M"])("el-table");return Object(o["D"])(),Object(o["i"])("div",w,[T,Object(o["m"])(l,{data:e.tableData,border:""},{default:x(()=>[(Object(o["D"])(!0),Object(o["i"])(o["b"],null,Object(o["K"])(e.jsonObject.csvHead,t=>(Object(o["D"])(),Object(o["i"])(s,{prop:t,label:t},Object(o["k"])({_:2},[t.indexOf("i18n")>-1?{name:"default",fn:x(n=>[Object(o["m"])("div",{class:e.errorCheck(n.row,t)},Object(o["Q"])(n.row[t]),3)])}:void 0]),1032,["prop","label"]))),256))]),_:1},8,["data"])])});var D=Object(o["n"])({name:"UploadTable",setup(){const e=Object(b["b"])(),t=Object(o["g"])(()=>e.state.jsonObject),n=Object(o["g"])(()=>e.state.i18nError),c=Object(o["g"])(()=>{const e=[],n=t.value;return n.csvBody&&n.csvBody.forEach(t=>{const c={};t.forEach((e,t)=>{const o=n.csvHead[t];c[o]=e}),e.push(c)}),e}),r=(e,t)=>n.value.indexOf(e[t])>-1?"error":"";return{jsonObject:t,tableData:c,i18nError:n,errorCheck:r}}});n("5d94");const k=y()(D,[["render",_],["__scopeId","data-v-26ab5710"]]);var M=k;const S={class:"uploadBox"},A=Object(o["m"])("i",{class:"el-icon-upload"},null,-1),J=Object(o["m"])("div",{class:"el-upload__text"},[Object(o["l"])("將文件拖到此處，或"),Object(o["m"])("em",null,"點擊上傳")],-1);function H(e,t,n,c,r,a){const s=Object(o["M"])("el-upload");return Object(o["D"])(),Object(o["i"])("div",S,[Object(o["m"])(s,{drag:"",action:"","http-request":e.uploadAction,"before-upload":e.beforeUpload,"show-file-list":!1},{default:Object(o["bb"])(()=>[A,J]),_:1},8,["http-request","before-upload"])])}var I=n("369b"),C=n.n(I),N=Object(o["n"])({name:"Upload",setup(){const e=Object(b["b"])(),t=Object(o["H"])({csvHead:[],csvBody:[],csvName:"",lang:1}),n=t=>{const n=/text\/csv/,c=n.test(t.type);if(!c)return alert("上傳的圖片格式僅能為*.csv"),!1;e.dispatch("reset")},c=async n=>{const c=n.file;t.csvName=c.name,C.a.parse(c,{skipEmptyLines:!0,complete:e=>{t.csvHead=[...e.data[0]],e.data.shift(),t.csvBody=null===e||void 0===e?void 0:e.data}}),e.dispatch("setJsonObject",t)};return{beforeUpload:n,uploadAction:c}}});const U=y()(N,[["render",H]]);var L=U;function V(e,t,n,c,r,a){const s=Object(o["M"])("el-input");return Object(o["D"])(),Object(o["i"])(s,{modelValue:e.textValue,"onUpdate:modelValue":t[1]||(t[1]=t=>e.textValue=t),type:"textarea",placeholder:"請輸入 json 格式",resize:"none",onChange:e.changData},null,8,["modelValue","onChange"])}n("5b81");var B=Object(o["n"])({name:"TextArea",setup(){const e=Object(b["b"])(),t=Object(o["I"])(""),n=t=>{const n=JSON.stringify(t).replaceAll("\\n","").replaceAll('\\"','"').replaceAll(" ","").slice(1,-1),c=JSON.parse(n);e.dispatch("setJsonText",c)};return{textValue:t,changData:n}}});const P=y()(B,[["render",V]]);var R=P;const $={class:"previews"},z=Object(o["m"])("h2",null,"預覽",-1);function G(e,t,n,c,r,a){const s=Object(o["M"])("el-table-column"),l=Object(o["M"])("el-table");return Object(o["D"])(),Object(o["i"])("div",$,[z,Object(o["m"])(l,{data:e.tableData,border:""},{default:Object(o["bb"])(()=>[Object(o["m"])(s,{prop:"value",label:"內容"},{default:Object(o["bb"])(e=>[Object(o["l"])(Object(o["Q"])(e.row.value),1)]),_:1}),Object(o["m"])(s,{prop:"key",label:"i18n (前端用)"},{default:Object(o["bb"])(e=>[Object(o["l"])(Object(o["Q"])(e.row.key),1)]),_:1})]),_:1},8,["data"])])}var Q=Object(o["n"])({name:"TextTable",setup(){const e=Object(b["b"])(),t=Object(o["g"])(()=>e.state.jsonText),n=Object(o["g"])(()=>{const e=[],n=(t,c)=>{Object.keys(t).forEach(o=>{if("string"===typeof t[o]){const n={key:`${c?c+".":""}${o}`,value:t[o]};e.push(n)}else n(t[o],`${c?c+".":""}${o}`)})};return n(t.value,""),console.log(e),e});return{tableData:n,jsonText:t}}});const q=y()(Q,[["render",G]]);var F=q,K=Object(o["n"])({name:"Index",components:{Upload:L,UploadTable:M,DownLoad:g,TextArea:R,TextTable:F},setup(){const e=Object(b["b"])(),t=Object(o["g"])(()=>e.state.jsonText),n=Object(o["g"])(()=>e.state.jsonObject),c=Object(o["g"])(()=>Object.keys(e.state.jsonObject).length);return{jsonText:t,jsonObject:n,ObjectLength:c}}});n("abc3");const X=y()(K,[["render",l],["__scopeId","data-v-10cb5d99"]]);var Z=X,W=Object(o["n"])({name:"App",components:{Main:Z}});n("d68e");const Y=y()(W,[["render",r]]);var ee=Y;const te="SET_JSONTEXT",ne="SET_JSONOBJECT",ce="SET_I18NERROR",oe="SET_HASERROR",re="RESET",ae=Object(b["a"])({state:{jsonText:"",jsonObject:{},i18nError:[],hasError:!1},mutations:{[te](e,t){e.jsonText=t},[ne](e,t){e.jsonObject=t},[ce](e,t){e.i18nError.indexOf(t)<0&&e.i18nError.push(t)},[oe](e,t){e.hasError=t},[re](e){e.jsonText="",e.i18nError=[],e.hasError=!1}},actions:{setJsonText(e,t){e.commit(te,t)},setJsonObject(e,t){e.commit(ne,t)},setI18nError(e,t){e.commit(ce,t)},setHasError(e,t){e.commit(oe,t)},reset(e){e.commit(re)}}});var se=ae;n("c30b");Object(o["h"])(ee).use(se).use(c["a"]).mount("#app")},d68e:function(e,t,n){"use strict";n("b6f5")},d8a3:function(e,t,n){},ed76:function(e,t,n){"use strict";n("d8a3")}});