(self["webpackChunkcontrol_center"]=self["webpackChunkcontrol_center"]||[]).push([[6018],{13829:function(e,t,a){"use strict";a.r(t);var n=a(31601),i=a.n(n),l=a(76314),o=a.n(l),r=o()(i());r.push([e.id,".menu:hover .setting[data-v-2f615763]{color:var(--frontStage_menu_hoverColor)}.el-icon-arrow-left[data-v-2f615763]{display:flex;align-items:center;justify-content:space-between;margin:0}.el-icon-arrow-left .setting[data-v-2f615763]{transform:translateX(12px)}.el-icon-arrow-left .setting[data-v-2f615763]:hover{background-color:var(--frontStage_menu_hoverColor);color:var(--frontStage_menu_color)}",""]),t["default"]=r},21081:function(e,t,a){"use strict";a.r(t);var n=a(31601),i=a.n(n),l=a(76314),o=a.n(l),r=o()(i());r.push([e.id,".editGroupDialog .el-form-item__label{display:flex;align-items:center}.editGroupDialog .btn{display:flex;justify-content:flex-end}",""]),t["default"]=r},30736:function(e,t,a){"use strict";a.d(t,{Bb:function(){return p},Zj:function(){return h},oM:function(){return u}});a(44114),a(18111),a(22489),a(20116);var n=a(39325),i=a(52125),l=a.n(i),o=a(56768),r=a(55129);const s=async(e,t)=>{const a="prev"===t?"currentPageImage2":"currentPageImage",i="prev"===t?"cgBodyToRight":"cgBodyToLeft",o=document.getElementById("app"),r=o.querySelectorAll("iframe");for(let n=0;n<r.length;n++)try{const e=r[n].contentWindow.document.getElementById("app");if(e){const t=await l()(e),a=t.toDataURL("image/jpeg",1),i=r[n].parentNode;i.classList.add("fakeIframe");const o=document.createElement("img");o.src=a,i.append(o)}}catch{}const s=await l()(o);s.classList.add(a),document.body.appendChild(s),n.Ay.push(e),document.getElementsByTagName("html")[0].classList.add("cgHtmlZoom"),document.body.classList.add(i),setTimeout(()=>{document.body.classList.remove(i),document.getElementsByTagName("html")[0].classList.remove("cgHtmlZoom"),s.remove()},2400)},d={CG_A:e=>{s(e,"prev")},CG_B:e=>{s(e,"next")}},u=(0,o.EW)(()=>{const e=r.A.state.user.front_permissions,t=r.A.state.menu.frontMenuList.filter(t=>{const{open_type:a,menu_type:n,carousel:i}=t,l=e.find(e=>e.menu.id===t.id);return 1===a&&2===n&&l.is_visible&&i});return t}),c=(0,o.EW)(()=>{const e=n.Ay.currentRoute.value.path;return u.value.findIndex(t=>t.path===e)}),p=async()=>{const e=c.value>-1?c.value:1,t=u.value.slice(0,e);let a=t[t.length-1];0===c.value&&(a=u.value[u.value.length-1]),await d.CG_A({path:a.path})},h=async()=>{const e=c.value>-1?c.value:u.value.length-1;let t=u.value[e+1];e===u.value.length-1&&(t=u.value[0]),await d.CG_B({path:t.path})}},38610:function(e,t,a){var n=a(21081);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var i=a(68459).A;i("fa46409e",n,!0,{sourceMap:!1,shadowMode:!1})},39622:function(e,t,a){var n=a(13829);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var i=a(68459).A;i("252289bc",n,!0,{sourceMap:!1,shadowMode:!1})},57904:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Vt}});var n=a(56768),i=a(24232),l=a(45130);const o={key:0,class:"swipeButtons"};function r(e,t,a,r,s,d){const u=(0,n.g2)("Tools"),c=(0,n.g2)("Layers"),p=(0,n.g2)("ContainBox"),h=(0,n.g2)("DraggableContainer"),f=(0,n.g2)("el-button"),m=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bo)(((0,n.uX)(),(0,n.Wv)(h,{class:(0,i.normalizeClass)(["content Structure",{animation:r.showAnimation,editting:r.editting,drawLine:r.drawLine}]),ref:"containerRef",onClick:t[0]||(t[0]=(0,l.D$)(()=>{},["stop"])),onMousedown:r.wrapperClick},{default:(0,n.k6)(()=>[r.editting?((0,n.uX)(),(0,n.Wv)(u,{key:0,data:r.apiData,boxList:r.boxList,containerRef:r.containerRef,onRemoveFramework:r.removeFramework},null,8,["data","boxList","containerRef","onRemoveFramework"])):(0,n.Q3)("",!0),r.editting?((0,n.uX)(),(0,n.Wv)(c,{key:r.routerName,data:r.apiData,hideItem:r.hideItem,boxList:r.boxList},null,8,["data","hideItem","boxList"])):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.contentList,(e,t)=>(0,n.bo)(((0,n.uX)(),(0,n.Wv)(p,{key:`${r.routerName}${e.id}${e.key}`,ref_for:!0,ref:e=>{r.boxList[t]=e},info:e,index:t,data:r.contentList,boxList:r.boxList},null,8,["info","index","data","boxList"])),[[l.aG,r.hideItem.findIndex(t=>t===e.id)<0]])),128))]),_:1},8,["class","onMousedown"])),[[m,r.loading]]),!r.editting&&r.menuList.length>0?((0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(f,{class:"prev",size:"small",plain:"",onClick:t[1]||(t[1]=e=>r.swipe("prev"))},{default:(0,n.k6)(()=>[...t[3]||(t[3]=[(0,n.Lk)("i",{class:"el-icon-arrow-left"},null,-1)])]),_:1}),(0,n.bF)(f,{class:"next",size:"small",plain:"",onClick:t[2]||(t[2]=e=>r.swipe("next"))},{default:(0,n.k6)(()=>[...t[4]||(t[4]=[(0,n.Lk)("i",{class:"el-icon-arrow-right"},null,-1)])]),_:1})])):(0,n.Q3)("",!0)],64)}a(44114),a(18111),a(20116),a(7588),a(61701);var s=a(90144),d=a(78626),u=a(4249),c=a(39325),p=a(7681),h={name:"DraggableContainer",setup(){const e=(0,s.reactive)({matchLine:null}),t=(0,n.EW)(()=>e.matchLine&&e.matchLine.row||[]),a=(0,n.EW)(()=>e.matchLine&&e.matchLine.col||[]),i=t=>{e.matchLine=t},l=(0,s.reactive)({}),o=(e,t)=>{l[e]=t},r=e=>{const t=Object.assign({},l);return e&&delete t[e],t},d=(0,s.ref)(!1),u=e=>{d.value=e};return(0,n.Gt)("setMatchLine",i),(0,n.Gt)("updatePosition",o),(0,n.Gt)("getPositionStore",r),(0,n.Gt)("updateEditting",u),{editting:d,matchLineRow:t,matchLineCol:a}},methods:{renderReferenceLine(){return[...this.matchLineRow.map(e=>(0,n.h)("div",{class:"rowLine",style:{top:`${e}px`}})),...this.matchLineCol.map(e=>(0,n.h)("div",{class:"colLine",style:{left:`${e}px`}}))]}},render(){return(0,n.h)("div",{},[this.$slots.default&&this.$slots.default(),...this.renderReferenceLine()])}};a(22489),a(18237);function f(e,t,a,n,i,l,o,r){let c,p,h,f;const m=(0,u.Pj)(),v=(0,s.reactive)({X:0,Y:0}),g=(0,s.reactive)({X:0,Y:0}),k=(0,s.reactive)({X:a.left,Y:a.top}),A=(0,s.reactive)({X:a.left,Y:a.top}),x=(0,s.ref)(!1),C=(0,s.ref)({top:0,right:0,bottom:0,left:0}),L=e=>{m.dispatch("dashboard/setMoveDistance",e)},I=e=>{o(e&&t.value),x.value=e},E=e=>{if(x.value&&t.value){e.preventDefault();const t=e.clientX,a=e.clientY,l=t-v.X,o=a-v.Y;e.shiftKey?Math.abs(l)>Math.abs(o)?(g.X=k.X+l,g.Y=k.Y):(g.X=k.X,g.Y=k.Y+o):(g.X=k.X+l,g.Y=k.Y+o);const r={col:[g.X,g.X+c.width/2,g.X+c.width],row:[g.Y,g.Y+c.height/2,g.Y+c.height]};f={row:r.row.map((e,t)=>{let a=null;return Object.values(p.row).forEach(t=>{e>=t.min&&e<=t.max&&(a=t.value)}),null!==a&&(0===t?g.Y=a:1===t?g.Y=Math.floor(a-c.height/2):2===t&&(g.Y=Math.floor(a-c.height))),a}).filter(e=>null!==e),col:r.col.map((e,t)=>{let a=null;return Object.values(p.col).forEach(t=>{e>=t.min&&e<=t.max&&(a=t.value)}),null!==a&&(0===t?g.X=a:1===t?g.X=Math.floor(a-c.width/2):2===t&&(g.X=Math.floor(a-c.width))),a}).filter(e=>null!==e)},i(f);const s=y({x:g.X,y:g.Y},C);h=s.bool?{X:g.X-k.X,Y:g.Y-k.Y}:{X:s.X-k.X,Y:s.Y-k.Y},n.setLeft(A.X+h.X),n.setTop(A.Y+h.Y),L(h)}},W=async a=>{a.stopPropagation(),L({X:0,Y:0}),t.value&&(window.addEventListener("mouseup",D),I(!0),v.X=a.clientX,v.Y=a.clientY,p=w(l,n.id,e),c=await b(r),k.X=c.left,k.Y=c.top,A.X=n.left.value,A.Y=n.top.value,C.value={top:0,right:e.value.width-c.width,bottom:e.value.height-c.height,left:0},window.addEventListener("mousemove",E))},D=()=>{x.value&&t.value&&(v.X=0,v.Y=0,k.X=(0,d.clone)(n.left),k.Y=(0,d.clone)(n.top),A.X=(0,d.clone)(n.left),A.Y=(0,d.clone)(n.top)),p=null,i({row:null,col:null}),I(!1),setTimeout(()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",D)},100)};return{mousedown:W}}function m(e,t,a,i,l,o,r){let u,c,p;const h=(0,s.ref)(!1),f=(0,s.reactive)({X:0,Y:0}),m=(0,s.reactive)({X:0,Y:0}),v=(0,s.reactive)({top:0,left:0,width:0,height:0}),g=(0,s.reactive)({top:0,left:0,width:0,height:0}),b=(0,n.EW)(()=>({top:0,right:e.value.width,bottom:e.value.height,left:0})),k=e=>{h.value=e,r(e&&i.value)},A=e=>{if(h.value&&i.value){e.preventDefault();const n=e.shiftKey;m.X=e.clientX,m.Y=e.clientY;const i={X:m.X-f.X,Y:m.Y-f.Y};p.indexOf("r")>-1&&(v.width=g.width+i.X),p.indexOf("l")>-1&&(v.left=g.left+i.X,v.width=g.width-i.X),p.indexOf("t")>-1&&(v.top=g.top+i.Y,v.height=g.height-i.Y),p.indexOf("b")>-1&&(v.height=g.height+i.Y),n&&("tr"===p&&(i.X<-1*i.Y?(v.height=v.width*g.height/g.width,v.top=g.top-v.height+g.height):v.width=v.height*g.width/g.height),"tl"===p&&(-1*i.X<-1*i.Y?(v.height=v.width*g.height/g.width,v.top=g.top-v.height+g.height):(v.width=v.height*g.width/g.height,v.left=g.left-v.width+g.width)),"bl"===p&&(-1*i.X<i.Y?v.height=v.width*g.height/g.width:(v.width=v.height*g.width/g.height,v.left=g.left-v.width+g.width)),"br"===p&&(-1*i.X<i.Y?v.height=v.width*g.height/g.width:v.width=v.height*g.width/g.height));const o={col:[p.indexOf("r")>-1?v.left+v.width:v.left],row:[p.indexOf("b")>-1?v.top+v.height:v.top]};c={row:o.row.map(e=>{let t=null;return Object.values(u.row).forEach(a=>{e>=a.min&&e<=a.max&&(t=a.value)}),null!==t&&(p.indexOf("t")>-1&&(v.top=t,v.height=g.top-t+g.height),p.indexOf("b")>-1&&(v.height=t-g.top+1)),t}).filter(e=>null!==e),col:o.col.map(e=>{let a=null;return Object.values(u.col).forEach(t=>{e>=t.min&&e<=t.max&&(a=t.value)}),null!==a&&(m.X=a-t.left+1,p.indexOf("l")>-1&&(v.left=a,v.width=g.left-a+g.width),p.indexOf("r")>-1&&(v.width=a-g.left+1)),a}).filter(e=>null!==e)},l(c);const r=y({x:v.left,y:v.top,w:v.width,h:v.height},b);r.bool?(a.setTop(v.top),a.setLeft(v.left),a.setWidth(v.width),a.setHeight(v.height)):(a.setTop(r.Y),a.setLeft(r.X),a.setWidth(r.W),a.setHeight(r.H))}},x=(n,i)=>{n.stopPropagation(),window.addEventListener("mouseup",C),k(!0),p=i,f.X=n.clientX,f.Y=n.clientY,u=w(o,a.id,e),v.top=t.value.top,v.left=t.value.left,v.width=t.value.width,v.height=t.value.height,g.top=t.value.top,g.left=t.value.left,g.width=t.value.width,g.height=t.value.height,window.addEventListener("mousemove",A)},C=()=>{f.X=0,f.Y=0,g.width=(0,d.clone)(a.width),g.height=(0,d.clone)(a.height),g.top=(0,d.clone)(a.top),g.left=(0,d.clone)(a.left),v.top=(0,d.clone)(a.top),v.left=(0,d.clone)(a.left),u=null,l({row:null,col:null}),k(!1),setTimeout(()=>{window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",C)},100)};return{handleResizeDown:x,mouseup:C}}function v(e){const t=(0,s.ref)(e),a=e=>(t.value=e,e);return[t,a]}function g(e,t){const a=String(Math.random()).substr(2)+String(Date.now()),[i,l]=v(e.w),[o,r]=v(e.h),[s,d]=v(e.x>0?e.x:0),[u,c]=v(e.y>0?e.y:0);(0,n.wB)(i,e=>{t("update:w",e)},{immediate:!0}),(0,n.wB)(o,e=>{t("update:h",e)},{immediate:!0}),(0,n.wB)(u,e=>{t("update:y",e)}),(0,n.wB)(s,e=>{t("update:x",e)});const p=(0,n.EW)(()=>e?e.x:null),h=(0,n.EW)(()=>e?e.y:null),f=(0,n.EW)(()=>e?e.h:null),m=(0,n.EW)(()=>e?e.w:null);return(0,n.wB)(p,e=>{e!==s.value&&d(e)}),(0,n.wB)(h,e=>{e!==u.value&&c(e)}),(0,n.wB)(f,e=>{e!==o.value&&r(e)}),(0,n.wB)(m,e=>{e!==i.value&&l(e)}),{id:a,width:i,height:o,top:u,left:s,setWidth:e=>l(Math.floor(e)),setHeight:e=>r(Math.floor(e)),setTop:e=>c(Math.floor(e)),setLeft:e=>d(Math.floor(e))}}function y(e,t){const{x:a,y:n}=e,i=e.w??0,l=e.h??0,o=(0,d.cloneDeep)(e),r=n>=t.value.top,s=a+i<=t.value.right,u=n+l<=t.value.bottom,c=a>=t.value.left;return r||(o.y=t.value.top,o.h=n+l-t.value.top),u||(l?o.h=t.value.bottom-n:o.y=t.value.bottom),c||(o.x=t.value.left,o.w=a+i-t.value.left),s||(i?o.w=t.value.right-a:o.x=t.value.right),{bool:r&&s&&u&&c,X:o.x,Y:o.y,W:o.w,H:o.h}}function w(e,t,a){const n={row:[],col:[]},{width:i,height:l}=a.value,o=e(t);n.row.push(l/2),n.col.push(i/2),Object.values(o).forEach(({x:e,y:t,w:a,h:i})=>{n.row.push(t,t+i,t+i/2),n.col.push(e,e+a,e+a/2)});const r={row:n.row.reduce((e,t)=>({...e,[t]:{min:t-5,max:t+5,value:t}}),{}),col:n.col.reduce((e,t)=>({...e,[t]:{min:t-5,max:t+5,value:t}}),{})};return r}const b=e=>new Promise(t=>{setTimeout(()=>{const a=e.value.filter(e=>e&&e.isFocus&&e.info.frameworking),n=[];a.forEach(e=>{const{top:t,left:a,width:i,height:l}=e;n.push({top:t,left:a,width:i,height:l})});const i=(0,s.reactive)({tops:[0],lefts:[0],rights:[0],bottoms:[0]});0!==n.length&&(i.tops=n.map(e=>e.top),i.lefts=n.map(e=>e.left),i.rights=n.map(e=>e.left+e.width),i.bottoms=n.map(e=>e.top+e.height));const l={top:Math.min(...i.tops),left:Math.min(...i.lefts),width:Math.max(...i.rights)-Math.min(...i.lefts),height:Math.max(...i.bottoms)-Math.min(...i.tops)};t(l)},100)}),k={init:{type:Object,default:null},x:{type:Number,default:null},y:{type:Number,default:null},h:{type:Number,default:null},w:{type:Number,default:null},parentSize:{type:Object,default:null},active:{type:Boolean,default:null},noResize:{type:Boolean,default:!1},boxList:{type:Array}},A=["update:w","update:h","update:x","update:y"],x=["tl","t","tr","l","r","bl","b","br"];var C={name:"DraggableResizeBox",props:k,emits:A,setup(e,{emit:t}){const a=(0,n.WQ)("updatePosition"),i=(0,n.WQ)("getPositionStore"),l=(0,n.WQ)("setMatchLine"),o=(0,n.WQ)("updateEditting"),{init:r}=e??{},s=(0,n.EW)(()=>e?e.parentSize:{}),d=(0,n.EW)(()=>!!e&&e.active),u=(0,n.EW)(()=>e?e.boxList:[]),c=g(e,t),p=f(s,d,r,c,l,i,o,u),h=(0,n.EW)(()=>{const t=e?e.w:0,a=e?e.h:0,n=e?e.x:0,i=e?e.y:0;return{width:t,height:a,top:i,left:n}}),v=m(s,h,c,d,l,i,o);return{mousedown:p.mousedown,handleResizeDown:v.handleResizeDown,updatePosition:a,...c}},computed:{styleSet(){return{position:this.parentSize?"absolute":"fixed",width:`${this.width}px`,height:`${this.height}px`,left:`${this.left}px`,top:`${this.top}px`}}},mounted(){this.updatePosition(this.id,{x:this.left,y:this.top,w:this.width,h:this.height})},render(){return(0,n.h)("div",{style:this.styleSet,class:["draggableResizeBox",this.active?"active":""],onMousedown:this.mousedown},[this.$slots.default&&this.$slots.default(),!this.noResize&&x.map(e=>(0,n.h)("button",{class:["resizeBtn",...e.split("")],onMousedown:t=>{this.handleResizeDown(t,e)}}))])}},L=a(30736);const I={class:"buttons"};function E(e,t,a,o,r,s){const d=(0,n.g2)("el-button"),u=(0,n.g2)("el-tooltip"),c=(0,n.g2)("GroupButtons"),p=(0,n.g2)("AddItem"),h=(0,n.g2)("SubMenuTitle"),f=(0,n.g2)("MenuItem"),m=(0,n.g2)("el-sub-menu"),v=(0,n.g2)("el-menu"),g=(0,n.g2)("ContextMenu"),y=(0,n.g2)("EditGroup");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",{class:"layer",style:(0,i.normalizeStyle)({top:`${o.position.y}px`,right:`${o.position.x}px`})},[(0,n.bF)(u,{effect:"dark",content:o.isCollapse?"展開圖層":"收合圖層",placement:"bottom-end"},{default:(0,n.k6)(()=>[(0,n.bF)(d,{class:"toggleLayer",onClick:t[0]||(t[0]=e=>o.isCollapse=!o.isCollapse),size:"small"},{default:(0,n.k6)(()=>[(0,n.Lk)("i",{class:(0,i.normalizeClass)(o.isCollapse?"el-icon-arrow-left":"el-icon-arrow-right")},null,2)]),_:1})]),_:1},8,["content"]),(0,n.Lk)("div",{class:"lists",style:(0,i.normalizeStyle)({width:o.isCollapse?"0px":"320px"})},[(0,n.Lk)("div",{class:"title",onMousedown:t[2]||(t[2]=(0,l.D$)((...e)=>o.mousedown&&o.mousedown(...e),["self"]))},[(0,n.Lk)("p",{onMousedown:t[1]||(t[1]=(0,l.D$)((...e)=>o.mousedown&&o.mousedown(...e),["self"]))},"圖層",32),(0,n.bF)(c,{data:a.data},null,8,["data"]),(0,n.Lk)("div",I,[(0,n.bF)(p,{data:o.tableList,onOpenEditGroup:o.openEditGroup},null,8,["data","onOpenEditGroup"])])],32),((0,n.uX)(),(0,n.Wv)(v,{class:"scrollBar",ref:"elMenu",key:o.timeStamp,"default-openeds":o.openSub,onOpen:o.openMenu,onClose:o.closeMenu},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.tableList,(e,l)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:e.groupName?e.groupName:e.id},[e.groupName?((0,n.uX)(),(0,n.Wv)(m,{key:0,index:e.groupName,"data-index":l,disabled:!o.isAdmin,class:(0,i.normalizeClass)(o.chechActive(e.children))},{title:(0,n.k6)(()=>[(0,n.bF)(h,{info:e,hideItem:a.hideItem,tableList:o.tableList,data:a.data,onUpdateGroupName:o.updateGroupName,onOpenEditGroup:o.openEditGroup,onOnContextmenu:t=>o.onContextmenu(t,"destroy",e)},null,8,["info","hideItem","tableList","data","onUpdateGroupName","onOpenEditGroup","onOnContextmenu"])]),default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.children,t=>((0,n.uX)(),(0,n.Wv)(f,{key:t.id,info:t,index:`${e.groupName}-${t.id}`,data:a.data,hideItem:a.hideItem},null,8,["info","index","data","hideItem"]))),128))]),_:2},1032,["index","data-index","disabled","class"])):((0,n.uX)(),(0,n.Wv)(f,{key:1,info:e,index:`${e.id}`,data:a.data,hideItem:a.hideItem,onOnContextmenu:t[3]||(t[3]=e=>o.onContextmenu(e,"create"))},null,8,["info","index","data","hideItem"]))],64))),128))]),_:1},8,["default-openeds","onOpen","onClose"]))],4)],4),(0,n.bF)(g,{ref:"contextmenuRef",isCreateGroup:o.isCreateGroup,tableList:o.tableList},null,8,["isCreateGroup","tableList"]),(0,n.bF)(y,{ref:"editGroupRef"},null,512)],64)}a(81148);const W={key:0},D={key:0,class:"menu"},X={class:"el-icon-arrow-left"},F={class:"menu"},S={class:"el-icon-arrow-left"},B={class:"category"};function M(e,t,a,o,r,s){const d=(0,n.g2)("el-button"),u=(0,n.g2)("el-menu-item"),c=(0,n.g2)("el-menu"),p=(0,n.g2)("el-divider"),h=(0,n.g2)("el-popover");return o.editting&&0===o.frameworkcount?((0,n.uX)(),(0,n.CE)("div",W,[(0,n.bF)(h,{placement:"bottom-end",trigger:"click","popper-class":"userInfo front",visible:o.visible,"onUpdate:visible":t[2]||(t[2]=e=>o.visible=e)},{reference:(0,n.k6)(()=>[(0,n.bF)(d,{class:"addItem",type:"success",size:"small",title:"新增物件",onMousedown:t[0]||(t[0]=(0,l.D$)(()=>{},["stop"])),onMousemove:t[1]||(t[1]=(0,l.D$)(()=>{},["stop"]))},{default:(0,n.k6)(()=>[...t[3]||(t[3]=[(0,n.Lk)("i",{class:"el-icon-plus"},null,-1)])]),_:1})]),default:(0,n.k6)(()=>[o.isAdmin?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.itemList,e=>((0,n.uX)(),(0,n.CE)(n.FK,{key:e.key},[e.children?((0,n.uX)(),(0,n.CE)("div",D,[(0,n.Lk)("p",X,(0,i.toDisplayString)(e.title),1),(0,n.bF)(c,{class:"list"},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.children,e=>((0,n.uX)(),(0,n.Wv)(u,{key:e.key,index:e.key,onClick:t=>o.addItem(e.key)},{default:(0,n.k6)(()=>[(0,n.eW)((0,i.toDisplayString)(e.title),1)]),_:2},1032,["index","onClick"]))),128))]),_:2},1024)])):((0,n.uX)(),(0,n.Wv)(d,{key:1,onClick:t=>o.addItem(e.key)},{default:(0,n.k6)(()=>[(0,n.eW)((0,i.toDisplayString)(e.title),1)]),_:2},1032,["onClick"]))],64))),128)),(0,n.bF)(p),(0,n.Lk)("div",F,[(0,n.Lk)("p",S,[t[4]||(t[4]=(0,n.eW)("預設群組",-1)),o.isSuperUser?((0,n.uX)(),(0,n.Wv)(d,{key:0,class:"setting",icon:"Setting",onClick:o.openDialog,link:""},null,8,["onClick"])):(0,n.Q3)("",!0)]),(0,n.bF)(c,{class:"list"},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.groupList,e=>((0,n.uX)(),(0,n.CE)(n.FK,{key:e.title},[(0,n.Lk)("div",B,[(0,n.Lk)("b",null,(0,i.toDisplayString)(e.title),1)]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.children,e=>((0,n.uX)(),(0,n.Wv)(u,{key:e.id,index:e.title,onClick:t=>o.copyGroup(e)},{default:(0,n.k6)(()=>[(0,n.eW)((0,i.toDisplayString)(e.title),1)]),_:2},1032,["index","onClick"]))),128))],64))),128))]),_:1})])],64)):((0,n.uX)(),(0,n.Wv)(c,{key:1},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.groupList,(e,t)=>((0,n.uX)(),(0,n.Wv)(u,{key:e.id,index:e.title,onClick:t=>o.addGroup(e)},{default:(0,n.k6)(()=>[(0,n.eW)((0,i.toDisplayString)(e.title),1)]),_:2},1032,["index","onClick"]))),128))]),_:1}))]),_:1},8,["visible"])])):(0,n.Q3)("",!0)}var _=a(12933),T=a(51219),G=a(49514),Y=a(84055),z={name:"AddItem",props:{data:Array},setup(e,{emit:t}){const i=(0,n.WQ)("addItem"),l=(0,n.WQ)("copyItem"),o=(0,u.Pj)(),r=(0,n.EW)(()=>{const e=o.state.group.groupList,t=[{title:"其他",children:[]}];return e.forEach(e=>{const a=t.findIndex(t=>t.title===e.category||"其他"===t.title&&""===e.category);a>-1?t[a].children.push(e):t.splice(0,0,{title:e.category,children:[e]})}),t}),h=(0,n.EW)(()=>c.Ay.currentRoute.value.name),f=(0,n.EW)(()=>o.state.dashboard.editting),m=(0,n.EW)(()=>o.state.dashboard.frameworkcount),v=(0,n.EW)(()=>e?e.data:[]),g=(0,n.EW)(()=>o.state.user.user.is_admin),y=(0,n.EW)(()=>o.state.user.user.is_superuser),w=(0,s.ref)(!1),b=e=>{const t=G.A[e].info,a={title:"",name:G.A[e].title,category:h.value,layer:v.value[0]?v.value[0].groupName?parseInt(v.value[0].children[0].layer)+1:parseInt(v.value[0].layer)+1:0,group:"",...t},n=t.title?t.title:G.A[a.type].title,l={component:G.A[a.type].editComponent,headerTitle:"新增 - "+n,contentSize:G.A[a.type].editSize,id:"only"},r={info:a},s={"refresh-page":e=>{i(e)}};o.dispatch("panels/addPanel",{settings:l,props:r,events:s}),w.value=!1},k=async e=>{const t={title:e.title,name:G.A.group.title,category:h.value,layer:v.value[0]?v.value[0].groupName?parseInt(v.value[0].children[0].layer)+1:parseInt(v.value[0].layer)+1:0,type:"group",width:e.width,height:e.height,top:e.top,left:e.left,parameter:{groupId:e.id,children:e.children,description:e.description}},a=await p.A.addItem(t);t.id=a.id,i(t)},A=async e=>{let t=0;const a=()=>{const n=`${e.title}${t?`(${t})`:""}`,i=v.value.findIndex(e=>e.groupName===n);return i>-1?(t++,a()):n},n=a(),i=parseInt(e.top,10),r=parseInt(e.left,10),s=parseInt(e.width,10),u=parseInt(e.height,10),c=v.value[0]?v.value[0].groupName?parseInt(v.value[0].children[0].layer)+1:parseInt(v.value[0].layer)+1:0;o.dispatch("dashboard/setActiveId",null);for(let p=0;p<e.children.length;p++){const t=(0,d.cloneDeep)(e.children[p]);t.top=i+parseInt(t.top)/100*u+"%",t.left=r+parseInt(t.left)/100*s+"%",t.height=parseInt(t.height)/100*u+"%",t.width=parseInt(t.width)/100*s+"%",t.group=n,t.category=h.value,t.layer=c+p;const a=await l(t);o.dispatch("dashboard/setMultyActiveId",a.id)}w.value=!1},x=async e=>{try{await _.s.confirm("確定要刪除此群組，刪除後將無法回復","警告",{confirmButtonText:"確認",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}),await Y.A.delete(e.id);const t=o.state.group.groupList,a=t.findIndex(t=>t.id===e.id);o.dispatch("group/deleteGroup",a),(0,T.nk)({type:"success",message:"刪除成功"})}catch{}},C=e=>{t("openEditGroup",e)},L=()=>{const e={component:()=>a.e(8180).then(a.bind(a,88180)),headerTitle:"預設群組列表",contentSize:{width:"95%",height:"95%"},id:"only"},t={},n={"refresh-page":()=>{},editGroup:C,deleteGroup:x};o.dispatch("panels/addPanel",{settings:e,props:t,events:n})};return{openDialog:L,componenstType:G.A,editting:f,frameworkcount:m,addItem:b,isAdmin:g,groupList:r,addGroup:k,copyGroup:A,visible:w,itemList:G._,isSuperUser:y}}},R=(a(39622),a(71241));const P=(0,R.A)(z,[["render",M],["__scopeId","data-v-2f615763"]]);var O=P;const j={key:0,class:"btns"};function N(e,t,a,i,l,o){const r=(0,n.g2)("el-button");return a.info.frameworking?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",j,[(0,n.bF)(r,{type:"danger",plain:"",size:"small",title:"刪除",onClick:i.deleteEdit},{default:(0,n.k6)(()=>[...t[1]||(t[1]=[(0,n.Lk)("i",{class:"el-icon-delete"},null,-1)])]),_:1},8,["onClick"]),i.editting&&0===i.frameworkcount?((0,n.uX)(),(0,n.Wv)(r,{key:0,type:"warning",plain:"",size:"small",title:"複製",onClick:i.copyItem},{default:(0,n.k6)(()=>[...t[2]||(t[2]=[(0,n.Lk)("i",{class:"el-icon-copy-document"},null,-1)])]),_:1},8,["onClick"])):(0,n.Q3)("",!0),"group"!==a.info.type&&i.isAdmin?((0,n.uX)(),(0,n.Wv)(r,{key:1,type:"primary",plain:"",size:"small",title:"編輯",onClick:i.openEdit},{default:(0,n.k6)(()=>[...t[3]||(t[3]=[(0,n.Lk)("i",{class:"el-icon-edit"},null,-1)])]),_:1},8,["onClick"])):(0,n.Q3)("",!0),(0,n.bF)(r,{type:"info",plain:"",size:"small",title:"移動",onClick:t[0]||(t[0]=e=>i.startFramework(a.info.id))},{default:(0,n.k6)(()=>[...t[4]||(t[4]=[(0,n.Lk)("i",{class:"el-icon-rank"},null,-1)])]),_:1})]))}var Q=a(25320),U={name:"LayersBtns",props:{info:{type:Object,default:null}},setup(e){let t;const a=(0,u.Pj)(),i=(0,n.EW)(()=>e?e.info:null),l=(0,n.EW)(()=>a.state.dashboard.editting),o=(0,n.EW)(()=>a.state.dashboard.frameworkcount),r=(0,n.WQ)("startFramework"),s=(0,n.WQ)("copyItem"),c=(0,n.WQ)("removeItem"),h=(0,n.WQ)("refreshItem"),f=(0,n.EW)(()=>a.state.user.user.is_admin),m=()=>{const e=(0,d.cloneDeep)(i.value),t=i.value.title?i.value.title:G.A[e.type].title,n={component:G.A[e.type].editComponent,headerTitle:"編輯 - "+t,contentSize:G.A[e.type].editSize,id:e.id},l={info:e},o={"refresh-page":e=>{h(e)}};a.dispatch("panels/addPanel",{settings:n,props:l,events:o})},v=(0,n.WQ)("restoreLayer"),g=async()=>{try{return await _.s.confirm("確認刪除？","提醒",{confirmButtonText:"確認",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}),t=Q.Ks.service({lock:!0}),await p.A.delete(i.value.id),c(i.value.id),await(0,n.dY)(),await v(),(0,T.nk)({type:"success",message:"刪除成功"}),!0}catch{return!1}finally{t.close()}},y=async()=>{const e=(0,d.cloneDeep)(i.value);e.group="";const t=await s(e);a.dispatch("dashboard/setActiveId",t.id)};return{startFramework:r,openEdit:m,copyItem:y,deleteEdit:g,editting:l,frameworkcount:o,isAdmin:f}}};const V=(0,R.A)(U,[["render",N]]);var H=V;const K={key:1,class:"row"};function $(e,t,a,o,r,s){const d=(0,n.g2)("el-input"),u=(0,n.g2)("el-button");return(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:"contextMenu",ref:"contextMenu",style:(0,i.normalizeStyle)({top:`${o.contextMenuPos.y}px`,left:`${o.contextMenuPos.x}px`})},[(0,n.Lk)("p",null,(0,i.toDisplayString)(a.isCreateGroup?"創建群組":"解散群組"),1),a.isCreateGroup?((0,n.uX)(),(0,n.Wv)(d,{key:0,ref:"inputRef",modelValue:o.newGroupName,"onUpdate:modelValue":t[0]||(t[0]=e=>o.newGroupName=e),size:"small",onBlur:o.close,onChange:o.createGroup},{prepend:(0,n.k6)(()=>[...t[1]||(t[1]=[(0,n.eW)("名稱",-1)])]),_:1},8,["modelValue","onBlur","onChange"])):((0,n.uX)(),(0,n.CE)("div",K,[(0,n.bF)(u,{plain:"",size:"small",onClick:o.close},{default:(0,n.k6)(()=>[...t[2]||(t[2]=[(0,n.eW)("取消",-1)])]),_:1},8,["onClick"]),(0,n.bF)(u,{type:"success",plain:"",size:"small",onClick:o.destroyGroup},{default:(0,n.k6)(()=>[...t[3]||(t[3]=[(0,n.eW)("確定",-1)])]),_:1},8,["onClick"])]))],4)),[[l.aG,o.showContextMenu]])}var J={name:"layerContextMenu",props:{isCreateGroup:Boolean,tableList:Array},setup(e){const t=(0,u.Pj)(),a=(0,n.EW)(()=>t.state.dashboard.activeId),i=(0,n.EW)(()=>!!e&&e.isCreateGroup),l=(0,n.EW)(()=>e?e.tableList:[]),o=(0,s.ref)(null),r=(0,s.ref)(null),d=(0,s.ref)(""),c=(0,s.ref)(!1),h=(0,s.reactive)({x:0,y:0}),f=(0,n.WQ)("refreshItem"),m=async e=>{let t=0;a.value.forEach(async i=>{const l=await p.A.updatePartOf({group:e},i);f(l),t++,t===a.value.length&&(await(0,n.dY)(),v())}),w()},v=async()=>{let e=0;for(let t=l.value.length-1;t>-1;t--){const a=l.value[t];if(a.groupName)for(let t=a.children.length-1;t>-1;t--){const n=a.children[t],i=await p.A.updatePartOf({group:a.groupName,layer:e},n.id);f(i),e++}else{const t=await p.A.updatePartOf({group:a.group,layer:e},a.id);f(t),e++}}},g=async()=>{a.value.forEach(async e=>{const t=await p.A.updatePartOf({group:""},e);f(t)}),w()},y=async e=>{w(),e.preventDefault();const t=e.target,a=t.parentNode,n=a.parentNode,l=t.classList.contains("active")||a.classList.contains("active")||n.classList.contains("active"),r="el-sub-menu__title"===a.classList[0]||"el-sub-menu__title"===n.classList[0],s=()=>{c.value=!0,h.x=e.clientX<window.innerWidth-200?e.clientX:window.innerWidth-200,h.y=e.clientY};l&&i.value?(s(),o.value.focus()):r&&!i.value&&s()},w=()=>{d.value="",c.value=!1};return{newGroupName:d,activeId:a,inputRef:o,createGroup:m,showContextMenu:c,contextMenu:r,contextMenuPos:h,openContextMenu:y,close:w,destroyGroup:g}}};const Z=(0,R.A)(J,[["render",$]]);var q=Z;function ee(e,t,a,o,r,s){const d=(0,n.g2)("el-input");return(0,n.uX)(),(0,n.CE)("div",{class:(0,i.normalizeClass)(["EditLayerTitle",{frameworking:a.info.frameworking}])},[o.editTitle?((0,n.uX)(),(0,n.Wv)(d,{key:0,modelValue:o.title,"onUpdate:modelValue":t[0]||(t[0]=e=>o.title=e),ref:"titleInput",onKeydown:(0,l.jR)(o.submitTitle,["enter"]),onBlur:o.submitTitle},null,8,["modelValue","onKeydown","onBlur"])):((0,n.uX)(),(0,n.CE)("p",{key:1,onDblclick:t[1]||(t[1]=(...e)=>o.changeName&&o.changeName(...e))},(0,i.toDisplayString)(a.info.title?a.info.title:a.info.groupName?a.info.groupName:a.info.name),33))],2)}var te={name:"EditLayerTitle",props:{info:{type:Object,default:null}},setup(e,{emit:t}){const a=e?e.info:{},i=(0,s.ref)(!1),l=(0,s.ref)(a.title?a.title:a.groupName?a.groupName:a.name),o=(0,s.ref)(null),r=async()=>{i.value&&(i.value=!1,t("updateTitle",l.value))},d=async()=>{i.value=!0,await(0,n.dY)(),o.value.focus()};return{titleInput:o,editTitle:i,submitTitle:r,changeName:d,title:l}}};const ae=(0,R.A)(te,[["render",ee]]);var ne=ae;function ie(e,t,a,o,r,s){const d=(0,n.g2)("el-button"),u=(0,n.g2)("EditLayerTitle"),c=(0,n.g2)("LayersBtns"),p=(0,n.g2)("el-menu-item");return(0,n.uX)(),(0,n.Wv)(p,{class:(0,i.normalizeClass)({active:o.activeId.findIndex(e=>e===a.info.id)>-1}),"data-id":a.info.id,index:a.index},{default:(0,n.k6)(()=>[(0,n.bF)(d,{class:"toggleHideItem",onClick:t[0]||(t[0]=(0,l.D$)(e=>o.toggleHideItem(a.info.id),["stop"]))},{default:(0,n.k6)(()=>[(0,n.Lk)("i",{class:(0,i.normalizeClass)(a.hideItem.findIndex(e=>e===a.info.id)>-1?"el-icon-remove":"el-icon-view")},null,2)]),_:1}),(0,n.bF)(u,{info:a.info,onClick:t[1]||(t[1]=e=>o.selectItem(e,a.info)),onUpdateTitle:t[2]||(t[2]=e=>o.updateTitle(e,a.info.id)),onContextmenu:o.onContextmenu},null,8,["info","onContextmenu"]),(0,n.bF)(c,{info:a.info},null,8,["info"])]),_:1},8,["class","data-id","index"])}var le={name:"MenuItem",components:{LayersBtns:H,EditLayerTitle:ne},props:{info:Object,hideItem:Array,data:Array,index:String},setup(e,{emit:t}){const a=(0,u.Pj)(),i=(0,n.EW)(()=>a.state.dashboard.activeId),l=(0,n.EW)(()=>e?e.info:{}),o=(0,n.WQ)("toggleHideItem"),r=(0,n.WQ)("refreshItem"),s=async(t,a)=>{const n=e?e.data:[],i=n.find(e=>e.id===a);i.title=t,r(i),await p.A.updatePartOf({title:t},a)},c=t=>{const n=e?e.data:[],l=(0,d.cloneDeep)(n),o=n.findIndex(e=>e.id===t.id),r=n.findIndex(e=>i.value.findIndex(t=>e.id===t)>-1),s=n.length-l.reverse().findIndex(e=>i.value.findIndex(t=>e.id===t)>-1)-1;let u;u=o<r?n.slice(o,s):o>s?n.slice(r,o+1):n.slice(r,s),u.forEach(e=>{const t=i.value.findIndex(t=>e.id===t);-1===t&&a.dispatch("dashboard/setMultyActiveId",e.id)})},h=(e,t)=>{t?e.ctrlKey?a.dispatch("dashboard/setMultyActiveId",t.id):e.shiftKey?c(t):a.dispatch("dashboard/setActiveId",t.id):a.dispatch("dashboard/setActiveId",null)},f=e=>{l.value.group?e.preventDefault():t("onContextmenu",e)};return{toggleHideItem:o,activeId:i,updateTitle:s,selectItem:h,onContextmenu:f}}};const oe=(0,R.A)(le,[["render",ie]]);var re=oe;const se={key:0,class:"icons"},de={class:"btns"};function ue(e,t,a,o,r,s){const d=(0,n.g2)("el-button"),u=(0,n.g2)("EditLayerTitle");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(d,{class:"toggleHideItem",onClick:t[0]||(t[0]=(0,l.D$)(e=>o.toggleHideGroup({children:a.info.children,isHide:!o.checkHideGroup}),["stop"]))},{default:(0,n.k6)(()=>[(0,n.Lk)("i",{class:(0,i.normalizeClass)(o.checkHideGroup?"el-icon-remove":"el-icon-view")},null,2)]),_:1}),o.editting&&o.isAdmin?((0,n.uX)(),(0,n.CE)("div",se,[...t[1]||(t[1]=[(0,n.Lk)("i",{class:"el-icon-caret-right"},null,-1),(0,n.Lk)("i",{class:"icon-folder"},null,-1)])])):(0,n.Q3)("",!0),(0,n.bF)(u,{info:a.info,onClick:(0,l.D$)(o.selectItem,["stop"]),onContextmenu:o.onContextmenu,onUpdateTitle:o.updateGroupName},null,8,["info","onClick","onContextmenu","onUpdateTitle"]),(0,n.Lk)("div",de,[a.info.children.every(e=>e.frameworking)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(d,{key:0,class:"button",type:"danger",plain:"",size:"small",title:"刪除圖層",onClick:(0,l.D$)(o.deleteGroup,["stop"])},{default:(0,n.k6)(()=>[...t[2]||(t[2]=[(0,n.Lk)("i",{class:"el-icon-delete"},null,-1)])]),_:1},8,["onClick"])),o.editting&&0===o.frameworkcount?((0,n.uX)(),(0,n.Wv)(d,{key:1,class:"button",type:"warning",plain:"",size:"small",title:"複製",onClick:(0,l.D$)(o.copyGroup,["stop"])},{default:(0,n.k6)(()=>[...t[3]||(t[3]=[(0,n.Lk)("i",{class:"el-icon-copy-document"},null,-1)])]),_:1},8,["onClick"])):(0,n.Q3)("",!0),o.editting&&0===o.frameworkcount?((0,n.uX)(),(0,n.Wv)(d,{key:2,class:"button",type:"success",plain:"",size:"small",title:"上傳群組",onClick:(0,l.D$)(o.uploadGroup,["stop"])},{default:(0,n.k6)(()=>[...t[4]||(t[4]=[(0,n.Lk)("i",{class:"el-icon-upload2"},null,-1)])]),_:1},8,["onClick"])):(0,n.Q3)("",!0),a.info.children.every(e=>e.frameworking)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(d,{key:3,class:"button",type:"info",plain:"",size:"small",title:"移動圖層",onClick:(0,l.D$)(o.groupFramework,["stop"])},{default:(0,n.k6)(()=>[...t[5]||(t[5]=[(0,n.Lk)("i",{class:"el-icon-rank"},null,-1)])]),_:1},8,["onClick"]))])],64)}var ce={name:"SubMenuTitle",components:{LayersBtns:H,EditLayerTitle:ne},props:{info:Object,hideItem:Array,tableList:Array,data:Array},emits:["onContextmenu","updateGroupName","openEditGroup"],setup(e,{emit:t}){const a=(0,u.Pj)(),i=(0,n.EW)(()=>e?e.hideItem:[]),l=(0,n.EW)(()=>e?e.tableList:[]),o=(0,n.EW)(()=>e?e.info:{}),r=(0,n.EW)(()=>a.state.dashboard.frameworkcount),s=(0,n.EW)(()=>a.state.dashboard.editting),c=(0,n.EW)(()=>a.state.group.groupList),h=(0,n.EW)(()=>a.state.user.user.is_admin),f=(0,n.WQ)("toggleHideGroup"),m=(0,n.WQ)("removeItem"),v=(0,n.WQ)("restoreLayer"),g=(0,n.WQ)("refreshItem"),y=(0,n.EW)(()=>{const e=o.value.children;return e.every(e=>{const t=i.value.findIndex(t=>e.id===t);return t>-1})}),w=e=>{const t=e.ctrlKey,n=o.value.children.map(e=>e.id);t?n.forEach(e=>{a.dispatch("dashboard/setMultyActiveId",e)}):a.dispatch("dashboard/setMultyActiveId",n)},b=async a=>{const n=e?e.data:[];o.value.children.forEach(e=>{const i=n.find(t=>t.id===e.id);i&&(i.group=a,t("updateGroupName",{newName:a,oldName:o.value.groupName}),g(i),p.A.updatePartOf({group:i.group},i.id))})},k=async()=>{try{await _.s.confirm("確認刪除群組？","提醒",{confirmButtonText:"確認",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"});for(const e of o.value.children)await p.A.delete(e.id),m(e.id);return await(0,n.dY)(),await v(),(0,T.nk)({type:"success",message:"刪除成功"}),!0}catch{return!1}},A=(0,n.WQ)("copyItem"),x=async()=>{let e=1;const t=()=>{const a=`${o.value.groupName}(${e})`,n=l.value.findIndex(e=>e.groupName===a);return n>-1?(e++,t()):a},n=t();a.dispatch("dashboard/setActiveId",null);for(let i=o.value.children.length-1;i>-1;i--){const e=(0,d.cloneDeep)(o.value.children[i]);e.group=n;const t=await A(e);a.dispatch("dashboard/setMultyActiveId",t.id)}},C=(0,n.WQ)("startFramework"),L=()=>{const e=o.value.children.map(e=>(C(e.id),e.id));a.dispatch("dashboard/setMultyActiveId",e)},I=async()=>{const e=(0,d.cloneDeep)(o.value);let a,n,i,l;e.children.forEach(e=>{const t=1*e.top.replace("%","");(!a||t<a)&&(a=t);const o=1*e.left.replace("%","");(!n||o<n)&&(n=o);const r=1*e.width.replace("%","")+o;(!i||r>i)&&(i=r);const s=1*e.height.replace("%","")+t;(!l||s>l)&&(l=s)});const r={top:a,left:n,width:i-n,height:l-a};e.children.forEach(e=>{const t=1*e.top.replace("%",""),a=1*e.left.replace("%",""),n=1*e.width.replace("%",""),i=1*e.height.replace("%","");e.top=(t-r.top)/r.height*100+"%",e.left=(a-r.left)/r.width*100+"%",e.width=n/r.width*100+"%",e.height=i/r.height*100+"%",delete e.id,delete e.description,delete e.category,delete e.title,delete e.group,delete e.customChart,delete e.trendData,delete e.iframeData,delete e.key,delete e.frameworking});const s={top:r.top+"%",left:r.left+"%",width:r.width+"%",height:r.height+"%",children:e.children,title:e.groupName},u=c.value.findIndex(t=>t.title===e.groupName);try{if(u>-1){const e=c.value[u].id,a=c.value[u].category,n=c.value[u].description;t("openEditGroup",{...s,id:e,category:a,description:n})}else t("openEditGroup",s)}catch{}},E=e=>{t("onContextmenu",e)};return{toggleHideGroup:f,selectItem:w,onContextmenu:E,updateGroupName:b,frameworkcount:r,deleteGroup:k,editting:s,copyGroup:x,uploadGroup:I,groupFramework:L,checkHideGroup:y,isAdmin:h}}};const pe=(0,R.A)(ce,[["render",ue]]);var he=pe;const fe={id:"GroupButtons"};function me(e,t,a,i,l,o){const r=(0,n.g2)("el-button"),s=(0,n.g2)("el-tooltip"),d=(0,n.g2)("CopyLayers");return(0,n.uX)(),(0,n.CE)("div",fe,[i.selected.length>1?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.bF)(s,{effect:"dark",content:"刪除已選",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(r,{size:"small",title:"刪除",onClick:i.deleteEdit},{default:(0,n.k6)(()=>[...t[0]||(t[0]=[(0,n.Lk)("i",{class:"el-icon-delete"},null,-1)])]),_:1},8,["onClick"])]),_:1}),(0,n.bF)(s,{effect:"dark",content:"移動已選",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(r,{size:"small",title:"移動",onClick:i.groupFramework},{default:(0,n.k6)(()=>[...t[1]||(t[1]=[(0,n.Lk)("i",{class:"el-icon-rank"},null,-1)])]),_:1},8,["onClick"])]),_:1})],64)):(0,n.Q3)("",!0),i.selected.length>0?((0,n.uX)(),(0,n.Wv)(d,{key:1,selected:i.selected},null,8,["selected"])):(0,n.Q3)("",!0)])}const ve={class:"menuBox main left"},ge={class:"menuItem"},ye={class:"menuItem"},we={class:"menuItem borderBottom"};function be(e,t,a,l,o,r){const s=(0,n.g2)("el-button"),d=(0,n.g2)("Node"),u=(0,n.g2)("el-popover");return(0,n.uX)(),(0,n.Wv)(u,{placement:"bottom-end",trigger:"click",visible:l.visible,"onUpdate:visible":t[3]||(t[3]=e=>l.visible=e),"popper-class":"dashBoardMenu CopyLayers",width:190},{reference:(0,n.k6)(()=>[(0,n.bF)(s,{size:"small",title:"複製已選"},{default:(0,n.k6)(()=>[...t[4]||(t[4]=[(0,n.Lk)("i",{class:"el-icon-copy-document"},null,-1)])]),_:1})]),default:(0,n.k6)(()=>[(0,n.Lk)("ul",ve,[(0,n.Lk)("li",ge,[(0,n.Lk)("a",{onClick:t[0]||(t[0]=(...e)=>l.copyToCurrentPage&&l.copyToCurrentPage(...e))},(0,i.toDisplayString)(l.routeTitle)+"(目前頁面)",1)]),(0,n.Lk)("li",ye,[(0,n.Lk)("a",{onClick:t[1]||(t[1]=(...e)=>l.copyLayersToString&&l.copyLayersToString(...e))},"複製至剪貼簿")]),(0,n.Lk)("li",we,[(0,n.Lk)("a",{onClick:t[2]||(t[2]=(...e)=>l.downloadSetting&&l.downloadSetting(...e))},"下載設定檔")]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.menuList,e=>((0,n.uX)(),(0,n.Wv)(d,{key:e.id,nodeData:e,selected:a.selected},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.children,e=>((0,n.uX)(),(0,n.Wv)(d,{key:e.id,nodeData:e,selected:a.selected},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.children,e=>((0,n.uX)(),(0,n.Wv)(d,{key:e.id,nodeData:e,selected:a.selected},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.children,e=>((0,n.uX)(),(0,n.Wv)(d,{key:e.id,nodeData:e,selected:a.selected},null,8,["nodeData","selected"]))),128))]),_:2},1032,["nodeData","selected"]))),128))]),_:2},1032,["nodeData","selected"]))),128))]),_:2},1032,["nodeData","selected"]))),128))])]),_:1},8,["visible"])}a(14603),a(47566),a(98721);const ke={class:"menuItem"},Ae={class:"menuBox"};function xe(e,t,a,l,o,r){return(0,n.uX)(),(0,n.CE)("li",ke,[1===a.nodeData.menu_type?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("p",null,(0,i.toDisplayString)(a.nodeData.title),1),(0,n.Lk)("ul",Ae,[(0,n.RG)(e.$slots,"default")])],64)):((0,n.uX)(),(0,n.CE)("a",{key:1,onClick:t[0]||(t[0]=(...e)=>l.copyToOtherPage&&l.copyToOtherPage(...e))},(0,i.toDisplayString)(a.nodeData.title),1))])}var Ce={name:"CopyLayersNode",props:{nodeData:Object,selected:Array},setup(e){const t=(0,n.EW)(()=>e?e.selected:[]),a=e?e.nodeData:{};let i;const l=(0,n.WQ)("addItem"),o=async()=>{if(1!==a.menu_type)try{await _.s.confirm("確定要複製？","提醒",{confirmButtonText:"確認",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}),i=Q.Ks.service({lock:!0});const{menuCode:e}=a;try{for(let a=0;a<t.value.length;a++){const n=(0,d.cloneDeep)(t.value[a]);n.category=e,delete n.id,delete n.frameworking;const i=await p.A.addItem(n);l(i)}(0,T.nk)({type:"success",message:"複製成功"})}catch{}finally{i.close()}}catch{}};return{copyToOtherPage:o}}};const Le=(0,R.A)(Ce,[["render",xe]]);var Ie=Le,Ee={name:"CopyLayers",props:{selected:Array},components:{Node:Ie},setup(e){const t=(0,u.Pj)(),a=(0,n.EW)(()=>c.Ay.currentRoute.value.name),i=(0,n.EW)(()=>c.Ay.currentRoute.value.meta.title),l=(0,n.WQ)("copyItem"),o=(0,n.EW)(()=>e?e.selected:[]),r=(0,s.ref)(!1),p=(0,n.EW)(()=>{const e=t.state.user.front_permissions,n=(0,d.cloneDeep)(t.state.menu.frontMenuList);let i,l,o={},r=[];for(l=0;l<n.length;l++)o[n[l].id]=l,n[l].children=[];for(l=0;l<n.length;l++){i=n[l];const t=a.value===i.menuCode,s=e.find(e=>e.menu.id===i.id);s&&s.is_visible&&!t&&2!==i.open_type&&(0!==i.parent_id&&n[o[i.parent_id]]?n[o[i.parent_id]].children.push(i):r.push(i))}return r}),h=async()=>{let e;try{await _.s.confirm("確定要複製？","提醒",{confirmButtonText:"確認",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}),e=Q.Ks.service({lock:!0});try{const e=(0,d.cloneDeep)(o.value);t.dispatch("dashboard/setActiveId",null);for(let a=e.length-1;a>-1;a--){const n=e[a];n.group="";const i=await l(n);t.dispatch("dashboard/setMultyActiveId",i.id)}(0,T.nk)({type:"success",message:"複製成功"})}catch{}finally{e.close()}}catch{}},f=()=>{const e=JSON.stringify(o.value);try{navigator.clipboard.writeText(e)}catch{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(0,T.nk)({type:"success",message:"已複製至剪貼簿"}),r.value=!1},m=()=>{const e=JSON.stringify(o.value),t="圖層設定",a="application/json",n=new Blob([e],{type:a}),i=document.createElement("a");i.download=t,i.href=URL.createObjectURL(n),i.dataset.downloadurl=[a,i.download,i.href].join(":"),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),setTimeout(function(){URL.revokeObjectURL(i.href)},1500),r.value=!1};return{copyToCurrentPage:h,visible:r,copyLayersToString:f,downloadSetting:m,menuList:p,routerName:a,routeTitle:i}}};const We=(0,R.A)(Ee,[["render",be]]);var De=We,Xe=De,Fe={name:"GroupButtons",components:{CopyLayers:Xe},props:{data:Array},setup(e){let t;const a=(0,n.WQ)("removeItem"),i=(0,n.WQ)("restoreLayer"),l=(0,n.WQ)("startFramework"),o=(0,u.Pj)(),r=(0,n.EW)(()=>{const t=o.state.dashboard.activeId,a=e?e.data:[];return a.filter(e=>{const a=t.findIndex(t=>t===e.id);return a>-1})}),s=async()=>{try{await _.s.confirm("確認刪除已選？","提醒",{confirmButtonText:"確認",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}),t=Q.Ks.service({lock:!0});const e=(0,d.cloneDeep)(r.value);for(const t of e)await p.A.delete(t.id),a(t.id);await(0,n.dY)(),await i(),(0,T.nk)({type:"success",message:"刪除成功"})}catch{}finally{t.close()}},c=async()=>{for(const e of r.value)await l(e.id)};return{deleteEdit:s,groupFramework:c,selected:r}}};const Se=(0,R.A)(Fe,[["render",me]]);var Be=Se;const Me={class:"btn"};function _e(e,t,a,i,l,o){const r=(0,n.g2)("el-input"),s=(0,n.g2)("el-form-item"),d=(0,n.g2)("el-option"),u=(0,n.g2)("el-select"),c=(0,n.g2)("el-form"),p=(0,n.g2)("el-button"),h=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.Wv)(h,{class:"editGroupDialog",modelValue:i.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=e=>i.dialogVisible=e),"append-to-body":"","destroy-on-close":"",title:i.modalTitle},{default:(0,n.k6)(()=>[(0,n.bF)(c,{ref:"editForm",model:i.formData,rules:i.rules,"label-width":"100px","label-suffix":"："},{default:(0,n.k6)(()=>[(0,n.bF)(s,{label:"群組名稱",prop:"title",rules:[{validator:i.checkTitle,trigger:"change"},{required:!0,message:"此項必填"}]},{default:(0,n.k6)(()=>[(0,n.bF)(r,{modelValue:i.formData.title,"onUpdate:modelValue":t[0]||(t[0]=e=>i.formData.title=e)},null,8,["modelValue"])]),_:1},8,["rules"]),(0,n.bF)(s,{label:"群組分類"},{default:(0,n.k6)(()=>[(0,n.bF)(u,{modelValue:i.formData.category,"onUpdate:modelValue":t[1]||(t[1]=e=>i.formData.category=e),clearable:"","allow-create":"",filterable:"","default-first-option":"",teleported:!1},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.categoryList,e=>((0,n.uX)(),(0,n.Wv)(d,{value:e,label:e},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(s,{label:"描述"},{default:(0,n.k6)(()=>[(0,n.bF)(r,{modelValue:i.formData.description,"onUpdate:modelValue":t[2]||(t[2]=e=>i.formData.description=e),type:"textarea",autosize:{minRows:6,maxRows:6}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),(0,n.Lk)("div",Me,[(0,n.bF)(p,{plain:"",onClick:i.close},{default:(0,n.k6)(()=>[...t[4]||(t[4]=[(0,n.eW)("取消",-1)])]),_:1},8,["onClick"]),(0,n.bF)(p,{type:"primary",plain:"",onClick:i.checkValidate},{default:(0,n.k6)(()=>[...t[5]||(t[5]=[(0,n.eW)("送出",-1)])]),_:1},8,["onClick"])])]),_:1},8,["modelValue","title"])}var Te=a(7118),Ge={name:"EditGroup",setup(){const e=(0,s.ref)("群組上傳管理"),t=(0,u.Pj)(),a=(0,n.EW)(()=>t.state.group.groupList),i=(0,s.ref)(null),l=(0,s.ref)(!1),o=(0,s.ref)(!1),r=(0,s.ref)(0),c=(0,s.reactive)({title:"",description:"",category:"",children:[],height:"",left:"",top:"",width:""}),p=(0,Te.Q4)(c),h=(0,n.EW)(()=>{const e=[];return a.value.forEach(t=>{const a=e.findIndex(e=>e===t.category);-1===a&&t.category&&e.push(t.category)}),e}),f=e=>{e.id&&(r.value=e.id),Object.keys(c).forEach(t=>{void 0!==e[t]&&(c[t]="description"===t?e.description.replaceAll("<br>","\n"):"children"===t?e[t].map(e=>{const t=(0,d.cloneDeep)(e);return delete t.listsData,delete t.defaultValue,t}):e[t])}),l.value=!0},m=()=>{l.value=!1},v=()=>{i.value.validate(e=>{e&&g()})},g=async()=>{o.value=!0;const e=(0,d.cloneDeep)(c);e.description=c.description.replaceAll("\n","<br>");try{if(r.value){const a=await Y.A.update(e,r.value);t.dispatch("group/updateGroup",{...a,id:r.value}),(0,T.nk)({type:"success",message:"群組已更新"})}else{const a=await Y.A.addItem(e);t.dispatch("group/addGroup",a),(0,T.nk)({type:"success",message:"群組已上傳至預設"})}m()}catch{}finally{o.value=!1}},y=(e,t,n)=>{const i=a.value.findIndex(e=>e.title===t),l=a.value.findIndex(e=>e.id===r.value);-1===i||l===i?n():n(new Error("名稱已存在"))};return{dialogVisible:l,open:f,close:m,checkValidate:v,editForm:i,formData:c,rules:p,categoryList:h,checkTitle:y,modalTitle:e}}};a(38610);const Ye=(0,R.A)(Ge,[["render",_e]]);var ze=Ye;function Re(){const e=(0,s.ref)(!1),t=(0,s.reactive)({x:0,y:50}),a=(0,s.reactive)({x:0,y:0});let n;const i=i=>{e.value=!0,a.x=i.clientX,a.y=i.clientY,window.addEventListener("mousemove",l),window.addEventListener("mouseup",o),n=(0,d.cloneDeep)(t)},l=i=>{if(e.value){const e=a.x-i.clientX,l=a.y-i.clientY;n.x+e<=window.innerWidth-348&&n.x+e>=0?t.x=n.x+e:n.x+e<0?t.x=0:n.x+e>window.innerWidth-348&&(t.x=window.innerWidth-348),n.y-l<=window.innerHeight-130-35&&n.y-l>=0?t.y=n.y-l:n.y-l<0?t.y=0:n.y-l>window.innerHeight-130-35&&(t.y=window.innerHeight-130-35)}},o=()=>{e.value=!1,window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",o)};return{position:t,mousedown:i}}var Pe=Re,Oe=a(82643);class je{constructor(){const e=c.Ay.currentRoute.value.query.is_iframe;this.width=window.innerWidth,this.height=e?window.innerHeight:window.innerHeight-130,this.Wpercent=this.width/100,this.Hpercent=this.height/100}}const Ne=new je;function Qe(e,t,a){const i=(0,s.ref)([]),l=e=>{o(e);const t=a.value.filter(e=>e).map(e=>e.info).sort((e,t)=>parseInt(e.layer)-parseInt(t.layer)),n=t.findIndex(t=>t.id===e.id),i=parseInt(e.layer),l=i>n,r=l?-1:1,s=l?t.slice(n+1,i+1):t.slice(i,n);s.forEach(e=>{e.layer=parseInt(e.layer)+r,o(e)})},o=e=>{const n=a.value.find(t=>t&&t.info&&t.info.id===e.id);p.A.updatePartOf({layer:e.layer,group:e.group},e.id),n&&Object.assign(e,{top:n.top/Ne.Hpercent+"%",left:n.left/Ne.Wpercent+"%",width:n.width/Ne.Wpercent+"%",height:n.height/Ne.Hpercent+"%"}),t(e)},r=()=>{i.value=[];const e=document.querySelectorAll(".layer .el-menu");e.forEach(e=>{i.value.push(new Oe.Ay(e,{group:"shared",animation:150,onEnd:e=>{u(e)},onMove:function(e){if(e.from!==e.to&&"el-menu--inline"!==e.from.classList[1]&&"el-sub-menu"===e.dragged.classList[0])return!1}}))})},u=async t=>{const a=(0,d.cloneDeep)(e.value),i=t.newIndex,r=t.oldIndex;if(t.from===t.to){const e=i>r,n=e?r+1:i,s=e?i+1:r;if("el-menu--inline"===t.from.classList[1]){const e=a[t.from.parentNode.dataset.index].children,n=e[i].layer,o=1*t.item.dataset.id,r=e.find(e=>e.id===o);r.layer=n,l(r)}else{const r=a[i].groupName?e?a[i].children[a[i].children.length-1]:a[i].children[0]:a[i],d=r.layer,u=1*t.item.dataset.id,c=t.item.dataset.index,p=u?a.find(e=>e.id===u):a[c];if(u)p.layer=d,l(p);else{p.children.reverse().forEach((e,t)=>{e.layer=(parseInt(d)+t).toString(),o(e)});const t=p.children.length,i=e?t:-1*t,l=a.slice(n,s);l.forEach(async e=>{e.children?e.children.forEach(e=>{e.layer=(parseInt(e.layer)+i).toString(),o(e)}):(e.layer=(parseInt(e.layer)+i).toString(),o(e))})}}}else if("el-menu--inline"===t.from.classList[1]){const e=parseInt(t.from.parentNode.dataset.index),n="el-menu--inline"===t.to.classList[1]?parseInt(t.to.parentNode.dataset.index):null;let o;const r=n||0===n?n>e:i>e,s=1*t.item.dataset.id,u=a[e].children.find(e=>e.id===s),c=(0,d.cloneDeep)(a[e].children);u===c.pop()?o=u:n||0===n?(u.group=a[n].groupName,o=a[n].children[i]?r?0===i?a[n-1].groupName?a[n-1].children.pop():a[n-1]:a[n].children[i-1]:a[n].children[i]:a[n+1]?a[n+1].groupName?a[n+1].children[0]:a[n+1]:a[n].children[i-1]):(u.group="",o=a[i]?a[i].groupName?r?a[i].children.pop():a[i].children[0]:a[i]:a[i-1].groupName?r?a[i-1].children.pop():a[i-1].children[0]:a[i-1]);const p=o.layer;u.layer=p,l(u)}else{if(a[r].groupName)return;const e=parseInt(t.to.parentNode.dataset.index),o=e>r;let s,u;if(o&&!a[e].children[i]){const t=(0,d.cloneDeep)(a[e].children);s=t.pop()}else s=o?a[e].children[i-1]:a[e].children[i];u=s?o&&0===i?parseInt(s.layer)+1:s.layer:o&&0===i?parseInt(a[e].children[i].layer)+1:parseInt(a[e].children[i-1].layer)-1;const c=1*t.item.dataset.id,p=a.find(e=>e.id===c);p.layer=u,p.group=a[e].groupName,l(p),await(0,n.dY)()}};return{setSortable:r}}var Ue=Qe,Ve={name:"LayerItem",components:{AddItem:O,ContextMenu:q,MenuItem:re,SubMenuTitle:he,GroupButtons:Be,EditGroup:ze},props:{data:{type:Array,default:null},hideItem:{type:Array,default:null},boxList:{type:Array}},setup(e){const t=(0,u.Pj)(),a=(0,n.EW)(()=>t.state.dashboard.activeId),i=(0,n.EW)(()=>t.state.user.user.is_admin),l=(0,n.EW)(()=>e?e.hideItem:[]),o=(0,n.EW)(()=>e?e.boxList:[]),r=(0,n.EW)(()=>e?e.data:[]),d=(0,s.ref)(null),c=(0,s.ref)(null),h=(0,s.ref)([]),f=(0,s.ref)(null),m=(0,s.ref)(0),v=(0,s.ref)("select"),g=(0,s.ref)(!1),y=(0,s.ref)(!0),w=(0,n.EW)(()=>{const t=[],a=e?e.data:[];a.sort((e,t)=>parseInt(t.layer)-parseInt(e.layer));for(const e of a){const a=t.findIndex(t=>t.groupName===e.group&&e.group);a>-1?t[a].children.push(e):e.group?t.push({groupName:e.group,children:[e]}):t.push(e)}return t}),b=(0,n.WQ)("refreshItem"),k=async()=>{let e=0;for(let t=w.value.length-1;t>-1;t--){const a=w.value[t];if(a.children)for(let t=a.children.length-1;t>-1;t--){const n=a.children[t];n.layer=e,await p.A.updatePartOf({layer:n.layer},n.id),b(n),e++}else a.layer=e,await p.A.updatePartOf({layer:a.layer},a.id),b(a),e++}};(0,n.Gt)("restoreLayer",k);const A=async(e,a,l=null)=>{if(i.value){if(y.value="create"===a,!y.value){const e=l.children.map(e=>e.id);t.dispatch("dashboard/setMultyActiveId",e)}await(0,n.dY)(),f.value.openContextMenu(e)}},x=e=>e.every(e=>{const t=l.value.findIndex(t=>e.id===t);return t>-1}),C=e=>{const t=e.every(e=>{const t=a.value.findIndex(t=>t===e.id);return t>-1});return t?"active":""},L=e=>{h.value.push(e)},I=e=>{const t=h.value.findIndex(t=>t===e);h.value.splice(t,1)},E=({newName:e,oldName:t})=>{const a=h.value.findIndex(e=>e===t);a>-1&&(h.value[a]=e)},W=e=>{c.value.open(e)},{position:D,mousedown:X}=Pe(),{setSortable:F}=Ue(w,b,o);return(0,n.wB)(w,async(e,a)=>{e.length!==a.length&&(m.value=(new Date).getTime(),await(0,n.dY)(),r.value.length>1&&F(),t.dispatch("dashboard/setElmenu",d.value))}),(0,n.sV)(()=>{r.value.length>1&&F(),t.dispatch("dashboard/setElmenu",d.value)}),{activeId:a,isCollapse:g,position:D,mousedown:X,tableList:w,contextmenuRef:f,onContextmenu:A,timeStamp:m,checkHideGroup:x,isCreateGroup:y,isAdmin:i,elMenu:d,chechActive:C,clickType:v,openSub:h,openMenu:L,closeMenu:I,updateGroupName:E,editGroupRef:c,openEditGroup:W}}};const He=(0,R.A)(Ve,[["render",E]]);var Ke=He,$e=Ke;function Je(e,t,a,l,o,r){const s=(0,n.g2)("DraggableResizeBox");return(0,n.uX)(),(0,n.Wv)(s,{class:(0,i.normalizeClass)(["containBox",{focus:l.isFocus&&l.editting&&!l.drawLine,hide:!l.hideCheck}]),ref:"containBox",style:(0,i.normalizeStyle)({zIndex:a.info.layer}),init:l.init,active:(a.info.frameworking&&l.autoSelect||a.info.frameworking&&!l.autoSelect&&l.isFocus)&&!l.drawLine,parentSize:l.parentSize,noResize:!l.isAdmin||"svgLine"===a.info.type,boxList:a.boxList,w:l.width,"onUpdate:w":t[0]||(t[0]=e=>l.width=e),h:l.height,"onUpdate:h":t[1]||(t[1]=e=>l.height=e),x:l.left,"onUpdate:x":t[2]||(t[2]=e=>l.left=e),y:l.top,"onUpdate:y":t[3]||(t[3]=e=>l.top=e),onMousedown:l.mousedown},{default:(0,n.k6)(()=>[((0,n.uX)(),(0,n.Wv)((0,n.$y)(l.defindComponentId),{info:a.info,size:{width:l.width,height:l.height},propDots:l.dots},null,8,["info","size","propDots"]))]),_:1},8,["style","class","init","active","parentSize","noResize","boxList","w","h","x","y","onMousedown"])}var Ze={name:"ContainBox",components:{DraggableResizeBox:C},props:{info:{type:Object,default:null},index:Number,data:Array,boxList:Array},setup(e){const t=(0,n.EW)(()=>e?e.info:{}),i=(0,n.EW)(()=>e?e.data:[]),l=(0,n.EW)(()=>e?e.boxList:[]),o=(0,u.Pj)(),r=(0,n.EW)(()=>o.state.dashboard.editting),c=(0,n.EW)(()=>o.state.dashboard.drawLine),p=(0,n.EW)(()=>o.state.user.user.is_admin),h=(0,n.EW)(()=>o.state.dashboard.activeId),f=(0,n.EW)(()=>o.state.dashboard.autoSelect),m=(0,n.EW)(()=>o.state.dashboard.history),v=(0,n.EW)(()=>o.state.dashboard.currentHistoryIndex),g=(0,n.EW)(()=>{const e=G.A[t.value.type].component;return(0,n.$V)(()=>a(97497)(`./${e}`))}),y=(0,n.EW)(()=>h.value.findIndex(e=>e===t.value.id)>-1),w=(0,n.EW)(()=>o.state.dashboard.moveDistance),b=(0,n.EW)(()=>o.state.dashboard.grabbingId),k=(0,s.ref)(!1),A=(0,s.reactive)({X:0,Y:0}),x=(0,s.ref)({width:0,height:0,top:0,left:0}),C=(0,s.ref)({width:0,height:0,top:0,left:0}),L=(0,s.ref)(0),I=(0,s.ref)(0),E=(0,s.ref)(0),W=(0,s.ref)(0),D=(0,s.ref)(null),X=(0,s.ref)(null),F=(0,s.ref)((0,d.cloneDeep)(t.value.parameter.dots??[])),S=e=>{const t={X:0,Y:0};(e.width||0===e.width)&&(L.value=e.width),(e.height||0===e.height)&&(I.value=e.height),(e.top||0===e.top)&&(t.Y=(e.top-E.value)/x.value.height,E.value=e.top),(e.left||0===e.left)&&(t.X=(e.left-W.value)/x.value.width,W.value=e.left),F.value.forEach((e,a)=>{F.value[a][0]+=t.X,F.value[a][1]+=t.Y}),A.X=(0,d.cloneDeep)(W.value),A.Y=(0,d.cloneDeep)(E.value)},B=()=>{x.value=new je,C.value={width:t.value.width.replace("%","")*x.value.Wpercent,height:t.value.height.replace("%","")*x.value.Hpercent,top:t.value.top.replace("%","")*x.value.Hpercent,left:t.value.left.replace("%","")*x.value.Wpercent},(C.value.width||0===C.value.width)&&(L.value=C.value.width),(C.value.height||0===C.value.height)&&(I.value=C.value.height),(C.value.top||0===C.value.top)&&(E.value=C.value.top),(C.value.left||0===C.value.left)&&(W.value=C.value.left)},M=e=>{if(h.value.length>1){const a=l.value.filter(e=>{const a=h.value.findIndex(t=>e&&e.info&&t!==e.info.id);return e&&e.info.frameworking&&a>-1&&e.info.id!==t.value.id});return a.map(t=>({id:t.info.id,width:t.width,height:t.height,top:t.top,left:t.left,origin:e}))}return!1},_=e=>{if(f.value){if(t.value.frameworking){o.dispatch("dashboard/setGrabbingId",t.value.id);const e=m.value.slice(v.value,-1),a=e.filter(e=>e.id===t.value.id);k.value=!0;const n=M(!0);a.length<1?D.value={width:L.value,height:I.value,top:E.value,left:W.value,origin:!0,sinblings:n}:D.value={width:L.value,height:I.value,top:E.value,left:W.value,origin:!1,sinblings:n}}if(r.value&&!y.value){if(!p.value&&t.value.group){const e=i.value.filter(e=>e.group===t.value.group).map(e=>e.id);o.dispatch("dashboard/setMultyActiveId",e)}else if(e.ctrlKey?o.dispatch("dashboard/setMultyActiveId",t.value.id):o.dispatch("dashboard/setActiveId",t.value.id),t.value.group&&p.value){const e=o.state.dashboard.elMenu;e.open(t.value.group)}}else r.value&&y.value&&!t.value.frameworking&&(e.ctrlKey?o.dispatch("dashboard/setMultyActiveId",t.value.id):o.dispatch("dashboard/setActiveId",t.value.id));window.addEventListener("mouseup",Y)}else e&&e.preventDefault()},T=()=>{const e={X:w.value.X/x.value.width,Y:w.value.Y/x.value.height};F.value.forEach((t,a)=>{F.value[a][0]+=e.X,F.value[a][1]+=e.Y})},Y=async()=>{o.dispatch("dashboard/setGrabbingId",null),"svgLine"===t.value.type&&T();const e=l.value.filter(e=>{const a=h.value.findIndex(t=>e&&e.info&&t===e.info.id);return e&&e.info.frameworking&&a>-1&&e.info.id!==t.value.id&&"svgLine"===e.info.type});e.forEach(e=>{e.moveSvgLine()}),o.dispatch("dashboard/setMoveDistance",{X:0,Y:0}),window.removeEventListener("mouseup",Y)},z=async()=>{if(t.value.frameworking&&k.value&&(w.value.X||w.value.Y)){D.value&&(D.value.origin?R(D.value):D.value.sinblings&&(m.value[v.value].id!==m.value[v.value+1].id?R(D.value):o.dispatch("dashboard/updateHistory",{params:{sinblings:D.value.sinblings},index:v.value})),D.value=null,await(0,n.dY)());const e={origin:!1,width:L.value,height:I.value,top:E.value,left:W.value,sinblings:M(!1)};R(e),k.value=!1}},R=({origin:e,width:a,height:n,top:i,left:l,sinblings:r})=>{const s={id:t.value.id,width:a,height:n,top:i,left:l,origin:e,sinblings:r};o.dispatch("dashboard/addHistory",s)},P=(0,n.EW)(()=>!t.value.parameter.showInAdmin||!!p.value);return(0,n.wB)(w,e=>{const a=b.value===t.value.id;h.value.length>0&&y.value&&!a&&t.value.frameworking&&(0===e.X&&0===e.Y?(A.X=(0,d.cloneDeep)(W.value),A.Y=(0,d.cloneDeep)(E.value)):(E.value=A.Y+e.Y,W.value=A.X+e.X,"svgLine"===t.value.type&&T()))},{deep:!0}),(0,n.wB)(y,e=>{e?(window.addEventListener("mouseup",z),h.value.length>0&&(A.X=(0,d.cloneDeep)(W.value),A.Y=(0,d.cloneDeep)(E.value))):window.removeEventListener("mouseup",z)}),(0,n.sV)(()=>{B(),window.addEventListener("resize",B)}),(0,n.xo)(()=>{window.removeEventListener("resize",B)}),{mousedown:_,mouseup:Y,editting:r,init:C,width:L,height:I,top:E,left:W,parentSize:x,sendPosition:S,isAdmin:p,isFocus:y,defindComponentId:g,containBox:X,hideCheck:P,autoSelect:f,drawLine:c,dots:F,moveSvgLine:T}}};const qe=(0,R.A)(Ze,[["render",Je]]);var et=qe,tt=et;const at={id:"DashboardTools"},nt={class:"buttons"};function it(e,t,a,i,o,r){const s=(0,n.g2)("el-checkbox"),d=(0,n.g2)("AddLine"),u=(0,n.g2)("HistoryBtns"),c=(0,n.g2)("Size"),p=(0,n.g2)("DashboardAlign"),h=(0,n.g2)("TextAlign"),f=(0,n.g2)("el-divider"),m=(0,n.g2)("el-button"),v=(0,n.g2)("el-tooltip"),g=(0,n.g2)("ImportItem");return(0,n.uX)(),(0,n.CE)("div",at,[(0,n.bF)(s,{class:"autoSelect",modelValue:i.autoSelect,"onUpdate:modelValue":t[0]||(t[0]=e=>i.autoSelect=e),label:"自動選擇",size:"small",onChange:i.changeAutoSelect},null,8,["modelValue","onChange"]),(0,n.bF)(d,{containerRef:a.containerRef,data:a.data},null,8,["containerRef","data"]),(0,n.bF)(u,{boxList:a.boxList},null,8,["boxList"]),(0,n.bF)(c,{boxList:a.boxList,data:a.data},null,8,["boxList","data"]),(0,n.bF)(p,{boxList:a.boxList},null,8,["boxList"]),(0,n.bF)(h,{boxList:a.boxList},null,8,["boxList"]),(0,n.Lk)("div",nt,[(0,n.bF)(f,{direction:"vertical"}),i.hasFrameworkItem?((0,n.uX)(),(0,n.Wv)(v,{key:0,effect:"dark",content:"全部取消",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(m,{plain:"",size:"small",onMousedown:t[1]||(t[1]=(0,l.D$)(()=>{},["stop"])),onClick:t[2]||(t[2]=e=>i.submitAll("cancel"))},{default:(0,n.k6)(()=>[...t[5]||(t[5]=[(0,n.Lk)("i",{class:"el-icon-close"},null,-1)])]),_:1})]),_:1})):(0,n.Q3)("",!0),i.hasFrameworkItem?((0,n.uX)(),(0,n.Wv)(v,{key:1,effect:"dark",content:"全部儲存",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(m,{plain:"",size:"small",onMousedown:t[3]||(t[3]=(0,l.D$)(()=>{},["stop"])),onClick:t[4]||(t[4]=e=>i.submitAll("success"))},{default:(0,n.k6)(()=>[...t[6]||(t[6]=[(0,n.Lk)("i",{class:"el-icon-check"},null,-1)])]),_:1})]),_:1})):(0,n.Q3)("",!0)]),(0,n.bF)(g)])}const lt={class:"DashboardAlign"};function ot(e,t,a,i,o,r){const s=(0,n.g2)("el-divider"),d=(0,n.g2)("el-button"),u=(0,n.g2)("el-tooltip");return(0,n.uX)(),(0,n.CE)("div",lt,[(0,n.bF)(s,{direction:"vertical"}),(0,n.bF)(u,{effect:"dark",content:"向左對齊",disabled:i.disabled,placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(d,{size:"small",plain:"",disabled:i.disabled,onMousedown:t[0]||(t[0]=(0,l.D$)(()=>{},["stop"])),onClick:t[1]||(t[1]=e=>i.alignClick("left"))},{default:(0,n.k6)(()=>[...t[12]||(t[12]=[(0,n.Lk)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgAQMAAACxAfVuAAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAADpJREFUSMft1KERACAUw9Duv3QxCP4hMaWXyDdAZN2BL+gdCIL9GLigr9GjYNQRCILdGLigUcS9y3AByjBczu6rOJ4AAAAASUVORK5CYII="},null,-1)])]),_:1},8,["disabled"])]),_:1},8,["disabled"]),(0,n.bF)(u,{effect:"dark",content:"水平置中",disabled:i.disabled,placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(d,{size:"small",plain:"",disabled:i.disabled,onMousedown:t[2]||(t[2]=(0,l.D$)(()=>{},["stop"])),onClick:t[3]||(t[3]=e=>i.alignClick("horizontal"))},{default:(0,n.k6)(()=>[...t[13]||(t[13]=[(0,n.Lk)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgAQMAAACxAfVuAAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAAD9JREFUSMdjgAP+D3DmqCClgv+hYFRwVHBUcPgLDsIiaOgK/kcBg1gQ2dGjgqOCo4LDW3AQFkEoYFCU3sNLEAC7t+0vT092rwAAAABJRU5ErkJggg=="},null,-1)])]),_:1},8,["disabled"])]),_:1},8,["disabled"]),(0,n.bF)(u,{effect:"dark",content:"向右對齊",disabled:i.disabled,placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(d,{size:"small",plain:"",disabled:i.disabled,onMousedown:t[4]||(t[4]=(0,l.D$)(()=>{},["stop"])),onClick:t[5]||(t[5]=e=>i.alignClick("right"))},{default:(0,n.k6)(()=>[...t[14]||(t[14]=[(0,n.Lk)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgAQMAAACxAfVuAAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAADtJREFUSMft1bEJADAMA0Hvv7QCIUUCKW2QzX95A0jxSWAG6gSC4Hw0nKCmqCdjjCsQBGej4QTt+KMqXIMKXM6L8LJqAAAAAElFTkSuQmCC"},null,-1)])]),_:1},8,["disabled"])]),_:1},8,["disabled"]),(0,n.bF)(s,{direction:"vertical"}),(0,n.bF)(u,{effect:"dark",content:"向上對齊",disabled:i.disabled,placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(d,{size:"small",plain:"",disabled:i.disabled,onMousedown:t[6]||(t[6]=(0,l.D$)(()=>{},["stop"])),onClick:t[7]||(t[7]=e=>i.alignClick("top"))},{default:(0,n.k6)(()=>[...t[15]||(t[15]=[(0,n.Lk)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgAQMAAACxAfVuAAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAADVJREFUSMftzqENAEAMw8Dff+kvCCgpKnIlm0Q6lPeHiHinvpzFYu6KoigCMYmiuMCERzNsBQ5SXM5ajT16AAAAAElFTkSuQmCC"},null,-1)])]),_:1},8,["disabled"])]),_:1},8,["disabled"]),(0,n.bF)(u,{effect:"dark",content:"垂直置中",disabled:i.disabled,placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(d,{size:"small",plain:"",disabled:i.disabled,onMousedown:t[8]||(t[8]=(0,l.D$)(()=>{},["stop"])),onClick:t[9]||(t[9]=e=>i.alignClick("vertical"))},{default:(0,n.k6)(()=>[...t[16]||(t[16]=[(0,n.Lk)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgAQMAAACxAfVuAAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAAD9JREFUSMdjGAUjFfyHgkEvCKFGBaksCAvuUcFRQfIEISSIgQCDUXAQBt2o4DAQHIRF+lAUHIRNDpjgKBjhAABYnu0vd1/ipAAAAABJRU5ErkJggg=="},null,-1)])]),_:1},8,["disabled"])]),_:1},8,["disabled"]),(0,n.bF)(u,{effect:"dark",content:"向下對齊",disabled:i.disabled,placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(d,{size:"small",plain:"",disabled:i.disabled,onMousedown:t[10]||(t[10]=(0,l.D$)(()=>{},["stop"])),onClick:t[11]||(t[11]=e=>i.alignClick("bottom"))},{default:(0,n.k6)(()=>[...t[17]||(t[17]=[(0,n.Lk)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgAQMAAACxAfVuAAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAADNJREFUSMft07EJAAAIA0H3X1qLWFoKRvhvAtcniLzLzh41IAiuoE4GgiB4jsoef5RDhlhaoVzOaTpIBAAAAABJRU5ErkJggg=="},null,-1)])]),_:1},8,["disabled"])]),_:1},8,["disabled"])])}var rt={name:"DashboardAlign",props:{boxList:Array},setup(e){const t=(0,u.Pj)(),a=(0,n.EW)(()=>{const a=e?e.boxList:[],n=t.state.dashboard.activeId;return a.filter(e=>{const t=n.findIndex(t=>e&&e.info&&e.info.id===t&&e.info.frameworking);return t>-1})}),i=(0,n.EW)(()=>a.value.length<2),l=e=>{if(a.value.length<2)return(0,T.nk)({type:"error",message:"請選擇可移動的圖層"}),!1;const t=/left|horizontal|right/,n=t.test(e),i=a.value.reduce((t,a)=>{const i=n?a.left:a.top,l=n?a.width:a.height;let o,r;switch(e){case"left":if(r=i,o=i>t,!o)return i;break;case"right":case"horizontal":if(r=i+l,o=i+l<t,!o)return r;break;case"top":if(r=i,o=i>t,!o)return r;break;case"bottom":case"vertical":if(r=i+l,o=i+l<t,!o)return r;break;default:break}return t},void 0),l=a.value.reduce((t,a)=>{const i=n?a.left:a.top,l=n?a.width:a.height;let o;switch(e){case"horizontal":if(o=i-l>t,!o)return i;break;case"vertical":if(o=i-l>t,!o)return i;break;default:break}return t},void 0);a.value.forEach(t=>{const a=n?t.width:t.height,o=n?"left":"top",r={};if("right"===e||"bottom"===e)r[o]=i-a;else if("horizontal"===e||"vertical"===e){const e=l/2+i/2;r[o]=e-a/2}else r[o]=i;t.sendPosition(r)})},o=e=>{if(a.value.length<2)return(0,T.nk)({type:"error",message:"請選擇可移動的圖層"}),!1;const t="vertical"===e,n=a.value.sort((e,a)=>{const n=t?e.left:e.top,i=t?e.width:e.height,l=t?a.left:a.top,o=t?a.width:a.height;return n-i/2-(l-o/2)});console.log(n)};return{alignClick:l,equalClick:o,disabled:i}}};const st=(0,R.A)(rt,[["render",ot]]);var dt=st;function ut(e,t,a,i,l,o){const r=(0,n.g2)("el-divider"),s=(0,n.g2)("el-input"),d=(0,n.g2)("el-form-item"),u=(0,n.g2)("el-form");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(r,{direction:"vertical"}),i.selected.length>0?((0,n.uX)(),(0,n.Wv)(u,{key:0,class:"size",model:i.size,size:"small"},{default:(0,n.k6)(()=>[(0,n.bF)(d,{label:"寬"},{default:(0,n.k6)(()=>[(0,n.bF)(s,{modelValue:i.size.width,"onUpdate:modelValue":t[0]||(t[0]=e=>i.size.width=e),modelModifiers:{number:!0},type:"number",onChange:t[1]||(t[1]=e=>i.changeSize(e,"width"))},{append:(0,n.k6)(()=>[...t[4]||(t[4]=[(0,n.eW)("%",-1)])]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(d,{label:"高"},{default:(0,n.k6)(()=>[(0,n.bF)(s,{modelValue:i.size.height,"onUpdate:modelValue":t[2]||(t[2]=e=>i.size.height=e),modelModifiers:{number:!0},type:"number",onChange:t[3]||(t[3]=e=>i.changeSize(e,"height"))},{append:(0,n.k6)(()=>[...t[5]||(t[5]=[(0,n.eW)("%",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])):(0,n.Q3)("",!0)],64)}var ct={name:"ToolSize",props:{boxList:Array,data:Array},setup(e){let t=new je;const a=(0,u.Pj)(),i=(0,n.EW)(()=>e?e.boxList:[]),l=(0,n.EW)(()=>{const t=e?e.data:[],n=a.state.dashboard.activeId,i=t.filter(e=>{const t=n.findIndex(t=>t===e.id);return e.frameworking&&t>-1});return i}),o=(0,s.reactive)({width:0,height:0}),r=(e,a)=>{l.value.forEach(n=>{const l=i.value.find(e=>e.info.id===n.id);l&&l.sendPosition({[a]:e/100*t[a]})})};return(0,n.wB)(l,e=>{if(1===e.length){const a=i.value.find(t=>t&&t.info&&t.info.id===e[0].id);a&&(o.width=a.width/t.width*100,o.height=a.height/t.height*100)}else o.width=void 0,o.height=void 0}),{size:o,selected:l,changeSize:r}}};const pt=(0,R.A)(ct,[["render",ut]]);var ht=pt;const ft={key:0,class:"TextAlign"};function mt(e,t,a,i,l,o){const r=(0,n.g2)("el-divider"),s=(0,n.g2)("el-button"),d=(0,n.g2)("el-tooltip");return i.isAllText?((0,n.uX)(),(0,n.CE)("div",ft,[(0,n.bF)(r,{direction:"vertical"}),(0,n.bF)(d,{effect:"dark",content:"文字靠左",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(s,{onClick:t[0]||(t[0]=e=>i.textAlign("flex-start"))},{default:(0,n.k6)(()=>[...t[6]||(t[6]=[(0,n.Lk)("i",{class:"icon-paragraph-left"},null,-1)])]),_:1})]),_:1}),(0,n.bF)(d,{effect:"dark",content:"文字置中",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(s,{onClick:t[1]||(t[1]=e=>i.textAlign("center"))},{default:(0,n.k6)(()=>[...t[7]||(t[7]=[(0,n.Lk)("i",{class:"icon-paragraph-center"},null,-1)])]),_:1})]),_:1}),(0,n.bF)(d,{effect:"dark",content:"文字靠右",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(s,{onClick:t[2]||(t[2]=e=>i.textAlign("flex-end"))},{default:(0,n.k6)(()=>[...t[8]||(t[8]=[(0,n.Lk)("i",{class:"icon-paragraph-right"},null,-1)])]),_:1})]),_:1}),(0,n.bF)(r,{direction:"vertical"}),(0,n.bF)(d,{effect:"dark",content:"文字向上對齊",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(s,{onClick:t[3]||(t[3]=e=>i.textVerticle("flex-start"))},{default:(0,n.k6)(()=>[...t[9]||(t[9]=[(0,n.Lk)("i",{class:"icon-align-top"},null,-1)])]),_:1})]),_:1}),(0,n.bF)(d,{effect:"dark",content:"文字垂直置中",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(s,{onClick:t[4]||(t[4]=e=>i.textVerticle("center"))},{default:(0,n.k6)(()=>[...t[10]||(t[10]=[(0,n.Lk)("i",{class:"icon-align-vertical-middle"},null,-1)])]),_:1})]),_:1}),(0,n.bF)(d,{effect:"dark",content:"文字向下對齊",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(s,{onClick:t[5]||(t[5]=e=>i.textVerticle("flex-end"))},{default:(0,n.k6)(()=>[...t[11]||(t[11]=[(0,n.Lk)("i",{class:"icon-align-bottom"},null,-1)])]),_:1})]),_:1})])):(0,n.Q3)("",!0)}var vt={name:"TextAlign",props:{boxList:Array},setup(e){const t=(0,n.WQ)("refreshItem"),a=(0,u.Pj)(),i=(0,n.EW)(()=>{const t=a.state.dashboard.activeId,n=e?e.boxList:[];return n.filter(e=>{const a=t.findIndex(t=>e&&e.info&&e.info.id===t);return a>-1})}),l=(0,n.EW)(()=>i.value.every(e=>"text"===e.info.type&&!e.info.frameworking)&&i.value.length>0),o=e=>{i.value.forEach(t=>{const a=t.info;a.parameter.textAlign=e,s(a)})},r=e=>{i.value.forEach(t=>{const a=t.info;a.parameter.textVerticle=e,s(a)})},s=async e=>{try{const a=await p.A.updatePartOf(e,e.id);t(a)}catch{}};return{isAllText:l,textAlign:o,textVerticle:r}}};const gt=(0,R.A)(vt,[["render",mt]]);var yt=gt;const wt={key:0,class:"HistoryBtns"};function bt(e,t,a,i,o,r){const s=(0,n.g2)("el-button"),d=(0,n.g2)("el-tooltip");return i.history.length>0?((0,n.uX)(),(0,n.CE)("div",wt,[(0,n.bF)(d,{effect:"dark",content:"回復上一步",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(s,{size:"small",plain:"",onMousedown:t[0]||(t[0]=(0,l.D$)(()=>{},["stop"])),onClick:i.restore,disabled:i.currentHistoryIndex===i.history.length},{default:(0,n.k6)(()=>[...t[2]||(t[2]=[(0,n.Lk)("i",{class:"el-icon-refresh-right"},null,-1)])]),_:1},8,["onClick","disabled"])]),_:1}),(0,n.bF)(d,{effect:"dark",content:"重做下一步",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(s,{size:"small",plain:"",onMousedown:t[1]||(t[1]=(0,l.D$)(()=>{},["stop"])),onClick:i.repeat,disabled:0===i.currentHistoryIndex},{default:(0,n.k6)(()=>[...t[3]||(t[3]=[(0,n.Lk)("i",{class:"el-icon-refresh-left"},null,-1)])]),_:1},8,["onClick","disabled"])]),_:1})])):(0,n.Q3)("",!0)}var kt={name:"HistoryBtns",props:{boxList:Array},setup(e){const t=(0,n.EW)(()=>e?e.boxList:[]),a=(0,u.Pj)(),i=(0,n.EW)(()=>a.state.dashboard.history),l=(0,n.EW)(()=>a.state.dashboard.currentHistoryIndex),o=async()=>{const e=i.value,r=(0,d.cloneDeep)(l.value),s=(0,d.cloneDeep)(e[r+1]),u=t.value.find(e=>e.info&&e.info.id===s.id),c=u.width!==s.width||u.height!==s.height||u.top!==s.top||u.left!==s.left;c&&(u.sendPosition({width:s.width,height:s.height,top:s.top,left:s.left}),s.sinblings&&s.sinblings.forEach(e=>{const a=t.value.find(t=>t.info&&t.info.id===e.id);a.sendPosition({width:e.width,height:e.height,top:e.top,left:e.left})})),a.dispatch("dashboard/plusCurrentHistoryIndex"),await(0,n.dY)(),c||o(),s.origin&&l.value===i.value.length-1&&a.dispatch("dashboard/plusCurrentHistoryIndex")},r=async()=>{const e=i.value,o=(0,d.cloneDeep)(l.value),s=(0,d.cloneDeep)(e[o-1]);if(s.origin)a.dispatch("dashboard/minusCurrentHistoryIndex"),r();else{const e=t.value.find(e=>e.info.id===s.id),i=e.width!==s.width||e.height!==s.height||e.top!==s.top||e.left!==s.left;i&&(e.sendPosition({width:s.width,height:s.height,top:s.top,left:s.left}),s.sinblings&&s.sinblings.forEach(e=>{const a=t.value.find(t=>t.info&&t.info.id===e.id);a.sendPosition({width:e.width,height:e.height,top:e.top,left:e.left})})),a.dispatch("dashboard/minusCurrentHistoryIndex"),i||(await(0,n.dY)(),r())}},s=e=>{const t=e.ctrlKey,a=e.shiftKey,n="KeyZ"===e.code;t&&n&&!a&&l.value<i.value.length?o():t&&n&&a&&0!==l.value&&r()};return(0,n.sV)(()=>{window.addEventListener("keydown",s)}),(0,n.xo)(()=>{window.removeEventListener("keydown",s)}),{restore:o,repeat:r,currentHistoryIndex:l,history:i}}};const At=(0,R.A)(kt,[["render",bt]]);var xt=At;const Ct={id:"ImportItem"},Lt={class:"btns"};function It(e,t,a,i,o,r){const s=(0,n.g2)("el-button"),d=(0,n.g2)("el-input"),u=(0,n.g2)("el-form-item"),c=(0,n.g2)("el-form"),p=(0,n.g2)("el-upload"),h=(0,n.g2)("el-popover");return(0,n.uX)(),(0,n.CE)("div",Ct,[(0,n.bF)(h,{placement:"bottom-end",trigger:"click",visible:i.visible,"onUpdate:visible":t[2]||(t[2]=e=>i.visible=e),teleported:!1,width:500,persistent:!1},{reference:(0,n.k6)(()=>[(0,n.bF)(s,{type:"info",plain:""},{default:(0,n.k6)(()=>[...t[3]||(t[3]=[(0,n.eW)("匯入",-1)])]),_:1})]),default:(0,n.k6)(()=>[(0,n.bF)(c,null,{default:(0,n.k6)(()=>[(0,n.bF)(u,{error:i.errorString},{default:(0,n.k6)(()=>[(0,n.bF)(d,{modelValue:i.objString,"onUpdate:modelValue":t[0]||(t[0]=e=>i.objString=e),resize:"none",type:"textarea",autosize:{minRows:5,maxRows:5}},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),(0,n.Lk)("div",Lt,[(0,n.bF)(p,{action:"","show-file-list":!1,"on-change":i.onChange,"before-upload":i.beforeUpload},{default:(0,n.k6)(()=>[(0,n.bF)(s,{class:"importBtn",type:"primary",plain:"",size:"small",icon:"Upload",onClick:t[1]||(t[1]=(0,l.D$)(()=>{},["prevent","self"]))},{default:(0,n.k6)(()=>[...t[4]||(t[4]=[(0,n.eW)("上傳設定檔",-1)])]),_:1})]),_:1},8,["on-change","before-upload"]),(0,n.bF)(s,{class:"importBtn",type:"success",plain:"",size:"small",icon:"Position",onClick:i.submit},{default:(0,n.k6)(()=>[...t[5]||(t[5]=[(0,n.eW)("送出",-1)])]),_:1},8,["onClick"])])]),_:1},8,["visible"])])}var Et={name:"ImportItem",props:{data:Array},setup(){const e=(0,u.Pj)(),t=(0,s.ref)(""),a=(0,s.ref)(""),i=(0,s.ref)(!1),l=(0,n.WQ)("copyItem");let o;const r=(0,n.EW)(()=>c.Ay.currentRoute.value.name),d=async t=>{e.dispatch("dashboard/setActiveId",null);for(let a=t.length-1;a>-1;a--){const n=t[a];n.category=r.value;const i=await l(n,!0);e.dispatch("dashboard/setMultyActiveId",i.id)}},p=async()=>{if(t.value){o=Q.Ks.service({lock:!0});try{const e=JSON.parse(t.value);if(e.length<1)throw Error;await d(e),i.value=!1}catch{a.value="格式錯誤"}finally{o.close()}}else a.value="此項必填"},h=(e,t)=>{const a=t[0].raw,n=new FileReader;n.onload=async()=>{const e=n.result,t=JSON.parse(e);t.length<1||(await d(t),i.value=!1)},n.readAsText(a)},f=e=>{const t=/json/,a=t.test(e.type);if(!a)return(0,T.nk)({message:"僅能上傳 json 檔",type:"error"}),!1;o.value=!0};return{objString:t,errorString:a,submit:p,visible:i,beforeUpload:f,onChange:h}}};a(92511);const Wt=(0,R.A)(Et,[["render",It],["__scopeId","data-v-7f4ea489"]]);var Dt=Wt,Xt=a.p+"img/pen.7693a716.svg";const Ft={class:"AddLine"},St=["viewBox"],Bt=["x1","y1","x2","y2"];function Mt(e,t,a,o,r,s){const d=(0,n.g2)("el-divider"),u=(0,n.g2)("el-button"),c=(0,n.g2)("el-tooltip");return(0,n.uX)(),(0,n.CE)("div",Ft,[(0,n.bF)(d,{direction:"vertical"}),(0,n.bF)(c,{effect:"dark",content:"畫線工具",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(u,{size:"small",plain:"",class:(0,i.normalizeClass)({active:o.drawLine}),onMousedown:t[0]||(t[0]=(0,l.D$)(()=>{},["stop"])),onClick:o.toggleDrawLine},{default:(0,n.k6)(()=>[...t[1]||(t[1]=[(0,n.Lk)("img",{src:Xt,style:{width:"17px"}},null,-1)])]),_:1},8,["class","onClick"])]),_:1}),o.drawLine&&o.dots.length>0?((0,n.uX)(),(0,n.CE)("svg",{key:0,style:(0,i.normalizeStyle)({top:`${o.tempSvgLine.top+130+2}px`,left:`${o.tempSvgLine.left+2}px`,width:o.tempSvgLine.right-o.tempSvgLine.left+"px",height:o.tempSvgLine.bottom-o.tempSvgLine.top+"px",zIndex:o.layer-1}),viewBox:`0 0 ${o.tempSvgLine.right-o.tempSvgLine.left} ${o.tempSvgLine.bottom-o.tempSvgLine.top}`},[(0,n.Lk)("line",{x1:o.tempDot.x1-o.tempSvgLine.left,y1:o.tempDot.y1-o.tempSvgLine.top,x2:o.tempDot.x2-o.tempSvgLine.left,y2:o.tempDot.y2-o.tempSvgLine.top,stroke:"black"},null,8,Bt)],12,St)):(0,n.Q3)("",!0)])}var _t=a(55129);function Tt(e,t){const a=new je,i=(0,s.ref)(0),l=(0,s.ref)([]),o=(0,s.reactive)({x1:0,y1:0,x2:0,y2:0}),r=(0,n.EW)(()=>{const e=o.y1<=o.y2?o.y1:o.y2,t=o.x1<=o.x2?o.x1:o.x2,a=o.y1>=o.y2?o.y1:o.y2,n=o.x1>=o.x2?o.x1:o.x2;return{top:e,left:t,bottom:a,right:n}}),d=(0,n.EW)(()=>{const e=l.value.map(e=>e[1]);return Math.min.apply(null,e)*a.height}),u=(0,n.EW)(()=>{const e=l.value.map(e=>e[0]);return Math.max.apply(null,e)*a.width}),c=(0,n.EW)(()=>{const e=l.value.map(e=>e[1]);return Math.max.apply(null,e)*a.height}),p=(0,n.EW)(()=>{const e=l.value.map(e=>e[0]);return Math.min.apply(null,e)*a.width}),h=e=>{const t=e.clientX,a=e.clientY-130<0?0:e.clientY-130;o.x1=t,o.y1=a,f(t,a)},f=(e,n)=>{l.value.push([e/a.width,n/a.height]);const o=u.value-p.value>=1?u.value-p.value:1,r=c.value-d.value>=1?c.value-d.value:1,s={top:d.value/a.Hpercent+"%",left:p.value/a.Wpercent+"%",width:o/a.Wpercent+"%",height:r/a.Hpercent+"%",frameworking:!0,parameter:{dots:l.value,lineWidth:1},type:"svgLine"};t(s,i.value,1===l.value.length?"add":"refresh")},m=e=>{"Escape"===e.key&&y()};let v;const g=t=>{e.value.$el.addEventListener("mousedown",h),window.addEventListener("keydown",m),window.addEventListener("mousemove",w),_t.A.dispatch("dashboard/setDrawLine",!0),l.value=[],i.value=t,v=(0,T.nk)({showClose:!1,message:"按 Esc 鍵取消新增線段",duration:0,type:"warning",offset:80})},y=()=>{e.value.$el.removeEventListener("mousedown",h),_t.A.dispatch("dashboard/setDrawLine",!1),window.removeEventListener("keydown",m),window.removeEventListener("mousemove",w),v.close()},w=e=>{o.x2=e.clientX,o.y2=e.clientY-130<0?0:e.clientY-130};return{startDrawLine:g,endDrawLine:y,dots:l,tempDot:o,tempSvgLine:r}}var Gt={name:"AddLine",props:{containerRef:Object,data:Array},setup(e){const t=(0,u.Pj)(),a=(0,n.EW)(()=>t.state.dashboard.drawLine),i=(0,n.EW)(()=>c.Ay.currentRoute.value.name),l=(0,n.EW)(()=>e?e.containerRef:null),o=(0,n.EW)(()=>e?e.data:[]),r=(0,n.WQ)("refreshItem"),s=(0,n.WQ)("addItem"),h=(0,n.EW)(()=>o.value[0]?parseInt(o.value[0].layer)+1:0),f=async e=>{const a={title:"SvgLine",name:"SvgLine",category:i.value,layer:h.value,group:"",...e},n=await p.A.addItem(a);t.dispatch("dashboard/setActiveId",n.id),n.frameworking=!0,s(n)},m=async(e,t,a)=>{if("add"===a)f(e);else{const t=(0,d.cloneDeep)(o.value[0]);Object.keys(e).forEach(a=>{t[a]=e[a]}),delete t.id,delete t.frameworking;const a=await p.A.updatePartOf(t,o.value[0].id);a.frameworking=!0,r(a)}},{startDrawLine:v,endDrawLine:g,dots:y,tempDot:w,tempSvgLine:b}=Tt(l,m),k=()=>{a.value?g():v(o.value.length)};return{toggleDrawLine:k,drawLine:a,dots:y,tempDot:w,tempSvgLine:b,layer:h}}};const Yt=(0,R.A)(Gt,[["render",Mt]]);var zt=Yt,Rt={name:"DashboardTools",components:{DashboardAlign:dt,Size:ht,TextAlign:yt,HistoryBtns:xt,ImportItem:Dt,AddLine:zt},props:{data:{type:Array,default:null},boxList:{type:Array},containerRef:Object},setup(e,{emit:t}){const a=(0,n.WQ)("refreshItem"),i=(0,n.WQ)("addItem"),l=(0,u.Pj)(),o=(0,n.EW)(()=>e?e.boxList:[]),r=(0,s.ref)(!0),c=(0,n.EW)(()=>{const t=e?e.data:[];return t.findIndex(e=>e.frameworking)>-1}),h=e=>{l.dispatch("dashboard/setAutoselect",e)},f=async n=>{const r=Q.Ks.service(),s=e?e.data:[];let u=new je;const c=s.filter(e=>e.frameworking);for(const e of c)if("success"===n){const t=o.value.findIndex(t=>t&&t.info.id===e.id),n=(0,d.cloneDeep)(e);n.width=o.value[t].width/u.width*100+"%",n.height=o.value[t].height/u.height*100+"%",n.top=o.value[t].top/u.height*100+"%",n.left=o.value[t].left/u.width*100+"%","svgLine"===n.type&&(n.parameter.dots=o.value[t].dots),delete n.id,delete n.frameworking;try{if("string"===typeof e.id){const e=await p.A.addItem(n);i(e)}else await p.A.updatePartOf(n,e.id),await a({...n,id:e.id,frameworking:!0})}catch{}}else await a(e);c.forEach(async e=>{await t("removeFramework",e.id)}),"success"===n&&(0,T.nk)({type:"success",message:"資料儲存成功"}),l.dispatch("dashboard/resetFramework"),r.close()};return{changeAutoSelect:h,autoSelect:r,submitAll:f,hasFrameworkItem:c,refreshItem:a}}};const Pt=(0,R.A)(Rt,[["render",it]]);var Ot=Pt,jt=Ot,Nt=a(77187),Qt={name:"StructureItem",components:{ContainBox:tt,DraggableContainer:h,Layers:$e,Tools:jt},setup(){const e=(0,u.Pj)(),t=(0,n.EW)(()=>e.state.dashboard.drawLine),a=(0,n.EW)(()=>e.state.dashboard.editting),i=(0,n.EW)(()=>e.state.dashboard.autoSelect),l=(0,n.EW)(()=>e.state.dashboard.activeId),o=(0,n.EW)(()=>c.Ay.currentRoute.value.name),r=(0,n.EW)(()=>{const t=e.state.group.userMenu,a=e.state.dashboard.customMenuList,n=[...t,...a].filter(e=>e.category===o.value);return n||[]},{deep:!0}),h=(0,s.ref)(null),f=(0,s.ref)([]),m=(0,s.ref)(!0),v=(0,s.ref)([]),g=(0,s.ref)([]),w=(0,s.ref)(!1),k=(0,n.EW)(()=>v.value.slice().reverse()),A=async(t,a=!1)=>{const n=(0,d.cloneDeep)(t);n.layer=v.value[0]?v.value[0].groupName?parseInt(v.value[0].children[0].layer)+1:parseInt(v.value[0].layer)+1:0,n.title=`${""!==t.title?t.title:t.name} copy`;const i=1*n.left.replace("%","");n.left=a?n.left:i>50?i-10+"%":i+10+"%";const l=await p.A.addItem(n);return n.key=(new Date).getTime(),l.frameworking=!0,F(l),e.dispatch("dashboard/addFramework"),l};(0,n.Gt)("copyItem",A);const x=t=>{const a=v.value.findIndex(e=>e.id===t);v.value[a].frameworking||(v.value[a].frameworking=!0,e.dispatch("dashboard/addFramework"))};(0,n.Gt)("startFramework",x);const C=e=>{if("string"!==typeof e){const t=v.value.findIndex(t=>t.id===e);v.value[t].frameworking&&(v.value[t].frameworking=!1)}},I=t=>{const{paramKey:a,defaultTime:n}=t.parameter;if(n)return e.dispatch("params/updateParams",{key:a,value:{start_time:n[0],end_time:n[1]}}),n;{const n=c.Ay.currentRoute.value.query,i=Object.keys(n).find(e=>e.match(/^var-/)&&e.replace("var-","")===a);let l;if(i)l=n[i];else{const e=t.parameter.defaultFirstOption,a=t.parameter.defaultOptionIndex?t.parameter.defaultOptionIndex:0,n=[];t.parameter.staticData&&n.push(...t.parameter.staticData),t.listsData&&n.push(...t.listsData);const i=n[a]?n[a].value:"";l=e?i:""}return e.dispatch("params/updateParams",{key:a,value:l}),l}},E=(e,t)=>{const{dynamicValue:a,dynamicLabel:n}=t.parameter,i=n||a;return e?e.map(e=>({label:e[i],value:e[a]})):[]},W=async()=>{const e=[];for(let a=0;a<r.value.length;a++){const{type:t,category:n}=r.value[a],{apiurl:i,defaultTime:l}=r.value[a].parameter;if("cmdParams"===t&&n===o.value&&i)if("customCmd"===i.model&&i.params.cmd.indexOf("$")>-1)e.push({i:a,apiurl:i});else{try{const e=await Nt.A.getData(i);r.value[a].listsData=E(e,r.value[a])}catch{}r.value[a].defaultValue=await I(r.value[a])}else"cmdParams"===t&&n===o.value&&(r.value[a].defaultValue=l||await I(r.value[a]))}await(0,n.dY)();for(let a=0;a<e.length;a++){const t=e[a];try{const e=await Nt.A.getData(t.apiurl);r.value[t.i].listsData=E(e,r.value[t.i])}catch{}r.value[t.i].defaultValue=await I(r.value[t.i])}const t=(new Date).getTime();v.value=r.value.map(e=>(e.key=t,e))},D=e=>{const t=g.value.findIndex(t=>t===e);t>-1?g.value.splice(t,1):g.value.push(e)};(0,n.Gt)("toggleHideItem",D);const X=({children:e,isHide:t})=>{e.forEach(e=>{const a=g.value.findIndex(t=>t===e.id);t&&a<0?g.value.push(e.id):!t&&a>-1&&g.value.splice(a,1)})};(0,n.Gt)("toggleHideGroup",X);const F=t=>{e.dispatch("dashboard/addCustomMenu",t);const a=(new Date).getTime();v.value.push({...t,key:a})};(0,n.Gt)("addItem",F);const S=t=>{const a=(new Date).getTime(),n=v.value.findIndex(e=>e.id===t.id);v.value[n]=t,v.value[n].key=a,e.dispatch("dashboard/updateCustomMenu",t)};(0,n.Gt)("refreshItem",S);const B=t=>{const a=v.value.findIndex(e=>e.id===t);v.value[a].frameworking&&e.dispatch("dashboard/removeFramework"),v.value.splice(a,1),e.dispatch("dashboard/deleteCustomMenu",t)};(0,n.Gt)("removeItem",B);const M=async e=>{m.value=!1,await(0,n.dY)(),"prev"===e?await(0,L.Bb)():await(0,L.Zj)(),setTimeout(()=>{m.value=!0},2400)},_=async e=>{if(!i.value){const t=v.value.slice().reverse(),a=t.findIndex(e=>!(l.value.length>1)&&(e.frameworking&&l.value[0]===e.id));if(a>-1){const{isFocus:t,editting:i,containBox:l,mousedown:o}=f.value[a];t&&i&&(l.mousedown(e),await(0,n.dY)(),o())}}},T=()=>{const t=c.Ay.currentRoute.value.query;Object.keys(t).forEach(a=>{a.match(/^var-/)&&e.dispatch("params/updateParams",{key:a.replace("var-",""),value:t[a]})})},G=async t=>{w.value=!0,await e.dispatch("dashboard/getCustomMenuList",t),await W(),await T(),w.value=!1};(0,n.wB)(o,e=>{G(e)});const Y=async t=>{const a=/ArrowRight|ArrowLeft|ArrowUp|ArrowDown/;if(a.test(t.key)){const a=v.value.slice().reverse(),i=a.findIndex(e=>0!==l.value.length&&(e.frameworking&&l.value.includes(e.id)));if(await(0,n.dY)(),i>-1){e.dispatch("dashboard/setMoveDistance",{X:0,Y:0});const a=await b(f),i=new je,l=(0,s.ref)({top:0,right:i.width-a.width,bottom:i.height-a.height,left:0});let o;await(0,n.dY)();let r={X:0,Y:0};switch(t.key){case"ArrowRight":r.X=1;break;case"ArrowLeft":r.X=-1;break;case"ArrowUp":r.Y=-1;break;case"ArrowDown":r.Y=1;break;default:break}o=y({x:a.left+r.X,y:a.top+r.Y},l),o.bool&&e.dispatch("dashboard/setMoveDistance",r)}}};return(0,n.wB)(a,e=>{e?window.addEventListener("keydown",Y):window.removeEventListener("keydown",Y)}),(0,n.sV)(()=>{G(o.value)}),{editting:a,hideItem:g,apiData:v,routerName:o,prevPage:L.Bb,nextPage:L.Zj,showAnimation:m,swipe:M,boxList:f,removeFramework:C,wrapperClick:_,contentList:k,menuList:L.oM,loading:w,containerRef:h,drawLine:t}}};const Ut=(0,R.A)(Qt,[["render",r]]);var Vt=Ut},86468:function(e,t,a){"use strict";a.r(t);var n=a(31601),i=a.n(n),l=a(76314),o=a.n(l),r=o()(i());r.push([e.id,"#ImportItem[data-v-7f4ea489]{margin:0 0 0 auto}#ImportItem[data-v-7f4ea489] .el-form-item{margin-bottom:0;margin-top:18px}#ImportItem[data-v-7f4ea489] .el-form-item .el-form-item__error{top:auto;bottom:calc(100% + 3px)}#ImportItem .btns[data-v-7f4ea489]{display:flex;justify-content:flex-end;margin-top:5px}",""]),t["default"]=r},92511:function(e,t,a){var n=a(86468);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var i=a(68459).A;i("132bc6ef",n,!0,{sourceMap:!1,shadowMode:!1})},97497:function(e,t,a){var n={"./":[11300,8048,1288,5791,9692],"./CmdInput":[6421,8048],"./CmdInput/":[6421,8048],"./CmdInput/Input":[67777,8048],"./CmdInput/Input.vue":[67777,8048],"./CmdInput/index":[6421,8048],"./CmdInput/index.js":[6421,8048],"./CmdParams":[15293,8048,1288],"./CmdParams/":[15293,8048,1288],"./CmdParams/CmdParams":[40128,8048,1288],"./CmdParams/CmdParams.vue":[40128,8048,1288],"./CmdParams/index":[15293,8048,1288],"./CmdParams/index.js":[15293,8048,1288],"./CmdRadio":[42486,8048],"./CmdRadio/":[42486,8048],"./CmdRadio/CmdRadio":[74316,8048],"./CmdRadio/CmdRadio.vue":[74316,8048],"./CmdRadio/index":[42486,8048],"./CmdRadio/index.js":[42486,8048],"./CmdTime":[95106,8048,1288],"./CmdTime/":[95106,8048,1288],"./CmdTime/CmdTime":[83432,8048,1288],"./CmdTime/CmdTime.vue":[83432,8048,1288],"./CmdTime/index":[95106,8048,1288],"./CmdTime/index.js":[95106,8048,1288],"./Grafana":[81787,8048],"./Grafana/":[81787,8048],"./Grafana/Grafana":[4385,8048],"./Grafana/Grafana.vue":[4385,8048],"./Grafana/data":[73695,8048],"./Grafana/data.js":[73695,8048],"./Grafana/index":[81787,8048],"./Grafana/index.js":[81787,8048],"./Group":[64400,8048,1288,5791,9692],"./Group/":[64400,8048,1288,5791,9692],"./Group/Group":[80101,8048,1288,5791,9692],"./Group/Group.vue":[80101,8048,1288,5791,9692],"./Group/index":[64400,8048,1288,5791,9692],"./Group/index.js":[64400,8048,1288,5791,9692],"./HighChart":[10531,8048,1288,5791],"./HighChart/":[10531,8048,1288,5791],"./HighChart/HighChart":[32443,8048,1288,5791],"./HighChart/HighChart.vue":[32443,8048,1288,5791],"./HighChart/index":[10531,8048,1288,5791],"./HighChart/index.js":[10531,8048,1288,5791],"./IframeBlock":[49454,8048],"./IframeBlock/":[49454,8048],"./IframeBlock/IframeBlock":[69542,8048],"./IframeBlock/IframeBlock.vue":[69542,8048],"./IframeBlock/index":[49454,8048],"./IframeBlock/index.js":[49454,8048],"./ImageBlock":[64967,8048],"./ImageBlock/":[64967,8048],"./ImageBlock/ImageBlock":[95821,8048],"./ImageBlock/ImageBlock.vue":[95821,8048],"./ImageBlock/index":[64967,8048],"./ImageBlock/index.js":[64967,8048],"./PanelBtn":[70687,8048],"./PanelBtn/":[70687,8048],"./PanelBtn/PanelBtn":[50563,8048],"./PanelBtn/PanelBtn.vue":[50563,8048],"./PanelBtn/index":[70687,8048],"./PanelBtn/index.js":[70687,8048],"./Shape":[81694,8048],"./Shape/":[81694,8048],"./Shape/Shape":[74309,8048],"./Shape/Shape.vue":[74309,8048],"./Shape/components/Circle/Circle":[38179,8048],"./Shape/components/Circle/Circle.vue":[38179,8048],"./Shape/components/Line/Line":[76799,8048],"./Shape/components/Line/Line.vue":[76799,8048],"./Shape/components/Tectangle/Tectangle":[66099,8048],"./Shape/components/Tectangle/Tectangle.vue":[66099,8048],"./Shape/index":[81694,8048],"./Shape/index.js":[81694,8048],"./SvgBlock":[69150,8048],"./SvgBlock/":[69150,8048],"./SvgBlock/SvgBlock":[20717,8048],"./SvgBlock/SvgBlock.vue":[20717,8048],"./SvgBlock/index":[69150,8048],"./SvgBlock/index.js":[69150,8048],"./SvgLine":[65675,8048],"./SvgLine/":[65675,8048],"./SvgLine/SvgLine":[76037,8048],"./SvgLine/SvgLine.vue":[76037,8048],"./SvgLine/index":[65675,8048],"./SvgLine/index.js":[65675,8048],"./TableBlock":[64076,8048,1288,5791],"./TableBlock/":[64076,8048,1288,5791],"./TableBlock/TableBlock":[78495,8048,1288,5791],"./TableBlock/TableBlock.vue":[78495,8048,1288,5791],"./TableBlock/index":[64076,8048,1288,5791],"./TableBlock/index.js":[64076,8048,1288,5791],"./TextBox":[41547,8048],"./TextBox/":[41547,8048],"./TextBox/TextBox":[84979,8048],"./TextBox/TextBox.vue":[84979,8048],"./TextBox/index":[41547,8048],"./TextBox/index.js":[41547,8048],"./Trend":[59084,8048,1288,5791],"./Trend/":[59084,8048,1288,5791],"./Trend/Trend":[86460,8048,1288,5791],"./Trend/Trend.vue":[86460,8048,1288,5791],"./Trend/index":[59084,8048,1288,5791],"./Trend/index.js":[59084,8048,1288,5791],"./index":[11300,8048,1288,5791,9692],"./index.js":[11300,8048,1288,5791,9692]};function i(e){if(!a.o(n,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],i=t[0];return Promise.all(t.slice(1).map(a.e)).then(function(){return a(i)})}i.keys=function(){return Object.keys(n)},i.id=97497,e.exports=i}}]);