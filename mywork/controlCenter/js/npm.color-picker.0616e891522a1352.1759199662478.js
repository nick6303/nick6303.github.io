(self["webpackChunkcontrol_center"]=self["webpackChunkcontrol_center"]||[]).push([[8760],{39515:function(e,o,r){"use strict";r.r(o);var l=r(31601),t=r.n(l),n=r(76314),a=r.n(n),i=r(4417),c=r.n(i),d=new URL(r(59376),r.b),s=a()(t()),u=c()(d);s.push([e.id,".ColorPicker{position:relative;display:flex}.ColorPicker .el-button{width:32px;height:32px;padding:2px;border:1px solid #e6e6e6}.ColorPicker .el-button span{display:block;border-radius:2px;box-shadow:0 0 1px 1px rgba(0,0,0,.1);width:100%;height:100%;background:url("+u+')}.colorPopper .ColorPanel{width:100%;height:auto}.colorPopper .ColorPanel .colorWraper{display:flex;justify-content:space-between;margin:0 0 6px}.colorPopper .ColorPanel .colorWraper .colorDrag{position:relative;width:280px;height:180px}.colorPopper .ColorPanel .colorWraper .colorDrag:after,.colorPopper .ColorPanel .colorWraper .colorDrag:before{position:absolute;top:0;left:0;content:"";width:100%;height:100%;display:block;z-index:0}.colorPopper .ColorPanel .colorWraper .colorDrag:before{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.colorPopper .ColorPanel .colorWraper .colorDrag:after{background:linear-gradient(180deg,transparent,#000)}.colorPopper .ColorPanel .colorWraper .colorDrag .colorPoint{z-index:1;position:absolute;transform:translate(-50%,-50%);width:10px;height:10px;border:1px solid #fff;box-shadow:0 0 5px 2px rgba(0,0,0,.2),inset 0 0 5px 2px rgba(0,0,0,.1);border-radius:50%}.colorPopper .ColorPanel .colorWraper .colorHue{width:12px;height:180px;background:linear-gradient(180deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.colorPopper .ColorPanel .colorOpacity{width:280px;height:12px;background:url('+u+")}.colorPopper .ColorPanel .colorSlider{width:100%;height:100%;position:relative}.colorPopper .ColorPanel .colorSlider .colorSliderPint{width:16px;height:16px;position:absolute;transform:translate(-50%,-50%);left:50%;top:50%;background-color:#fff;border-radius:50%;box-shadow:0 0 5px 0 rgba(0,0,0,.5);border:1px solid #fff;cursor:pointer}.colorPopper .colorFrom{display:flex;margin:10px 0 0}.colorPopper .colorFrom .el-input{margin-right:auto;width:134px}.colorPopper .colorFrom .el-input__inner{padding:0 5px}.colorPopper .colorFrom .el-button{padding:7px 8px}.colorPopper .colorFrom .el-button+.el-button{margin-left:5px}.colorPopper .PredefineColors{margin:10px 0 0}.colorPopper .PredefineColors .el-scrollbar__wrap{max-height:100px;padding-right:8px}.colorPopper .PredefineColors .el-scrollbar__view{display:flex;flex-wrap:wrap}.colorPopper .PredefineColors .el-button{width:20%;position:relative}.colorPopper .PredefineColors .el-button+.el-button{margin-left:0}.colorPopper .PredefineColors .el-button button{background-color:#f56c6c;color:#fff;border:none;border-radius:2px;font-size:14px;display:flex;align-items:center;justify-content:center;padding:1px;position:absolute;top:0;right:0}",""]),o["default"]=s},51022:function(e,o,r){"use strict";r.d(o,{A:function(){return ee}});var l=r(56768),t=r(24232);const n={class:"ColorPicker"};function a(e,o,r,a,i,c){const d=(0,l.g2)("el-button"),s=(0,l.g2)("ColorPanel"),u=(0,l.g2)("el-popover");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(u,{visible:a.visible,"onUpdate:visible":o[0]||(o[0]=e=>a.visible=e),trigger:"click",placement:a.popPlacement,"popper-class":"colorPopper",width:325,onHide:a.hidePopover},{reference:(0,l.k6)(()=>[(0,l.bF)(d,{onClick:a.trigerClick},{default:(0,l.k6)(()=>[(0,l.Lk)("span",{style:(0,t.normalizeStyle)({background:a.color})},null,4)]),_:1},8,["onClick"])]),default:(0,l.k6)(()=>[(0,l.bF)(s,{value:a.color,showAlpha:r.showAlpha,onEmitChange:a.update,onSubmitColor:a.submitColor,onClearColor:a.clearColor},null,8,["value","showAlpha","onEmitChange","onSubmitColor","onClearColor"])]),_:1},8,["visible","placement","onHide"])])}var i=r(90144),c=r(4249);const d={class:"ColorPanel"},s={class:"colorWraper"},u={class:"colorHue"},p={key:0,class:"colorOpacity"},g={class:"colorFrom"};function h(e,o,r,n,a,i){const c=(0,l.g2)("ColorDrag"),h=(0,l.g2)("ColorSlider"),f=(0,l.g2)("PredefineColors"),v=(0,l.g2)("el-input"),C=(0,l.g2)("el-button");return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.Lk)("div",s,[(0,l.bF)(c,{color:n.color,origin:n.origin,onSetColor:n.setColor,onSetOrigin:n.setOrigin,onEmitChange:n.emitChange},null,8,["color","origin","onSetColor","onSetOrigin","onEmitChange"]),(0,l.Lk)("div",u,[(0,l.bF)(h,{vertical:!0,value:Math.round(n.color.hue/360*100),onChange:n.hueSlide},null,8,["value","onChange"])])]),r.showAlpha?((0,l.uX)(),(0,l.CE)("div",p,[(0,l.bF)(h,{style:(0,t.normalizeStyle)({background:n.opacityStyle}),value:100*n.origin.alpha,onChange:n.opacitySlider},null,8,["style","value","onChange"])])):(0,l.Q3)("",!0),n.token?((0,l.uX)(),(0,l.Wv)(f,{key:1,onSelectColor:n.selectColor},null,8,["onSelectColor"])):(0,l.Q3)("",!0),(0,l.Lk)("div",g,[(0,l.bF)(v,{modelValue:n.colorInput,"onUpdate:modelValue":o[0]||(o[0]=e=>n.colorInput=e),size:n.sizeMini,onChange:n.selectColor},null,8,["modelValue","size","onChange"]),n.notPredefine&&n.token?((0,l.uX)(),(0,l.Wv)(C,{key:0,onClick:n.addPredefine,size:n.sizeMini},{default:(0,l.k6)(()=>[...o[1]||(o[1]=[(0,l.Lk)("i",{class:"el-icon-plus"},null,-1),(0,l.eW)("最愛",-1)])]),_:1},8,["onClick","size"])):(0,l.Q3)("",!0),(0,l.bF)(C,{onClick:n.clearColor,size:n.sizeMini},{default:(0,l.k6)(()=>[...o[2]||(o[2]=[(0,l.eW)("清空",-1)])]),_:1},8,["onClick","size"]),(0,l.bF)(C,{onClick:n.submitColor,size:n.sizeMini},{default:(0,l.k6)(()=>[...o[3]||(o[3]=[(0,l.eW)("確認",-1)])]),_:1},8,["onClick","size"])])])}r(18111),r(7588);function f(e,o,r,n,a,i){return(0,l.uX)(),(0,l.CE)("div",{class:"colorSlider",ref:"slider",onMousedown:o[0]||(o[0]=(...e)=>n.onDragStart&&n.onDragStart(...e))},[(0,l.Lk)("div",{class:"colorSliderPint",style:(0,t.normalizeStyle)(n.pointStyle)},null,4)],544)}var v={name:"ColorSlider",props:{value:{type:Number,default:0},vertical:{type:Boolean,default:!1}},setup(e,{emit:o}){const r=(0,l.EW)(()=>e?e.value:0),t=!!e&&e.vertical,n=(0,i.ref)(r.value),a=(0,i.ref)(null),c=(0,i.ref)(!1),d=(0,i.ref)(null),s=(0,l.EW)(()=>{const e={},o=t?"top":"left";return e[o]=`${n.value}%`,e}),u=()=>{d.value={width:a.value.clientWidth,height:a.value.clientHeight,left:a.value.getBoundingClientRect().left+document.body.scrollLeft,top:a.value.getBoundingClientRect().top+document.body.scrollTop}},p=e=>{c.value=!0,u(),g(e),f()},g=e=>{let{pageX:r,pageY:l}=e,{width:a,left:i,top:c,height:s}=d.value;const u=r-i,p=l-c;let g;g=t?p/s*100:u/a*100,g=g<0?0:g>100?100:parseFloat(g.toFixed(4)),n.value=g,o("change",n.value)},h=()=>{c.value=!1,v()},f=()=>{window.addEventListener("mousemove",g),window.addEventListener("mouseup",h)},v=()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",h)};return(0,l.wB)(r,e=>{n.value=e}),{slider:a,pointStyle:s,onDragStart:p}}},C=r(71241);const b=(0,C.A)(v,[["render",f]]);var m=b,P=r(45130);const w=["onClick"];function k(e,o,r,n,a,i){const c=(0,l.g2)("el-button"),d=(0,l.g2)("el-scrollbar");return(0,l.uX)(),(0,l.Wv)(d,{class:"PredefineColors"},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.predefineColors,e=>((0,l.uX)(),(0,l.Wv)(c,{key:e.id,style:(0,t.normalizeStyle)({backgroundColor:e.colorcode}),onClick:o=>n.selectColor(e.colorcode)},{default:(0,l.k6)(()=>[(0,l.Lk)("button",{onClick:(0,P.D$)(o=>n.removePredefine(e),["stop"])},[...o[0]||(o[0]=[(0,l.Lk)("i",{class:"el-icon-close"},null,-1)])],8,w)]),_:2},1032,["style","onClick"]))),128))]),_:1})}var y=r(55129);const x=(0,l.EW)(()=>y.A.state.color.predefineColors);function S(){return 0===x.value.length&&y.A.dispatch("color/getPredefineColors"),{predefineColors:x}}var E={name:"PredefineColors",setup(e,{emit:o}){const r=(0,c.Pj)(),{predefineColors:l}=S(),t=async e=>{r.dispatch("color/removePredefineColor",e)},n=e=>{o("selectColor",e)};return{predefineColors:l,removePredefine:t,selectColor:n}}};const W=(0,C.A)(E,[["render",k]]);var L=W;function O(e,o,r,n,a,i){return(0,l.uX)(),(0,l.CE)("div",{class:"colorDrag",ref:"colorDrag",style:(0,t.normalizeStyle)({backgroundColor:n.hueString}),onMousedown:o[0]||(o[0]=(...e)=>n.onDragStart&&n.onDragStart(...e))},[(0,l.Lk)("div",{class:"colorPoint",style:(0,t.normalizeStyle)(n.pointerPosition)},null,4)],36)}var z=r(85605);const A=e=>{const o=(0,z.A)(e),r=o.isValid();if(r){let{h:e,s:r,v:l}=o.toHsv();const{r:t,g:n,b:a}=o.toRgb();return e=Math.round(e),r=Math.round(100*r),l=Math.round(100*l),{rgb:{r:t,g:n,b:a},hsv:{h:e,s:r,v:l},hex:o.toHexString(),alpha:o.getAlpha()}}return{rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:100,v:100,a:1},hex:"#f00",alpha:1}},D=(e,o=250,r)=>{let l,t;return(...n)=>{const a=r||void 0,i=Date.now();l&&i<l+o?(clearTimeout(t),t=setTimeout(()=>{l=i,e.apply(a,n)},o)):(l=i,e.apply(a,n))}},_=e=>({width:e.clientWidth,height:e.clientHeight,left:e.getBoundingClientRect().left+document.body.scrollLeft,top:e.getBoundingClientRect().top+document.body.scrollTop}),F=(e,o,r)=>"number"===typeof e?e<o?o:e>r?r:e:o;var M={name:"ColorDrag",props:{color:{type:Object,default:null},origin:{type:Object,default:null}},setup(e,{emit:o}){const r=(0,l.EW)(()=>e?e.color:null),t=(0,l.EW)(()=>e?e.origin:null),n=(0,i.ref)(!1),a=(0,i.ref)({}),c=(0,i.ref)(null),d=(0,l.EW)(()=>{const e=r.value.hue,{hex:o}=A(`hsv(${e}, 100%, 100%)`);return o}),s=(0,l.EW)(()=>{const{saturation:e,value:o}=r.value,l=`${e}%`,t=100-o+"%";return{left:l,top:t}}),u=e=>{n.value=!0,a.value=_(c.value),p(e),window.addEventListener("mousemove",D(p,16.7)),window.addEventListener("mouseup",g)},p=e=>{if(!n.value)return;const{pageX:l,pageY:i}=e,{width:c,height:d,left:s,top:u}=a.value,p=l-s-window.scrollX,g=i-u-window.scrollY,{alpha:h}=t.value,f=r.value.hue,v=Math.round(F(p/c*100,0,100)),C=Math.round(F((d-g)/d*100,0,100));o("setColor",{saturation:v,value:C}),o("setOrigin",A(`hsva(${f}, ${v}%, ${C}%, ${h})`)),o("emitChange")},g=()=>{n.value=!1,window.removeEventListener("mousemove",D(p,16.7)),window.removeEventListener("mouseup",g)};return{hueString:d,pointerPosition:s,colorDrag:c,onDragStart:u}}};const $=(0,C.A)(M,[["render",O]]);var I=$;const X=r(91625).version,R=X.indexOf("beta")>-1?"mini":"small";var V={name:"ColorPanel",components:{ColorSlider:m,PredefineColors:L,ColorDrag:I},props:{value:{type:String,default:"#05f"},showAlpha:{type:Boolean,default:!1}},setup(e,{emit:o}){const r=!!e&&e.showAlpha,t=e?e.value:"",n=(0,c.Pj)(),a=(0,l.EW)(()=>n.state.color.predefineColors),d=localStorage.getItem("access_token"),s=(0,i.reactive)(A(t)),{h:u,s:p,v:g}=s.hsv,h=(0,i.reactive)({hue:u,saturation:p,value:g}),f=(0,i.ref)(t),v=(0,l.EW)(()=>{const{alpha:e,rgb:{r:o,g:r,b:l}}=s;return`rgba(${o}, ${r}, ${l}, ${e})`}),C=(0,l.EW)(()=>0===s.alpha&&r?"transparent":s.hex),b=(0,l.EW)(()=>`linear-gradient(to right, transparent 0%, ${C.value} 100%)`),m=(0,l.EW)(()=>{const e=a.value.findIndex(e=>{const o=A(e.colorcode),l=A(f.value);return JSON.stringify(o)===JSON.stringify(l)||!r&&o.hex===l.hex});return e<0&&f.value}),P=e=>{const o=Math.round(e/100*360),{alpha:l,hsv:{s:t,v:n}}=s;h.hue=o,Object.assign(s,A(`hsva(${o}, ${t}%, ${n}%, ${l})`));const a=r?v.value:C.value;f.value=a,k()},w=e=>{s.alpha=Math.round(e)/100,k()},k=()=>{const e=r?v.value:C.value;f.value=e,o("emitChange",e)},y=e=>{const o=A(e);Object.keys(o).forEach(e=>{s[e]=o[e]});const{h:r,s:l,v:t}=s.hsv;h.hue=r,h.saturation=l,h.value=t,k()},x=e=>{Object.keys(e).forEach(o=>{h[o]=e[o]})},S=e=>{Object.keys(e).forEach(o=>{s[o]=e[o]})},E=()=>{(0,l.dY)(()=>{n.dispatch("color/addPredefineColor",f.value)})},W=()=>{o("submitColor",f.value)},L=()=>{f.value="",o("emitChange",""),o("clearColor")};return{color:h,origin:s,emitChange:k,rgbString:v,hexString:C,hueSlide:P,opacitySlider:w,opacityStyle:b,selectColor:y,setColor:x,setOrigin:S,notPredefine:m,addPredefine:E,colorInput:f,clearColor:L,submitColor:W,sizeMini:R,token:d}}};const j=(0,C.A)(V,[["render",h]]);var H=j,B=(r(44114),r(81202)),N={getList(){return(0,B.A)({url:"/authcoreapi/role-menu/color-code/",method:"get",headers:{withOutAuthorization:!0}})},addItem(e){return(0,B.A)({url:"/authcoreapi/role-menu/color-code/",method:"post",data:e,headers:{withOutAuthorization:!0}})},delete(e){return(0,B.A)({url:`/authcoreapi/role-menu/color-code/${e}/`,method:"delete",headers:{withOutAuthorization:!0}})}},Y={getList(){return[{id:99,colorcode:"#fa7d34"},{id:98,colorcode:"#92bbf7"},{id:97,colorcode:"rgba(117, 117, 117, 1)"},{id:96,colorcode:"#accbfa"},{id:94,colorcode:"#2fd452"},{id:93,colorcode:"#fbb034"},{id:92,colorcode:"rgba(1, 22, 39, 1)"},{id:91,colorcode:"rgba(239, 255, 233, 1)"},{id:90,colorcode:"#c2c2c2"},{id:89,colorcode:"#e71d36"},{id:88,colorcode:"#2ec4b6"},{id:85,colorcode:"rgba(212, 223, 230, 1)"},{id:83,colorcode:"#000000"},{id:81,colorcode:"rgba(217, 212, 207, 1)"},{id:80,colorcode:"rgba(255, 255, 255, 0.3)"},{id:79,colorcode:"rgba(3, 70, 112, 1)"},{id:78,colorcode:"rgba(160, 196, 196, 1)"},{id:77,colorcode:"rgba(217, 223, 223, 1)"},{id:76,colorcode:"rgba(255, 255, 255, 0)"},{id:74,colorcode:"rgba(255, 255, 255, 1)"},{id:73,colorcode:"rgba(179, 189, 164, 1)"},{id:72,colorcode:"rgba(236, 236, 226, 1)"}]},addItem(e){return{...e,id:"test"}},delete(){return!0}};const T="ADD_PREDEFINE_COLOR",Q="REMOVE_PREDEFINE_COLOR",U="GET_PREDEFINE_COLORS";var J={namespaced:!0,state:{predefineColors:[],isloadingColor:!1},mutations:{async[T](e,o){let r;try{r=await N.addItem({colorcode:o})}catch{r=Y.addItem({colorcode:o})}finally{e.predefineColors.push(r)}},async[Q](e,o){try{const r=e.predefineColors.findIndex(e=>e.colorcode===o.colorcode);e.predefineColors.splice(r,1),await N.delete(o.id)}catch{}},async[U](e){if(!e.isloadingColor){let o;e.isloadingColor=!0;try{o=await N.getList()}catch{o=Y.getList()}finally{e.predefineColors=o,e.isloadingColor=!1}}}},actions:{addPredefineColor({commit:e},o){e(T,o)},removePredefineColor({commit:e},o){e(Q,o)},getPredefineColors({commit:e}){e(U)}}},G=(r(55122),{name:"ColorPicker",components:{ColorPanel:H},props:{modelValue:String,showAlpha:Boolean},emits:["update:modelValue","change"],setup(e,{emit:o}){const r=(0,c.Pj)();r.state.color||r.registerModule("color",J);const l=(0,i.ref)(e.modelValue),t=(0,i.ref)(!1),n=(0,i.ref)("top"),a=e=>{l.value=e},d=e=>{t.value=!1,o("update:modelValue",e),o("change",e,l.value)},s=()=>{t.value=!1,o("update:modelValue",""),o("change","")},u=()=>{l.value!==e.modelValue&&(l.value=e.modelValue)},p=e=>{e.pageY<400&&(window.innerHeight-e.pageY>400?n.value="bottom":window.innerWidth-e.pageX<350?n.value="left":n.value="right")};return{visible:t,color:l,update:a,submitColor:d,clearColor:s,hidePopover:u,popPlacement:n,trigerClick:p}}});const K=(0,C.A)(G,[["render",a]]);var q=K;const Z=function(e){e.component("ColorPicker",q)};var ee={install:Z}},55122:function(e,o,r){var l=r(39515);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var t=r(68459).A;t("40b70edc",l,!0,{sourceMap:!1,shadowMode:!1})}}]);