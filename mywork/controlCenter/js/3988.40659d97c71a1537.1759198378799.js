(self["webpackChunkcontrol_center"]=self["webpackChunkcontrol_center"]||[]).push([[3988],{16450:function(e,a,t){"use strict";t.d(a,{A:function(){return g}});var l=t(56768);const o={class:"JsonEditor",ref:"jsonEditorVue"};function u(e,a,t,u,n,s){return(0,l.uX)(),(0,l.CE)("div",o,null,512)}var n=t(90144),s=t(72381),d=t.n(s);t(89086);const r=["tree","code","form","text","view"],i="en",c=["tree","view","form"];var m={name:"JsonEditor",props:{modelValue:String,currentMode:{type:String,default:"code"},options:Object},emits:["update:modelValue","change"],setup(e,{emit:a}){const t=e?e.currentMode:"code",o=e.options||{},u=(0,l.EW)(()=>e?e.modelValue:""),s=(0,n.ref)(void 0),m=(0,n.ref)(null),p=(0,n.ref)(null),v=(0,n.ref)(!1),h=()=>{c.includes(m.value?.getMode())&&m.value?.expandAll()},g=()=>{let e=m.value.getText();e||(s.value=void 0,m.value.set(void 0),a("update:modelValue",""),a("change",""),v.value=!0,(0,l.dY)(()=>{v.value=!1}));try{s.value=JSON.parse(e),a("update:modelValue",JSON.stringify(s.value)),a("change",JSON.stringify(s.value)),v.value=!0,(0,l.dY)(()=>{v.value=!1})}catch{}},f=()=>{const e={...o,indentation:2,language:i,mode:t,modes:r,onChange:g,onModeChange:h};m.value=new(d())(p.value,e,s.value),s.value?m.value.set(s.value):m.value.set(void 0)};return(0,l.wB)(u,e=>{s.value=e?JSON.parse(e):void 0}),(0,l.KC)(()=>{u.value&&(s.value=JSON.parse(u.value))}),(0,l.sV)(()=>{f()}),{jsonEditorVue:p}}},p=t(71241);const v=(0,p.A)(m,[["render",u]]);var h=v,g=h},35049:function(e,a,t){"use strict";t.r(a);var l=t(31601),o=t.n(l),u=t(76314),n=t.n(u),s=n()(o());s.push([e.id,".CustomCmd[data-v-5b835f00] .editor-block .code{border:1px solid #dcdfe6}",""]),a["default"]=s},43988:function(e,a,t){"use strict";t.d(a,{A:function(){return Y}});var l=t(56768);const o={class:"SearchData"};function u(e,a,t,u,n,s){const d=(0,l.g2)("el-option"),r=(0,l.g2)("el-select"),i=(0,l.g2)("CmdList"),c=(0,l.g2)("CustomCmd"),m=(0,l.g2)("CacheList"),p=(0,l.g2)("CustomApi"),v=(0,l.g2)("MockList");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(r,{class:"sourceModule",modelValue:u.sourceModule,"onUpdate:modelValue":a[0]||(a[0]=e=>u.sourceModule=e)},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(u.sourceModelList,e=>((0,l.uX)(),(0,l.CE)(l.FK,{key:e.val},[u.checkOption(e)?((0,l.uX)(),(0,l.Wv)(d,{key:0,value:e.val,label:e.label},null,8,["value","label"])):(0,l.Q3)("",!0)],64))),128))]),_:1},8,["modelValue"]),"CMD"===u.sourceModule?((0,l.uX)(),(0,l.Wv)(i,{key:0,paramsData:u.paramsData,storeCMDList:u.storeCMDList,onUpdate:u.changeData},null,8,["paramsData","storeCMDList","onUpdate"])):"customCmd"===u.sourceModule?((0,l.uX)(),(0,l.Wv)(c,{key:1,paramsData:u.paramsData,onUpdate:u.changeData},null,8,["paramsData","onUpdate"])):"cache"===u.sourceModule?((0,l.uX)(),(0,l.Wv)(m,{key:2,paramsData:u.paramsData,cacheList:u.cacheList,onUpdate:u.changeData},null,8,["paramsData","cacheList","onUpdate"])):"customApi"===u.sourceModule?((0,l.uX)(),(0,l.Wv)(p,{key:3,paramsData:u.paramsData,onUpdate:u.changeData},null,8,["paramsData","onUpdate"])):"mock"===u.sourceModule?((0,l.uX)(),(0,l.Wv)(v,{key:4,paramsData:u.paramsData,onUpdate:u.changeData},null,8,["paramsData","onUpdate"])):(0,l.Q3)("",!0)])}var n=t(90144);const s={class:"CacheList"};function d(e,a,t,o,u,n){const d=(0,l.g2)("el-option"),r=(0,l.g2)("el-select");return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.bF)(r,{modelValue:o.cacheName,"onUpdate:modelValue":a[0]||(a[0]=e=>o.cacheName=e),placeholder:"select cache",teleported:!1,onChange:o.changeName,clearable:""},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.cacheList,e=>((0,l.uX)(),(0,l.Wv)(d,{key:e,value:e,label:e},null,8,["value","label"]))),128))]),_:1},8,["modelValue","onChange"])])}var r={name:"CacheList",props:{cacheList:Array,paramsData:Object},emits:["update"],setup(e,{emit:a}){const t=(0,l.EW)(()=>e?e.paramsData:{}),o=(0,n.ref)(t.value?t.value.cacheName:""),u=e=>{a("update",e?{cacheName:e}:null)};return(0,l.wB)(t,(e,a)=>{a||(o.value=e?e.cacheName:"")},{deep:!0}),{cacheName:o,changeName:u}}},i=t(71241);const c=(0,i.A)(r,[["render",d]]);var m=c,p=t(24232);const v={class:"CmdList"};function h(e,a,t,o,u,n){const s=(0,l.g2)("el-option"),d=(0,l.g2)("el-select");return(0,l.uX)(),(0,l.CE)("div",v,[(0,l.bF)(d,{modelValue:o.cmd,"onUpdate:modelValue":a[0]||(a[0]=e=>o.cmd=e),filterable:"",clearable:"","default-first-option":"",placeholder:"select Data",onChange:o.changeData},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.storeCMDList,e=>((0,l.uX)(),(0,l.Wv)(s,{label:e.name,value:e.id,key:e.id},{default:(0,l.k6)(()=>[(0,l.eW)((0,p.toDisplayString)(e.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])}t(18111),t(20116);var g={name:"CmdList",props:{paramsData:Object,storeCMDList:Array},emits:["update"],setup(e,{emit:a}){const t=(0,l.EW)(()=>e?e.paramsData:{}),o=(0,l.EW)(()=>e?e.storeCMDList:[]),u=(0,n.ref)(null),s=e=>{const t=o.value.find(a=>a.id===e),l=t?t.cmd:"";a("update",l?{cmd:l}:null)};return(0,l.wB)(t,(e,a)=>{if(!a){const a=o.value.find(a=>a.cmd===e.cmd);u.value=a?a.id:void 0}},{deep:!0}),(0,l.wB)(o,e=>{const a=e.value.find(e=>e.cmd===t.value.cmd);u.value=a?a.id:void 0}),{cmd:u,changeData:s}}};const f=(0,i.A)(g,[["render",h]]);var C=f,b=t(45130);const D={class:"CustomApi"};function y(e,a,t,o,u,n){const s=(0,l.g2)("el-option"),d=(0,l.g2)("el-select"),r=(0,l.g2)("el-input"),i=(0,l.g2)("JsonEditor"),c=(0,l.g2)("el-popover"),m=(0,l.g2)("el-button");return(0,l.uX)(),(0,l.CE)("div",D,[(0,l.bF)(d,{class:"method",modelValue:o.method,"onUpdate:modelValue":a[0]||(a[0]=e=>o.method=e),placeholder:"method"},{default:(0,l.k6)(()=>[(0,l.bF)(s,{label:"GET",value:"get"}),(0,l.bF)(s,{label:"POST",value:"post"})]),_:1},8,["modelValue"]),(0,l.bF)(c,{width:o.postBodyWidth,trigger:"click",visible:o.visible,"onUpdate:visible":a[3]||(a[3]=e=>o.visible=e),"show-arrow":!1,placement:"bottom-start",disabled:"post"!==o.method,"popper-style":"padding:0"},{reference:(0,l.k6)(()=>[(0,l.bF)(r,{class:"url",ref:"inputRef",modelValue:o.url,"onUpdate:modelValue":a[1]||(a[1]=e=>o.url=e),placeholder:"API 網址",clearable:"",onClick:o.openPopover,onKeydown:(0,b.jR)(o.changeData,["enter"])},null,8,["modelValue","onClick","onKeydown"])]),default:(0,l.k6)(()=>[(0,l.bF)(i,{modelValue:o.postBody,"onUpdate:modelValue":a[2]||(a[2]=e=>o.postBody=e),style:{height:"200px"},options:{mainMenuBar:!1,statusBar:!1}},null,8,["modelValue"])]),_:1},8,["width","visible","disabled"]),(0,l.bF)(m,{class:"send",type:"primary",onClick:o.changeData},{default:(0,l.k6)(()=>[...a[4]||(a[4]=[(0,l.eW)("Send",-1)])]),_:1},8,["onClick"])])}var _=t(16450),k={name:"CustomApi",components:{JsonEditor:_.A},props:{paramsData:Object},emits:["update"],setup(e,{emit:a}){const t=(0,l.EW)(()=>e.paramsData||{}),o=(0,n.ref)(t.value.method||"get"),u=(0,n.ref)(t.value.url||""),s=(0,n.ref)(t.value.postBody||""),d=(0,n.ref)(null),r=(0,n.ref)(600),i=(0,n.ref)(!1),c=async()=>{if(await(0,l.dY)(),u.value){const e={method:o.value,url:u.value};s.value&&"post"===o.value&&(e.postBody=s.value),a("update",e)}else a("update",null)},m=e=>{e.stopPropagation(),e.preventDefault(),setTimeout(()=>{i.value=!0},200)};return(0,l.wB)(t,(e,a)=>{a||(o.value=e?e.method:"get",u.value=e?e.url:"",s.value=e?e.postBody:"")},{deep:!0}),(0,l.sV)(async()=>{await(0,l.dY)(),r.value=d.value.ref.offsetWidth+22}),{changeData:c,method:o,url:u,postBody:s,inputRef:d,postBodyWidth:r,openPopover:m,visible:i}}};const L=(0,i.A)(k,[["render",y]]);var V=L;const M={class:"CustomCmd"};function w(e,a,t,o,u,n){const s=(0,l.g2)("CustomEditor"),d=(0,l.g2)("el-button"),r=(0,l.g2)("Timepicker");return(0,l.uX)(),(0,l.CE)("div",M,[((0,l.uX)(),(0,l.Wv)(s,{key:o.timestamp,modelValue:o.storeCMDCode.cmd,"onUpdate:modelValue":a[0]||(a[0]=e=>o.storeCMDCode.cmd=e),language:"cmd",editorOptions:o.editorOptions,enableDynamicHeight:!0,dynamicHeightLimitation:o.dynamicHeightLimitation,onUpdate:o.handleUpdate},null,8,["modelValue","editorOptions","dynamicHeightLimitation","onUpdate"])),(0,l.bF)(d,{class:"send",type:"primary",onClick:o.changeData},{default:(0,l.k6)(()=>[...a[2]||(a[2]=[(0,l.eW)("Send",-1)])]),_:1},8,["onClick"]),(0,l.bF)(r,{modelValue:o.time,"onUpdate:modelValue":a[1]||(a[1]=e=>o.time=e),paramsList:o.paramsList,cmdParams:o.cmdParams,onUpdatetime:o.updatetime},null,8,["modelValue","paramsList","cmdParams","onUpdatetime"])])}var E=t(5614),U=t(4249),A=t(39325),W={name:"CustomCmd",components:{Timepicker:E.A},props:{paramsData:Object},emits:["update"],setup(e,{emit:a}){const t=(0,U.Pj)(),o=(0,n.ref)(!1),u=(0,n.ref)(0),s={scrollBeyondLastLine:!1,padding:{top:5,bottom:5},lineNumbers:"off",minimap:{enabled:!1},wordWrap:"on",fontSize:15},d={minHeight:32,maxHeight:600},r=(0,l.EW)(()=>e?e.paramsData:null),i=(0,n.reactive)({cmd:r.value&&r.value.cmd?r.value.cmd:"",start_time:r.value&&r.value.start_time?r.value.start_time:"",end_time:r.value&&r.value.end_time?r.value.end_time:""}),c=(0,n.ref)(null),m=(0,n.ref)(null),p=(0,l.EW)(()=>{const e=t.state.group.userMenu,a=t.state.dashboard.customMenuList;return[...e,...a].filter(e=>"cmdParams"===e.type&&e.parameter.defaultTime&&A.Ay.currentRoute.value.name===e.category)}),v=e=>{i.cmd=e},h=async e=>{i.start_time=e[0],i.end_time=e[1],e[2]?m.value=e[2]:m.value=null,e[0]||e[1]||(c.value=null),await(0,l.dY)(),g()},g=()=>{if(i.cmd){const e={cmd:i.cmd,start_time:i.start_time,end_time:i.end_time,cmdParams:m.value};a("update",e)}else a("update",null)};return(0,l.wB)(r,(e,a)=>{if(!a){if(i.cmd=e?e.cmd:"",i.start_time=e?e.start_time:"",i.end_time=e?e.end_time:"",e&&e.cmdParams){const a=e.cmdParams,l=t.state.params?t.state.params.params:{};a&&l[a]&&(m.value=a,i.start_time=l[a].start_time,i.end_time=l[a].end_time)}i.start_time&&i.end_time&&(c.value=[i.start_time,i.end_time]),u.value=(new Date).getTime()}},{deep:!0}),(0,l.KC)(()=>{if(r.value&&r.value.cmdParams){const e=r.value.cmdParams,a=t.state.params?t.state.params.params:{};e&&a[e]&&(m.value=e,i.start_time=a[e].start_time,i.end_time=a[e].end_time)}i.start_time&&i.end_time&&(c.value=[i.start_time,i.end_time])}),{storeCMDCode:i,editorOptions:s,dynamicHeightLimitation:d,handleUpdate:v,loading:o,changeData:g,updatetime:h,paramsList:p,time:c,cmdParams:m,timestamp:u}}};t(44718);const F=(0,i.A)(W,[["render",w],["__scopeId","data-v-5b835f00"]]);var S=F;const X={class:"MockList"};function B(e,a,t,o,u,n){const s=(0,l.g2)("el-option"),d=(0,l.g2)("el-select");return(0,l.uX)(),(0,l.CE)("div",X,[(0,l.bF)(d,{modelValue:o.dataSource,"onUpdate:modelValue":a[0]||(a[0]=e=>o.dataSource=e),onChange:o.changeData,clearable:""},{default:(0,l.k6)(()=>[(0,l.bF)(s,{value:"data1",label:"data1"}),(0,l.bF)(s,{value:"data2",label:"data2"}),(0,l.bF)(s,{value:"data3",label:"data3"}),(0,l.bF)(s,{value:"data4",label:"data4"}),(0,l.bF)(s,{value:"data5",label:"data5"}),(0,l.bF)(s,{value:"data6",label:"data6"})]),_:1},8,["modelValue","onChange"])])}var O={name:"MockList",props:{cacheList:Array,paramsData:Object},setup(e,{emit:a}){const t=(0,l.EW)(()=>e?e.paramsData:{}),o=(0,n.ref)(t.value?t.value.dataSource:""),u=async e=>{a("update",e?{dataSource:e}:null)};return(0,l.wB)(t,(e,a)=>{a||(o.value=e?e.dataSource:"")},{deep:!0}),{dataSource:o,changeData:u}}};const P=(0,i.A)(O,[["render",B]]);var N=P,j=t(77187),J=t(51324),K=t(76134),T={name:"SearchData",components:{CmdList:C,CustomCmd:S,CacheList:m,CustomApi:V,MockList:N},props:{modelValue:{default:null}},setup(e,{emit:a}){const t=(0,l.EW)(()=>e?e.modelValue:null),o=(0,n.ref)(t.value?t.value.model:"customCmd"),u=(0,n.ref)(t.value?t.value.params:null),s=(0,n.ref)([]),d=(0,n.ref)([]),r=async e=>{u.value=e,await(0,l.dY)();let t=e?{model:o.value,params:e}:"";a("update:modelValue",t),a("update",t)},i=async()=>{try{d.value=await J.A.getList()}catch{}},c=e=>("CMD"!==e.val||0!==s.value.length)&&("cache"!==e.val||0!==d.value.length),m=async()=>{try{s.value=await j.A.getList()}catch{}};return(0,l.wB)(t,(e,a)=>{a||(o.value=e.model,u.value=e.params)},{deep:!0}),(0,l.KC)(()=>{m()}),(0,l.sV)(()=>{i()}),{changeData:r,sourceModule:o,sourceModelList:K.Ph,paramsData:u,storeCMDList:s,cacheList:d,checkOption:c}}};const x=(0,i.A)(T,[["render",u]]);var H=x,Y=H},44718:function(e,a,t){var l=t(35049);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var o=t(68459).A;o("20642831",l,!0,{sourceMap:!1,shadowMode:!1})}}]);