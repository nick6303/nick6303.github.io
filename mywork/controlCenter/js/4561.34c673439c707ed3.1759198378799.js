(self["webpackChunkcontrol_center"]=self["webpackChunkcontrol_center"]||[]).push([[4561],{39890:function(e,t,a){var r=a(87783);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(68459).A;o("67efebc2",r,!0,{sourceMap:!1,shadowMode:!1})},64561:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return F}});var r=a(56768),o=a(24232);const n={class:"panelContent EditImage"},l={class:"contentWrapper"},i={class:"left"},d={class:"row"},m={class:"right"},p={class:"preview"},c={class:"buttonWrapper"};function u(e,t,a,u,s,g){const f=(0,r.g2)("el-radio"),b=(0,r.g2)("el-radio-group"),h=(0,r.g2)("el-form-item"),k=(0,r.g2)("el-divider"),I=(0,r.g2)("el-tooltip"),v=(0,r.g2)("el-input"),w=(0,r.g2)("AngleSelector"),y=(0,r.g2)("el-checkbox"),C=(0,r.g2)("ImgUpload"),D=(0,r.g2)("el-form"),E=(0,r.g2)("el-button");return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.Lk)("div",l,[(0,r.bF)(D,{class:"contentInner",ref:"editForm",model:u.formData,rules:u.rules},{default:(0,r.k6)(()=>[(0,r.Lk)("div",i,[(0,r.bF)(h,{label:"樣式"},{default:(0,r.k6)(()=>[(0,r.bF)(b,{modelValue:u.formData.parameter.isBorder,"onUpdate:modelValue":t[0]||(t[0]=e=>u.formData.parameter.isBorder=e)},{default:(0,r.k6)(()=>[(0,r.bF)(f,{label:!1},{default:(0,r.k6)(()=>[...t[9]||(t[9]=[(0,r.eW)("普通圖片",-1)])]),_:1}),(0,r.bF)(f,{label:!0},{default:(0,r.k6)(()=>[...t[10]||(t[10]=[(0,r.eW)("邊框圖片(border-image)",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,r.bF)(k),u.formData.parameter.isBorder?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.bF)(h,{"label-width":140},{label:(0,r.k6)(()=>[t[12]||(t[12]=(0,r.eW)("border-image",-1)),(0,r.bF)(I,{effect:"dark",content:"開啟解說",placement:"right"},{default:(0,r.k6)(()=>[...t[11]||(t[11]=[(0,r.Lk)("a",{target:"_blank",href:"https://www.runoob.com/cssref/css3-pr-border-image.html"},[(0,r.Lk)("i",{class:"el-icon-question"})],-1)])]),_:1})]),default:(0,r.k6)(()=>[(0,r.bF)(v,{modelValue:u.formData.parameter.borderImage,"onUpdate:modelValue":t[1]||(t[1]=e=>u.formData.parameter.borderImage=e)},null,8,["modelValue"])]),_:1}),(0,r.bF)(h,{"label-width":140},{label:(0,r.k6)(()=>[t[14]||(t[14]=(0,r.eW)("border-width",-1)),(0,r.bF)(I,{effect:"dark",content:"開啟解說",placement:"right"},{default:(0,r.k6)(()=>[...t[13]||(t[13]=[(0,r.Lk)("a",{target:"_blank",href:"https://www.runoob.com/cssref/pr-border-width.html"},[(0,r.Lk)("i",{class:"el-icon-question"})],-1)])]),_:1})]),default:(0,r.k6)(()=>[(0,r.bF)(v,{modelValue:u.formData.parameter.borderWidth,"onUpdate:modelValue":t[2]||(t[2]=e=>u.formData.parameter.borderWidth=e)},null,8,["modelValue"])]),_:1})],64)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.bF)(h,{label:"圖片傾斜"},{default:(0,r.k6)(()=>[(0,r.Lk)("div",d,[(0,r.bF)(w,{modelValue:u.formData.parameter.rotateX,"onUpdate:modelValue":t[3]||(t[3]=e=>u.formData.parameter.rotateX=e),prependHtml:"X軸"},null,8,["modelValue"]),t[15]||(t[15]=(0,r.eW)("，",-1)),(0,r.bF)(w,{modelValue:u.formData.parameter.rotateY,"onUpdate:modelValue":t[4]||(t[4]=e=>u.formData.parameter.rotateY=e),prependHtml:"Y軸"},null,8,["modelValue"]),t[16]||(t[16]=(0,r.eW)("，",-1)),(0,r.bF)(w,{modelValue:u.formData.parameter.rotateZ,"onUpdate:modelValue":t[5]||(t[5]=e=>u.formData.parameter.rotateZ=e),prependHtml:"Z軸"},null,8,["modelValue"])])]),_:1}),(0,r.bF)(h,{label:"圖片大小"},{default:(0,r.k6)(()=>[(0,r.bF)(y,{modelValue:u.formData.parameter.imageSize,"onUpdate:modelValue":t[6]||(t[6]=e=>u.formData.parameter.imageSize=e)},{default:(0,r.k6)(()=>[...t[17]||(t[17]=[(0,r.eW)("維持比例",-1)])]),_:1},8,["modelValue"])]),_:1}),u.formData.parameter.imageSize?((0,r.uX)(),(0,r.Wv)(h,{key:0,label:"圖片位置"},{default:(0,r.k6)(()=>[(0,r.bF)(v,{modelValue:u.formData.parameter.imagePosition,"onUpdate:modelValue":t[7]||(t[7]=e=>u.formData.parameter.imagePosition=e),placeholder:"center"},null,8,["modelValue"])]),_:1})):(0,r.Q3)("",!0)],64))]),(0,r.Lk)("div",m,[(0,r.bF)(h,{class:"img",label:"圖片上傳"},{default:(0,r.k6)(()=>[(0,r.bF)(C,{modelValue:u.formData.parameter.src,"onUpdate:modelValue":t[8]||(t[8]=e=>u.formData.parameter.src=e),nopreview:"",hasGallery:"",onChange:u.updateImgSrc},null,8,["modelValue","onChange"]),(0,r.Lk)("div",p,[u.formData.parameter.isBorder?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"borderBox",style:(0,o.normalizeStyle)({borderImage:`url(${u.formData.parameter.src}) ${u.formData.parameter.borderImage}`,borderWidth:u.formData.parameter.borderWidth})},null,4)):((0,r.uX)(),(0,r.CE)("div",{key:1,class:"normalImage",style:(0,o.normalizeStyle)({transform:u.rotate,backgroundImage:`url(${u.formData.parameter.src})`,backgroundSize:u.formData.parameter.imageSize?"contain":"100% 100%",backgroundPosition:u.formData.parameter.imagePosition?u.formData.parameter.imagePosition:"center"})},null,4))])]),_:1})])]),_:1},8,["model","rules"])]),(0,r.Lk)("div",c,[(0,r.bF)(E,{type:"danger",onClick:u.closePanel},{default:(0,r.k6)(()=>[...t[18]||(t[18]=[(0,r.eW)("取消",-1)])]),_:1},8,["onClick"]),(0,r.bF)(E,{type:"success",onClick:u.checkValidate},{default:(0,r.k6)(()=>[...t[19]||(t[19]=[(0,r.Lk)("span",null,"儲存",-1)])]),_:1},8,["onClick"])])])}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function g(e,t){if("object"!=s(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(e){var t=g(e,"string");return"symbol"==s(t)?t:t+""}function b(e,t,a){return(t=f(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(18111),a(7588);var h=a(90144),k=a(7118),I=a(78626),v=a(51219),w=a(7681),y=a(59429);class C{constructor(){b(this,"width",window.innerWidth),b(this,"height",window.innerHeight-130),b(this,"Wpercent",this.width/100),b(this,"Hpercent",this.height/100)}}const D=new C;var E={name:"EditImage",components:{AngleSelector:y.A},props:{configProps:{type:Object,default:null}},setup(e,{emit:t}){const a=(0,h.ref)(!1),o=(0,h.ref)(null),n=(0,r.EW)(()=>e?e.configProps.info:{}),l=(0,h.reactive)({height:0,width:0}),i=(0,h.reactive)({title:"",width:"",height:"",parameter:{src:"",isBorder:!1,borderImage:"",borderWidth:"",rotateX:void 0,rotateY:void 0,rotateZ:void 0,imageSize:!1,imagePosition:""}}),d=(0,r.EW)(()=>{const e=i.parameter.rotateX?`rotateX(${i.parameter.rotateX}deg)`:"",t=i.parameter.rotateY?`rotateY(${i.parameter.rotateY}deg)`:"",a=i.parameter.rotateZ?`rotateZ(${i.parameter.rotateZ}deg)`:"";return`${e} ${t} ${a}`}),m=(0,k.Q4)(i),p=()=>{o.value.validate(e=>{e&&c()})},c=async()=>{const e=(0,I.cloneDeep)(n.value);Object.assign(e,{...i,refreshApi:{time:0,isEnabled:!1}});try{let a,r="資料更新成功";e.id?a=await w.A.updatePartOf(e,e.id):(a=await w.A.addItem(e),r="資料新增成功"),(0,v.nk)({type:"success",message:r}),t("event-emit",{name:"refresh-page",props:a}),u()}catch{}},u=()=>{t("close")},s=e=>{i.parameter.src=e.imageData,i.title=e.file.name,i.width=e.width/D.width*100+"%",i.height=e.height/D.height*100+"%",l.width=e.width,l.height=e.height},g=()=>{Object.keys(i).forEach(e=>{n.value[e]&&("parameter"===e?Object.keys(i.parameter).forEach(e=>{n.value.parameter[e]&&(i.parameter[e]=n.value.parameter[e])}):i[e]=(0,I.cloneDeep)(n.value[e]))})};return(0,r.sV)(()=>{g()}),{closePanel:u,loading:a,editForm:o,rules:m,formData:i,checkValidate:p,updateImgSrc:s,size:l,rotate:d}}},_=(a(39890),a(71241));const V=(0,_.A)(E,[["render",u]]);var F=V},87783:function(e,t,a){"use strict";a.r(t);var r=a(31601),o=a.n(r),n=a(76314),l=a.n(n),i=l()(o());i.push([e.id,".panelContent.EditImage .contentInner{display:flex}.panelContent.EditImage .contentInner .el-divider{margin-top:0}.panelContent.EditImage .contentInner .left{width:calc(100% - 450px);margin-right:50px}.panelContent.EditImage .contentInner .left .el-form-item__label{width:80px}.panelContent.EditImage .contentInner .left .angle .append,.panelContent.EditImage .contentInner .left .angle .prepend{background-color:var(--el-background-color-base);color:var(--el-color-info);vertical-align:middle;display:table-cell;position:relative;border:1px solid #dcdfe6;border-radius:4px;padding:0 20px;width:1px;white-space:nowrap}.panelContent.EditImage .contentInner .left .angle .prepend{border-right:0;border-top-right-radius:0;border-bottom-right-radius:0}.panelContent.EditImage .contentInner .left .angle .append{border-left:0;border-top-left-radius:0;border-bottom-left-radius:0}.panelContent.EditImage .contentInner .left .angle .AngleSelector{display:table-cell;border:1px solid #dcdfe6}.panelContent.EditImage .contentInner .left .el-input-group__append,.panelContent.EditImage .contentInner .left .el-input-group__prepend{padding:0 10px}.panelContent.EditImage .contentInner .right{width:400px}.panelContent.EditImage .contentInner .right .img{flex-direction:column;align-items:flex-start}.panelContent.EditImage .contentInner .right .img .el-form-item__label{width:auto;padding-bottom:10px}.panelContent.EditImage .contentInner .right .img .el-form-item__content{position:relative;flex:none}.panelContent.EditImage .contentInner .right .img .preview{position:absolute;top:0;left:0;width:400px;height:400px;display:flex;justify-content:center;align-items:center;z-index:0}.panelContent.EditImage .contentInner .right .img .preview .borderBox{width:100%;height:100%;border-style:solid}.panelContent.EditImage .contentInner .right .img .preview .normalImage{width:100%;height:100%;background-repeat:no-repeat}.panelContent.EditImage .ImgUpload{position:relative;z-index:1}.panelContent.EditImage .ImgUpload .el-upload-dragger{min-width:400px;min-height:400px;background-color:transparent}",""]),t["default"]=i}}]);