function header(){$.ajax({url:"../../views/layout/header.html"}).done(function(t){$("header").html(t),load.hd(),openNavMenu()})}function footer(){$.ajax({url:"../../views/layout/footer.html"}).done(function(t){$("footer").html(t),load.ft()})}function BackToTop(){$(".goTop").click(function(){$("html,body").animate({scrollTop:0},1500,"easeOutCubic")}),$(".ft_scrollTop").click(function(){$("html,body").animate({scrollTop:0},2e3,"easeOutCubic")})}function headerWordColor(){"whiteBg"==$(".banner ._slick ul li:first-child img").data("color")&&$(".banner").addClass("whiteBg");var o=document.querySelectorAll(".banner ._slick ul li");$(".banner ._slick ul").on("beforeChange",function(t,e,i,n){"whiteBg"==$(o[n]).find("img").data("color")?$(".banner").addClass("whiteBg"):$(".banner").removeClass("whiteBg")}),"whiteBg"==$(".banner .banner_img img").data("color")&&($("header,.header").addClass("whiteBg"),$(".banner").addClass("whiteBg")),hasBannerText()}function hasBannerText(){var o=document.querySelectorAll(".banner ._slick ul li");$(o[0]).data("hastext")||$(".banner_slick_text").css("display","none"),$(".banner ._slick ul").on("beforeChange",function(t,e,i,n){$(o[n]).data("hastext")?$(".banner_slick_text").css("display","flex"):$(".banner_slick_text").css("display","none")})}function headerFixed(){var n=$("main article:first-child").height(),t=parseInt($("main article:first-child").css("padding-top")),e=parseInt($("main article:first-child").css("padding-bottom")),o=n+t+e,r=$("header").height(),s=0;$(window).scroll(function(){var t=$(this).scrollTop(),e=t<s,i=$(window).scrollTop();r<=i?$("header").addClass("prepare"):i<r&&$("header").removeClass("prepare"),o<i&&e?$("header").addClass("fixed"):i<=n?$("header").removeClass("fixed"):e||$("header").removeClass("fixed"),setTimeout(function(){s=t},100)})}function bannerScrollDown(){$(".banner_scrollDown").click(function(){$("html,body").animate({scrollTop:$("main article:first-child").height()},1e3,"easeOutCubic")})}function appleDebug(){window.onpageshow=function(t){t.persisted&&window.location.reload()}}function scrollMove(t,e){var i="translateY("+document.querySelector(t).getBoundingClientRect().top*e+"px)";$(t).css("transform",i)}function wordAnimation(t,e,n){var o=$(t).text();$(t).text("");for(var r=o.split(" "),s="",a=0;a<r.length;a++){var l=r[a].split(""),c="";for(i=0;i<l.length;i++)c=c+"<i style='animation-delay:"+(e+n*i)+"s'>"+l[i]+"</i>";s=s+"<span>"+c+"</span>"}$(t).append(s)}function openNavMenu(){$(".burger").click(function(){ajaxNavMenu()})}function ajaxNavMenu(){$("body").append("<article class='navMenu'></article>"),$.ajax({url:"../../views/layout/navMenu.html"}).done(function(t){$(".navMenu").html(t),$(".navMenu").addClass("open"),navMenu.all()})}function openPrivacy(){$(".openPrivacy").click(function(){ajaxPrivacy()})}function ajaxPrivacy(){$("body").append("<article class='privacy'></article>"),$.ajax({url:"../../views/layout/privacy.html"}).done(function(t){$(".privacy").html(t),$(".privacy").addClass("open"),privacy.all()})}function bodyscrollbar(){1024<$(window).width()&&$("body").niceScroll({zindex:"3",scrollspeed:40,cursorborder:"none",cursorwidth:"4px",preventmultitouchscrolling:!1,railpadding:{top:0,right:2,left:0,bottom:0}})}function nocopy(){function e(t){t.preventDefault(),alert("想copy我的寫法? 這樣母湯喔!!")}document.addEventListener("contextmenu",function(t){e(t)},!1),document.addEventListener("keydown",function(t){123==event.keyCode&&e(t)})}function onPlayerReady(){return $videoApi="1","video"==$videoId&&1===$firstLoad&&mobile&&(player1.playVideo(),$indexSilder.slick("slickPause")),$videoApi}function onPlayerStateChange(t){if(1===$indexSilder.find(".slick-current").has("#player1").length)switch($state1=player1.getPlayerState(),$state1){case 0:$(".video-item[data-value="+$videoId+"]").removeClass("on"),$indexSilder.slick("slickPlay");break;case 1:$(".video-item[data-value="+$videoId+"]").addClass("on")}if(1===$indexSilder.find(".slick-current").has("#player2").length)switch($state2=player2.getPlayerState(),$state2){case 0:$(".video-item[data-value="+$videoId+"]").removeClass("on"),$indexSilder.slick("slickPlay");break;case 1:$(".video-item[data-value="+$videoId+"]").addClass("on")}}function videoLiboxClose(){$(".videoLibox").removeClass("open"),$(".videoLibox").addClass("close"),setTimeout(function(){$(".videoLibox").remove(),$indexSilder.slick("slickPlay")},1e3)}function openReservationLibox(){$("body").append("<article class='reservationLibox'></article>"),$(".reservationLibox").addClass("open"),$(".reservationLibox").addClass("noSeat"),$.ajax({url:"../../views/reservation/reservationLibox.html"}).done(function(t){$(".reservationLibox").html(t),reservationLibox.all()})}function openCancelLibox(){$("body").append("<article class='cancelLibox'></article>"),$(".cancelLibox").addClass("open"),$.ajax({url:"../../views/reservation/cancelLibox.html"}).done(function(t){$(".cancelLibox").html(t),cancelLibox.all()})}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(S,t){function a(t){var e=!!t&&"length"in t&&t.length,i=Q.type(t);return"function"!==i&&!Q.isWindow(t)&&("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}function e(t,i,n){if(Q.isFunction(i))return Q.grep(t,function(t,e){return!!i.call(t,e,t)!==n});if(i.nodeType)return Q.grep(t,function(t){return t===i!==n});if("string"==typeof i){if(ct.test(i))return Q.filter(i,t,n);i=Q.filter(i,t)}return Q.grep(t,function(t){return-1<q.call(i,t)!==n})}function i(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function n(){j.removeEventListener("DOMContentLoaded",n),S.removeEventListener("load",n),Q.ready()}function o(){this.expando=Q.expando+o.uid++}function l(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(_t,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:wt.test(i)?Q.parseJSON(i):i)}catch(t){}bt.set(t,e,i)}else i=void 0;return i}function c(t,e,i,n){var o,r=1,s=20,a=n?function(){return n.cur()}:function(){return Q.css(t,e,"")},l=a(),c=i&&i[3]||(Q.cssNumber[e]?"":"px"),h=(Q.cssNumber[e]||"px"!==c&&+l)&&St.exec(Q.css(t,e));if(h&&h[3]!==c)for(c=c||h[3],i=i||[],h=+l||1;h/=r=r||".5",Q.style(t,e,h+c),r!==(r=a()/l)&&1!==r&&--s;);return i&&(h=+h||+l||0,o=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=h,n.end=o)),o}function m(t,e){var i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Q.nodeName(t,e)?Q.merge([t],i):i}function g(t,e){for(var i=0,n=t.length;i<n;i++)yt.set(t[i],"globalEval",!e||yt.get(e[i],"globalEval"))}function v(t,e,i,n,o){for(var r,s,a,l,c,h,u=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((r=t[p])||0===r)if("object"===Q.type(r))Q.merge(d,r.nodeType?[r]:r);else if(Rt.test(r)){for(s=s||u.appendChild(e.createElement("div")),a=(Ct.exec(r)||["",""])[1].toLowerCase(),l=kt[a]||kt._default,s.innerHTML=l[1]+Q.htmlPrefilter(r)+l[2],h=l[0];h--;)s=s.lastChild;Q.merge(d,s.childNodes),(s=u.firstChild).textContent=""}else d.push(e.createTextNode(r));for(u.textContent="",p=0;r=d[p++];)if(n&&-1<Q.inArray(r,n))o&&o.push(r);else if(c=Q.contains(r.ownerDocument,r),s=m(u.appendChild(r),"script"),c&&g(s),i)for(h=0;r=s[h++];)At.test(r.type||"")&&i.push(r);return u}function r(){return!0}function h(){return!1}function s(){try{return j.activeElement}catch(t){}}function u(t,e,i,n,o,r){var s,a;if("object"==typeof e){for(a in"string"!=typeof i&&(n=n||i,i=void 0),e)u(t,a,i,n,e[a],r);return t}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=h;else if(!o)return t;return 1===r&&(s=o,(o=function(t){return Q().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=Q.guid++)),t.each(function(){Q.event.add(this,e,o,n,i)})}function d(t,e){return Q.nodeName(t,"table")&&Q.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function b(t){var e=Bt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function p(t,e){var i,n,o,r,s,a,l,c;if(1===e.nodeType){if(yt.hasData(t)&&(r=yt.access(t),s=yt.set(e,r),c=r.events))for(o in delete s.handle,s.events={},c)for(i=0,n=c[o].length;i<n;i++)Q.event.add(e,o,c[o][i]);bt.hasData(t)&&(a=bt.access(t),l=Q.extend({},a),bt.set(e,l))}}function w(i,n,o,r){n=G.apply([],n);var t,e,s,a,l,c,h=0,u=i.length,d=u-1,p=n[0],f=Q.isFunction(p);if(f||1<u&&"string"==typeof p&&!K.checkClone&&Ht.test(p))return i.each(function(t){var e=i.eq(t);f&&(n[0]=p.call(this,t,e.html())),w(e,n,o,r)});if(u&&(e=(t=v(n,i[0].ownerDocument,!1,i,r)).firstChild,1===t.childNodes.length&&(t=e),e||r)){for(a=(s=Q.map(m(t,"script"),y)).length;h<u;h++)l=t,h!==d&&(l=Q.clone(l,!0,!0),a&&Q.merge(s,m(l,"script"))),o.call(i[h],l,h);if(a)for(c=s[s.length-1].ownerDocument,Q.map(s,b),h=0;h<a;h++)l=s[h],At.test(l.type||"")&&!yt.access(l,"globalEval")&&Q.contains(c,l)&&(l.src?Q._evalUrl&&Q._evalUrl(l.src):Q.globalEval(l.textContent.replace(Ft,"")))}return i}function f(t,e,i){for(var n,o=e?Q.filter(e,t):t,r=0;null!=(n=o[r]);r++)i||1!==n.nodeType||Q.cleanData(m(n)),n.parentNode&&(i&&Q.contains(n.ownerDocument,n)&&g(m(n,"script")),n.parentNode.removeChild(n));return t}function _(t,e){var i=Q(e.createElement(t)).appendTo(e.body),n=Q.css(i[0],"display");return i.detach(),n}function x(t){var e=j,i=Wt[t];return i||("none"!==(i=_(t,e))&&i||((e=(Ut=(Ut||Q("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentDocument).write(),e.close(),i=_(t,e),Ut.detach()),Wt[t]=i),i}function T(t,e,i){var n,o,r,s,a=t.style;return""!==(s=(i=i||Gt(t))?i.getPropertyValue(e)||i[e]:void 0)&&void 0!==s||Q.contains(t.ownerDocument,t)||(s=Q.style(t,e)),i&&!K.pixelMarginRight()&&$t.test(s)&&jt.test(e)&&(n=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=o,a.maxWidth=r),void 0!==s?s+"":s}function M(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function E(t){if(t in Jt)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=Kt.length;i--;)if((t=Kt[i]+e)in Jt)return t}function C(t,e,i){var n=St.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function A(t,e,i,n,o){for(var r=i===(n?"border":"content")?4:"width"===e?1:0,s=0;r<4;r+=2)"margin"===i&&(s+=Q.css(t,i+Tt[r],!0,o)),n?("content"===i&&(s-=Q.css(t,"padding"+Tt[r],!0,o)),"margin"!==i&&(s-=Q.css(t,"border"+Tt[r]+"Width",!0,o))):(s+=Q.css(t,"padding"+Tt[r],!0,o),"padding"!==i&&(s+=Q.css(t,"border"+Tt[r]+"Width",!0,o)));return s}function k(t,e,i){var n=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=Gt(t),s="border-box"===Q.css(t,"boxSizing",!1,r);if(o<=0||null==o){if(((o=T(t,e,r))<0||null==o)&&(o=t.style[e]),$t.test(o))return o;n=s&&(K.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+A(t,e,i||(s?"border":"content"),n,r)+"px"}function P(t,e){for(var i,n,o,r=[],s=0,a=t.length;s<a;s++)(n=t[s]).style&&(r[s]=yt.get(n,"olddisplay"),i=n.style.display,e?(r[s]||"none"!==i||(n.style.display=""),""===n.style.display&&Mt(n)&&(r[s]=yt.access(n,"olddisplay",x(n.nodeName)))):(o=Mt(n),"none"===i&&o||yt.set(n,"olddisplay",o?i:Q.css(n,"display"))));for(s=0;s<a;s++)(n=t[s]).style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?r[s]||"":"none"));return t}function L(t,e,i,n,o){return new L.prototype.init(t,e,i,n,o)}function R(){return S.setTimeout(function(){Qt=void 0}),Qt=Q.now()}function D(t,e){var i,n=0,o={height:t};for(e=e?1:0;n<4;n+=2-e)o["margin"+(i=Tt[n])]=o["padding"+i]=t;return e&&(o.opacity=o.width=t),o}function I(t,e,i){for(var n,o=(O.tweeners[e]||[]).concat(O.tweeners["*"]),r=0,s=o.length;r<s;r++)if(n=o[r].call(i,e,t))return n}function O(r,t,e){var i,s,n=0,o=O.prefilters.length,a=Q.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=Qt||R(),e=Math.max(0,c.startTime+c.duration-t),i=1-(e/c.duration||0),n=0,o=c.tweens.length;n<o;n++)c.tweens[n].run(i);return a.notifyWith(r,[c,i,e]),i<1&&o?e:(a.resolveWith(r,[c]),!1)},c=a.promise({elem:r,props:Q.extend({},t),opts:Q.extend(!0,{specialEasing:{},easing:Q.easing._default},e),originalProperties:t,originalOptions:e,startTime:Qt||R(),duration:e.duration,tweens:[],createTween:function(t,e){var i=Q.Tween(r,c.opts,t,e,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var e=0,i=t?c.tweens.length:0;if(s)return this;for(s=!0;e<i;e++)c.tweens[e].run(1);return t?(a.notifyWith(r,[c,1,0]),a.resolveWith(r,[c,t])):a.rejectWith(r,[c,t]),this}}),h=c.props;for(function(t,e){var i,n,o,r,s;for(i in t)if(o=e[n=Q.camelCase(i)],r=t[i],Q.isArray(r)&&(o=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),(s=Q.cssHooks[n])&&"expand"in s)for(i in r=s.expand(r),delete t[n],r)i in t||(t[i]=r[i],e[i]=o);else e[n]=o}(h,c.opts.specialEasing);n<o;n++)if(i=O.prefilters[n].call(c,r,h,c.opts))return Q.isFunction(i.stop)&&(Q._queueHooks(c.elem,c.opts.queue).stop=Q.proxy(i.stop,i)),i;return Q.map(h,I,c),Q.isFunction(c.opts.start)&&c.opts.start.call(r,c),Q.fx.timer(Q.extend(l,{elem:r,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function N(t){return t.getAttribute&&t.getAttribute("class")||""}function z(r){return function(t,e){"string"!=typeof t&&(e=t,t="*");var i,n=0,o=t.toLowerCase().match(mt)||[];if(Q.isFunction(e))for(;i=o[n++];)"+"===i[0]?(i=i.slice(1)||"*",(r[i]=r[i]||[]).unshift(e)):(r[i]=r[i]||[]).push(e)}}function H(e,o,r,s){function a(t){var n;return l[t]=!0,Q.each(e[t]||[],function(t,e){var i=e(o,r,s);return"string"!=typeof i||c||l[i]?c?!(n=i):void 0:(o.dataTypes.unshift(i),a(i),!1)}),n}var l={},c=e===Se;return a(o.dataTypes[0])||!l["*"]&&a("*")}function B(t,e){var i,n,o=Q.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&Q.extend(!0,t,n),t}function F(i,t,n,o){var e;if(Q.isArray(t))Q.each(t,function(t,e){n||Ce.test(i)?o(i,e):F(i+"["+("object"==typeof e&&null!=e?t:"")+"]",e,n,o)});else if(n||"object"!==Q.type(t))o(i,t);else for(e in t)F(i+"["+e+"]",t[e],n,o)}function U(t){return Q.isWindow(t)?t:9===t.nodeType&&t.defaultView}var W=[],j=S.document,$=W.slice,G=W.concat,V=W.push,q=W.indexOf,Y={},X=Y.toString,Z=Y.hasOwnProperty,K={},J="2.2.4",Q=function(t,e){return new Q.fn.init(t,e)},tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,et=/^-ms-/,it=/-([\da-z])/gi,nt=function(t,e){return e.toUpperCase()};Q.fn=Q.prototype={jquery:J,constructor:Q,selector:"",length:0,toArray:function(){return $.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:$.call(this)},pushStack:function(t){var e=Q.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return Q.each(this,t)},map:function(i){return this.pushStack(Q.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return this.pushStack($.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:V,sort:W.sort,splice:W.splice},Q.extend=Q.fn.extend=function(){var t,e,i,n,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||Q.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=s[e],s!==(n=t[e])&&(c&&n&&(Q.isPlainObject(n)||(o=Q.isArray(n)))?(o?(o=!1,r=i&&Q.isArray(i)?i:[]):r=i&&Q.isPlainObject(i)?i:{},s[e]=Q.extend(c,r,n)):void 0!==n&&(s[e]=n));return s},Q.extend({expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===Q.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!Q.isArray(t)&&0<=e-parseFloat(e)+1},isPlainObject:function(t){var e;if("object"!==Q.type(t)||t.nodeType||Q.isWindow(t))return!1;if(t.constructor&&!Z.call(t,"constructor")&&!Z.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||Z.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Y[X.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;(t=Q.trim(t))&&(1===t.indexOf("use strict")?((e=j.createElement("script")).text=t,j.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(et,"ms-").replace(it,nt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var i,n=0;if(a(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(tt,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(a(Object(t))?Q.merge(i,"string"==typeof t?[t]:t):V.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:q.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;n++)t[o++]=e[n];return t.length=o,t},grep:function(t,e,i){for(var n=[],o=0,r=t.length,s=!i;o<r;o++)!e(t[o],o)!==s&&n.push(t[o]);return n},map:function(t,e,i){var n,o,r=0,s=[];if(a(t))for(n=t.length;r<n;r++)null!=(o=e(t[r],r,i))&&s.push(o);else for(r in t)null!=(o=e(t[r],r,i))&&s.push(o);return G.apply([],s)},guid:1,proxy:function(t,e){var i,n,o;return"string"==typeof e&&(i=t[e],e=t,t=i),Q.isFunction(t)?(n=$.call(arguments,2),(o=function(){return t.apply(e||this,n.concat($.call(arguments)))}).guid=t.guid=t.guid||Q.guid++,o):void 0},now:Date.now,support:K}),"function"==typeof Symbol&&(Q.fn[Symbol.iterator]=W[Symbol.iterator]),Q.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){Y["[object "+e+"]"]=e.toLowerCase()});var ot=function(i){function w(t,e,i,n){var o,r,s,a,l,c,h,u,d=e&&e.ownerDocument,p=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return i;if(!n&&((e?e.ownerDocument||e:H)!==P&&k(e),e=e||P,R)){if(11!==p&&(c=mt.exec(t)))if(o=c[1]){if(9===p){if(!(s=e.getElementById(o)))return i;if(s.id===o)return i.push(s),i}else if(d&&(s=d.getElementById(o))&&N(e,s)&&s.id===o)return i.push(s),i}else{if(c[2])return Z.apply(i,e.getElementsByTagName(t)),i;if((o=c[3])&&g.getElementsByClassName&&e.getElementsByClassName)return Z.apply(i,e.getElementsByClassName(o)),i}if(g.qsa&&!j[t+" "]&&(!D||!D.test(t))){if(1!==p)d=e,u=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(vt,"\\$&"):e.setAttribute("id",a=z),r=(h=S(t)).length,l=ht.test(a)?"#"+a:"[id='"+a+"']";r--;)h[r]=l+" "+m(h[r]);u=h.join(","),d=gt.test(t)&&f(e.parentNode)||e}if(u)try{return Z.apply(i,d.querySelectorAll(u)),i}catch(t){}finally{a===z&&e.removeAttribute("id")}}}return M(t.replace(rt,"$1"),e,i,n)}function t(){var n=[];return function t(e,i){return n.push(e+" ")>x.cacheLength&&delete t[n.shift()],t[e+" "]=i}}function l(t){return t[z]=!0,t}function o(t){var e=P.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function e(t,e){for(var i=t.split("|"),n=i.length;n--;)x.attrHandle[i[n]]=e}function c(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||G)-(~t.sourceIndex||G);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function n(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function r(i){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===i}}function s(s){return l(function(r){return r=+r,l(function(t,e){for(var i,n=s([],t.length,r),o=n.length;o--;)t[i=n[o]]&&(t[i]=!(e[i]=t[i]))})})}function f(t){return t&&void 0!==t.getElementsByTagName&&t}function a(){}function m(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function u(a,t,e){var l=t.dir,c=e&&"parentNode"===l,h=F++;return t.first?function(t,e,i){for(;t=t[l];)if(1===t.nodeType||c)return a(t,e,i)}:function(t,e,i){var n,o,r,s=[B,h];if(i){for(;t=t[l];)if((1===t.nodeType||c)&&a(t,e,i))return!0}else for(;t=t[l];)if(1===t.nodeType||c){if((n=(o=(r=t[z]||(t[z]={}))[t.uniqueID]||(r[t.uniqueID]={}))[l])&&n[0]===B&&n[1]===h)return s[2]=n[2];if((o[l]=s)[2]=a(t,e,i))return!0}}}function d(o){return 1<o.length?function(t,e,i){for(var n=o.length;n--;)if(!o[n](t,e,i))return!1;return!0}:o[0]}function _(t,e,i,n,o){for(var r,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(r=t[a])&&(i&&!i(r,n,o)||(s.push(r),c&&e.push(a)));return s}function y(p,f,m,g,v,t){return g&&!g[z]&&(g=y(g)),v&&!v[z]&&(v=y(v,t)),l(function(t,e,i,n){var o,r,s,a=[],l=[],c=e.length,h=t||function(t,e,i){for(var n=0,o=e.length;n<o;n++)w(t,e[n],i);return i}(f||"*",i.nodeType?[i]:i,[]),u=!p||!t&&f?h:_(h,a,p,i,n),d=m?v||(t?p:c||g)?[]:e:u;if(m&&m(u,d,i,n),g)for(o=_(d,l),g(o,[],i,n),r=o.length;r--;)(s=o[r])&&(d[l[r]]=!(u[l[r]]=s));if(t){if(v||p){if(v){for(o=[],r=d.length;r--;)(s=d[r])&&o.push(u[r]=s);v(null,d=[],o,n)}for(r=d.length;r--;)(s=d[r])&&-1<(o=v?J(t,s):a[r])&&(t[o]=!(e[o]=s))}}else d=_(d===e?d.splice(c,d.length):d),v?v(null,e,d,n):Z.apply(e,d)})}function p(t){for(var o,e,i,n=t.length,r=x.relative[t[0].type],s=r||x.relative[" "],a=r?1:0,l=u(function(t){return t===o},s,!0),c=u(function(t){return-1<J(o,t)},s,!0),h=[function(t,e,i){var n=!r&&(i||e!==E)||((o=e).nodeType?l(t,e,i):c(t,e,i));return o=null,n}];a<n;a++)if(e=x.relative[t[a].type])h=[u(d(h),e)];else{if((e=x.filter[t[a].type].apply(null,t[a].matches))[z]){for(i=++a;i<n&&!x.relative[t[i].type];i++);return y(1<a&&d(h),1<a&&m(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(rt,"$1"),e,a<i&&p(t.slice(a,i)),i<n&&p(t=t.slice(i)),i<n&&m(t))}h.push(e)}return d(h)}var h,g,x,v,b,S,T,M,E,C,A,k,P,L,R,D,I,O,N,z="sizzle"+1*new Date,H=i.document,B=0,F=0,U=t(),W=t(),j=t(),$=function(t,e){return t===e&&(A=!0),0},G=1<<31,V={}.hasOwnProperty,q=[],Y=q.pop,X=q.push,Z=q.push,K=q.slice,J=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},Q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",nt=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",ot=new RegExp(tt+"+","g"),rt=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),st=new RegExp("^"+tt+"*,"+tt+"*"),at=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),lt=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),ct=new RegExp(nt),ht=new RegExp("^"+et+"$"),ut={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+nt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+Q+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,pt=/^h\d$/i,ft=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,vt=/'|\\/g,yt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),bt=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},wt=function(){k()};try{Z.apply(q=K.call(H.childNodes),H.childNodes),q[H.childNodes.length].nodeType}catch(t){Z={apply:q.length?function(t,e){X.apply(t,K.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}for(h in g=w.support={},b=w.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},k=w.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:H;return n!==P&&9===n.nodeType&&n.documentElement&&(L=(P=n).documentElement,R=!b(P),(i=P.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",wt,!1):i.attachEvent&&i.attachEvent("onunload",wt)),g.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),g.getElementsByTagName=o(function(t){return t.appendChild(P.createComment("")),!t.getElementsByTagName("*").length}),g.getElementsByClassName=ft.test(P.getElementsByClassName),g.getById=o(function(t){return L.appendChild(t).id=z,!P.getElementsByName||!P.getElementsByName(z).length}),g.getById?(x.find.ID=function(t,e){if(void 0!==e.getElementById&&R){var i=e.getElementById(t);return i?[i]:[]}},x.filter.ID=function(t){var e=t.replace(yt,bt);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var i=t.replace(yt,bt);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===i}}),x.find.TAG=g.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):g.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},x.find.CLASS=g.getElementsByClassName&&function(t,e){return void 0!==e.getElementsByClassName&&R?e.getElementsByClassName(t):void 0},I=[],D=[],(g.qsa=ft.test(P.querySelectorAll))&&(o(function(t){L.appendChild(t).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||D.push("\\["+tt+"*(?:value|"+Q+")"),t.querySelectorAll("[id~="+z+"-]").length||D.push("~="),t.querySelectorAll(":checked").length||D.push(":checked"),t.querySelectorAll("a#"+z+"+*").length||D.push(".#.+[+~]")}),o(function(t){var e=P.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&D.push("name"+tt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),D.push(",.*:")})),(g.matchesSelector=ft.test(O=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&o(function(t){g.disconnectedMatch=O.call(t,"div"),O.call(t,"[s!='']:x"),I.push("!=",nt)}),D=D.length&&new RegExp(D.join("|")),I=I.length&&new RegExp(I.join("|")),e=ft.test(L.compareDocumentPosition),N=e||ft.test(L.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=e?function(t,e){if(t===e)return A=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!g.sortDetached&&e.compareDocumentPosition(t)===i?t===P||t.ownerDocument===H&&N(H,t)?-1:e===P||e.ownerDocument===H&&N(H,e)?1:C?J(C,t)-J(C,e):0:4&i?-1:1)}:function(t,e){if(t===e)return A=!0,0;var i,n=0,o=t.parentNode,r=e.parentNode,s=[t],a=[e];if(!o||!r)return t===P?-1:e===P?1:o?-1:r?1:C?J(C,t)-J(C,e):0;if(o===r)return c(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;s[n]===a[n];)n++;return n?c(s[n],a[n]):s[n]===H?-1:a[n]===H?1:0}),P},w.matches=function(t,e){return w(t,null,null,e)},w.matchesSelector=function(t,e){if((t.ownerDocument||t)!==P&&k(t),e=e.replace(lt,"='$1']"),g.matchesSelector&&R&&!j[e+" "]&&(!I||!I.test(e))&&(!D||!D.test(e)))try{var i=O.call(t,e);if(i||g.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return 0<w(e,P,null,[t]).length},w.contains=function(t,e){return(t.ownerDocument||t)!==P&&k(t),N(t,e)},w.attr=function(t,e){(t.ownerDocument||t)!==P&&k(t);var i=x.attrHandle[e.toLowerCase()],n=i&&V.call(x.attrHandle,e.toLowerCase())?i(t,e,!R):void 0;return void 0!==n?n:g.attributes||!R?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},w.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},w.uniqueSort=function(t){var e,i=[],n=0,o=0;if(A=!g.detectDuplicates,C=!g.sortStable&&t.slice(0),t.sort($),A){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)t.splice(i[n],1)}return C=null,t},v=w.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=v(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=v(e);return i},(x=w.selectors={cacheLength:50,createPseudo:l,match:ut,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(yt,bt),t[3]=(t[3]||t[4]||t[5]||"").replace(yt,bt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||w.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&w.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ut.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ct.test(i)&&(e=S(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(yt,bt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(i,n,o){return function(t){var e=w.attr(t,i);return null==e?"!="===n:!n||(e+="","="===n?e===o:"!="===n?e!==o:"^="===n?o&&0===e.indexOf(o):"*="===n?o&&-1<e.indexOf(o):"$="===n?o&&e.slice(-o.length)===o:"~="===n?-1<(" "+e.replace(ot," ")+" ").indexOf(o):"|="===n&&(e===o||e.slice(0,o.length+1)===o+"-"))}},CHILD:function(f,t,e,m,g){var v="nth"!==f.slice(0,3),y="last"!==f.slice(-4),b="of-type"===t;return 1===m&&0===g?function(t){return!!t.parentNode}:function(t,e,i){var n,o,r,s,a,l,c=v!==y?"nextSibling":"previousSibling",h=t.parentNode,u=b&&t.nodeName.toLowerCase(),d=!i&&!b,p=!1;if(h){if(v){for(;c;){for(s=t;s=s[c];)if(b?s.nodeName.toLowerCase()===u:1===s.nodeType)return!1;l=c="only"===f&&!l&&"nextSibling"}return!0}if(l=[y?h.firstChild:h.lastChild],y&&d){for(p=(a=(n=(o=(r=(s=h)[z]||(s[z]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]||[])[0]===B&&n[1])&&n[2],s=a&&h.childNodes[a];s=++a&&s&&s[c]||(p=a=0)||l.pop();)if(1===s.nodeType&&++p&&s===t){o[f]=[B,a,p];break}}else if(d&&(p=a=(n=(o=(r=(s=t)[z]||(s[z]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]||[])[0]===B&&n[1]),!1===p)for(;(s=++a&&s&&s[c]||(p=a=0)||l.pop())&&((b?s.nodeName.toLowerCase()!==u:1!==s.nodeType)||!++p||(d&&((o=(r=s[z]||(s[z]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]=[B,p]),s!==t)););return(p-=g)===m||p%m==0&&0<=p/m}}},PSEUDO:function(t,r){var e,s=x.pseudos[t]||x.setFilters[t.toLowerCase()]||w.error("unsupported pseudo: "+t);return s[z]?s(r):1<s.length?(e=[t,t,"",r],x.setFilters.hasOwnProperty(t.toLowerCase())?l(function(t,e){for(var i,n=s(t,r),o=n.length;o--;)t[i=J(t,n[o])]=!(e[i]=n[o])}):function(t){return s(t,0,e)}):s}},pseudos:{not:l(function(t){var n=[],o=[],a=T(t.replace(rt,"$1"));return a[z]?l(function(t,e,i,n){for(var o,r=a(t,null,n,[]),s=t.length;s--;)(o=r[s])&&(t[s]=!(e[s]=o))}):function(t,e,i){return n[0]=t,a(n,null,i,o),n[0]=null,!o.pop()}}),has:l(function(e){return function(t){return 0<w(e,t).length}}),contains:l(function(e){return e=e.replace(yt,bt),function(t){return-1<(t.textContent||t.innerText||v(t)).indexOf(e)}}),lang:l(function(i){return ht.test(i||"")||w.error("unsupported lang: "+i),i=i.replace(yt,bt).toLowerCase(),function(t){var e;do{if(e=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===i||0===e.indexOf(i+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===L},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return pt.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:s(function(){return[0]}),last:s(function(t,e){return[e-1]}),eq:s(function(t,e,i){return[i<0?i+e:i]}),even:s(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:s(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:s(function(t,e,i){for(var n=i<0?i+e:i;0<=--n;)t.push(n);return t}),gt:s(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[h]=n(h);for(h in{submit:!0,reset:!0})x.pseudos[h]=r(h);return a.prototype=x.filters=x.pseudos,x.setFilters=new a,S=w.tokenize=function(t,e){var i,n,o,r,s,a,l,c=W[t+" "];if(c)return e?0:c.slice(0);for(s=t,a=[],l=x.preFilter;s;){for(r in i&&!(n=st.exec(s))||(n&&(s=s.slice(n[0].length)||s),a.push(o=[])),i=!1,(n=at.exec(s))&&(i=n.shift(),o.push({value:i,type:n[0].replace(rt," ")}),s=s.slice(i.length)),x.filter)!(n=ut[r].exec(s))||l[r]&&!(n=l[r](n))||(i=n.shift(),o.push({value:i,type:r,matches:n}),s=s.slice(i.length));if(!i)break}return e?s.length:s?w.error(t):W(t,a).slice(0)},T=w.compile=function(t,e){var i,g,v,y,b,n,o=[],r=[],s=j[t+" "];if(!s){for(e||(e=S(t)),i=e.length;i--;)(s=p(e[i]))[z]?o.push(s):r.push(s);(s=j(t,(g=r,y=0<(v=o).length,b=0<g.length,n=function(t,e,i,n,o){var r,s,a,l=0,c="0",h=t&&[],u=[],d=E,p=t||b&&x.find.TAG("*",o),f=B+=null==d?1:Math.random()||.1,m=p.length;for(o&&(E=e===P||e||o);c!==m&&null!=(r=p[c]);c++){if(b&&r){for(s=0,e||r.ownerDocument===P||(k(r),i=!R);a=g[s++];)if(a(r,e||P,i)){n.push(r);break}o&&(B=f)}y&&((r=!a&&r)&&l--,t&&h.push(r))}if(l+=c,y&&c!==l){for(s=0;a=v[s++];)a(h,u,e,i);if(t){if(0<l)for(;c--;)h[c]||u[c]||(u[c]=Y.call(n));u=_(u)}Z.apply(n,u),o&&!t&&0<u.length&&1<l+v.length&&w.uniqueSort(n)}return o&&(B=f,E=d),h},y?l(n):n))).selector=t}return s},M=w.select=function(t,e,i,n){var o,r,s,a,l,c="function"==typeof t&&t,h=!n&&S(t=c.selector||t);if(i=i||[],1===h.length){if(2<(r=h[0]=h[0].slice(0)).length&&"ID"===(s=r[0]).type&&g.getById&&9===e.nodeType&&R&&x.relative[r[1].type]){if(!(e=(x.find.ID(s.matches[0].replace(yt,bt),e)||[])[0]))return i;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=ut.needsContext.test(t)?0:r.length;o--&&(s=r[o],!x.relative[a=s.type]);)if((l=x.find[a])&&(n=l(s.matches[0].replace(yt,bt),gt.test(r[0].type)&&f(e.parentNode)||e))){if(r.splice(o,1),!(t=n.length&&m(r)))return Z.apply(i,n),i;break}}return(c||T(t,h))(n,e,!R,i,!e||gt.test(t)&&f(e.parentNode)||e),i},g.sortStable=z.split("").sort($).join("")===z,g.detectDuplicates=!!A,k(),g.sortDetached=o(function(t){return 1&t.compareDocumentPosition(P.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||e("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),g.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||e("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||e(Q,function(t,e,i){var n;return i?void 0:!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),w}(S);Q.find=ot,Q.expr=ot.selectors,Q.expr[":"]=Q.expr.pseudos,Q.uniqueSort=Q.unique=ot.uniqueSort,Q.text=ot.getText,Q.isXMLDoc=ot.isXML,Q.contains=ot.contains;var rt=function(t,e,i){for(var n=[],o=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&Q(t).is(i))break;n.push(t)}return n},st=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},at=Q.expr.match.needsContext,lt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ct=/^.[^:#\[\.,]*$/;Q.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?Q.find.matchesSelector(n,t)?[n]:[]:Q.find.matches(t,Q.grep(e,function(t){return 1===t.nodeType}))},Q.fn.extend({find:function(t){var e,i=this.length,n=[],o=this;if("string"!=typeof t)return this.pushStack(Q(t).filter(function(){for(e=0;e<i;e++)if(Q.contains(o[e],this))return!0}));for(e=0;e<i;e++)Q.find(t,o[e],n);return(n=this.pushStack(1<i?Q.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(e(this,t||[],!1))},not:function(t){return this.pushStack(e(this,t||[],!0))},is:function(t){return!!e(this,"string"==typeof t&&at.test(t)?Q(t):t||[],!1).length}});var ht,ut=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(Q.fn.init=function(t,e,i){var n,o;if(!t)return this;if(i=i||ht,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:ut.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof Q?e[0]:e,Q.merge(this,Q.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:j,!0)),lt.test(n[1])&&Q.isPlainObject(e))for(n in e)Q.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(o=j.getElementById(n[2]))&&o.parentNode&&(this.length=1,this[0]=o),this.context=j,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Q.isFunction(t)?void 0!==i.ready?i.ready(t):t(Q):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Q.makeArray(t,this))}).prototype=Q.fn,ht=Q(j);var dt=/^(?:parents|prev(?:Until|All))/,pt={children:!0,contents:!0,next:!0,prev:!0};Q.fn.extend({has:function(t){var e=Q(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(Q.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,o=this.length,r=[],s=at.test(t)||"string"!=typeof t?Q(t,e||this.context):0;n<o;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?-1<s.index(i):1===i.nodeType&&Q.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(1<r.length?Q.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?q.call(Q(t),this[0]):q.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Q.uniqueSort(Q.merge(this.get(),Q(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Q.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return rt(t,"parentNode")},parentsUntil:function(t,e,i){return rt(t,"parentNode",i)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return rt(t,"nextSibling")},prevAll:function(t){return rt(t,"previousSibling")},nextUntil:function(t,e,i){return rt(t,"nextSibling",i)},prevUntil:function(t,e,i){return rt(t,"previousSibling",i)},siblings:function(t){return st((t.parentNode||{}).firstChild,t)},children:function(t){return st(t.firstChild)},contents:function(t){return t.contentDocument||Q.merge([],t.childNodes)}},function(n,o){Q.fn[n]=function(t,e){var i=Q.map(this,o,t);return"Until"!==n.slice(-5)&&(e=t),e&&"string"==typeof e&&(i=Q.filter(e,i)),1<this.length&&(pt[n]||Q.uniqueSort(i),dt.test(n)&&i.reverse()),this.pushStack(i)}});var ft,mt=/\S+/g;Q.Callbacks=function(n){var t,i;n="string"==typeof n?(t=n,i={},Q.each(t.match(mt)||[],function(t,e){i[e]=!0}),i):Q.extend({},n);var o,e,r,s,a=[],l=[],c=-1,h=function(){for(s=n.once,r=o=!0;l.length;c=-1)for(e=l.shift();++c<a.length;)!1===a[c].apply(e[0],e[1])&&n.stopOnFalse&&(c=a.length,e=!1);n.memory||(e=!1),o=!1,s&&(a=e?[]:"")},u={add:function(){return a&&(e&&!o&&(c=a.length-1,l.push(e)),function i(t){Q.each(t,function(t,e){Q.isFunction(e)?n.unique&&u.has(e)||a.push(e):e&&e.length&&"string"!==Q.type(e)&&i(e)})}(arguments),e&&!o&&h()),this},remove:function(){return Q.each(arguments,function(t,e){for(var i;-1<(i=Q.inArray(e,a,i));)a.splice(i,1),i<=c&&c--}),this},has:function(t){return t?-1<Q.inArray(t,a):0<a.length},empty:function(){return a&&(a=[]),this},disable:function(){return s=l=[],a=e="",this},disabled:function(){return!a},lock:function(){return s=l=[],e||(a=e=""),this},locked:function(){return!!s},fireWith:function(t,e){return s||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),o||h()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},Q.extend({Deferred:function(t){var r=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],o="pending",s={state:function(){return o},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var o=arguments;return Q.Deferred(function(n){Q.each(r,function(t,e){var i=Q.isFunction(o[t])&&o[t];a[e[1]](function(){var t=i&&i.apply(this,arguments);t&&Q.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[e[0]+"With"](this===s?n.promise():this,i?[t]:arguments)})}),o=null}).promise()},promise:function(t){return null!=t?Q.extend(t,s):s}},a={};return s.pipe=s.then,Q.each(r,function(t,e){var i=e[2],n=e[3];s[e[1]]=i.add,n&&i.add(function(){o=n},r[1^t][2].disable,r[2][2].lock),a[e[0]]=function(){return a[e[0]+"With"](this===a?s:this,arguments),this},a[e[0]+"With"]=i.fireWith}),s.promise(a),t&&t.call(a,a),a},when:function(t){var o,e,i,n=0,r=$.call(arguments),s=r.length,a=1!==s||t&&Q.isFunction(t.promise)?s:0,l=1===a?t:Q.Deferred(),c=function(e,i,n){return function(t){i[e]=this,n[e]=1<arguments.length?$.call(arguments):t,n===o?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(1<s)for(o=new Array(s),e=new Array(s),i=new Array(s);n<s;n++)r[n]&&Q.isFunction(r[n].promise)?r[n].promise().progress(c(n,e,o)).done(c(n,i,r)).fail(l.reject):--a;return a||l.resolveWith(i,r),l.promise()}}),Q.fn.ready=function(t){return Q.ready.promise().done(t),this},Q.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Q.readyWait++:Q.ready(!0)},ready:function(t){(!0===t?--Q.readyWait:Q.isReady)||((Q.isReady=!0)!==t&&0<--Q.readyWait||(ft.resolveWith(j,[Q]),Q.fn.triggerHandler&&(Q(j).triggerHandler("ready"),Q(j).off("ready"))))}}),Q.ready.promise=function(t){return ft||(ft=Q.Deferred(),"complete"===j.readyState||"loading"!==j.readyState&&!j.documentElement.doScroll?S.setTimeout(Q.ready):(j.addEventListener("DOMContentLoaded",n),S.addEventListener("load",n))),ft.promise(t)},Q.ready.promise();var gt=function(t,e,i,n,o,r,s){var a=0,l=t.length,c=null==i;if("object"===Q.type(i))for(a in o=!0,i)gt(t,e,a,i[a],!0,r,s);else if(void 0!==n&&(o=!0,Q.isFunction(n)||(s=!0),c&&(s?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(Q(t),i)})),e))for(;a<l;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return o?t:c?e.call(t):l?e(t[0],i):r},vt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};o.uid=1,o.prototype={register:function(t,e){var i=e||{};return t.nodeType?t[this.expando]=i:Object.defineProperty(t,this.expando,{value:i,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!vt(t))return{};var e=t[this.expando];return e||(e={},vt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,o=this.cache(t);if("string"==typeof e)o[e]=i;else for(n in e)o[n]=e[n];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?void 0!==(n=this.get(t,e))?n:this.get(t,Q.camelCase(e)):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,o,r=t[this.expando];if(void 0!==r){if(void 0===e)this.register(t);else{Q.isArray(e)?n=e.concat(e.map(Q.camelCase)):(o=Q.camelCase(e),e in r?n=[e,o]:n=(n=o)in r?[n]:n.match(mt)||[]),i=n.length;for(;i--;)delete r[n[i]]}(void 0===e||Q.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!Q.isEmptyObject(e)}};var yt=new o,bt=new o,wt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_t=/[A-Z]/g;Q.extend({hasData:function(t){return bt.hasData(t)||yt.hasData(t)},data:function(t,e,i){return bt.access(t,e,i)},removeData:function(t,e){bt.remove(t,e)},_data:function(t,e,i){return yt.access(t,e,i)},_removeData:function(t,e){yt.remove(t,e)}}),Q.fn.extend({data:function(n,t){var e,i,o,r=this[0],s=r&&r.attributes;if(void 0===n){if(this.length&&(o=bt.get(r),1===r.nodeType&&!yt.get(r,"hasDataAttrs"))){for(e=s.length;e--;)s[e]&&(0===(i=s[e].name).indexOf("data-")&&(i=Q.camelCase(i.slice(5)),l(r,i,o[i])));yt.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof n?this.each(function(){bt.set(this,n)}):gt(this,function(e){var t,i;if(r&&void 0===e){if(void 0!==(t=bt.get(r,n)||bt.get(r,n.replace(_t,"-$&").toLowerCase())))return t;if(i=Q.camelCase(n),void 0!==(t=bt.get(r,i)))return t;if(void 0!==(t=l(r,i,void 0)))return t}else i=Q.camelCase(n),this.each(function(){var t=bt.get(this,i);bt.set(this,i,e),-1<n.indexOf("-")&&void 0!==t&&bt.set(this,n,e)})},null,t,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){bt.remove(this,t)})}}),Q.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=yt.get(t,e),i&&(!n||Q.isArray(i)?n=yt.access(t,e,Q.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=Q.queue(t,e),n=i.length,o=i.shift(),r=Q._queueHooks(t,e);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete r.stop,o.call(t,function(){Q.dequeue(t,e)},r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return yt.get(t,i)||yt.access(t,i,{empty:Q.Callbacks("once memory").add(function(){yt.remove(t,[e+"queue",i])})})}}),Q.fn.extend({queue:function(e,i){var t=2;return"string"!=typeof e&&(i=e,e="fx",t--),arguments.length<t?Q.queue(this[0],e):void 0===i?this:this.each(function(){var t=Q.queue(this,e,i);Q._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&Q.dequeue(this,e)})},dequeue:function(t){return this.each(function(){Q.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=Q.Deferred(),r=this,s=this.length,a=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=yt.get(r[s],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(e)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,St=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),Tt=["Top","Right","Bottom","Left"],Mt=function(t,e){return t=e||t,"none"===Q.css(t,"display")||!Q.contains(t.ownerDocument,t)},Et=/^(?:checkbox|radio)$/i,Ct=/<([\w:-]+)/,At=/^$|\/(?:java|ecma)script/i,kt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};kt.optgroup=kt.option,kt.tbody=kt.tfoot=kt.colgroup=kt.caption=kt.thead,kt.th=kt.td;var Pt,Lt,Rt=/<|&#?\w+;/;Pt=j.createDocumentFragment().appendChild(j.createElement("div")),(Lt=j.createElement("input")).setAttribute("type","radio"),Lt.setAttribute("checked","checked"),Lt.setAttribute("name","t"),Pt.appendChild(Lt),K.checkClone=Pt.cloneNode(!0).cloneNode(!0).lastChild.checked,Pt.innerHTML="<textarea>x</textarea>",K.noCloneChecked=!!Pt.cloneNode(!0).lastChild.defaultValue;var Dt=/^key/,It=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ot=/^([^.]*)(?:\.(.+)|)/;Q.event={global:{},add:function(e,t,i,n,o){var r,s,a,l,c,h,u,d,p,f,m,g=yt.get(e);if(g)for(i.handler&&(i=(r=i).handler,o=r.selector),i.guid||(i.guid=Q.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return void 0!==Q&&Q.event.triggered!==t.type?Q.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(mt)||[""]).length;c--;)p=m=(a=Ot.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(u=Q.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=Q.event.special[p]||{},h=Q.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&Q.expr.match.needsContext.test(o),namespace:f.join(".")},r),(d=l[p])||((d=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,n,f,s)||e.addEventListener&&e.addEventListener(p,s)),u.add&&(u.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),o?d.splice(d.delegateCount++,0,h):d.push(h),Q.event.global[p]=!0)},remove:function(t,e,i,n,o){var r,s,a,l,c,h,u,d,p,f,m,g=yt.hasData(t)&&yt.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(mt)||[""]).length;c--;)if(p=m=(a=Ot.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(u=Q.event.special[p]||{},d=l[p=(n?u.delegateType:u.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)h=d[r],!o&&m!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(d.splice(r,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(t,h));s&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,f,g.handle)||Q.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)Q.event.remove(t,p+e[c],i,n,!0);Q.isEmptyObject(l)&&yt.remove(t,"handle events")}},dispatch:function(t){t=Q.event.fix(t);var e,i,n,o,r,s=[],a=$.call(arguments),l=(yt.get(this,"events")||{})[t.type]||[],c=Q.event.special[t.type]||{};if((a[0]=t).delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(s=Q.event.handlers.call(this,t,l),e=0;(o=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(r.namespace)||(t.handleObj=r,t.data=r.data,void 0!==(n=((Q.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a))&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,o,r,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(n=[],i=0;i<a;i++)void 0===n[o=(r=e[i]).selector+" "]&&(n[o]=r.needsContext?-1<Q(o,this).index(l):Q.find(o,this,null,[l]).length),n[o]&&n.push(r);n.length&&s.push({elem:l,handlers:n})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,o,r=e.button;return null==t.pageX&&null!=e.clientX&&(n=(i=t.target.ownerDocument||j).documentElement,o=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[Q.expando])return t;var e,i,n,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=It.test(o)?this.mouseHooks:Dt.test(o)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,t=new Q.Event(r),e=n.length;e--;)t[i=n[e]]=r[i];return t.target||(t.target=j),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==s()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===s()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Q.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return Q.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},Q.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},Q.Event=function(t,e){return this instanceof Q.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?r:h):this.type=t,e&&Q.extend(this,e),this.timeStamp=t&&t.timeStamp||Q.now(),void(this[Q.expando]=!0)):new Q.Event(t,e)},Q.Event.prototype={constructor:Q.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=r,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=r,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=r,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},Q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){Q.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,i=t.relatedTarget,n=t.handleObj;return i&&(i===this||Q.contains(this,i))||(t.type=n.origType,e=n.handler.apply(this,arguments),t.type=o),e}}}),Q.fn.extend({on:function(t,e,i,n){return u(this,t,e,i,n)},one:function(t,e,i,n){return u(this,t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,Q(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=h),this.each(function(){Q.event.remove(this,t,i,e)})}});var Nt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,zt=/<script|<style|<link/i,Ht=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^true\/(.*)/,Ft=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Q.extend({htmlPrefilter:function(t){return t.replace(Nt,"<$1></$2>")},clone:function(t,e,i){var n,o,r,s,a,l,c,h=t.cloneNode(!0),u=Q.contains(t.ownerDocument,t);if(!(K.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Q.isXMLDoc(t)))for(s=m(h),n=0,o=(r=m(t)).length;n<o;n++)a=r[n],l=s[n],void 0,"input"===(c=l.nodeName.toLowerCase())&&Et.test(a.type)?l.checked=a.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=a.defaultValue);if(e)if(i)for(r=r||m(t),s=s||m(h),n=0,o=r.length;n<o;n++)p(r[n],s[n]);else p(t,h);return 0<(s=m(h,"script")).length&&g(s,!u&&m(t,"script")),h},cleanData:function(t){for(var e,i,n,o=Q.event.special,r=0;void 0!==(i=t[r]);r++)if(vt(i)){if(e=i[yt.expando]){if(e.events)for(n in e.events)o[n]?Q.event.remove(i,n):Q.removeEvent(i,n,e.handle);i[yt.expando]=void 0}i[bt.expando]&&(i[bt.expando]=void 0)}}}),Q.fn.extend({domManip:w,detach:function(t){return f(this,t,!0)},remove:function(t){return f(this,t)},text:function(t){return gt(this,function(t){return void 0===t?Q.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return w(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||d(this,t).appendChild(t)})},prepend:function(){return w(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return w(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return w(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Q.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return Q.clone(this,t,e)})},html:function(t){return gt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!zt.test(t)&&!kt[(Ct.exec(t)||["",""])[1].toLowerCase()]){t=Q.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(Q.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var i=[];return w(this,arguments,function(t){var e=this.parentNode;Q.inArray(this,i)<0&&(Q.cleanData(m(this)),e&&e.replaceChild(t,this))},i)}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){Q.fn[t]=function(t){for(var e,i=[],n=Q(t),o=n.length-1,r=0;r<=o;r++)e=r===o?this:this.clone(!0),Q(n[r])[s](e),V.apply(i,e.get());return this.pushStack(i)}});var Ut,Wt={HTML:"block",BODY:"block"},jt=/^margin/,$t=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),Gt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=S),e.getComputedStyle(t)},Vt=function(t,e,i,n){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in o=i.apply(t,n||[]),e)t.style[r]=s[r];return o},qt=j.documentElement;!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",qt.appendChild(r);var t=S.getComputedStyle(s);e="1%"!==t.top,o="2px"===t.marginLeft,i="4px"===t.width,s.style.marginRight="50%",n="4px"===t.marginRight,qt.removeChild(r)}var e,i,n,o,r=j.createElement("div"),s=j.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",K.clearCloneStyle="content-box"===s.style.backgroundClip,r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",r.appendChild(s),Q.extend(K,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return null==i&&t(),i},pixelMarginRight:function(){return null==i&&t(),n},reliableMarginLeft:function(){return null==i&&t(),o},reliableMarginRight:function(){var t,e=s.appendChild(j.createElement("div"));return e.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",s.style.width="1px",qt.appendChild(r),t=!parseFloat(S.getComputedStyle(e).marginRight),qt.removeChild(r),s.removeChild(e),t}}))}();var Yt=/^(none|table(?!-c[ea]).+)/,Xt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:"0",fontWeight:"400"},Kt=["Webkit","O","Moz","ms"],Jt=j.createElement("div").style;Q.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=T(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=Q.camelCase(e),l=t.style;return e=Q.cssProps[a]||(Q.cssProps[a]=E(a)||a),s=Q.cssHooks[e]||Q.cssHooks[a],void 0===i?s&&"get"in s&&void 0!==(o=s.get(t,!1,n))?o:l[e]:("string"===(r=typeof i)&&(o=St.exec(i))&&o[1]&&(i=c(t,e,o),r="number"),void(null!=i&&i==i&&("number"===r&&(i+=o&&o[3]||(Q.cssNumber[a]?"":"px")),K.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(l[e]=i))))}},css:function(t,e,i,n){var o,r,s,a=Q.camelCase(e);return e=Q.cssProps[a]||(Q.cssProps[a]=E(a)||a),(s=Q.cssHooks[e]||Q.cssHooks[a])&&"get"in s&&(o=s.get(t,!0,i)),void 0===o&&(o=T(t,e,n)),"normal"===o&&e in Zt&&(o=Zt[e]),""===i||i?(r=parseFloat(o),!0===i||isFinite(r)?r||0:o):o}}),Q.each(["height","width"],function(t,s){Q.cssHooks[s]={get:function(t,e,i){return e?Yt.test(Q.css(t,"display"))&&0===t.offsetWidth?Vt(t,Xt,function(){return k(t,s,i)}):k(t,s,i):void 0},set:function(t,e,i){var n,o=i&&Gt(t),r=i&&A(t,s,i,"border-box"===Q.css(t,"boxSizing",!1,o),o);return r&&(n=St.exec(e))&&"px"!==(n[3]||"px")&&(t.style[s]=e,e=Q.css(t,s)),C(0,e,r)}}}),Q.cssHooks.marginLeft=M(K.reliableMarginLeft,function(t,e){return e?(parseFloat(T(t,"marginLeft"))||t.getBoundingClientRect().left-Vt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px":void 0}),Q.cssHooks.marginRight=M(K.reliableMarginRight,function(t,e){return e?Vt(t,{display:"inline-block"},T,[t,"marginRight"]):void 0}),Q.each({margin:"",padding:"",border:"Width"},function(o,r){Q.cssHooks[o+r]={expand:function(t){for(var e=0,i={},n="string"==typeof t?t.split(" "):[t];e<4;e++)i[o+Tt[e]+r]=n[e]||n[e-2]||n[0];return i}},jt.test(o)||(Q.cssHooks[o+r].set=C)}),Q.fn.extend({css:function(t,e){return gt(this,function(t,e,i){var n,o,r={},s=0;if(Q.isArray(e)){for(n=Gt(t),o=e.length;s<o;s++)r[e[s]]=Q.css(t,e[s],!1,n);return r}return void 0!==i?Q.style(t,e,i):Q.css(t,e)},t,e,1<arguments.length)},show:function(){return P(this,!0)},hide:function(){return P(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Mt(this)?Q(this).show():Q(this).hide()})}}),(Q.Tween=L).prototype={constructor:L,init:function(t,e,i,n,o,r){this.elem=t,this.prop=i,this.easing=o||Q.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(Q.cssNumber[i]?"":"px")},cur:function(){var t=L.propHooks[this.prop];return t&&t.get?t.get(this):L.propHooks._default.get(this)},run:function(t){var e,i=L.propHooks[this.prop];return this.options.duration?this.pos=e=Q.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=Q.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){Q.fx.step[t.prop]?Q.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[Q.cssProps[t.prop]]&&!Q.cssHooks[t.prop]?t.elem[t.prop]=t.now:Q.style(t.elem,t.prop,t.now+t.unit)}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Q.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},Q.fx=L.prototype.init,Q.fx.step={};var Qt,te,ee,ie,ne,oe=/^(?:toggle|show|hide)$/,re=/queueHooks$/;Q.Animation=Q.extend(O,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return c(i.elem,t,St.exec(e),i),i}]},tweener:function(t,e){Q.isFunction(t)?(e=t,t=["*"]):t=t.match(mt);for(var i,n=0,o=t.length;n<o;n++)i=t[n],O.tweeners[i]=O.tweeners[i]||[],O.tweeners[i].unshift(e)},prefilters:[function(e,t,i){var n,o,r,s,a,l,c,h=this,u={},d=e.style,p=e.nodeType&&Mt(e),f=yt.get(e,"fxshow");for(n in i.queue||(null==(a=Q._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,Q.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===("none"===(c=Q.css(e,"display"))?yt.get(e,"olddisplay")||x(e.nodeName):c)&&"none"===Q.css(e,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]})),t)if(o=t[n],oe.exec(o)){if(delete t[n],r=r||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!f||void 0===f[n])continue;p=!0}u[n]=f&&f[n]||Q.style(e,n)}else c=void 0;if(Q.isEmptyObject(u))"inline"===("none"===c?x(e.nodeName):c)&&(d.display=c);else for(n in f?"hidden"in f&&(p=f.hidden):f=yt.access(e,"fxshow",{}),r&&(f.hidden=!p),p?Q(e).show():h.done(function(){Q(e).hide()}),h.done(function(){var t;for(t in yt.remove(e,"fxshow"),u)Q.style(e,t,u[t])}),u)s=I(p?f[n]:0,n,h),n in f||(f[n]=s.start,p&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}],prefilter:function(t,e){e?O.prefilters.unshift(t):O.prefilters.push(t)}}),Q.speed=function(t,e,i){var n=t&&"object"==typeof t?Q.extend({},t):{complete:i||!i&&e||Q.isFunction(t)&&t,duration:t,easing:i&&e||e&&!Q.isFunction(e)&&e};return n.duration=Q.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in Q.fx.speeds?Q.fx.speeds[n.duration]:Q.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){Q.isFunction(n.old)&&n.old.call(this),n.queue&&Q.dequeue(this,n.queue)},n},Q.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Mt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(e,t,i,n){var o=Q.isEmptyObject(e),r=Q.speed(t,i,n),s=function(){var t=O(this,Q.extend({},e),r);(o||yt.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(o,t,r){var s=function(t){var e=t.stop;delete t.stop,e(r)};return"string"!=typeof o&&(r=t,t=o,o=void 0),t&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var t=!0,e=null!=o&&o+"queueHooks",i=Q.timers,n=yt.get(this);if(e)n[e]&&n[e].stop&&s(n[e]);else for(e in n)n[e]&&n[e].stop&&re.test(e)&&s(n[e]);for(e=i.length;e--;)i[e].elem!==this||null!=o&&i[e].queue!==o||(i[e].anim.stop(r),t=!1,i.splice(e,1));!t&&r||Q.dequeue(this,o)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=yt.get(this),i=e[s+"queue"],n=e[s+"queueHooks"],o=Q.timers,r=i?i.length:0;for(e.finish=!0,Q.queue(this,s,[]),n&&n.stop&&n.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===s&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<r;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete e.finish})}}),Q.each(["toggle","show","hide"],function(t,n){var o=Q.fn[n];Q.fn[n]=function(t,e,i){return null==t||"boolean"==typeof t?o.apply(this,arguments):this.animate(D(n,!0),t,e,i)}}),Q.each({slideDown:D("show"),slideUp:D("hide"),slideToggle:D("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){Q.fn[t]=function(t,e,i){return this.animate(n,t,e,i)}}),Q.timers=[],Q.fx.tick=function(){var t,e=0,i=Q.timers;for(Qt=Q.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||Q.fx.stop(),Qt=void 0},Q.fx.timer=function(t){Q.timers.push(t),t()?Q.fx.start():Q.timers.pop()},Q.fx.interval=13,Q.fx.start=function(){te||(te=S.setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.stop=function(){S.clearInterval(te),te=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fn.delay=function(n,t){return n=Q.fx&&Q.fx.speeds[n]||n,t=t||"fx",this.queue(t,function(t,e){var i=S.setTimeout(t,n);e.stop=function(){S.clearTimeout(i)}})},ee=j.createElement("input"),ie=j.createElement("select"),ne=ie.appendChild(j.createElement("option")),ee.type="checkbox",K.checkOn=""!==ee.value,K.optSelected=ne.selected,ie.disabled=!0,K.optDisabled=!ne.disabled,(ee=j.createElement("input")).value="t",ee.type="radio",K.radioValue="t"===ee.value;var se,ae=Q.expr.attrHandle;Q.fn.extend({attr:function(t,e){return gt(this,Q.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){Q.removeAttr(this,t)})}}),Q.extend({attr:function(t,e,i){var n,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?Q.prop(t,e,i):(1===r&&Q.isXMLDoc(t)||(e=e.toLowerCase(),o=Q.attrHooks[e]||(Q.expr.match.bool.test(e)?se:void 0)),void 0!==i?null===i?void Q.removeAttr(t,e):o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:(t.setAttribute(e,i+""),i):o&&"get"in o&&null!==(n=o.get(t,e))?n:null==(n=Q.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!K.radioValue&&"radio"===e&&Q.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n,o=0,r=e&&e.match(mt);if(r&&1===t.nodeType)for(;i=r[o++];)n=Q.propFix[i]||i,Q.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)}}),se={set:function(t,e,i){return!1===e?Q.removeAttr(t,i):t.setAttribute(i,i),i}},Q.each(Q.expr.match.bool.source.match(/\w+/g),function(t,e){var r=ae[e]||Q.find.attr;ae[e]=function(t,e,i){var n,o;return i||(o=ae[e],ae[e]=n,n=null!=r(t,e,i)?e.toLowerCase():null,ae[e]=o),n}});var le=/^(?:input|select|textarea|button)$/i,ce=/^(?:a|area)$/i;Q.fn.extend({prop:function(t,e){return gt(this,Q.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[Q.propFix[t]||t]})}}),Q.extend({prop:function(t,e,i){var n,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&Q.isXMLDoc(t)||(e=Q.propFix[e]||e,o=Q.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=Q.find.attr(t,"tabindex");return e?parseInt(e,10):le.test(t.nodeName)||ce.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),K.optSelected||(Q.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),Q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Q.propFix[this.toLowerCase()]=this});var he=/[\t\r\n\f]/g;Q.fn.extend({addClass:function(e){var t,i,n,o,r,s,a,l=0;if(Q.isFunction(e))return this.each(function(t){Q(this).addClass(e.call(this,t,N(this)))});if("string"==typeof e&&e)for(t=e.match(mt)||[];i=this[l++];)if(o=N(i),n=1===i.nodeType&&(" "+o+" ").replace(he," ")){for(s=0;r=t[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o!==(a=Q.trim(n))&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,o,r,s,a,l=0;if(Q.isFunction(e))return this.each(function(t){Q(this).removeClass(e.call(this,t,N(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(mt)||[];i=this[l++];)if(o=N(i),n=1===i.nodeType&&(" "+o+" ").replace(he," ")){for(s=0;r=t[s++];)for(;-1<n.indexOf(" "+r+" ");)n=n.replace(" "+r+" "," ");o!==(a=Q.trim(n))&&i.setAttribute("class",a)}return this},toggleClass:function(o,e){var r=typeof o;return"boolean"==typeof e&&"string"===r?e?this.addClass(o):this.removeClass(o):Q.isFunction(o)?this.each(function(t){Q(this).toggleClass(o.call(this,t,N(this),e),e)}):this.each(function(){var t,e,i,n;if("string"===r)for(e=0,i=Q(this),n=o.match(mt)||[];t=n[e++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==o&&"boolean"!==r||((t=N(this))&&yt.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===o?"":yt.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+N(i)+" ").replace(he," ").indexOf(e))return!0;return!1}});var ue=/\r/g,de=/[\x20\t\r\n\f]+/g;Q.fn.extend({val:function(i){var n,t,o,e=this[0];return arguments.length?(o=Q.isFunction(i),this.each(function(t){var e;1===this.nodeType&&(null==(e=o?i.call(this,t,Q(this).val()):i)?e="":"number"==typeof e?e+="":Q.isArray(e)&&(e=Q.map(e,function(t){return null==t?"":t+""})),(n=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):e?(n=Q.valHooks[e.type]||Q.valHooks[e.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(ue,""):null==t?"":t:void 0}}),Q.extend({valHooks:{option:{get:function(t){var e=Q.find.attr(t,"value");return null!=e?e:Q.trim(Q.text(t)).replace(de," ")}},select:{get:function(t){for(var e,i,n=t.options,o=t.selectedIndex,r="select-one"===t.type||o<0,s=r?null:[],a=r?o+1:n.length,l=o<0?a:r?o:0;l<a;l++)if(((i=n[l]).selected||l===o)&&(K.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!Q.nodeName(i.parentNode,"optgroup"))){if(e=Q(i).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var i,n,o=t.options,r=Q.makeArray(e),s=o.length;s--;)((n=o[s]).selected=-1<Q.inArray(Q.valHooks.option.get(n),r))&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]={set:function(t,e){return Q.isArray(e)?t.checked=-1<Q.inArray(Q(t).val(),e):void 0}},K.checkOn||(Q.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var pe=/^(?:focusinfocus|focusoutblur)$/;Q.extend(Q.event,{trigger:function(t,e,i,n){var o,r,s,a,l,c,h,u=[i||j],d=Z.call(t,"type")?t.type:t,p=Z.call(t,"namespace")?t.namespace.split("."):[];if(r=s=i=i||j,3!==i.nodeType&&8!==i.nodeType&&!pe.test(d+Q.event.triggered)&&(-1<d.indexOf(".")&&(d=(p=d.split(".")).shift(),p.sort()),l=d.indexOf(":")<0&&"on"+d,(t=t[Q.expando]?t:new Q.Event(d,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:Q.makeArray(e,[t]),h=Q.event.special[d]||{},n||!h.trigger||!1!==h.trigger.apply(i,e))){if(!n&&!h.noBubble&&!Q.isWindow(i)){for(a=h.delegateType||d,pe.test(a+d)||(r=r.parentNode);r;r=r.parentNode)u.push(r),s=r;s===(i.ownerDocument||j)&&u.push(s.defaultView||s.parentWindow||S)}for(o=0;(r=u[o++])&&!t.isPropagationStopped();)t.type=1<o?a:h.bindType||d,(c=(yt.get(r,"events")||{})[t.type]&&yt.get(r,"handle"))&&c.apply(r,e),(c=l&&r[l])&&c.apply&&vt(r)&&(t.result=c.apply(r,e),!1===t.result&&t.preventDefault());return t.type=d,n||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(u.pop(),e)||!vt(i)||l&&Q.isFunction(i[d])&&!Q.isWindow(i)&&((s=i[l])&&(i[l]=null),i[Q.event.triggered=d](),Q.event.triggered=void 0,s&&(i[l]=s)),t.result}},simulate:function(t,e,i){var n=Q.extend(new Q.Event,i,{type:t,isSimulated:!0});Q.event.trigger(n,null,e)}}),Q.fn.extend({trigger:function(t,e){return this.each(function(){Q.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?Q.event.trigger(t,e,i,!0):void 0}}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,i){Q.fn[i]=function(t,e){return 0<arguments.length?this.on(i,null,t,e):this.trigger(i)}}),Q.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),K.focusin="onfocusin"in S,K.focusin||Q.each({focus:"focusin",blur:"focusout"},function(i,n){var o=function(t){Q.event.simulate(n,t.target,Q.event.fix(t))};Q.event.special[n]={setup:function(){var t=this.ownerDocument||this,e=yt.access(t,n);e||t.addEventListener(i,o,!0),yt.access(t,n,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=yt.access(t,n)-1;e?yt.access(t,n,e):(t.removeEventListener(i,o,!0),yt.remove(t,n))}}});var fe=S.location,me=Q.now(),ge=/\?/;Q.parseJSON=function(t){return JSON.parse(t+"")},Q.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new S.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||Q.error("Invalid XML: "+t),e};var ve=/#.*$/,ye=/([?&])_=[^&]*/,be=/^(.*?):[ \t]*([^\r\n]*)$/gm,we=/^(?:GET|HEAD)$/,_e=/^\/\//,xe={},Se={},Te="*/".concat("*"),Me=j.createElement("a");Me.href=fe.href,Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fe.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(fe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Te,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?B(B(t,Q.ajaxSettings),e):B(Q.ajaxSettings,t)},ajaxPrefilter:z(xe),ajaxTransport:z(Se),ajax:function(t,e){function i(t,e,i,n){var o,r,s,a,l,c=e;2!==_&&(_=2,p&&S.clearTimeout(p),h=void 0,d=n||"",x.readyState=0<t?4:0,o=200<=t&&t<300||304===t,i&&(a=function(t,e,i){for(var n,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}return r?(r!==l[0]&&l.unshift(r),i[r]):void 0}(m,x,i)),a=function(t,e,i,n){var o,r,s,a,l,c={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=h.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=h.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if((a=o.split(" "))[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(m,a,x,o),o?(m.ifModified&&((l=x.getResponseHeader("Last-Modified"))&&(Q.lastModified[u]=l),(l=x.getResponseHeader("etag"))&&(Q.etag[u]=l)),204===t||"HEAD"===m.type?c="nocontent":304===t?c="notmodified":(c=a.state,r=a.data,o=!(s=a.error))):(s=c,!t&&c||(c="error",t<0&&(t=0))),x.status=t,x.statusText=(e||c)+"",o?y.resolveWith(g,[r,c,x]):y.rejectWith(g,[x,c,s]),x.statusCode(w),w=void 0,f&&v.trigger(o?"ajaxSuccess":"ajaxError",[x,m,o?r:s]),b.fireWith(g,[x,c]),f&&(v.trigger("ajaxComplete",[x,m]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var h,u,d,n,p,o,f,r,m=Q.ajaxSetup({},e),g=m.context||m,v=m.context&&(g.nodeType||g.jquery)?Q(g):Q.event,y=Q.Deferred(),b=Q.Callbacks("once memory"),w=m.statusCode||{},s={},a={},_=0,l="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!n)for(n={};e=be.exec(d);)n[e[1].toLowerCase()]=e[2];e=n[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?d:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return _||(t=a[i]=a[i]||t,s[t]=e),this},overrideMimeType:function(t){return _||(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(_<2)for(e in t)w[e]=[w[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||l;return h&&h.abort(e),i(0,e),this}};if(y.promise(x).complete=b.add,x.success=x.done,x.error=x.fail,m.url=((t||m.url||fe.href)+"").replace(ve,"").replace(_e,fe.protocol+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=Q.trim(m.dataType||"*").toLowerCase().match(mt)||[""],null==m.crossDomain){o=j.createElement("a");try{o.href=m.url,o.href=o.href,m.crossDomain=Me.protocol+"//"+Me.host!=o.protocol+"//"+o.host}catch(t){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=Q.param(m.data,m.traditional)),H(xe,m,e,x),2===_)return x;for(r in(f=Q.event&&m.global)&&0==Q.active++&&Q.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!we.test(m.type),u=m.url,m.hasContent||(m.data&&(u=m.url+=(ge.test(u)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=ye.test(u)?u.replace(ye,"$1_="+me++):u+(ge.test(u)?"&":"?")+"_="+me++)),m.ifModified&&(Q.lastModified[u]&&x.setRequestHeader("If-Modified-Since",Q.lastModified[u]),Q.etag[u]&&x.setRequestHeader("If-None-Match",Q.etag[u])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Te+"; q=0.01":""):m.accepts["*"]),m.headers)x.setRequestHeader(r,m.headers[r]);if(m.beforeSend&&(!1===m.beforeSend.call(g,x,m)||2===_))return x.abort();for(r in l="abort",{success:1,error:1,complete:1})x[r](m[r]);if(h=H(Se,m,e,x)){if(x.readyState=1,f&&v.trigger("ajaxSend",[x,m]),2===_)return x;m.async&&0<m.timeout&&(p=S.setTimeout(function(){x.abort("timeout")},m.timeout));try{_=1,h.send(s,i)}catch(t){if(!(_<2))throw t;i(-1,t)}}else i(-1,"No Transport");return x},getJSON:function(t,e,i){return Q.get(t,e,i,"json")},getScript:function(t,e){return Q.get(t,void 0,e,"script")}}),Q.each(["get","post"],function(t,o){Q[o]=function(t,e,i,n){return Q.isFunction(e)&&(n=n||i,i=e,e=void 0),Q.ajax(Q.extend({url:t,type:o,dataType:n,data:e,success:i},Q.isPlainObject(t)&&t))}}),Q._evalUrl=function(t){return Q.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},Q.fn.extend({wrapAll:function(e){var t;return Q.isFunction(e)?this.each(function(t){Q(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Q(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(i){return Q.isFunction(i)?this.each(function(t){Q(this).wrapInner(i.call(this,t))}):this.each(function(){var t=Q(this),e=t.contents();e.length?e.wrapAll(i):t.append(i)})},wrap:function(e){var i=Q.isFunction(e);return this.each(function(t){Q(this).wrapAll(i?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()}}),Q.expr.filters.hidden=function(t){return!Q.expr.filters.visible(t)},Q.expr.filters.visible=function(t){return 0<t.offsetWidth||0<t.offsetHeight||0<t.getClientRects().length};var Ee=/%20/g,Ce=/\[\]$/,Ae=/\r?\n/g,ke=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;Q.param=function(t,e){var i,n=[],o=function(t,e){e=Q.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(t)||t.jquery&&!Q.isPlainObject(t))Q.each(t,function(){o(this.name,this.value)});else for(i in t)F(i,t[i],e,o);return n.join("&").replace(Ee,"+")},Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Q.prop(this,"elements");return t?Q.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Q(this).is(":disabled")&&Pe.test(this.nodeName)&&!ke.test(t)&&(this.checked||!Et.test(t))}).map(function(t,e){var i=Q(this).val();return null==i?null:Q.isArray(i)?Q.map(i,function(t){return{name:e.name,value:t.replace(Ae,"\r\n")}}):{name:e.name,value:i.replace(Ae,"\r\n")}}).get()}}),Q.ajaxSettings.xhr=function(){try{return new S.XMLHttpRequest}catch(t){}};var Le={0:200,1223:204},Re=Q.ajaxSettings.xhr();K.cors=!!Re&&"withCredentials"in Re,K.ajax=Re=!!Re,Q.ajaxTransport(function(o){var r,s;return K.cors||Re&&!o.crossDomain?{send:function(t,e){var i,n=o.xhr();if(n.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(i in o.xhrFields)n[i]=o.xhrFields[i];for(i in o.mimeType&&n.overrideMimeType&&n.overrideMimeType(o.mimeType),o.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)n.setRequestHeader(i,t[i]);r=function(t){return function(){r&&(r=s=n.onload=n.onerror=n.onabort=n.onreadystatechange=null,"abort"===t?n.abort():"error"===t?"number"!=typeof n.status?e(0,"error"):e(n.status,n.statusText):e(Le[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=r(),s=n.onerror=r("error"),void 0!==n.onabort?n.onabort=s:n.onreadystatechange=function(){4===n.readyState&&S.setTimeout(function(){r&&s()})},r=r("abort");try{n.send(o.hasContent&&o.data||null)}catch(t){if(r)throw t}},abort:function(){r&&r()}}:void 0}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return Q.globalEval(t),t}}}),Q.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Q.ajaxTransport("script",function(i){var n,o;if(i.crossDomain)return{send:function(t,e){n=Q("<script>").prop({charset:i.scriptCharset,src:i.url}).on("load error",o=function(t){n.remove(),o=null,t&&e("error"===t.type?404:200,t.type)}),j.head.appendChild(n[0])},abort:function(){o&&o()}}});var De=[],Ie=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=De.pop()||Q.expando+"_"+me++;return this[t]=!0,t}}),Q.ajaxPrefilter("json jsonp",function(t,e,i){var n,o,r,s=!1!==t.jsonp&&(Ie.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ie.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(n=t.jsonpCallback=Q.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ie,"$1"+n):!1!==t.jsonp&&(t.url+=(ge.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return r||Q.error(n+" was not called"),r[0]},t.dataTypes[0]="json",o=S[n],S[n]=function(){r=arguments},i.always(function(){void 0===o?Q(S).removeProp(n):S[n]=o,t[n]&&(t.jsonpCallback=e.jsonpCallback,De.push(n)),r&&Q.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),Q.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||j;var n=lt.exec(t),o=!i&&[];return n?[e.createElement(n[1])]:(n=v([t],e,o),o&&o.length&&Q(o).remove(),Q.merge([],n.childNodes))};var Oe=Q.fn.load;Q.fn.load=function(t,e,i){if("string"!=typeof t&&Oe)return Oe.apply(this,arguments);var n,o,r,s=this,a=t.indexOf(" ");return-1<a&&(n=Q.trim(t.slice(a)),t=t.slice(0,a)),Q.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),0<s.length&&Q.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){r=arguments,s.html(n?Q("<div>").append(Q.parseHTML(t)).find(n):t)}).always(i&&function(t,e){s.each(function(){i.apply(this,r||[t.responseText,e,t])})}),this},Q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Q.fn[e]=function(t){return this.on(e,t)}}),Q.expr.filters.animated=function(e){return Q.grep(Q.timers,function(t){return e===t.elem}).length},Q.offset={setOffset:function(t,e,i){var n,o,r,s,a,l,c=Q.css(t,"position"),h=Q(t),u={};"static"===c&&(t.style.position="relative"),a=h.offset(),r=Q.css(t,"top"),l=Q.css(t,"left"),("absolute"===c||"fixed"===c)&&-1<(r+l).indexOf("auto")?(s=(n=h.position()).top,o=n.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),Q.isFunction(e)&&(e=e.call(t,i,Q.extend({},a))),null!=e.top&&(u.top=e.top-a.top+s),null!=e.left&&(u.left=e.left-a.left+o),"using"in e?e.using.call(t,u):h.css(u)}},Q.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Q.offset.setOffset(this,e,t)});var t,i,n=this[0],o={top:0,left:0},r=n&&n.ownerDocument;return r?(t=r.documentElement,Q.contains(t,n)?(o=n.getBoundingClientRect(),i=U(r),{top:o.top+i.pageYOffset-t.clientTop,left:o.left+i.pageXOffset-t.clientLeft}):o):void 0},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===Q.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Q.nodeName(t[0],"html")||(n=t.offset()),n.top+=Q.css(t[0],"borderTopWidth",!0),n.left+=Q.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-Q.css(i,"marginTop",!0),left:e.left-n.left-Q.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===Q.css(t,"position");)t=t.offsetParent;return t||qt})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,o){var r="pageYOffset"===o;Q.fn[e]=function(t){return gt(this,function(t,e,i){var n=U(t);return void 0===i?n?n[o]:t[e]:void(n?n.scrollTo(r?n.pageXOffset:i,r?i:n.pageYOffset):t[e]=i)},e,t,arguments.length)}}),Q.each(["top","left"],function(t,i){Q.cssHooks[i]=M(K.pixelPosition,function(t,e){return e?(e=T(t,i),$t.test(e)?Q(t).position()[i]+"px":e):void 0})}),Q.each({Height:"height",Width:"width"},function(r,s){Q.each({padding:"inner"+r,content:s,"":"outer"+r},function(n,t){Q.fn[t]=function(t,e){var i=arguments.length&&(n||"boolean"!=typeof t),o=n||(!0===t||!0===e?"margin":"border");return gt(this,function(t,e,i){var n;return Q.isWindow(t)?t.document.documentElement["client"+r]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+r],n["scroll"+r],t.body["offset"+r],n["offset"+r],n["client"+r])):void 0===i?Q.css(t,e,o):Q.style(t,e,i,o)},s,i?t:void 0,i,null)}})}),Q.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},size:function(){return this.length}}),Q.fn.andSelf=Q.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Q});var Ne=S.jQuery,ze=S.$;return Q.noConflict=function(t){return S.$===Q&&(S.$=ze),t&&S.jQuery===Q&&(S.jQuery=Ne),Q},t||(S.jQuery=S.$=Q),Q}),jQuery.effects||function(y,t){var i,a=!1!==y.uiBackCompat,r="ui-effects-";y.effects={effect:{}},function(h,u){function d(t,e,i){var n=g[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:t<0?0:t>n.max?n.max:t)}function a(s){var a=f(),l=a._rgba=[];return s=s.toLowerCase(),v(e,function(t,e){var i,n=e.re.exec(s),o=n&&e.parse(n),r=e.space||"rgba";return o?(i=a[r](o),a[m[r].cache]=i[m[r].cache],l=a._rgba=i._rgba,!1):u}),l.length?("0,0,0,0"===l.join()&&h.extend(l,c.transparent),a):c[s]}function l(t,e,i){return 6*(i=(i+1)%1)<1?t+6*(e-t)*i:2*i<1?e:3*i<2?t+6*(e-t)*(2/3-i):t}var c,t="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),p=/^([\-+])=\s*(\d+\.?\d*)/,e=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],f=h.Color=function(t,e,i,n){return new h.Color.fn.parse(t,e,i,n)},m={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},g={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},s=f.support={},i=h("<p>")[0],v=h.each;i.style.cssText="background-color:rgba(1,1,1,.5)",s.rgba=-1<i.style.backgroundColor.indexOf("rgba"),v(m,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),f.fn=h.extend(f.prototype,{parse:function(o,t,e,i){if(o===u)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=h(o).css(t),t=u);var r=this,n=h.type(o),s=this._rgba=[];return t!==u&&(o=[o,t,e,i],n="array"),"string"===n?this.parse(a(o)||c._default):"array"===n?(v(m.rgba.props,function(t,e){s[e.idx]=d(o[e.idx],e)}),this):"object"===n?(v(m,o instanceof f?function(t,e){o[e.cache]&&(r[e.cache]=o[e.cache].slice())}:function(t,i){var n=i.cache;v(i.props,function(t,e){if(!r[n]&&i.to){if("alpha"===t||null==o[t])return;r[n]=i.to(r._rgba)}r[n][e.idx]=d(o[t],e,!0)}),r[n]&&y.inArray(null,r[n].slice(0,3))<0&&(r[n][3]=1,i.from&&(r._rgba=i.from(r[n])))}),this):u},is:function(t){var o=f(t),r=!0,s=this;return v(m,function(t,e){var i,n=o[e.cache];return n&&(i=s[e.cache]||e.to&&e.to(s._rgba)||[],v(e.props,function(t,e){return null!=n[e.idx]?r=n[e.idx]===i[e.idx]:u})),r}),r},_space:function(){var i=[],n=this;return v(m,function(t,e){n[e.cache]&&i.push(t)}),i.pop()},transition:function(t,s){var a=f(t),e=a._space(),i=m[e],n=0===this.alpha()?f("transparent"):this,l=n[i.cache]||i.to(n._rgba),c=l.slice();return a=a[i.cache],v(i.props,function(t,e){var i=e.idx,n=l[i],o=a[i],r=g[e.type]||{};null!==o&&(null===n?c[i]=o:(r.mod&&(o-n>r.mod/2?n+=r.mod:n-o>r.mod/2&&(n-=r.mod)),c[i]=d((o-n)*s+n,e)))}),this[e](c)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),i=e.pop(),n=f(t)._rgba;return f(h.map(e,function(t,e){return(1-i)*n[e]+i*t}))},toRgbaString:function(){var t="rgba(",e=h.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=h.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),i=e.pop();return t&&e.push(~~(255*i)),"#"+h.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,m.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,o=t[1]/255,r=t[2]/255,s=t[3],a=Math.max(n,o,r),l=Math.min(n,o,r),c=a-l,h=a+l,u=.5*h;return e=l===a?0:n===a?60*(o-r)/c+360:o===a?60*(r-n)/c+120:60*(n-o)/c+240,i=0===u||1===u?u:u<=.5?c/h:c/(2-h),[Math.round(e)%360,i,u,null==s?1:s]},m.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],o=t[3],r=n<=.5?n*(1+i):n+i-n*i,s=2*n-r;return[Math.round(255*l(s,r,e+1/3)),Math.round(255*l(s,r,e)),Math.round(255*l(s,r,e-1/3)),o]},v(m,function(l,t){var i=t.props,s=t.cache,a=t.to,c=t.from;f.fn[l]=function(t){if(a&&!this[s]&&(this[s]=a(this._rgba)),t===u)return this[s].slice();var e,n=h.type(t),o="array"===n||"object"===n?t:arguments,r=this[s].slice();return v(i,function(t,e){var i=o["object"===n?t:e.idx];null==i&&(i=r[e.idx]),r[e.idx]=d(i,e)}),c?((e=f(c(r)))[s]=r,e):f(r)},v(i,function(s,a){f.fn[s]||(f.fn[s]=function(t){var e,i=h.type(t),n="alpha"===s?this._hsla?"hsla":"rgba":l,o=this[n](),r=o[a.idx];return"undefined"===i?r:("function"===i&&(t=t.call(this,r),i=h.type(t)),null==t&&a.empty?this:("string"===i&&((e=p.exec(t))&&(t=r+parseFloat(e[2])*("+"===e[1]?1:-1))),o[a.idx]=t,this[n](o)))})})}),v(t,function(t,r){h.cssHooks[r]={set:function(t,e){var i,n,o="";if("string"!==h.type(e)||(i=a(e))){if(e=f(i||e),!s.rgba&&1!==e._rgba[3]){for(n="backgroundColor"===r?t.parentNode:t;(""===o||"transparent"===o)&&n&&n.style;)try{o=h.css(n,"backgroundColor"),n=n.parentNode}catch(t){}e=e.blend(o&&"transparent"!==o?o:"_default")}e=e.toRgbaString()}try{t.style[r]=e}catch(t){}}},h.fx.step[r]=function(t){t.colorInit||(t.start=f(t.elem,r),t.end=f(t.end),t.colorInit=!0),h.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}}),h.cssHooks.borderColor={expand:function(i){var n={};return v(["Top","Right","Bottom","Left"],function(t,e){n["border"+e+"Color"]=i}),n}},c=h.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function s(){var t,e,i=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={};if(i&&i.length&&i[0]&&i[i[0]])for(e=i.length;e--;)"string"==typeof i[t=i[e]]&&(n[y.camelCase(t)]=i[t]);else for(t in i)"string"==typeof i[t]&&(n[t]=i[t]);return n}var a=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};y.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){y.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,e,t.end),t.setAttr=!0)}}),y.effects.animateClass=function(o,t,e,i){var r=y.speed(t,e,i);return this.queue(function(){var t,i=y(this),e=i.attr("class")||"",n=r.children?i.find("*").andSelf():i;n=n.map(function(){return{el:y(this),start:s.call(this)}}),(t=function(){y.each(a,function(t,e){o[e]&&i[e+"Class"](o[e])})})(),n=n.map(function(){return this.end=s.call(this.el[0]),this.diff=function(t,e){var i,n,o={};for(i in e)n=e[i],t[i]!==n&&(l[i]||(y.fx.step[i]||!isNaN(parseFloat(n)))&&(o[i]=n));return o}(this.start,this.end),this}),i.attr("class",e),n=n.map(function(){var t=this,e=y.Deferred(),i=jQuery.extend({},r,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,i),e.promise()}),y.when.apply(y,n.get()).done(function(){t(),y.each(arguments,function(){var e=this.el;y.each(this.diff,function(t){e.css(t,"")})}),r.complete.call(i[0])})})},y.fn.extend({_addClass:y.fn.addClass,addClass:function(t,e,i,n){return e?y.effects.animateClass.call(this,{add:t},e,i,n):this._addClass(t)},_removeClass:y.fn.removeClass,removeClass:function(t,e,i,n){return e?y.effects.animateClass.call(this,{remove:t},e,i,n):this._removeClass(t)},_toggleClass:y.fn.toggleClass,toggleClass:function(t,e,i,n,o){return"boolean"==typeof e||void 0===e?i?y.effects.animateClass.call(this,e?{add:t}:{remove:t},i,n,o):this._toggleClass(t,e):y.effects.animateClass.call(this,{toggle:t},e,i,n)},switchClass:function(t,e,i,n,o){return y.effects.animateClass.call(this,{add:e,remove:t},i,n,o)}})}(),function(){function o(t,e,i,n){return y.isPlainObject(t)&&(t=(e=t).effect),t={effect:t},null==e&&(e={}),y.isFunction(e)&&(n=e,i=null,e={}),("number"==typeof e||y.fx.speeds[e])&&(n=i,i=e,e={}),y.isFunction(i)&&(n=i,i=null),e&&y.extend(t,e),i=i||e.duration,t.duration=y.fx.off?0:"number"==typeof i?i:i in y.fx.speeds?y.fx.speeds[i]:y.fx.speeds._default,t.complete=n||e.complete,t}function i(t){return!(t&&"number"!=typeof t&&!y.fx.speeds[t])||"string"==typeof t&&!y.effects.effect[t]&&(!a||!y.effects[t])}y.extend(y.effects,{version:"1.9.2",save:function(t,e){for(var i=0;e.length>i;i++)null!==e[i]&&t.data(r+e[i],t[0].style[e[i]])},restore:function(t,e){var i,n;for(n=0;e.length>n;n++)null!==e[n]&&(void 0===(i=t.data(r+e[n]))&&(i=""),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(i){if(i.parent().is(".ui-effects-wrapper"))return i.parent();var n={width:i.outerWidth(!0),height:i.outerHeight(!0),float:i.css("float")},t=y("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:i.width(),height:i.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}return i.wrap(t),(i[0]===o||y.contains(i[0],o))&&y(o).focus(),t=i.parent(),"static"===i.css("position")?(t.css({position:"relative"}),i.css({position:"relative"})):(y.extend(n,{position:i.css("position"),zIndex:i.css("z-index")}),y.each(["top","left","bottom","right"],function(t,e){n[e]=i.css(e),isNaN(parseInt(n[e],10))&&(n[e]="auto")}),i.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),i.css(e),t.css(n).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===e||y.contains(t[0],e))&&y(e).focus()),t},setTransition:function(n,t,o,r){return r=r||{},y.each(t,function(t,e){var i=n.cssUnit(e);0<i[0]&&(r[e]=i[0]*o+i[1])}),r}}),y.fn.extend({effect:function(){function t(t){function e(){y.isFunction(n)&&n.call(i[0]),y.isFunction(t)&&t()}var i=y(this),n=r.complete,o=r.mode;(i.is(":hidden")?"hide"===o:"show"===o)?e():s.call(i[0],r,e)}var r=o.apply(this,arguments),e=r.mode,i=r.queue,s=y.effects.effect[r.effect],n=!s&&a&&y.effects[r.effect];return y.fx.off||!s&&!n?e?this[e](r.duration,r.complete):this.each(function(){r.complete&&r.complete.call(this)}):s?!1===i?this.each(t):this.queue(i||"fx",t):n.call(this,{options:r,duration:r.duration,callback:r.complete,mode:r.mode})},_show:y.fn.show,show:function(t){if(i(t))return this._show.apply(this,arguments);var e=o.apply(this,arguments);return e.mode="show",this.effect.call(this,e)},_hide:y.fn.hide,hide:function(t){if(i(t))return this._hide.apply(this,arguments);var e=o.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)},__toggle:y.fn.toggle,toggle:function(t){if(i(t)||"boolean"==typeof t||y.isFunction(t))return this.__toggle.apply(this,arguments);var e=o.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)},cssUnit:function(t){var i=this.css(t),n=[];return y.each(["em","px","%","pt"],function(t,e){0<i.indexOf(e)&&(n=[parseFloat(i),e])}),n}})}(),i={},y.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){i[t]=function(t){return Math.pow(t,e+2)}}),y.extend(i,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),y.each(i,function(t,e){y.easing["easeIn"+t]=e,y.easing["easeOut"+t]=function(t){return 1-e(1-t)},y.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}})}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(E){function t(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},E.extend(this._defaults,this.regional[""]),this.regional.en=E.extend(!0,{},this.regional[""]),this.regional["en-US"]=E.extend(!0,{},this.regional.en),this.dpDiv=i(E("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",e,function(){E(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&E(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&E(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",e,r)}function r(){E.datepicker._isDisabledDatepicker(f.inline?f.dpDiv.parent()[0]:f.input[0])||(E(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),E(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&E(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&E(this).addClass("ui-datepicker-next-hover"))}function u(t,e){for(var i in E.extend(t,e),e)null==e[i]&&(t[i]=e[i]);return t}function e(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}E.ui=E.ui||{},E.ui.version="1.12.1";var n,o,s,a,l=0,c=Array.prototype.slice;E.cleanData=(a=E.cleanData,function(t){var e,i,n;for(n=0;null!=(i=t[n]);n++)try{(e=E._data(i,"events"))&&e.remove&&E(i).triggerHandler("remove")}catch(t){}a(t)}),E.widget=function(t,i,e){var n,o,r,s={},a=t.split(".")[0],l=a+"-"+(t=t.split(".")[1]);return e||(e=i,i=E.Widget),E.isArray(e)&&(e=E.extend.apply(null,[{}].concat(e))),E.expr[":"][l.toLowerCase()]=function(t){return!!E.data(t,l)},E[a]=E[a]||{},n=E[a][t],o=E[a][t]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},E.extend(o,n,{version:e.version,_proto:E.extend({},e),_childConstructors:[]}),(r=new i).options=E.widget.extend({},r.options),E.each(e,function(e,r){return E.isFunction(r)?void(s[e]=function(){function n(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}return function(){var t,e=this._super,i=this._superApply;return this._super=n,this._superApply=o,t=r.apply(this,arguments),this._super=e,this._superApply=i,t}}()):void(s[e]=r)}),o.prototype=E.widget.extend(r,{widgetEventPrefix:n&&r.widgetEventPrefix||t},s,{constructor:o,namespace:a,widgetName:t,widgetFullName:l}),n?(E.each(n._childConstructors,function(t,e){var i=e.prototype;E.widget(i.namespace+"."+i.widgetName,o,e._proto)}),delete n._childConstructors):i._childConstructors.push(o),E.widget.bridge(t,o),o},E.widget.extend=function(t){for(var e,i,n=c.call(arguments,1),o=0,r=n.length;o<r;o++)for(e in n[o])i=n[o][e],n[o].hasOwnProperty(e)&&void 0!==i&&(t[e]=E.isPlainObject(i)?E.isPlainObject(t[e])?E.widget.extend({},t[e],i):E.widget.extend({},i):i);return t},E.widget.bridge=function(r,e){var s=e.prototype.widgetFullName||r;E.fn[r]=function(i){var t="string"==typeof i,n=c.call(arguments,1),o=this;return t?this.length||"instance"!==i?this.each(function(){var t,e=E.data(this,s);return"instance"===i?(o=e,!1):e?E.isFunction(e[i])&&"_"!==i.charAt(0)?(t=e[i].apply(e,n))!==e&&void 0!==t?(o=t&&t.jquery?o.pushStack(t.get()):t,!1):void 0:E.error("no such method '"+i+"' for "+r+" widget instance"):E.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+i+"'")}):o=void 0:(n.length&&(i=E.widget.extend.apply(null,[i].concat(n))),this.each(function(){var t=E.data(this,s);t?(t.option(i||{}),t._init&&t._init()):E.data(this,s,new e(i,this))})),o}},E.Widget=function(){},E.Widget._childConstructors=[],E.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,e){e=E(e||this.defaultElement||this)[0],this.element=E(e),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=E(),this.hoverable=E(),this.focusable=E(),this.classesElementLookup={},e!==this&&(E.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=E(e.style?e.ownerDocument:e.document||e),this.window=E(this.document[0].defaultView||this.document[0].parentWindow)),this.options=E.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:E.noop,_create:E.noop,_init:E.noop,destroy:function(){var i=this;this._destroy(),E.each(this.classesElementLookup,function(t,e){i._removeClass(e,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:E.noop,widget:function(){return this.element},option:function(t,e){var i,n,o,r=t;if(0===arguments.length)return E.widget.extend({},this.options);if("string"==typeof t)if(r={},t=(i=t.split(".")).shift(),i.length){for(n=r[t]=E.widget.extend({},this.options[t]),o=0;i.length-1>o;o++)n[i[o]]=n[i[o]]||{},n=n[i[o]];if(t=i.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];r[t]=e}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,i,n;for(e in t)n=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&n&&n.length&&(i=E(n.get()),this._removeClass(n,e),i.addClass(this._classes({element:i,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(o){function t(t,e){var i,n;for(n=0;t.length>n;n++)i=s.classesElementLookup[t[n]]||E(),i=o.add?E(E.unique(i.get().concat(o.element.get()))):E(i.not(o.element).get()),s.classesElementLookup[t[n]]=i,r.push(t[n]),e&&o.classes[t[n]]&&r.push(o.classes[t[n]])}var r=[],s=this;return o=E.extend({element:this.element,classes:this.options.classes||{}},o),this._on(o.element,{remove:"_untrackClassesElement"}),o.keys&&t(o.keys.match(/\S+/g)||[],!0),o.extra&&t(o.extra.match(/\S+/g)||[]),r.join(" ")},_untrackClassesElement:function(i){var n=this;E.each(n.classesElementLookup,function(t,e){-1!==E.inArray(i.target,e)&&(n.classesElementLookup[t]=E(e.not(i.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var o="string"==typeof t||null===t,r={extra:o?e:i,keys:o?t:e,element:o?this.element:t,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(s,a,t){var l,c=this;"boolean"!=typeof s&&(t=a,a=s,s=!1),t?(a=l=E(a),this.bindings=this.bindings.add(a)):(t=a,a=this.element,l=this.widget()),E.each(t,function(t,e){function i(){return s||!0!==c.options.disabled&&!E(this).hasClass("ui-state-disabled")?("string"==typeof e?c[e]:e).apply(c,arguments):void 0}"string"!=typeof e&&(i.guid=e.guid=e.guid||i.guid||E.guid++);var n=t.match(/^([\w:-]*)\s*(.*)$/),o=n[1]+c.eventNamespace,r=n[2];r?l.on(o,r,i):a.on(o,i)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e).off(e),this.bindings=E(this.bindings.not(t).get()),this.focusable=E(this.focusable.not(t).get()),this.hoverable=E(this.hoverable.not(t).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(E(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(E(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(E(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(E(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,i){var n,o,r=this.options[t];if(i=i||{},(e=E.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],o=e.originalEvent)for(n in o)n in e||(e[n]=o[n]);return this.element.trigger(e,i),!(E.isFunction(r)&&!1===r.apply(this.element[0],[e].concat(i))||e.isDefaultPrevented())}},E.each({show:"fadeIn",hide:"fadeOut"},function(r,s){E.Widget.prototype["_"+r]=function(e,t,i){"string"==typeof t&&(t={effect:t});var n,o=t?!0===t||"number"==typeof t?s:t.effect||s:r;"number"==typeof(t=t||{})&&(t={duration:t}),n=!E.isEmptyObject(t),t.complete=i,t.delay&&e.delay(t.delay),n&&E.effects&&E.effects.effect[o]?e[r](t):o!==r&&e[o]?e[o](t.duration,t.easing,i):e.queue(function(t){E(this)[r](),i&&i.call(e[0]),t()})}}),E.widget,function(){function x(t,e,i){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?i/100:1)]}function S(t,e){return parseInt(E.css(t,e),10)||0}var o,T=Math.max,M=Math.abs,n=/left|center|right/,r=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=E.fn.position;E.position={scrollbarWidth:function(){if(void 0!==o)return o;var t,e,i=E("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=i.children()[0];return E("body").append(i),t=n.offsetWidth,i.css("overflow","scroll"),t===(e=n.offsetWidth)&&(e=i[0].clientWidth),i.remove(),o=t-e},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?E.position.scrollbarWidth():0,height:n?E.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=E(t||window),i=E.isWindow(e[0]),n=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:i,isDocument:n,offset:!i&&!n?E(t).offset():{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:e.outerWidth(),height:e.outerHeight()}}},E.fn.position=function(u){if(!u||!u.of)return c.apply(this,arguments);u=E.extend({},u);var d,p,f,m,g,t,e,i,v=E(u.of),y=E.position.getWithinInfo(u.within),b=E.position.getScrollInfo(y),w=(u.collision||"flip").split(" "),_={};return t=9===(i=(e=v)[0]).nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:E.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()},v[0].preventDefault&&(u.at="left top"),p=t.width,f=t.height,m=t.offset,g=E.extend({},m),E.each(["my","at"],function(){var t,e,i=(u[this]||"").split(" ");1===i.length&&(i=n.test(i[0])?i.concat(["center"]):r.test(i[0])?["center"].concat(i):["center","center"]),i[0]=n.test(i[0])?i[0]:"center",i[1]=r.test(i[1])?i[1]:"center",t=s.exec(i[0]),e=s.exec(i[1]),_[this]=[t?t[0]:0,e?e[0]:0],u[this]=[a.exec(i[0])[0],a.exec(i[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===u.at[0]?g.left+=p:"center"===u.at[0]&&(g.left+=p/2),"bottom"===u.at[1]?g.top+=f:"center"===u.at[1]&&(g.top+=f/2),d=x(_.at,p,f),g.left+=d[0],g.top+=d[1],this.each(function(){var i,t,s=E(this),a=s.outerWidth(),l=s.outerHeight(),e=S(this,"marginLeft"),n=S(this,"marginTop"),o=a+e+S(this,"marginRight")+b.width,r=l+n+S(this,"marginBottom")+b.height,c=E.extend({},g),h=x(_.my,s.outerWidth(),s.outerHeight());"right"===u.my[0]?c.left-=a:"center"===u.my[0]&&(c.left-=a/2),"bottom"===u.my[1]?c.top-=l:"center"===u.my[1]&&(c.top-=l/2),c.left+=h[0],c.top+=h[1],i={marginLeft:e,marginTop:n},E.each(["left","top"],function(t,e){E.ui.position[w[t]]&&E.ui.position[w[t]][e](c,{targetWidth:p,targetHeight:f,elemWidth:a,elemHeight:l,collisionPosition:i,collisionWidth:o,collisionHeight:r,offset:[d[0]+h[0],d[1]+h[1]],my:u.my,at:u.at,within:y,elem:s})}),u.using&&(t=function(t){var e=m.left-c.left,i=e+p-a,n=m.top-c.top,o=n+f-l,r={target:{element:v,left:m.left,top:m.top,width:p,height:f},element:{element:s,left:c.left,top:c.top,width:a,height:l},horizontal:i<0?"left":0<e?"right":"center",vertical:o<0?"top":0<n?"bottom":"middle"};p<a&&p>M(e+i)&&(r.horizontal="center"),f<l&&f>M(n+o)&&(r.vertical="middle"),r.important=T(M(e),M(i))>T(M(n),M(o))?"horizontal":"vertical",u.using.call(this,t,r)}),s.offset(E.extend(c,{using:t}))})},E.ui.position={fit:{left:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,s=t.left-e.collisionPosition.marginLeft,a=o-s,l=s+e.collisionWidth-r-o;e.collisionWidth>r?0<a&&l<=0?(i=t.left+a+e.collisionWidth-r-o,t.left+=a-i):t.left=0<l&&a<=0?o:l<a?o+r-e.collisionWidth:o:0<a?t.left+=a:0<l?t.left-=l:t.left=T(t.left-s,t.left)},top:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollTop:n.offset.top,r=e.within.height,s=t.top-e.collisionPosition.marginTop,a=o-s,l=s+e.collisionHeight-r-o;e.collisionHeight>r?0<a&&l<=0?(i=t.top+a+e.collisionHeight-r-o,t.top+=a-i):t.top=0<l&&a<=0?o:l<a?o+r-e.collisionHeight:o:0<a?t.top+=a:0<l?t.top-=l:t.top=T(t.top-s,t.top)}},flip:{left:function(t,e){var i,n,o=e.within,r=o.offset.left+o.scrollLeft,s=o.width,a=o.isWindow?o.scrollLeft:o.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-a,h=l+e.collisionWidth-s-a,u="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];c<0?((i=t.left+u+d+p+e.collisionWidth-s-r)<0||M(c)>i)&&(t.left+=u+d+p):0<h&&((0<(n=t.left-e.collisionPosition.marginLeft+u+d+p-a)||h>M(n))&&(t.left+=u+d+p))},top:function(t,e){var i,n,o=e.within,r=o.offset.top+o.scrollTop,s=o.height,a=o.isWindow?o.scrollTop:o.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-a,h=l+e.collisionHeight-s-a,u="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,d="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];c<0?((n=t.top+u+d+p+e.collisionHeight-s-r)<0||M(c)>n)&&(t.top+=u+d+p):0<h&&((0<(i=t.top-e.collisionPosition.marginTop+u+d+p-a)||h>M(i))&&(t.top+=u+d+p))}},flipfit:{left:function(){E.ui.position.flip.left.apply(this,arguments),E.ui.position.fit.left.apply(this,arguments)},top:function(){E.ui.position.flip.top.apply(this,arguments),E.ui.position.fit.top.apply(this,arguments)}}}}(),E.ui.position,E.extend(E.expr[":"],{data:E.expr.createPseudo?E.expr.createPseudo(function(e){return function(t){return!!E.data(t,e)}}):function(t,e,i){return!!E.data(t,i[3])}}),E.fn.extend({disableSelection:(s="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(s+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}}),E.ui.focusable=function(t,e){var i,n,o,r,s,a=t.nodeName.toLowerCase();return"area"===a?(n=(i=t.parentNode).name,!(!t.href||!n||"map"!==i.nodeName.toLowerCase())&&(0<(o=E("img[usemap='#"+n+"']")).length&&o.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(a)?(r=!t.disabled)&&((s=E(t).closest("fieldset")[0])&&(r=!s.disabled)):r="a"===a&&t.href||e,r&&E(t).is(":visible")&&function(t){for(var e=t.css("visibility");"inherit"===e;)e=(t=t.parent()).css("visibility");return"hidden"!==e}(E(t)))},E.extend(E.expr[":"],{focusable:function(t){return E.ui.focusable(t,null!=E.attr(t,"tabindex"))}}),E.ui.focusable,E.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):E(this[0].form)},E.ui.formResetMixin={_formResetHandler:function(){var e=E(this);setTimeout(function(){var t=e.data("ui-form-reset-instances");E.each(t,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(E.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===E.fn.jquery.substring(0,3)&&(E.each(["Width","Height"],function(t,i){function n(t,e,i,n){return E.each(o,function(){e-=parseFloat(E.css(t,"padding"+this))||0,i&&(e-=parseFloat(E.css(t,"border"+this+"Width"))||0),n&&(e-=parseFloat(E.css(t,"margin"+this))||0)}),e}var o="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),s={innerWidth:E.fn.innerWidth,innerHeight:E.fn.innerHeight,outerWidth:E.fn.outerWidth,outerHeight:E.fn.outerHeight};E.fn["inner"+i]=function(t){return void 0===t?s["inner"+i].call(this):this.each(function(){E(this).css(r,n(this,t)+"px")})},E.fn["outer"+i]=function(t,e){return"number"!=typeof t?s["outer"+i].call(this,t):this.each(function(){E(this).css(r,n(this,t,!0,e)+"px")})}}),E.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),E.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},E.ui.escapeSelector=(o=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(o,"\\$1")}),E.fn.labels=function(){var t,e,i,n,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(n=this.eq(0).parents("label"),(i=this.attr("id"))&&(o=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),e="label[for='"+E.ui.escapeSelector(i)+"']",n=n.add(o.find(e).addBack(e))),this.pushStack(n))},E.fn.scrollParent=function(t){var e=this.css("position"),i="absolute"===e,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=E(this);return(!i||"static"!==t.css("position"))&&n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&o.length?o:E(this[0].ownerDocument||document)},E.extend(E.expr[":"],{tabbable:function(t){var e=E.attr(t,"tabindex"),i=null!=e;return(!i||0<=e)&&E.ui.focusable(t,i)}}),E.fn.extend({uniqueId:(n=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&E(this).removeAttr("id")})}}),E.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var h=!1;E(document).on("mouseup",function(){h=!1}),E.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(t){return!0===E.data(t.target,e.widgetName+".preventClickEvent")?(E.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!h){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,i=1===t.which,n=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&E(t.target).closest(this.options.cancel).length;return i&&!n&&this._mouseCapture(t)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?t.preventDefault():(!0===E.data(t.target,this.widgetName+".preventClickEvent")&&E.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),h=!0)),!0}},_mouseMove:function(t){if(this._mouseMoved){if(E.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&E.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,h=!1,t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),E.ui.plugin={add:function(t,e,i){var n,o=E.ui[t].prototype;for(n in i)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([e,i[n]])},call:function(t,e,i,n){var o,r=t.plugins[e];if(r&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;r.length>o;o++)t.options[r[o][0]]&&r[o][1].apply(t.element,i)}},E.ui.safeActiveElement=function(e){var i;try{i=e.activeElement}catch(t){i=e.body}return i||(i=e.body),i.nodeName||(i=e.body),i},E.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&E(t).trigger("blur")},E.widget("ui.draggable",E.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var e=this.options;return!(this.helper||e.disabled||0<E(t.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===e.iframeFix?"iframe":e.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=E(this);return E("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var e=E.ui.safeActiveElement(this.document[0]);E(t.target).closest(e).length||E.ui.safeBlur(e)},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),E.ui.ddmanager&&(E.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===E(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),E.ui.ddmanager&&!e.dropBehaviour&&E.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),E.ui.ddmanager&&E.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,e){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!e){var i=this._uiHash();if(!1===this._trigger("drag",t,i))return this._mouseUp(new E.Event("mouseup",t)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",E.ui.ddmanager&&E.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e=this,i=!1;return E.ui.ddmanager&&!this.options.dropBehaviour&&(i=E.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||E.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?E(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),E.ui.ddmanager&&E.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),E.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new E.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!E(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var e=this.options,i=E.isFunction(e.helper),n=i?E(e.helper.apply(this.element[0],[t])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo),i&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),E.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==e&&E.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?void(this.containment=[E(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,E(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,E(window).scrollLeft()+E(window).width()-this.helperProportions.width-this.margins.left,E(window).scrollTop()+(E(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,E(o).width()-this.helperProportions.width-this.margins.left,(E(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),void((i=(e=E(n.containment))[0])&&(t=/(scroll|auto)/.test(e.css("overflow")),this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=e))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,e,i){return i=i||this._uiHash(),E.ui.plugin.call(this,t,[e,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),E.Widget.prototype._trigger.call(this,t,e,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),E.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,i){var n=E.extend({},t,{item:i.element});i.sortables=[],E(i.options.connectToSortable).each(function(){var t=E(this).sortable("instance");t&&!t.options.disabled&&(i.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,n))})},stop:function(e,t,i){var n=E.extend({},t,{item:i.element});i.cancelHelperRemoval=!1,E.each(i.sortables,function(){var t=this;t.isOver?(t.isOver=0,i.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(i,n,o){E.each(o.sortables,function(){var t=!1,e=this;e.positionAbs=o.positionAbs,e.helperProportions=o.helperProportions,e.offset.click=o.offset.click,e._intersectsWith(e.containerCache)&&(t=!0,E.each(o.sortables,function(){return this.positionAbs=o.positionAbs,this.helperProportions=o.helperProportions,this.offset.click=o.offset.click,this!==e&&this._intersectsWith(this.containerCache)&&E.contains(e.element[0],this.element[0])&&(t=!1),t})),t?(e.isOver||(e.isOver=1,o._parent=n.helper.parent(),e.currentItem=n.helper.appendTo(e.element).data("ui-sortable-item",!0),e.options._helper=e.options.helper,e.options.helper=function(){return n.helper[0]},i.target=e.currentItem[0],e._mouseCapture(i,!0),e._mouseStart(i,!0,!0),e.offset.click.top=o.offset.click.top,e.offset.click.left=o.offset.click.left,e.offset.parent.left-=o.offset.parent.left-e.offset.parent.left,e.offset.parent.top-=o.offset.parent.top-e.offset.parent.top,o._trigger("toSortable",i),o.dropped=e.element,E.each(o.sortables,function(){this.refreshPositions()}),o.currentItem=o.element,e.fromOutside=o),e.currentItem&&(e._mouseDrag(i),n.position=e.position)):e.isOver&&(e.isOver=0,e.cancelHelperRemoval=!0,e.options._revert=e.options.revert,e.options.revert=!1,e._trigger("out",i,e._uiHash(e)),e._mouseStop(i,!0),e.options.revert=e.options._revert,e.options.helper=e.options._helper,e.placeholder&&e.placeholder.remove(),n.helper.appendTo(o._parent),o._refreshOffsets(i),n.position=o._generatePosition(i,!0),o._trigger("fromSortable",i),o.dropped=!1,E.each(o.sortables,function(){this.refreshPositions()}))})}}),E.ui.plugin.add("draggable","cursor",{start:function(t,e,i){var n=E("body"),o=i.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(t,e,i){var n=i.options;n._cursor&&E("body").css("cursor",n._cursor)}}),E.ui.plugin.add("draggable","opacity",{start:function(t,e,i){var n=E(e.helper),o=i.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(t,e,i){var n=i.options;n._opacity&&E(e.helper).css("opacity",n._opacity)}}),E.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,e,i){var n=i.options,o=!1,r=i.scrollParentNotHidden[0],s=i.document[0];r!==s&&"HTML"!==r.tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+r.offsetHeight-t.pageY<n.scrollSensitivity?r.scrollTop=o=r.scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(r.scrollTop=o=r.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+r.offsetWidth-t.pageX<n.scrollSensitivity?r.scrollLeft=o=r.scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(r.scrollLeft=o=r.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-E(s).scrollTop()<n.scrollSensitivity?o=E(s).scrollTop(E(s).scrollTop()-n.scrollSpeed):E(window).height()-(t.pageY-E(s).scrollTop())<n.scrollSensitivity&&(o=E(s).scrollTop(E(s).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-E(s).scrollLeft()<n.scrollSensitivity?o=E(s).scrollLeft(E(s).scrollLeft()-n.scrollSpeed):E(window).width()-(t.pageX-E(s).scrollLeft())<n.scrollSensitivity&&(o=E(s).scrollLeft(E(s).scrollLeft()+n.scrollSpeed)))),!1!==o&&E.ui.ddmanager&&!n.dropBehaviour&&E.ui.ddmanager.prepareOffsets(i,t)}}),E.ui.plugin.add("draggable","snap",{start:function(t,e,i){var n=i.options;i.snapElements=[],E(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=E(this),e=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e,i){var n,o,r,s,a,l,c,h,u,d,p=i.options,f=p.snapTolerance,m=e.offset.left,g=m+i.helperProportions.width,v=e.offset.top,y=v+i.helperProportions.height;for(u=i.snapElements.length-1;0<=u;u--)l=(a=i.snapElements[u].left-i.margins.left)+i.snapElements[u].width,h=(c=i.snapElements[u].top-i.margins.top)+i.snapElements[u].height,g<a-f||l+f<m||y<c-f||h+f<v||!E.contains(i.snapElements[u].item.ownerDocument,i.snapElements[u].item)?(i.snapElements[u].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,E.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=!1):("inner"!==p.snapMode&&(n=f>=Math.abs(c-y),o=f>=Math.abs(h-v),r=f>=Math.abs(a-g),s=f>=Math.abs(l-m),n&&(e.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),o&&(e.position.top=i._convertPositionTo("relative",{top:h,left:0}).top),r&&(e.position.left=i._convertPositionTo("relative",{top:0,left:a-i.helperProportions.width}).left),s&&(e.position.left=i._convertPositionTo("relative",{top:0,left:l}).left)),d=n||o||r||s,"outer"!==p.snapMode&&(n=f>=Math.abs(c-v),o=f>=Math.abs(h-y),r=f>=Math.abs(a-m),s=f>=Math.abs(l-g),n&&(e.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),o&&(e.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top),r&&(e.position.left=i._convertPositionTo("relative",{top:0,left:a}).left),s&&(e.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left)),!i.snapElements[u].snapping&&(n||o||r||s||d)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,E.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=n||o||r||s||d)}}),E.ui.plugin.add("draggable","stack",{start:function(t,e,i){var n,o=i.options,r=E.makeArray(E(o.stack)).sort(function(t,e){return(parseInt(E(t).css("zIndex"),10)||0)-(parseInt(E(e).css("zIndex"),10)||0)});r.length&&(n=parseInt(E(r[0]).css("zIndex"),10)||0,E(r).each(function(t){E(this).css("zIndex",n+t)}),this.css("zIndex",n+r.length))}}),E.ui.plugin.add("draggable","zIndex",{start:function(t,e,i){var n=E(e.helper),o=i.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(t,e,i){var n=i.options;n._zIndex&&E(e.helper).css("zIndex",n._zIndex)}}),E.ui.draggable,E.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=E.isFunction(i)?i:function(t){return t.is(i)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(e.scope),e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){E.ui.ddmanager.droppables[t]=E.ui.ddmanager.droppables[t]||[],E.ui.ddmanager.droppables[t].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=E.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,e){if("accept"===t)this.accept=E.isFunction(e)?e:function(t){return t.is(e)};else if("scope"===t){var i=E.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(e)}this._super(t,e)},_activate:function(t){var e=E.ui.ddmanager.current;this._addActiveClass(),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=E.ui.ddmanager.current;this._removeActiveClass(),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=E.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=E.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(e)))},_drop:function(e,t){var i=t||E.ui.ddmanager.current,n=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=E(this).droppable("instance");return t.options.greedy&&!t.options.disabled&&t.options.scope===i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&d(i,E.extend(t,{offset:t.element.offset()}),t.options.tolerance,e)?!(n=!0):void 0}),!n&&(!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(i)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var d=E.ui.intersect=function(){function d(t,e,i){return e<=t&&t<e+i}return function(t,e,i,n){if(!e.offset)return!1;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,r=(t.positionAbs||t.position.absolute).top+t.margins.top,s=o+t.helperProportions.width,a=r+t.helperProportions.height,l=e.offset.left,c=e.offset.top,h=l+e.proportions().width,u=c+e.proportions().height;switch(i){case"fit":return l<=o&&s<=h&&c<=r&&a<=u;case"intersect":return o+t.helperProportions.width/2>l&&h>s-t.helperProportions.width/2&&r+t.helperProportions.height/2>c&&u>a-t.helperProportions.height/2;case"pointer":return d(n.pageY,c,e.proportions().height)&&d(n.pageX,l,e.proportions().width);case"touch":return(c<=r&&r<=u||c<=a&&a<=u||r<c&&u<a)&&(l<=o&&o<=h||l<=s&&s<=h||o<l&&h<s);default:return!1}}}();!(E.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,e){var i,n,o=E.ui.ddmanager.droppables[t.options.scope]||[],r=e?e.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(i=0;o.length>i;i++)if(!(o[i].options.disabled||t&&!o[i].accept.call(o[i].element[0],t.currentItem||t.element))){for(n=0;s.length>n;n++)if(s[n]===o[i].element[0]){o[i].proportions().height=0;continue t}o[i].visible="none"!==o[i].element.css("display"),o[i].visible&&("mousedown"===r&&o[i]._activate.call(o[i],e),o[i].offset=o[i].element.offset(),o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight}))}},drop:function(t,e){var i=!1;return E.each((E.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&d(t,this,this.options.tolerance,e)&&(i=this._drop.call(this,e)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e)))}),i},dragStart:function(t,e){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||E.ui.ddmanager.prepareOffsets(t,e)})},drag:function(r,s){r.options.refreshPositions&&E.ui.ddmanager.prepareOffsets(r,s),E.each(E.ui.ddmanager.droppables[r.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var t,e,i,n=d(r,this,this.options.tolerance,s),o=!n&&this.isover?"isout":n&&!this.isover?"isover":null;o&&(this.options.greedy&&(e=this.options.scope,(i=this.element.parents(":data(ui-droppable)").filter(function(){return E(this).droppable("instance").options.scope===e})).length&&((t=E(i[0]).droppable("instance")).greedyChild="isover"===o)),t&&"isover"===o&&(t.isover=!1,t.isout=!0,t._out.call(t,s)),this[o]=!0,this["isout"===o?"isover":"isout"]=!1,this["isover"===o?"_over":"_out"].call(this,s),t&&"isout"===o&&(t.isout=!1,t.isover=!0,t._over.call(t,s)))}})},dragStop:function(t,e){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||E.ui.ddmanager.prepareOffsets(t,e)}})!==E.uiBackCompat&&E.widget("ui.droppable",E.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),E.ui.droppable,E.widget("ui.resizable",E.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(t,e){if("hidden"===E(t).css("overflow"))return!1;var i=e&&"left"===e?"scrollLeft":"scrollTop",n=!1;return 0<t[i]||(t[i]=1,n=0<t[i],t[i]=0,n)},_create:function(){var t,e=this.options,i=this;this._addClass("ui-resizable"),E.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(E("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),e.autoHide&&E(this.element).on("mouseenter",function(){e.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){e.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,e=function(t){E(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(e(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,e,i,n,o,r=this.options,s=this;if(this.handles=r.handles||(E(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=E(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},e=0;i.length>e;e++)n="ui-resizable-"+(t=E.trim(i[e])),o=E("<div>"),this._addClass(o,"ui-resizable-handle "+n),o.css({zIndex:r.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(o);this._renderAxis=function(t){var e,i,n,o;for(e in t=t||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=E(this.handles[e]),this._on(this.handles[e],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=E(this.handles[e],this.element),o=/sw|ne|nw|se|n|s/.test(e)?i.outerHeight():i.outerWidth(),n=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(n,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var e,i,n=!1;for(e in this.handles)((i=E(this.handles[e])[0])===t.target||E.contains(i,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var e,i,n,o=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),o.containment&&(e+=E(o.containment).scrollLeft()||0,i+=E(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:e,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=E(".ui-resizable-"+this.axis).css("cursor"),E("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var e,i,n=this.originalMousePosition,o=this.axis,r=t.pageX-n.left||0,s=t.pageY-n.top||0,a=this._change[o];return this._updatePrevProperties(),a&&(e=a.apply(this,[t,r,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(e=this._updateRatio(e,t)),e=this._respectSize(e,t),this._updateCache(e),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),E.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges())),!1},_mouseStop:function(t){this.resizing=!1;var e,i,n,o,r,s,a,l=this.options,c=this;return this._helper&&(n=(i=(e=this._proportionallyResizeElements).length&&/textarea/i.test(e[0].nodeName))&&this._hasScroll(e[0],"left")?0:c.sizeDiff.height,o=i?0:c.sizeDiff.width,r={width:c.helper.width()-o,height:c.helper.height()-n},s=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,a=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(E.extend(r,{top:a,left:s})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),E("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),n>r.minHeight&&(r.minHeight=n),r.maxWidth>i&&(r.maxWidth=i),r.maxHeight>o&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,s=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),h=/nw|ne|n/.test(i);return r&&(t.width=e.minWidth),s&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),r&&c&&(t.left=a-e.minWidth),n&&c&&(t.left=a-e.maxWidth),s&&h&&(t.top=l-e.minHeight),o&&h&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],o=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(n[e])||0,i[e]+=parseFloat(o[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||E("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(t,e,i){return E.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},sw:function(t,e,i){return E.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,i]))},ne:function(t,e,i){return E.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},nw:function(t,e,i){return E.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,i]))}},_propagate:function(t,e){E.ui.plugin.call(this,t,[e,this.ui()]),"resize"!==t&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),E.ui.plugin.add("resizable","animate",{stop:function(e){var i=E(this).resizable("instance"),t=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),r=o&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,s=o?0:i.sizeDiff.width,a={width:i.size.width-s,height:i.size.height-r},l=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(E.extend(a,c&&l?{top:c,left:l}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function(){var t={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};n&&n.length&&E(n[0]).css({width:t.width,height:t.height}),i._updateCache(t),i._propagate("resize",e)}})}}),E.ui.plugin.add("resizable","containment",{start:function(){var i,n,t,e,o,r,s,a=E(this).resizable("instance"),l=a.options,c=a.element,h=l.containment,u=h instanceof E?h.get(0):/parent/.test(h)?c.parent().get(0):h;u&&(a.containerElement=E(u),/document/.test(h)||h===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:E(document),left:0,top:0,width:E(document).width(),height:E(document).height()||document.body.parentNode.scrollHeight}):(i=E(u),n=[],E(["Top","Right","Left","Bottom"]).each(function(t,e){n[t]=a._num(i.css("padding"+e))}),a.containerOffset=i.offset(),a.containerPosition=i.position(),a.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},t=a.containerOffset,e=a.containerSize.height,o=a.containerSize.width,r=a._hasScroll(u,"left")?u.scrollWidth:o,s=a._hasScroll(u)?u.scrollHeight:e,a.parentData={element:u,left:t.left,top:t.top,width:r,height:s}))},resize:function(t){var e,i,n,o,r=E(this).resizable("instance"),s=r.options,a=r.containerOffset,l=r.position,c=r._aspectRatio||t.shiftKey,h={top:0,left:0},u=r.containerElement,d=!0;u[0]!==document&&/static/.test(u.css("position"))&&(h=a),l.left<(r._helper?a.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-a.left:r.position.left-h.left),c&&(r.size.height=r.size.width/r.aspectRatio,d=!1),r.position.left=s.helper?a.left:0),l.top<(r._helper?a.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-a.top:r.position.top),c&&(r.size.width=r.size.height*r.aspectRatio,d=!1),r.position.top=r._helper?a.top:0),n=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),n&&o?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),e=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-h.left:r.offset.left-a.left)),i=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-h.top:r.offset.top-a.top)),e+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-e,c&&(r.size.height=r.size.width/r.aspectRatio,d=!1)),i+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-i,c&&(r.size.width=r.size.height*r.aspectRatio,d=!1)),d||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var t=E(this).resizable("instance"),e=t.options,i=t.containerOffset,n=t.containerPosition,o=t.containerElement,r=E(t.helper),s=r.offset(),a=r.outerWidth()-t.sizeDiff.width,l=r.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(o.css("position"))&&E(this).css({left:s.left-n.left-i.left,width:a,height:l}),t._helper&&!e.animate&&/static/.test(o.css("position"))&&E(this).css({left:s.left-n.left-i.left,width:a,height:l})}}),E.ui.plugin.add("resizable","alsoResize",{start:function(){var t=E(this).resizable("instance").options;E(t.alsoResize).each(function(){var t=E(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,i){var e=E(this).resizable("instance"),n=e.options,o=e.originalSize,r=e.originalPosition,s={height:e.size.height-o.height||0,width:e.size.width-o.width||0,top:e.position.top-r.top||0,left:e.position.left-r.left||0};E(n.alsoResize).each(function(){var t=E(this),n=E(this).data("ui-resizable-alsoresize"),o={},e=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];E.each(e,function(t,e){var i=(n[e]||0)+(s[e]||0);i&&0<=i&&(o[e]=i||null)}),t.css(o)})},stop:function(){E(this).removeData("ui-resizable-alsoresize")}}),E.ui.plugin.add("resizable","ghost",{start:function(){var t=E(this).resizable("instance"),e=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==E.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=E(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=E(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),E.ui.plugin.add("resizable","grid",{resize:function(){var t,e=E(this).resizable("instance"),i=e.options,n=e.size,o=e.originalSize,r=e.originalPosition,s=e.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,h=Math.round((n.width-o.width)/l)*l,u=Math.round((n.height-o.height)/c)*c,d=o.width+h,p=o.height+u,f=i.maxWidth&&d>i.maxWidth,m=i.maxHeight&&p>i.maxHeight,g=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=a,g&&(d+=l),v&&(p+=c),f&&(d-=l),m&&(p-=c),/^(se|s|e)$/.test(s)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(s)?(e.size.width=d,e.size.height=p,e.position.top=r.top-u):/^(sw)$/.test(s)?(e.size.width=d,e.size.height=p,e.position.left=r.left-h):((p-c<=0||d-l<=0)&&(t=e._getPaddingPlusBorderDimensions(this)),0<p-c?(e.size.height=p,e.position.top=r.top-u):(p=c-t.height,e.size.height=p,e.position.top=r.top+o.height-p),0<d-l?(e.size.width=d,e.position.left=r.left-h):(d=l-t.width,e.size.width=d,e.position.left=r.left+o.width-d))}}),E.ui.resizable,E.widget("ui.selectable",E.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var n=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){n.elementPos=E(n.element[0]).offset(),n.selectees=E(n.options.filter,n.element[0]),n._addClass(n.selectees,"ui-selectee"),n.selectees.each(function(){var t=E(this),e=t.offset(),i={left:e.left-n.elementPos.left,top:e.top-n.elementPos.top};E.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=E("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(i){var n=this,t=this.options;this.opos=[i.pageX,i.pageY],this.elementPos=E(this.element[0]).offset(),this.options.disabled||(this.selectees=E(t.filter,this.element[0]),this._trigger("start",i),E(t.appendTo).append(this.helper),this.helper.css({left:i.pageX,top:i.pageY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=E.data(this,"selectable-item");t.startselected=!0,i.metaKey||i.ctrlKey||(n._removeClass(t.$element,"ui-selected"),t.selected=!1,n._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,n._trigger("unselecting",i,{unselecting:t.element}))}),E(i.target).parents().addBack().each(function(){var t,e=E.data(this,"selectable-item");return e?(t=!i.metaKey&&!i.ctrlKey||!e.$element.hasClass("ui-selected"),n._removeClass(e.$element,t?"ui-unselecting":"ui-selected")._addClass(e.$element,t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?n._trigger("selecting",i,{selecting:e.element}):n._trigger("unselecting",i,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(n){if(this.dragged=!0,!this.options.disabled){var t,o=this,r=this.options,s=this.opos[0],a=this.opos[1],l=n.pageX,c=n.pageY;return l<s&&(t=l,l=s,s=t),c<a&&(t=c,c=a,a=t),this.helper.css({left:s,top:a,width:l-s,height:c-a}),this.selectees.each(function(){var t=E.data(this,"selectable-item"),e=!1,i={};t&&t.element!==o.element[0]&&(i.left=t.left+o.elementPos.left,i.right=t.right+o.elementPos.left,i.top=t.top+o.elementPos.top,i.bottom=t.bottom+o.elementPos.top,"touch"===r.tolerance?e=!(i.left>l||s>i.right||i.top>c||a>i.bottom):"fit"===r.tolerance&&(e=i.left>s&&l>i.right&&i.top>a&&c>i.bottom),e?(t.selected&&(o._removeClass(t.$element,"ui-selected"),t.selected=!1),t.unselecting&&(o._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1),t.selecting||(o._addClass(t.$element,"ui-selecting"),t.selecting=!0,o._trigger("selecting",n,{selecting:t.element}))):(t.selecting&&((n.metaKey||n.ctrlKey)&&t.startselected?(o._removeClass(t.$element,"ui-selecting"),t.selecting=!1,o._addClass(t.$element,"ui-selected"),t.selected=!0):(o._removeClass(t.$element,"ui-selecting"),t.selecting=!1,t.startselected&&(o._addClass(t.$element,"ui-unselecting"),t.unselecting=!0),o._trigger("unselecting",n,{unselecting:t.element}))),t.selected&&(n.metaKey||n.ctrlKey||t.startselected||(o._removeClass(t.$element,"ui-selected"),t.selected=!1,o._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,o._trigger("unselecting",n,{unselecting:t.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,E(".ui-unselecting",this.element[0]).each(function(){var t=E.data(this,"selectable-item");i._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1,t.startselected=!1,i._trigger("unselected",e,{unselected:t.element})}),E(".ui-selecting",this.element[0]).each(function(){var t=E.data(this,"selectable-item");i._removeClass(t.$element,"ui-selecting")._addClass(t.$element,"ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,i._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),E.widget("ui.sortable",E.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return e<=t&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),E.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var i=null,n=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),E(t.target).parents().each(function(){return E.data(this,o.widgetName+"-item")===o?(i=E(this),!1):void 0}),E.data(t.target,o.widgetName+"-item")===o&&(i=E(t.target)),!!i&&(!(this.options.handle&&!e&&(E(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(n=!0)}),!n))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,i){var n,o,r=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},E.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=E("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(n=this.containers.length-1;0<=n;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return E.ui.ddmanager&&(E.ui.ddmanager.current=this),E.ui.ddmanager&&!r.dropBehaviour&&E.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,i,n,o,r=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-this.document.scrollTop()<r.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<r.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),t.pageX-this.document.scrollLeft()<r.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),!1!==s&&E.ui.ddmanager&&!r.dropBehaviour&&E.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(n=(i=this.items[e]).item[0],(o=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!E.contains(this.placeholder[0],n)&&("semi-dynamic"!==this.options.type||!E.contains(this.element[0],n))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),E.ui.ddmanager&&E.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(E.ui.ddmanager&&!this.options.dropBehaviour&&E.ui.ddmanager.drop(this,t),this.options.revert){var i=this,n=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,E(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new E.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),E.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?E(this.domPosition.prev).after(this.currentItem):E(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},E(t).each(function(){var t=(E(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&i.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e.each(function(){i.push(E(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,h=this.offset.click.left,u="x"===this.options.axis||a<n+c&&n+c<l,d="y"===this.options.axis||r<e+h&&e+h<s,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>r&&s>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>a&&l>o-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!!(n&&o)&&(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){function e(){s.push(this)}var i,n,o,r,s=[],a=[],l=this._connectWith();if(l&&t)for(i=l.length-1;0<=i;i--)for(n=(o=E(l[i],this.document[0])).length-1;0<=n;n--)(r=E.data(o[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&a.push([E.isFunction(r.options.items)?r.options.items.call(r.element):E(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(a.push([E.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):E(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;0<=i;i--)a[i][0].each(e);return E(s)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=E.grep(this.items,function(t){for(var e=0;i.length>e;e++)if(i[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,i,n,o,r,s,a,l,c=this.items,h=[[E.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):E(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(e=u.length-1;0<=e;e--)for(i=(n=E(u[e],this.document[0])).length-1;0<=i;i--)(o=E.data(n[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&(h.push([E.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):E(o.options.items,o.element),o]),this.containers.push(o));for(e=h.length-1;0<=e;e--)for(r=h[e][1],i=0,l=(s=h[e][0]).length;i<l;i++)(a=E(s[i])).data(this.widgetName+"-item",r),c.push({item:a,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,i,n,o;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(i=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?E(this.options.toleranceElement,i.item):i.item,t||(i.width=n.outerWidth(),i.height=n.outerHeight()),o=n.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)o=this.containers[e].element.offset(),this.containers[e].containerCache.left=o.left,this.containers[e].containerCache.top=o.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(i){var n,o=(i=i||this).options;o.placeholder&&o.placeholder.constructor!==String||(n=o.placeholder,o.placeholder={element:function(){var t=i.currentItem[0].nodeName.toLowerCase(),e=E("<"+t+">",i.document[0]);return i._addClass(e,"ui-sortable-placeholder",n||i.currentItem[0].className)._removeClass(e,"ui-sortable-helper"),"tbody"===t?i._createTrPlaceholder(i.currentItem.find("tr").eq(0),E("<tr>",i.document[0]).appendTo(e)):"tr"===t?i._createTrPlaceholder(i.currentItem,e):"img"===t&&e.attr("src",i.currentItem.attr("src")),n||e.css("visibility","hidden"),e},update:function(t,e){(!n||o.forcePlaceholderSize)&&(e.height()||e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}),i.placeholder=E(o.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),o.placeholder.update(i,i.placeholder)},_createTrPlaceholder:function(t,e){var i=this;t.children().each(function(){E("<td>&#160;</td>",i.document[0]).attr("colspan",E(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,i,n,o,r,s,a,l,c,h,u=null,d=null;for(e=this.containers.length-1;0<=e;e--)if(!E.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(u&&E.contains(this.containers[e].element[0],u.element[0]))continue;u=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(u)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(n=1e4,o=null,r=(c=u.floating||this._isFloating(this.currentItem))?"left":"top",s=c?"width":"height",h=c?"pageX":"pageY",i=this.items.length-1;0<=i;i--)E.contains(this.containers[d].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(a=this.items[i].item.offset()[r],l=!1,t[h]-a>this.items[i][s]/2&&(l=!0),n>Math.abs(t[h]-a)&&(n=Math.abs(t[h]-a),o=this.items[i],this.direction=l?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return void(this.currentContainer.containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[d].element,!0),this._trigger("change",t,this._uiHash()),this.containers[d]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(t){var e=this.options,i=E.isFunction(e.helper)?E(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||E("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||e.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||e.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),E.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&E.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&E.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=E(n.containment)[0],e=E(n.containment).offset(),i="hidden"!==E(t).css("overflow"),this.containment=[e.left+(parseInt(E(t).css("borderLeftWidth"),10)||0)+(parseInt(E(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(E(t).css("borderTopWidth"),10)||0)+(parseInt(E(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(E(t).css("borderLeftWidth"),10)||0)-(parseInt(E(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(E(t).css("borderTopWidth"),10)||0)-(parseInt(E(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&E.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*i}},_generatePosition:function(t){var e,i,n=this.options,o=t.pageX,r=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&E.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),n.grid&&(e=this.originalPageY+Math.round((r-this.originalPageY)/n.grid[1])*n.grid[1],r=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-n.grid[1]:e+n.grid[1]:e,i=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-n.grid[0]:i+n.grid[0]:i)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:s.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){function i(e,i,n){return function(t){n._trigger(e,t,i._uiHash(i))}}this.reverting=!1;var n,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&o.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||o.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(o.push(function(t){this._trigger("remove",t,this._uiHash())}),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;0<=n;n--)e||o.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(o.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;o.length>n;n++)o[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===E.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||E([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}}),E.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=E(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():E()}},_createIcons:function(){var t,e,i=this.options.icons;i&&(t=E("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+i.header),t.prependTo(this.headers),e=this.active.children(".ui-accordion-header-icon"),this._removeClass(e,i.header)._addClass(e,null,i.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),void("icons"===t&&(this._destroyIcons(),e&&this._createIcons())))},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var e=E.ui.keyCode,i=this.headers.length,n=this.headers.index(t.target),o=!1;switch(t.keyCode){case e.RIGHT:case e.DOWN:o=this.headers[(n+1)%i];break;case e.LEFT:case e.UP:o=this.headers[(n-1+i)%i];break;case e.SPACE:case e.ENTER:this._eventHandler(t);break;case e.HOME:o=this.headers[0];break;case e.END:o=this.headers[i-1]}o&&(E(t.target).attr("tabIndex",-1),E(o).attr("tabIndex",0),E(o).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===E.ui.keyCode.UP&&t.ctrlKey&&E(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=E()):!1===t.active?this._activate(0):this.active.length&&!E.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=E()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var i,t=this.options,e=t.heightStyle,n=this.element.parent();this.active=this._findActive(t.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var t=E(this),e=t.uniqueId().attr("id"),i=t.next(),n=i.uniqueId().attr("id");t.attr("aria-controls",n),i.attr("aria-labelledby",e)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(t.event),"fill"===e?(i=n.height(),this.element.siblings(":visible").each(function(){var t=E(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=E(this).outerHeight(!0)}),this.headers.next().each(function(){E(this).height(Math.max(0,i-E(this).innerHeight()+E(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.headers.next().each(function(){var t=E(this).is(":visible");t||E(this).show(),i=Math.max(i,E(this).css("height","").height()),t||E(this).hide()}).height(i))},_activate:function(t){var e=this._findActive(t)[0];e!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:E.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):E()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&E.each(t.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var e,i,n=this.options,o=this.active,r=E(t.currentTarget),s=r[0]===o[0],a=s&&n.collapsible,l=a?E():r.next(),c={oldHeader:o,oldPanel:o.next(),newHeader:a?E():r,newPanel:l};t.preventDefault(),s&&!n.collapsible||!1===this._trigger("beforeActivate",t,c)||(n.active=!a&&this.headers.index(r),this.active=s?E():r,this._toggle(c),this._removeClass(o,"ui-accordion-header-active","ui-state-active"),n.icons&&(e=o.children(".ui-accordion-header-icon"),this._removeClass(e,null,n.icons.activeHeader)._addClass(e,null,n.icons.header)),s||(this._removeClass(r,"ui-accordion-header-collapsed")._addClass(r,"ui-accordion-header-active","ui-state-active"),n.icons&&(i=r.children(".ui-accordion-header-icon"),this._removeClass(i,null,n.icons.header)._addClass(i,null,n.icons.activeHeader)),this._addClass(r.next(),"ui-accordion-content-active")))},_toggle:function(t){var e=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=e,this.prevHide=i,this.options.animate?this._animate(e,i,t):(i.hide(),e.show(),this._toggleComplete(t)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),e.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):e.length&&this.headers.filter(function(){return 0===parseInt(E(this).attr("tabIndex"),10)}).attr("tabIndex",-1),e.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,i,e){var n,o,r,s=this,a=0,l=t.css("box-sizing"),c=t.length&&(!i.length||t.index()<i.index()),h=this.options.animate||{},u=c&&h.down||h,d=function(){s._toggleComplete(e)};return"number"==typeof u&&(r=u),"string"==typeof u&&(o=u),o=o||u.easing||h.easing,r=r||u.duration||h.duration,i.length?t.length?(n=t.show().outerHeight(),i.animate(this.hideProps,{duration:r,easing:o,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:r,easing:o,complete:d,step:function(t,e){e.now=Math.round(t),"height"!==e.prop?"content-box"===l&&(a+=e.now):"content"!==s.options.heightStyle&&(e.now=Math.round(n-i.outerHeight()-a),a=0)}})):i.animate(this.hideProps,r,o,d):t.animate(this.showProps,r,o,d)},_toggleComplete:function(t){var e=t.oldPanel,i=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),E.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(t){var e=E(t.target),i=E(E.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),e.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var e=E(t.target).closest(".ui-menu-item"),i=E(t.currentTarget);e[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(t){this._delay(function(){!E.contains(this.element[0],E.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each(function(){var t=E(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var e,i,n,o,r=!0;switch(t.keyCode){case E.ui.keyCode.PAGE_UP:this.previousPage(t);break;case E.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case E.ui.keyCode.HOME:this._move("first","first",t);break;case E.ui.keyCode.END:this._move("last","last",t);break;case E.ui.keyCode.UP:this.previous(t);break;case E.ui.keyCode.DOWN:this.next(t);break;case E.ui.keyCode.LEFT:this.collapse(t);break;case E.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case E.ui.keyCode.ENTER:case E.ui.keyCode.SPACE:this._activate(t);break;case E.ui.keyCode.ESCAPE:this.collapse(t);break;default:r=!1,i=this.previousFilter||"",o=!1,n=96<=t.keyCode&&t.keyCode<=105?""+(t.keyCode-96):String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),n===i?o=!0:n=i+n,e=this._filterMenuItems(n),(e=o&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e).length||(n=String.fromCharCode(t.keyCode),e=this._filterMenuItems(n)),e.length?(this.focus(t,e),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}r&&t.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var t,e,i,n,o=this,r=this.options.icons.submenu,s=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),e=s.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=E(this),e=t.prev(),i=E("<span>").data("ui-menu-submenu-caret",!0);o._addClass(i,"ui-menu-icon","ui-icon "+r),e.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",e.attr("id"))}),this._addClass(e,"ui-menu","ui-widget ui-widget-content ui-front"),(t=s.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var t=E(this);o._isDivider(t)&&o._addClass(t,"ui-menu-divider","ui-widget-content")}),n=(i=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(n,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!E.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t+""),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i,n,o;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(o,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(t){var e,i,n,o,r,s;this._hasScroll()&&(e=parseFloat(E.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(E.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-e-i,o=this.activeMenu.scrollTop(),r=this.activeMenu.height(),s=t.outerHeight(),n<0?this.activeMenu.scrollTop(o+n):r<n+s&&this.activeMenu.scrollTop(o+n-r+s))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(t){var e=E.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var t=i?this.element:E(e&&e.target).closest(this.element.find(".ui-menu"));t.length||(t=this.element),this._close(t),this.blur(e),this._removeClass(t.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=t},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!E(t.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[e]()),this.focus(i,n)},nextPage:function(t){var e,i,n;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(e=E(this)).offset().top-i-n<0}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var e,i,n;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(e=E(this)).offset().top-i+n}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||E(t.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,e)},_filterMenuItems:function(t){var e=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(E.trim(E(this).children(".ui-menu-item-wrapper").text()))})}}),E.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var i,n,o,t=this.element[0].nodeName.toLowerCase(),e="textarea"===t,r="input"===t;this.isMultiLine=e||!r&&this._isContentEditable(this.element),this.valueMethod=this.element[e||r?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(t){if(this.element.prop("readOnly"))n=o=i=!0;else{n=o=i=!1;var e=E.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:i=!0,this._move("previousPage",t);break;case e.PAGE_DOWN:i=!0,this._move("nextPage",t);break;case e.UP:i=!0,this._keyEvent("previous",t);break;case e.DOWN:i=!0,this._keyEvent("next",t);break;case e.ENTER:this.menu.active&&(i=!0,t.preventDefault(),this.menu.select(t));break;case e.TAB:this.menu.active&&this.menu.select(t);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(t),t.preventDefault());break;default:n=!0,this._searchTimeout(t)}}},keypress:function(t){if(i)return i=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&t.preventDefault());if(!n){var e=E.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:this._move("previousPage",t);break;case e.PAGE_DOWN:this._move("nextPage",t);break;case e.UP:this._keyEvent("previous",t);break;case e.DOWN:this._keyEvent("next",t)}}},input:function(t){return o?(o=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=E("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==E.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,e){var i,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){E(t.target).trigger(t.originalEvent)})):(n=e.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),void((i=e.item.attr("aria-label")||n.value)&&E.trim(i).length&&(this.liveRegion.children().hide(),E("<div>").text(i).appendTo(this.liveRegion))))},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==E.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=E("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var e=this.menu.element[0];return t.target===this.element[0]||t.target===e||E.contains(e,t.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?E(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var i,n,o=this;E.isArray(this.options.source)?(i=this.options.source,this.source=function(t,e){e(E.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,e){o.xhr&&o.xhr.abort(),o.xhr=E.ajax({url:n,data:t,dataType:"json",success:function(t){e(t)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),e=this.menu.element.is(":visible"),i=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey;(!t||t&&!e&&!i)&&(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return E.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:E.map(t,function(t){return"string"==typeof t?{label:t,value:t}:E.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var e=this.menu.element.empty();this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),e.position(E.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(i,t){var n=this;E.each(t,function(t,e){n._renderItemData(i,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(t,e){return E("<li>").append(E("<div>").text(e.label)).appendTo(t)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),E.extend(E.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,e){var i=RegExp(E.ui.autocomplete.escapeRegex(e),"i");return E.grep(t,function(t){return i.test(t.label||t.value||t)})}}),E.widget("ui.autocomplete",E.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),E("<div>").text(e).appendTo(this.liveRegion))}}),E.ui.autocomplete;var p,f,m,g=/ui-corner-([a-z]){2,6}/g;E.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var s=this,a=[];E.each(this.options.items,function(o,t){var e,r={};return t?"controlgroupLabel"===o?((e=s.element.find(t)).each(function(){var t=E(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),s._addClass(e,null,"ui-widget ui-widget-content ui-state-default"),void(a=a.concat(e.get()))):void(E.fn[o]&&(r=s["_"+o+"Options"]?s["_"+o+"Options"]("middle"):{classes:{}},s.element.find(t).each(function(){var t=E(this),e=t[o]("instance"),i=E.widget.extend({},r);if("button"!==o||!t.parent(".ui-spinner").length){e||(e=t[o]()[o]("instance")),e&&(i.classes=s._resolveClassesValues(i.classes,e)),t[o](i);var n=t[o]("widget");E.data(n[0],"ui-controlgroup-data",e||t[o]("instance")),a.push(n[0])}}))):void 0}),this.childWidgets=E(E.unique(a)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var t=E(this).data("ui-controlgroup-data");t&&t[e]&&t[e]()})},_updateCornerClass:function(t,e){var i=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,i)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],n},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(i,n){var o={};return E.each(i,function(t){var e=n.options.classes[t]||"";e=E.trim(e.replace(g,"")),o[t]=(e+" "+i[t]).replace(/\s+/g," ")}),o},_setOption:function(t,e){return"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"===t?void this._callChildMethod(e?"disable":"enable"):void this.refresh()},refresh:function(){var o,r=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),o=this.childWidgets,this.options.onlyVisible&&(o=o.filter(":visible")),o.length&&(E.each(["first","last"],function(t,e){var i=o[e]().data("ui-controlgroup-data");if(i&&r["_"+i.widgetName+"Options"]){var n=r["_"+i.widgetName+"Options"](1===o.length?"only":e);n.classes=r._resolveClassesValues(n.classes,i),i.element[i.widgetName](n)}else r._updateCornerClass(o[e](),e)}),this._callChildMethod("refresh"))}}),E.widget("ui.checkboxradio",[E.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,e,i=this,n=this._super()||{};return this._readType(),e=this.element.labels(),this.label=E(e[e.length-1]),this.label.length||E.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){i.originalLabel+=3===this.nodeType?E(this).text():this.outerHTML}),this.originalLabel&&(n.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(n.disabled=t),n},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||E.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,e="input[name='"+E.ui.escapeSelector(t)+"']";return t?(this.form.length?E(this.form[0].elements).filter(e):E(e).filter(function(){return 0===E(this).form().length})).not(this.element):E([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=E(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){return"label"!==t||e?(this._super(t,e),"disabled"===t?(this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e)):void this.refresh()):void 0},_updateIcon:function(t){var e="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=E("<span>"),this.iconSpace=E("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(e+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):e+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",e),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),E.ui.checkboxradio,E.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===E.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,e){var i="iconPosition"!==t,n=i?this.options.iconPosition:e,o="top"===n||"bottom"===n;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=E("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,e),this._attachIcon(n),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=E("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(n))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,i=void 0===t.icon?this.options.icon:t.icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),(this.element[0].disabled=e)&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==E.uiBackCompat&&(E.widget("ui.button",E.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){return"text"===t?void this._super("showLabel",e):("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),void this._superApply(arguments))}}),E.fn.button=(p=E.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?p.apply(this,arguments):(E.ui.checkboxradio||E.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),E.fn.buttonset=function(){return E.ui.controlgroup||E.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),E.ui.button,E.extend(E.ui,{datepicker:{version:"1.12.1"}}),E.extend(t.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return u(this._defaults,t||{}),this},_attachDatepicker:function(t,e){var i,n,o;n="div"===(i=t.nodeName.toLowerCase())||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(o=this._newInst(E(t),n)).settings=E.extend({},e||{}),"input"===i?this._connectDatepicker(t,o):n&&this._inlineDatepicker(t,o)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?i(E("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,e){var i=E(t);e.append=E([]),e.trigger=E([]),i.hasClass(this.markerClassName)||(this._attachments(i,e),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(e),E.data(t,"datepicker",e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var i,n,o,r=this._get(e,"appendText"),s=this._get(e,"isRTL");e.append&&e.append.remove(),r&&(e.append=E("<span class='"+this._appendClass+"'>"+r+"</span>"),t[s?"before":"after"](e.append)),t.off("focus",this._showDatepicker),e.trigger&&e.trigger.remove(),("focus"===(i=this._get(e,"showOn"))||"both"===i)&&t.on("focus",this._showDatepicker),("button"===i||"both"===i)&&(n=this._get(e,"buttonText"),o=this._get(e,"buttonImage"),e.trigger=E(this._get(e,"buttonImageOnly")?E("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):E("<button type='button'></button>").addClass(this._triggerClass).html(o?E("<img/>").attr({src:o,alt:n,title:n}):n)),t[s?"before":"after"](e.trigger),e.trigger.on("click",function(){return E.datepicker._datepickerShowing&&E.datepicker._lastInput===t[0]?E.datepicker._hideDatepicker():(E.datepicker._datepickerShowing&&E.datepicker._lastInput!==t[0]&&E.datepicker._hideDatepicker(),E.datepicker._showDatepicker(t[0])),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,o,r=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(o=n=i=0;t.length>o;o++)t[o].length>i&&(i=t[o].length,n=o);return n},r.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),t.input.attr("size",this._formatDate(t,r).length)}},_inlineDatepicker:function(t,e){var i=E(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(e.dpDiv),E.data(t,"datepicker",e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,i,n,o){var r,s,a,l,c,h=this._dialogInst;return h||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=E("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),E("body").append(this._dialogInput),(h=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},E.data(this._dialogInput[0],"datepicker",h)),u(h.settings,n||{}),e=e&&e.constructor===Date?this._formatDate(h,e):e,this._dialogInput.val(e),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(s=document.documentElement.clientWidth,a=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[s/2-100+l,a/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),E.blockUI&&E.blockUI(this.dpDiv),E.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(t){var e,i=E(t),n=E.data(t,"datepicker");i.hasClass(this.markerClassName)&&(e=t.nodeName.toLowerCase(),E.removeData(t,"datepicker"),"input"===e?(n.append.remove(),n.trigger.remove(),i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===e||"span"===e)&&i.removeClass(this.markerClassName).empty(),f===n&&(f=null))},_enableDatepicker:function(e){var t,i,n=E(e),o=E.data(e,"datepicker");n.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===t||"span"===t)&&((i=n.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=E.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var t,i,n=E(e),o=E.data(e,"datepicker");n.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===t||"span"===t)&&((i=n.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=E.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(t){try{return E.data(t,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,i){var n,o,r,s,a=this._getInst(t);return 2===arguments.length&&"string"==typeof e?"defaults"===e?E.extend({},E.datepicker._defaults):a?"all"===e?E.extend({},a.settings):this._get(a,e):null:(n=e||{},"string"==typeof e&&((n={})[e]=i),void(a&&(this._curInst===a&&this._hideDatepicker(),o=this._getDateDatepicker(t,!0),r=this._getMinMaxDate(a,"min"),s=this._getMinMaxDate(a,"max"),u(a.settings,n),null!==r&&void 0!==n.dateFormat&&void 0===n.minDate&&(a.settings.minDate=this._formatDate(a,r)),null!==s&&void 0!==n.dateFormat&&void 0===n.maxDate&&(a.settings.maxDate=this._formatDate(a,s)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(E(t),a),this._autoSize(a),this._setDate(a,o),this._updateAlternate(a),this._updateDatepicker(a))))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(t){var e,i,n,o=E.datepicker._getInst(t.target),r=!0,s=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,E.datepicker._datepickerShowing)switch(t.keyCode){case 9:E.datepicker._hideDatepicker(),r=!1;break;case 13:return(n=E("td."+E.datepicker._dayOverClass+":not(."+E.datepicker._currentClass+")",o.dpDiv))[0]&&E.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,n[0]),(e=E.datepicker._get(o,"onSelect"))?(i=E.datepicker._formatDate(o),e.apply(o.input?o.input[0]:null,[i,o])):E.datepicker._hideDatepicker(),!1;case 27:E.datepicker._hideDatepicker();break;case 33:E.datepicker._adjustDate(t.target,t.ctrlKey?-E.datepicker._get(o,"stepBigMonths"):-E.datepicker._get(o,"stepMonths"),"M");break;case 34:E.datepicker._adjustDate(t.target,t.ctrlKey?+E.datepicker._get(o,"stepBigMonths"):+E.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&E.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&E.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&E.datepicker._adjustDate(t.target,s?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&E.datepicker._adjustDate(t.target,t.ctrlKey?-E.datepicker._get(o,"stepBigMonths"):-E.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&E.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&E.datepicker._adjustDate(t.target,s?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&E.datepicker._adjustDate(t.target,t.ctrlKey?+E.datepicker._get(o,"stepBigMonths"):+E.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&E.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?E.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e,i,n=E.datepicker._getInst(t.target);return E.datepicker._get(n,"constrainInput")?(e=E.datepicker._possibleChars(E.datepicker._get(n,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||i<" "||!e||-1<e.indexOf(i)):void 0},_doKeyUp:function(t){var e=E.datepicker._getInst(t.target);if(e.input.val()!==e.lastVal)try{E.datepicker.parseDate(E.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,E.datepicker._getFormatConfig(e))&&(E.datepicker._setDateFromField(e),E.datepicker._updateAlternate(e),E.datepicker._updateDatepicker(e))}catch(t){}return!0},_showDatepicker:function(t){var e,i,n,o,r,s,a;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=E("input",t.parentNode)[0]),E.datepicker._isDisabledDatepicker(t)||E.datepicker._lastInput===t)||(e=E.datepicker._getInst(t),E.datepicker._curInst&&E.datepicker._curInst!==e&&(E.datepicker._curInst.dpDiv.stop(!0,!0),e&&E.datepicker._datepickerShowing&&E.datepicker._hideDatepicker(E.datepicker._curInst.input[0])),!1!==(n=(i=E.datepicker._get(e,"beforeShow"))?i.apply(t,[t,e]):{})&&(u(e.settings,n),e.lastVal=null,E.datepicker._lastInput=t,E.datepicker._setDateFromField(e),E.datepicker._inDialog&&(t.value=""),E.datepicker._pos||(E.datepicker._pos=E.datepicker._findPos(t),E.datepicker._pos[1]+=t.offsetHeight),o=!1,E(t).parents().each(function(){return!(o|="fixed"===E(this).css("position"))}),r={left:E.datepicker._pos[0],top:E.datepicker._pos[1]},E.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),E.datepicker._updateDatepicker(e),r=E.datepicker._checkOffset(e,r,o),e.dpDiv.css({position:E.datepicker._inDialog&&E.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),e.inline||(s=E.datepicker._get(e,"showAnim"),a=E.datepicker._get(e,"duration"),e.dpDiv.css("z-index",function(t){for(var e,i;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}(E(t))+1),E.datepicker._datepickerShowing=!0,E.effects&&E.effects.effect[s]?e.dpDiv.show(s,E.datepicker._get(e,"showOptions"),a):e.dpDiv[s||"show"](s?a:null),E.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),E.datepicker._curInst=e)))},_updateDatepicker:function(t){this.maxRows=4,(f=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var e,i=this._getNumberOfMonths(t),n=i[1],o=t.dpDiv.find("."+this._dayOverClass+" a");0<o.length&&r.apply(o.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<n&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",17*n+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===E.datepicker._curInst&&E.datepicker._datepickerShowing&&E.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(e=t.yearshtml,setTimeout(function(){e===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),e=t.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(t,e,i){var n=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(i?0:E(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:E(document).scrollTop());return e.left-=this._get(t,"isRTL")?n-r:0,e.left-=i&&e.left===t.input.offset().left?E(document).scrollLeft():0,e.top-=i&&e.top===t.input.offset().top+s?E(document).scrollTop():0,e.left-=Math.min(e.left,e.left+n>a&&n<a?Math.abs(e.left+n-a):0),e.top-=Math.min(e.top,e.top+o>l&&o<l?Math.abs(o+s):0),e},_findPos:function(t){for(var e,i=this._getInst(t),n=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||E.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return[(e=E(t).offset()).left,e.top]},_hideDatepicker:function(t){var e,i,n,o,r=this._curInst;!r||t&&r!==E.data(t,"datepicker")||this._datepickerShowing&&(e=this._get(r,"showAnim"),i=this._get(r,"duration"),n=function(){E.datepicker._tidyDialog(r)},E.effects&&(E.effects.effect[e]||E.effects[e])?r.dpDiv.hide(e,E.datepicker._get(r,"showOptions"),i,n):r.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?i:null,n),e||n(),this._datepickerShowing=!1,(o=this._get(r,"onClose"))&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),E.blockUI&&(E.unblockUI(),E("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(E.datepicker._curInst){var e=E(t.target),i=E.datepicker._getInst(e[0]);(e[0].id!==E.datepicker._mainDivId&&0===e.parents("#"+E.datepicker._mainDivId).length&&!e.hasClass(E.datepicker.markerClassName)&&!e.closest("."+E.datepicker._triggerClass).length&&E.datepicker._datepickerShowing&&(!E.datepicker._inDialog||!E.blockUI)||e.hasClass(E.datepicker.markerClassName)&&E.datepicker._curInst!==i)&&E.datepicker._hideDatepicker()}},_adjustDate:function(t,e,i){var n=E(t),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,e+("M"===i?this._get(o,"showCurrentAtPos"):0),i),this._updateDatepicker(o))},_gotoToday:function(t){var e,i=E(t),n=this._getInst(i[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(e=new Date,n.selectedDay=e.getDate(),n.drawMonth=n.selectedMonth=e.getMonth(),n.drawYear=n.selectedYear=e.getFullYear()),this._notifyChange(n),this._adjustDate(i)},_selectMonthYear:function(t,e,i){var n=E(t),o=this._getInst(n[0]);o["selected"+("M"===i?"Month":"Year")]=o["draw"+("M"===i?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(t,e,i,n){var o,r=E(t);E(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||((o=this._getInst(r[0])).selectedDay=o.currentDay=E("a",n).html(),o.selectedMonth=o.currentMonth=e,o.selectedYear=o.currentYear=i,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var e=E(t);this._selectDate(e,"")},_selectDate:function(t,e){var i,n=E(t),o=this._getInst(n[0]);e=null!=e?e:this._formatDate(o),o.input&&o.input.val(e),this._updateAlternate(o),(i=this._get(o,"onSelect"))?i.apply(o.input?o.input[0]:null,[e,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var e,i,n,o=this._get(t,"altField");o&&(e=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),n=this.formatDate(e,i,this._getFormatConfig(t)),E(o).val(n))},noWeekends:function(t){var e=t.getDay();return[0<e&&e<6,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(i,r,t){if(null==i||null==r)throw"Invalid arguments";if(""===(r="object"==typeof r?""+r:r+""))return null;var n,e,o,s,a=0,l=(t?t.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),h=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,u=(t?t.dayNames:null)||this._defaults.dayNames,d=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,p=(t?t.monthNames:null)||this._defaults.monthNames,f=-1,m=-1,g=-1,v=-1,y=!1,b=function(t){var e=i.length>n+1&&i.charAt(n+1)===t;return e&&n++,e},w=function(t){var e=b(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n=RegExp("^\\d{"+("y"===t?i:1)+","+i+"}"),o=r.substring(a).match(n);if(!o)throw"Missing number at position "+a;return a+=o[0].length,parseInt(o[0],10)},_=function(t,e,i){var n=-1,o=E.map(b(t)?i:e,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(E.each(o,function(t,e){var i=e[1];return r.substr(a,i.length).toLowerCase()===i.toLowerCase()?(n=e[0],a+=i.length,!1):void 0}),-1!==n)return n+1;throw"Unknown name at position "+a},x=function(){if(r.charAt(a)!==i.charAt(n))throw"Unexpected literal at position "+a;a++};for(n=0;i.length>n;n++)if(y)"'"!==i.charAt(n)||b("'")?x():y=!1;else switch(i.charAt(n)){case"d":g=w("d");break;case"D":_("D",h,u);break;case"o":v=w("o");break;case"m":m=w("m");break;case"M":m=_("M",d,p);break;case"y":f=w("y");break;case"@":f=(s=new Date(w("@"))).getFullYear(),m=s.getMonth()+1,g=s.getDate();break;case"!":f=(s=new Date((w("!")-this._ticksTo1970)/1e4)).getFullYear(),m=s.getMonth()+1,g=s.getDate();break;case"'":b("'")?x():y=!0;break;default:x()}if(r.length>a&&(o=r.substr(a),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=c?0:-100)),-1<v)for(m=1,g=v;!(g<=(e=this._getDaysInMonth(f,m-1)));)m++,g-=e;if((s=this._daylightSavingAdjust(new Date(f,m-1,g))).getFullYear()!==f||s.getMonth()+1!==m||s.getDate()!==g)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(i,t,e){if(!t)return"";var n,o=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,r=(e?e.dayNames:null)||this._defaults.dayNames,s=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,a=(e?e.monthNames:null)||this._defaults.monthNames,l=function(t){var e=i.length>n+1&&i.charAt(n+1)===t;return e&&n++,e},c=function(t,e,i){var n=""+e;if(l(t))for(;i>n.length;)n="0"+n;return n},h=function(t,e,i,n){return l(t)?n[e]:i[e]},u="",d=!1;if(t)for(n=0;i.length>n;n++)if(d)"'"!==i.charAt(n)||l("'")?u+=i.charAt(n):d=!1;else switch(i.charAt(n)){case"d":u+=c("d",t.getDate(),2);break;case"D":u+=h("D",t.getDay(),o,r);break;case"o":u+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=c("m",t.getMonth()+1,2);break;case"M":u+=h("M",t.getMonth(),s,a);break;case"y":u+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":d=!0;break;default:u+=i.charAt(n)}return u},_possibleChars:function(i){var n,t="",e=!1,o=function(t){var e=i.length>n+1&&i.charAt(n+1)===t;return e&&n++,e};for(n=0;i.length>n;n++)if(e)"'"!==i.charAt(n)||o("'")?t+=i.charAt(n):e=!1;else switch(i.charAt(n)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":o("'")?t+="'":e=!0;break;default:t+=i.charAt(n)}return t},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,o=this._getDefaultDate(t),r=o,s=this._getFormatConfig(t);try{r=this.parseDate(i,n,s)||o}catch(t){n=e?"":n}t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),t.currentDay=n?r.getDate():0,t.currentMonth=n?r.getMonth():0,t.currentYear=n?r.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(a,t,e){var i,n,o=null==t||""===t?e:"string"==typeof t?function(t){try{return E.datepicker.parseDate(E.datepicker._get(a,"dateFormat"),t,E.datepicker._getFormatConfig(a))}catch(t){}for(var e=(t.toLowerCase().match(/^c/)?E.datepicker._getDate(a):null)||new Date,i=e.getFullYear(),n=e.getMonth(),o=e.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,s=r.exec(t);s;){switch(s[2]||"d"){case"d":case"D":o+=parseInt(s[1],10);break;case"w":case"W":o+=7*parseInt(s[1],10);break;case"m":case"M":n+=parseInt(s[1],10),o=Math.min(o,E.datepicker._getDaysInMonth(i,n));break;case"y":case"Y":i+=parseInt(s[1],10),o=Math.min(o,E.datepicker._getDaysInMonth(i,n))}s=r.exec(t)}return new Date(i,n,o)}(t):"number"==typeof t?isNaN(t)?e:(i=t,(n=new Date).setDate(n.getDate()+i),n):new Date(t.getTime());return(o=o&&"Invalid Date"==""+o?e:o)&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,o=t.selectedMonth,r=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),o===t.selectedMonth&&r===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){E.datepicker._adjustDate(i,-e,"M")},next:function(){E.datepicker._adjustDate(i,+e,"M")},hide:function(){E.datepicker._hideDatepicker()},today:function(){E.datepicker._gotoToday(i)},selectDay:function(){return E.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return E.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return E.datepicker._selectMonthYear(i,this,"Y"),!1}};E(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,n,o,r,s,a,l,c,h,u,d,p,f,m,g,v,y,b,w,_,x,S,T,M,E,C,A,k,P,L,R,D,I,O,N,z,H,B,F=new Date,U=this._daylightSavingAdjust(new Date(F.getFullYear(),F.getMonth(),F.getDate())),W=this._get(t,"isRTL"),j=this._get(t,"showButtonPanel"),$=this._get(t,"hideIfNoPrevNext"),G=this._get(t,"navigationAsDateFormat"),V=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),Y=this._get(t,"stepMonths"),X=1!==V[0]||1!==V[1],Z=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),K=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Q=t.drawMonth-q,tt=t.drawYear;if(Q<0&&(Q+=12,tt--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-V[0]*V[1]+1,J.getDate())),e=K&&e<K?K:e;this._daylightSavingAdjust(new Date(tt,Q,1))>e;)--Q<0&&(Q=11,tt--);for(t.drawMonth=Q,t.drawYear=tt,i=this._get(t,"prevText"),i=G?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,Q-Y,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,tt,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+i+"</span></a>":$?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+i+"</span></a>",o=this._get(t,"nextText"),o=G?this.formatDate(o,this._daylightSavingAdjust(new Date(tt,Q+Y,1)),this._getFormatConfig(t)):o,r=this._canAdjustMonth(t,1,tt,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+o+"</span></a>":$?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+o+"</span></a>",s=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?Z:U,s=G?this.formatDate(s,a,this._getFormatConfig(t)):s,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(W?l:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(W?"":l)+"</div>":"",h=parseInt(this._get(t,"firstDay"),10),h=isNaN(h)?0:h,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),w="",x=0;V[0]>x;x++){for(S="",this.maxRows=4,T=0;V[1]>T;T++){if(M=this._daylightSavingAdjust(new Date(tt,Q,t.selectedDay)),E=" ui-corner-all",C="",X){if(C+="<div class='ui-datepicker-group",1<V[1])switch(T){case 0:C+=" ui-datepicker-group-first",E=" ui-corner-"+(W?"right":"left");break;case V[1]-1:C+=" ui-datepicker-group-last",E=" ui-corner-"+(W?"left":"right");break;default:C+=" ui-datepicker-group-middle",E=""}C+="'>"}for(C+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+E+"'>"+(/all|left/.test(E)&&0===x?W?r:n:"")+(/all|right/.test(E)&&0===x?W?n:r:"")+this._generateMonthYearHeader(t,Q,tt,K,J,0<x||0<T,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",A=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",_=0;_<7;_++)A+="<th scope='col'"+(5<=(_+h+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+d[k=(_+h)%7]+"'>"+p[k]+"</span></th>";for(C+=A+"</tr></thead><tbody>",P=this._getDaysInMonth(tt,Q),tt===t.selectedYear&&Q===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,P)),L=(this._getFirstDayOfMonth(tt,Q)-h+7)%7,R=Math.ceil((L+P)/7),D=X&&this.maxRows>R?this.maxRows:R,this.maxRows=D,I=this._daylightSavingAdjust(new Date(tt,Q,1-L)),O=0;O<D;O++){for(C+="<tr>",N=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(I)+"</td>":"",_=0;_<7;_++)z=g?g.apply(t.input?t.input[0]:null,[I]):[!0,""],B=(H=I.getMonth()!==Q)&&!y||!z[0]||K&&I<K||J&&J<I,N+="<td class='"+(5<=(_+h+6)%7?" ui-datepicker-week-end":"")+(H?" ui-datepicker-other-month":"")+(I.getTime()===M.getTime()&&Q===t.selectedMonth&&t._keyEvent||b.getTime()===I.getTime()&&b.getTime()===M.getTime()?" "+this._dayOverClass:"")+(B?" "+this._unselectableClass+" ui-state-disabled":"")+(H&&!v?"":" "+z[1]+(I.getTime()===Z.getTime()?" "+this._currentClass:"")+(I.getTime()===U.getTime()?" ui-datepicker-today":""))+"'"+(H&&!v||!z[2]?"":" title='"+z[2].replace(/'/g,"&#39;")+"'")+(B?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(H&&!v?"&#xa0;":B?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===U.getTime()?" ui-state-highlight":"")+(I.getTime()===Z.getTime()?" ui-state-active":"")+(H?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);C+=N+"</tr>"}11<++Q&&(Q=0,tt++),S+=C+="</tbody></table>"+(X?"</div>"+(0<V[0]&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}w+=S}return w+=c,t._keyEvent=!1,w},_generateMonthYearHeader:function(t,e,i,n,o,r,s,a){var l,c,h,u,d,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(r||!g)w+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(l=n&&n.getFullYear()===i,c=o&&o.getFullYear()===i,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;h<12;h++)(!l||h>=n.getMonth())&&(!c||o.getMonth()>=h)&&(w+="<option value='"+h+"'"+(h===e?" selected='selected'":"")+">"+a[h]+"</option>");w+="</select>"}if(y||(b+=w+(!r&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",r||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),f=(p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e})(u[0]),m=Math.max(f,p(u[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=o?Math.min(m,o.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=m;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),y&&(b+=(!r&&g&&v?"":"&#xa0;")+w),b+"</div>"},_adjustInstDate:function(t,e,i){var n=t.selectedYear+("Y"===i?e:0),o=t.selectedMonth+("M"===i?e:0),r=Math.min(t.selectedDay,this._getDaysInMonth(n,o))+("D"===i?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,o,r)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),o=i&&e<i?i:e;return n&&n<o?n:o},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var o=this._getNumberOfMonths(t),r=this._daylightSavingAdjust(new Date(i,n+(e<0?e:o[0]*o[1]),1));return e<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var i,n,o=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),s=null,a=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),s=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(s+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!o||e.getTime()>=o.getTime())&&(!r||e.getTime()<=r.getTime())&&(!s||e.getFullYear()>=s)&&(!a||a>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var o=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),o,this._getFormatConfig(t))}}),E.fn.datepicker=function(t){if(!this.length)return this;E.datepicker.initialized||(E(document).on("mousedown",E.datepicker._checkExternalClick),E.datepicker.initialized=!0),0===E("#"+E.datepicker._mainDivId).length&&E("body").append(E.datepicker.dpDiv);var e=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?E.datepicker["_"+t+"Datepicker"].apply(E.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?E.datepicker["_"+t+"Datepicker"].apply(E.datepicker,[this].concat(e)):E.datepicker._attachDatepicker(this,t)}):E.datepicker["_"+t+"Datepicker"].apply(E.datepicker,[this[0]].concat(e))},E.datepicker=new t,E.datepicker.initialized=!1,E.datepicker.uuid=(new Date).getTime(),E.datepicker.version="1.12.1",E.datepicker,E.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=E(this).css(t).offset().top;e<0&&E(this).css("top",t.top-e)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&E.fn.draggable&&this._makeDraggable(),this.options.resizable&&E.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?E(t):this.document.find(t||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:E.noop,enable:E.noop,close:function(t){var e=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||E.ui.safeBlur(E.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){e._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+E(this).css("z-index")}).get(),o=Math.max.apply(null,n);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),i=!0),i&&!e&&this._trigger("focus",t),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=E(E.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(t){function e(){var t=E.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||E.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),e.call(this),this._delay(e)},_createWrapper:function(){this.uiDialog=E("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===E.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===E.ui.keyCode.TAB&&!t.isDefaultPrevented()){var e=this.uiDialog.find(":tabbable"),i=e.filter(":first"),n=e.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.trigger("focus")}),t.preventDefault()):(this._delay(function(){i.trigger("focus")}),t.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=E("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){E(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=E("<button type='button'></button>").button({label:E("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),t=E("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=E("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=E("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var o=this,t=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),E.isEmptyObject(t)||E.isArray(t)&&!t.length?void this._removeClass(this.uiDialog,"ui-dialog-buttons"):(E.each(t,function(t,e){var i,n;e=E.isFunction(e)?{click:e,text:t}:e,e=E.extend({type:"button"},e),i=e.click,n={icon:e.icon,iconPosition:e.iconPosition,showLabel:e.showLabel,icons:e.icons,text:e.text},delete e.click,delete e.icon,delete e.iconPosition,delete e.showLabel,delete e.icons,"boolean"==typeof e.text&&delete e.text,E("<button></button>",e).button(n).appendTo(o.uiButtonSet).on("click",function(){i.apply(o.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function o(t){return{position:t.position,offset:t.offset}}var r=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,e){r._addClass(E(this),"ui-dialog-dragging"),r._blockFrames(),r._trigger("dragStart",t,o(e))},drag:function(t,e){r._trigger("drag",t,o(e))},stop:function(t,e){var i=e.offset.left-r.document.scrollLeft(),n=e.offset.top-r.document.scrollTop();s.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=n?"+":"")+n,of:r.window},r._removeClass(E(this),"ui-dialog-dragging"),r._unblockFrames(),r._trigger("dragStop",t,o(e))}})},_makeResizable:function(){function r(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var s=this,a=this.options,t=a.resizable,e=this.uiDialog.css("position"),i="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:i,start:function(t,e){s._addClass(E(this),"ui-dialog-resizing"),s._blockFrames(),s._trigger("resizeStart",t,r(e))},resize:function(t,e){s._trigger("resize",t,r(e))},stop:function(t,e){var i=s.uiDialog.offset(),n=i.left-s.document.scrollLeft(),o=i.top-s.document.scrollTop();a.height=s.uiDialog.height(),a.width=s.uiDialog.width(),a.position={my:"left top",at:"left"+(0<=n?"+":"")+n+" top"+(0<=o?"+":"")+o,of:s.window},s._removeClass(E(this),"ui-dialog-resizing"),s._unblockFrames(),s._trigger("resizeStop",t,r(e))}}).css("position",e)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=E(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),e=E.inArray(this,t);-1!==e&&t.splice(e,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(t){var i=this,n=!1,o={};E.each(t,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(n=!0),t in i.resizableRelatedOptions&&(o[t]=e)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,e){var i,n,o=this.uiDialog;"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:E("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((i=o.is(":data(ui-draggable)"))&&!e&&o.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((n=o.is(":data(ui-resizable)"))&&!e&&o.resizable("destroy"),n&&"string"==typeof e&&o.resizable("option","handles",e),n||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=E(this);return E("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!E(t.target).closest(".ui-dialog").length||!!E(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=E("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==E.uiBackCompat&&E.widget("ui.dialog",E.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),E.ui.dialog,E.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=E("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){return void 0===t?this.options.value:(this.options.value=this._constrainedValue(t),void this._refreshValue())},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,e=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(e.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=E("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),E.widget("ui.selectmenu",[E.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=E()},_drawButton:function(){var t,e=this,i=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=E("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=E("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(i).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){e._rendered||e._refreshMenu()})},_drawMenu:function(){var n=this;this.menu=E("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=E("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,e){t.preventDefault(),n._setSelection(),n._select(e.item.data("ui-selectmenu-item"),t)},focus:function(t,e){var i=e.item.data("ui-selectmenu-item");null!=n.focusIndex&&i.index!==n.focusIndex&&(n._trigger("focus",t,{item:i}),n.isOpen||n._select(i,t)),n.focusIndex=i.index,n.button.attr("aria-activedescendant",n.menuItems.eq(i.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(E.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var e=E("<span>");return this._setText(e,t.label),this._addClass(e,"ui-selectmenu-text"),e},_renderMenu:function(n,t){var o=this,r="";E.each(t,function(t,e){var i;e.optgroup!==r&&(i=E("<li>",{text:e.optgroup}),o._addClass(i,"ui-selectmenu-optgroup","ui-menu-divider"+(e.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),i.appendTo(n),r=e.optgroup),o._renderItemData(n,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(t,e){var i=E("<li>"),n=E("<div>",{title:e.element.attr("title")});return e.disabled&&this._addClass(i,null,"ui-state-disabled"),this._setText(n,e.label),i.append(n).appendTo(t)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var i,n,o=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),o+=":not(.ui-state-disabled)"),(n="first"===t||"last"===t?i["first"===t?"prevAll":"nextAll"](o).eq(-1):i[t+"All"](o).eq(0)).length&&this.menuInstance.focus(e,n)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?((t=window.getSelection()).removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(E(t.target).closest(".ui-selectmenu-menu, #"+E.ui.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection()).rangeCount&&(this.range=t.getRangeAt(0)):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(t){var e=!0;switch(t.keyCode){case E.ui.keyCode.TAB:case E.ui.keyCode.ESCAPE:this.close(t),e=!1;break;case E.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case E.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case E.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case E.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case E.ui.keyCode.LEFT:this._move("prev",t);break;case E.ui.keyCode.RIGHT:this._move("next",t);break;case E.ui.keyCode.HOME:case E.ui.keyCode.PAGE_UP:this._move("first",t);break;case E.ui.keyCode.END:case E.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),e=!1}e&&t.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==i&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){if("icons"===t){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,e.button)}this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?E(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;return!1===t?void this.button.css("width",""):(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(t))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(t){var i=this,n=[];t.each(function(t,e){n.push(i._parseOption(E(e),t))}),this.items=n},_parseOption:function(t,e){var i=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),E.widget("ui.slider",E.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,e,i=this.options,n=this.element.find(".ui-slider-handle"),o=[];for(e=i.values&&i.values.length||1,n.length>e&&(n.slice(e).remove(),n=n.slice(0,e)),t=n.length;t<e;t++)o.push("<span tabindex='0'></span>");this.handles=n.add(E(o.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){E(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:E.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=E("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===t.range||"max"===t.range)&&this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var e,i,n,o,r,s,a,l=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(i-l.values(t));(e<n||n===e&&(t===l._lastChangedValue||l.values(t)===c.min))&&(n=e,o=E(this),r=t)}),!1!==this._start(t,r)&&(this._mouseSliding=!0,this._handleIndex=r,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),s=o.offset(),a=!E(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:t.pageX-s.left-o.width()/2,top:t.pageY-s.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,o,r;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),1<(n=i/e)&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),r=this._valueMin()+n*o,this._trimAlignValue(r)},_uiHash:function(t,e,i){var n={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==e?e:this.values(t),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var n,o=this.value(),r=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(n,i):Math.max(n,i)),r[e]=i),i!==o&&(!1!==this._trigger("slide",t,this._uiHash(e,i,r))&&(this._hasMultipleValues()?this.values(e,i):this.value(i)))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var i,n,o;if(1<arguments.length)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!E.isArray(t))return this._hasMultipleValues()?this._values(t):this.value();for(i=this.options.values,n=t,o=0;i.length>o;o+=1)i[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,e){var i,n=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),E.isArray(this.options.values)&&(n=this.options.values.length),this._super(t,e),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(e),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=n-1;0<=i;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=0<i?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,t,n,o,r=this.options.range,s=this.options,a=this,l=!this._animateOff&&s.animate,c={};this._hasMultipleValues()?this.handles.each(function(t){i=(a.values(t)-a._valueMin())/(a._valueMax()-a._valueMin())*100,c["horizontal"===a.orientation?"left":"bottom"]=i+"%",E(this).stop(1,1)[l?"animate":"css"](c,s.animate),!0===a.options.range&&("horizontal"===a.orientation?(0===t&&a.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},s.animate),1===t&&a.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:s.animate})):(0===t&&a.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},s.animate),1===t&&a.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:s.animate}))),e=i}):(t=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?(t-n)/(o-n)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,s.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},s.animate),"max"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:100-i+"%"},s.animate),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},s.animate),"max"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:100-i+"%"},s.animate))},_handleEvents:{keydown:function(t){var e,i,n,o=E(t.target).data("ui-slider-handle-index");switch(t.keyCode){case E.ui.keyCode.HOME:case E.ui.keyCode.END:case E.ui.keyCode.PAGE_UP:case E.ui.keyCode.PAGE_DOWN:case E.ui.keyCode.UP:case E.ui.keyCode.RIGHT:case E.ui.keyCode.DOWN:case E.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(E(t.target),null,"ui-state-active"),!1===this._start(t,o)))return}switch(n=this.options.step,e=i=this._hasMultipleValues()?this.values(o):this.value(),t.keyCode){case E.ui.keyCode.HOME:i=this._valueMin();break;case E.ui.keyCode.END:i=this._valueMax();break;case E.ui.keyCode.PAGE_UP:i=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/this.numPages);break;case E.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/this.numPages);break;case E.ui.keyCode.UP:case E.ui.keyCode.RIGHT:if(e===this._valueMax())return;i=this._trimAlignValue(e+n);break;case E.ui.keyCode.DOWN:case E.ui.keyCode.LEFT:if(e===this._valueMin())return;i=this._trimAlignValue(e-n)}this._slide(t,o,i)},keyup:function(t){var e=E(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,e),this._change(t,e),this._removeClass(E(t.target),null,"ui-state-active"))}}}),E.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var n=this._super(),o=this.element;return E.each(["min","max","step"],function(t,e){var i=o.attr(e);null!=i&&i.length&&(n[e]=i)}),n},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",t)))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((0<e?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(t){function e(){this.element[0]===E.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===E.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),t.preventDefault(),e.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,e.call(this)}),!1!==this._start(t)&&this._repeat(null,E(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return E(t.currentTarget).hasClass("ui-state-active")?!1!==this._start(t)&&void this._repeat(null,E(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&0<this.uiSpinner.height()&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var e=this.options,i=E.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,e.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-e.page,t),!0}return!1},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0)},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var e=this.options.incremental;return e?E.isFunction(e)?e(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,n=this.options;return i=t-(e=null!==n.min?n.min:0),t=e+(i=Math.round(i/n.step)*n.step),t=parseFloat(t.toFixed(this._precision())),null!==n.max&&t>n.max?n.max:null!==n.min&&n.min>t?n.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var i,n,o;return"culture"===t||"numberFormat"===t?(i=this._parse(this.element.val()),this.options[t]=e,void this.element.val(this._format(i))):(("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(n=this.buttons.first().find(".ui-icon"),this._removeClass(n,null,this.options.icons.up),this._addClass(n,null,e.up),o=this.buttons.last().find(".ui-icon"),this._removeClass(o,null,this.options.icons.down),this._addClass(o,null,e.down)),void this._super(t,e))},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:e(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var i;""!==t&&(null!==(i=this._parse(t))&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?void e(this._value).call(this,t):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),!1!==E.uiBackCompat&&E.widget("ui.spinner",E.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),E.ui.spinner,E.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(m=/#.*$/,function(t){var e,i;e=t.href.replace(m,""),i=location.href.replace(m,"");try{e=decodeURIComponent(e)}catch(t){}try{i=decodeURIComponent(i)}catch(t){}return 1<t.hash.length&&e===i}),_create:function(){var e=this,t=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,t.collapsible),this._processTabs(),t.active=this._initialActive(),E.isArray(t.disabled)&&(t.disabled=E.unique(t.disabled.concat(E.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=!1!==this.options.active&&this.anchors.length?this._findActive(t.active):E(),this._refresh(),this.active.length&&this.load(t.active)},_initialActive:function(){var i=this.options.active,t=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(t,e){return E(e).attr("aria-controls")===n?(i=t,!1):void 0}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=!!this.tabs.length&&0)),!1!==i&&(-1===(i=this.tabs.index(this.tabs.eq(i)))&&(i=!t&&0)),!t&&!1===i&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):E()}},_tabKeydown:function(t){var e=E(E.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(e),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case E.ui.keyCode.RIGHT:case E.ui.keyCode.DOWN:i++;break;case E.ui.keyCode.UP:case E.ui.keyCode.LEFT:n=!1,i--;break;case E.ui.keyCode.END:i=this.anchors.length-1;break;case E.ui.keyCode.HOME:i=0;break;case E.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i);case E.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,n),t.ctrlKey||t.metaKey||(e.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===E.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===E.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===E.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,e){for(var i=this.tabs.length-1;-1!==E.inArray((i<t&&(t=0),t<0&&(t=i),t),this.options.disabled);)t=e?t+1:t-1;return t},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){return"active"===t?void this._activate(e):(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),void("heightStyle"===t&&this._setupHeightStyle(e)))},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,e=this.tablist.children(":has(a[href])");t.disabled=E.map(e.filter(".ui-state-disabled"),function(t){return e.index(t)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!E.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=E()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=E()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var l=this,t=this.tabs,e=this.anchors,i=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){E(this).is(".ui-state-disabled")&&t.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){E(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return E("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=E(),this.anchors.each(function(t,e){var i,n,o,r=E(e).uniqueId().attr("id"),s=E(e).closest("li"),a=s.attr("aria-controls");l._isLocal(e)?(o=(i=e.hash).substring(1),n=l.element.find(l._sanitizeSelector(i))):(i="#"+(o=s.attr("aria-controls")||E({}).uniqueId()[0].id),(n=l.element.find(i)).length||(n=l._createPanel(o)).insertAfter(l.panels[t-1]||l.tablist),n.attr("aria-live","polite")),n.length&&(l.panels=l.panels.add(n)),a&&s.data("ui-tabs-aria-controls",a),s.attr({"aria-controls":o,"aria-labelledby":r}),n.attr("aria-labelledby",r)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),t&&(this._off(t.not(this.tabs)),this._off(e.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return E("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var e,i,n;for(E.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),n=0;i=this.tabs[n];n++)e=E(i),!0===t||-1!==E.inArray(n,t)?(e.attr("aria-disabled","true"),this._addClass(e,null,"ui-state-disabled")):(e.removeAttr("aria-disabled"),this._removeClass(e,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var i={};t&&E.each(t.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,e=this.element.parent();"fill"===t?(i=e.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=E(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=E(this).outerHeight(!0)}),this.panels.each(function(){E(this).height(Math.max(0,i-E(this).innerHeight()+E(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,E(this).height("").height())}).height(i))},_eventHandler:function(t){var e=this.options,i=this.active,n=E(t.currentTarget).closest("li"),o=n[0]===i[0],r=o&&e.collapsible,s=r?E():this._getPanelForTab(n),a=i.length?this._getPanelForTab(i):E(),l={oldTab:i,oldPanel:a,newTab:r?E():n,newPanel:s};t.preventDefault(),n.hasClass("ui-state-disabled")||n.hasClass("ui-tabs-loading")||this.running||o&&!e.collapsible||!1===this._trigger("beforeActivate",t,l)||(e.active=!r&&this.tabs.index(n),this.active=o?E():n,this.xhr&&this.xhr.abort(),a.length||s.length||E.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(n),t),this._toggle(t,l))},_toggle:function(t,e){function i(){o.running=!1,o._trigger("activate",t,e)}function n(){o._addClass(e.newTab.closest("li"),"ui-tabs-active","ui-state-active"),r.length&&o.options.show?o._show(r,o.options.show,i):(r.show(),i())}var o=this,r=e.newPanel,s=e.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){o._removeClass(e.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),n()}):(this._removeClass(e.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s.hide(),n()),s.attr("aria-hidden","true"),e.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),r.length&&s.length?e.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===E(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr("aria-hidden","false"),e.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var e,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),e=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:e,currentTarget:e,preventDefault:E.noop}))},_findActive:function(t){return!1===t?E():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+E.ui.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){E.data(this,"ui-tabs-destroy")?E(this).remove():E(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var t=E(this),e=t.data("ui-tabs-aria-controls");e?t.attr("aria-controls",e).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var t=this.options.disabled;!1!==t&&(void 0===i?t=!1:(i=this._getIndex(i),t=E.isArray(t)?E.map(t,function(t){return t!==i?t:null}):E.map(this.tabs,function(t,e){return e!==i?e:null})),this._setOptionDisabled(t))},disable:function(t){var e=this.options.disabled;if(!0!==e){if(void 0===t)e=!0;else{if(t=this._getIndex(t),-1!==E.inArray(t,e))return;e=E.isArray(e)?E.merge([t],e).sort():[t]}this._setOptionDisabled(e)}},load:function(t,n){t=this._getIndex(t);var o=this,i=this.tabs.eq(t),e=i.find(".ui-tabs-anchor"),r=this._getPanelForTab(i),s={tab:i,panel:r},a=function(t,e){"abort"===e&&o.panels.stop(!1,!0),o._removeClass(i,"ui-tabs-loading"),r.removeAttr("aria-busy"),t===o.xhr&&delete o.xhr};this._isLocal(e[0])||(this.xhr=E.ajax(this._ajaxSettings(e,n,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(i,"ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.done(function(t,e,i){setTimeout(function(){r.html(t),o._trigger("load",n,s),a(i,e)},1)}).fail(function(t,e){setTimeout(function(){a(t,e)},1)})))},_ajaxSettings:function(t,i,n){var o=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,e){return o._trigger("beforeLoad",i,E.extend({jqXHR:t,ajaxSettings:e},n))}}},_getPanelForTab:function(t){var e=E(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+e))}}),!1!==E.uiBackCompat&&E.widget("ui.tabs",E.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),E.ui.tabs,E.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=E(this).attr("title")||"";return E("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,e){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(e),t.data("ui-tooltip-id",e).attr("aria-describedby",E.trim(i.join(" ")))},_removeDescribedBy:function(t){var e=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),n=E.inArray(e,i);-1!==n&&i.splice(n,1),t.removeData("ui-tooltip-id"),(i=E.trim(i.join(" ")))?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=E("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=E([])},_setOption:function(t,e){var i=this;this._super(t,e),"content"===t&&E.each(this.tooltips,function(t,e){i._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var n=this;E.each(this.tooltips,function(t,e){var i=E.Event("blur");i.target=i.currentTarget=e.element[0],n.close(i,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=E(this);return t.is("[title]")?t.data("ui-tooltip-title",t.attr("title")).removeAttr("title"):void 0}))},_enable:function(){this.disabledTitles.each(function(){var t=E(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=E([])},open:function(t){var i=this,e=E(t?t.target:this.element).closest(this.options.items);e.length&&!e.data("ui-tooltip-id")&&(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&e.parents().each(function(){var t,e=E(this);e.data("ui-tooltip-open")&&((t=E.Event("blur")).target=t.currentTarget=this,i.close(t,!0)),e.attr("title")&&(e.uniqueId(),i.parents[this.id]={element:this,title:e.attr("title")},e.attr("title",""))}),this._registerCloseHandlers(t,e),this._updateContent(e,t))},_updateContent:function(e,i){var t,n=this.options.content,o=this,r=i?i.type:null;return"string"==typeof n||n.nodeType||n.jquery?this._open(i,e,n):void((t=n.call(e[0],function(t){o._delay(function(){e.data("ui-tooltip-open")&&(i&&(i.type=r),this._open(i,e,t))})}))&&this._open(i,e,t))},_open:function(t,e,i){function n(t){l.of=t,r.is(":hidden")||r.position(l)}var o,r,s,a,l=E.extend({},this.options.position);if(i){if(o=this._find(e))return void o.tooltip.find(".ui-tooltip-content").html(i);e.is("[title]")&&(t&&"mouseover"===t.type?e.attr("title",""):e.removeAttr("title")),o=this._tooltip(e),r=o.tooltip,this._addDescribedBy(e,r.attr("id")),r.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),(a=E("<div>").html(r.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),a.removeAttr("id").find("[id]").removeAttr("id"),a.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:n}),n(t)):r.position(E.extend({of:e},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval(function(){r.is(":visible")&&(n(l.of),clearInterval(s))},E.fx.interval)),this._trigger("open",t,{tooltip:r})}},_registerCloseHandlers:function(t,i){var e={keyup:function(t){if(t.keyCode===E.ui.keyCode.ESCAPE){var e=E.Event(t);e.currentTarget=i[0],this.close(e,!0)}}};i[0]!==this.element[0]&&(e.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(e.mouseleave="close"),t&&"focusin"!==t.type||(e.focusout="close"),this._on(!0,i,e)},close:function(t){var e,i=this,n=E(t?t.currentTarget:this.element),o=this._find(n);return o?(e=o.tooltip,void(o.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),o.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){i._removeTooltip(E(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&E.each(this.parents,function(t,e){E(e.element).attr("title",e.title),delete i.parents[t]}),o.closing=!0,this._trigger("close",t,{tooltip:e}),o.hiding||(o.closing=!1)))):void n.removeData("ui-tooltip-open")},_tooltip:function(t){var e=E("<div>").attr("role","tooltip"),i=E("<div>").appendTo(e),n=e.uniqueId().attr("id");return this._addClass(i,"ui-tooltip-content"),this._addClass(e,"ui-tooltip","ui-widget ui-widget-content"),e.appendTo(this._appendTo(t)),this.tooltips[n]={element:t,tooltip:e}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");return e.length||(e=this.document[0].body),e},_destroy:function(){var o=this;E.each(this.tooltips,function(t,e){var i=E.Event("blur"),n=e.element;i.target=i.currentTarget=n[0],o.close(i,!0),E("#"+t).remove(),n.data("ui-tooltip-title")&&(n.attr("title")||n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==E.uiBackCompat&&E.widget("ui.tooltip",E.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}}),E.ui.tooltip;var v,y="ui-effects-",b="ui-effects-style",w="ui-effects-animated",_=E;E.effects={effect:{}},function(h,u){function d(t,e,i){var n=g[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:t<0?0:t>n.max?n.max:t)}function a(s){var a=f(),l=a._rgba=[];return s=s.toLowerCase(),v(t,function(t,e){var i,n=e.re.exec(s),o=n&&e.parse(n),r=e.space||"rgba";return o?(i=a[r](o),a[m[r].cache]=i[m[r].cache],l=a._rgba=i._rgba,!1):u}),l.length?("0,0,0,0"===l.join()&&h.extend(l,c.transparent),a):c[s]}function l(t,e,i){return 6*(i=(i+1)%1)<1?t+6*(e-t)*i:2*i<1?e:3*i<2?t+6*(e-t)*(2/3-i):t}var c,p=/^([\-+])=\s*(\d+\.?\d*)/,t=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],f=h.Color=function(t,e,i,n){return new h.Color.fn.parse(t,e,i,n)},m={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},g={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},s=f.support={},e=h("<p>")[0],v=h.each;e.style.cssText="background-color:rgba(1,1,1,.5)",s.rgba=-1<e.style.backgroundColor.indexOf("rgba"),v(m,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),f.fn=h.extend(f.prototype,{parse:function(o,t,e,i){if(o===u)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=h(o).css(t),t=u);var r=this,n=h.type(o),s=this._rgba=[];return t!==u&&(o=[o,t,e,i],n="array"),"string"===n?this.parse(a(o)||c._default):"array"===n?(v(m.rgba.props,function(t,e){s[e.idx]=d(o[e.idx],e)}),this):"object"===n?(v(m,o instanceof f?function(t,e){o[e.cache]&&(r[e.cache]=o[e.cache].slice())}:function(t,i){var n=i.cache;v(i.props,function(t,e){if(!r[n]&&i.to){if("alpha"===t||null==o[t])return;r[n]=i.to(r._rgba)}r[n][e.idx]=d(o[t],e,!0)}),r[n]&&h.inArray(null,r[n].slice(0,3))<0&&(r[n][3]=1,i.from&&(r._rgba=i.from(r[n])))}),this):u},is:function(t){var o=f(t),r=!0,s=this;return v(m,function(t,e){var i,n=o[e.cache];return n&&(i=s[e.cache]||e.to&&e.to(s._rgba)||[],v(e.props,function(t,e){return null!=n[e.idx]?r=n[e.idx]===i[e.idx]:u})),r}),r},_space:function(){var i=[],n=this;return v(m,function(t,e){n[e.cache]&&i.push(t)}),i.pop()},transition:function(t,s){var a=f(t),e=a._space(),i=m[e],n=0===this.alpha()?f("transparent"):this,l=n[i.cache]||i.to(n._rgba),c=l.slice();return a=a[i.cache],v(i.props,function(t,e){var i=e.idx,n=l[i],o=a[i],r=g[e.type]||{};null!==o&&(null===n?c[i]=o:(r.mod&&(o-n>r.mod/2?n+=r.mod:n-o>r.mod/2&&(n-=r.mod)),c[i]=d((o-n)*s+n,e)))}),this[e](c)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),i=e.pop(),n=f(t)._rgba;return f(h.map(e,function(t,e){return(1-i)*n[e]+i*t}))},toRgbaString:function(){var t="rgba(",e=h.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=h.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),i=e.pop();return t&&e.push(~~(255*i)),"#"+h.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,m.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,o=t[1]/255,r=t[2]/255,s=t[3],a=Math.max(n,o,r),l=Math.min(n,o,r),c=a-l,h=a+l,u=.5*h;return e=l===a?0:n===a?60*(o-r)/c+360:o===a?60*(r-n)/c+120:60*(n-o)/c+240,i=0===c?0:u<=.5?c/h:c/(2-h),[Math.round(e)%360,i,u,null==s?1:s]},m.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],o=t[3],r=n<=.5?n*(1+i):n+i-n*i,s=2*n-r;return[Math.round(255*l(s,r,e+1/3)),Math.round(255*l(s,r,e)),Math.round(255*l(s,r,e-1/3)),o]},v(m,function(l,t){var i=t.props,s=t.cache,a=t.to,c=t.from;f.fn[l]=function(t){if(a&&!this[s]&&(this[s]=a(this._rgba)),t===u)return this[s].slice();var e,n=h.type(t),o="array"===n||"object"===n?t:arguments,r=this[s].slice();return v(i,function(t,e){var i=o["object"===n?t:e.idx];null==i&&(i=r[e.idx]),r[e.idx]=d(i,e)}),c?((e=f(c(r)))[s]=r,e):f(r)},v(i,function(s,a){f.fn[s]||(f.fn[s]=function(t){var e,i=h.type(t),n="alpha"===s?this._hsla?"hsla":"rgba":l,o=this[n](),r=o[a.idx];return"undefined"===i?r:("function"===i&&(t=t.call(this,r),i=h.type(t)),null==t&&a.empty?this:("string"===i&&((e=p.exec(t))&&(t=r+parseFloat(e[2])*("+"===e[1]?1:-1))),o[a.idx]=t,this[n](o)))})})}),f.hook=function(t){var e=t.split(" ");v(e,function(t,r){h.cssHooks[r]={set:function(t,e){var i,n,o="";if("transparent"!==e&&("string"!==h.type(e)||(i=a(e)))){if(e=f(i||e),!s.rgba&&1!==e._rgba[3]){for(n="backgroundColor"===r?t.parentNode:t;(""===o||"transparent"===o)&&n&&n.style;)try{o=h.css(n,"backgroundColor"),n=n.parentNode}catch(t){}e=e.blend(o&&"transparent"!==o?o:"_default")}e=e.toRgbaString()}try{t.style[r]=e}catch(t){}}},h.fx.step[r]=function(t){t.colorInit||(t.start=f(t.elem,r),t.end=f(t.end),t.colorInit=!0),h.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})},f.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),h.cssHooks.borderColor={expand:function(i){var n={};return v(["Top","Right","Bottom","Left"],function(t,e){n["border"+e+"Color"]=i}),n}},c=h.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(_),function(){function s(t){var e,i,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)"string"==typeof n[e=n[i]]&&(o[E.camelCase(e)]=n[e]);else for(e in n)"string"==typeof n[e]&&(o[e]=n[e]);return o}var r,o,a,l=["add","remove","toggle"],c={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};E.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){E.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(_.style(t.elem,e,t.end),t.setAttr=!0)}}),E.fn.addBack||(E.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),E.effects.animateClass=function(o,t,e,i){var r=E.speed(t,e,i);return this.queue(function(){var t,i=E(this),e=i.attr("class")||"",n=r.children?i.find("*").addBack():i;n=n.map(function(){return{el:E(this),start:s(this)}}),(t=function(){E.each(l,function(t,e){o[e]&&i[e+"Class"](o[e])})})(),n=n.map(function(){return this.end=s(this.el[0]),this.diff=function(t,e){var i,n,o={};for(i in e)n=e[i],t[i]!==n&&(c[i]||(E.fx.step[i]||!isNaN(parseFloat(n)))&&(o[i]=n));return o}(this.start,this.end),this}),i.attr("class",e),n=n.map(function(){var t=this,e=E.Deferred(),i=E.extend({},r,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,i),e.promise()}),E.when.apply(E,n.get()).done(function(){t(),E.each(arguments,function(){var e=this.el;E.each(this.diff,function(t){e.css(t,"")})}),r.complete.call(i[0])})})},E.fn.extend({addClass:(a=E.fn.addClass,function(t,e,i,n){return e?E.effects.animateClass.call(this,{add:t},e,i,n):a.apply(this,arguments)}),removeClass:(o=E.fn.removeClass,function(t,e,i,n){return 1<arguments.length?E.effects.animateClass.call(this,{remove:t},e,i,n):o.apply(this,arguments)}),toggleClass:(r=E.fn.toggleClass,function(t,e,i,n,o){return"boolean"==typeof e||void 0===e?i?E.effects.animateClass.call(this,e?{add:t}:{remove:t},i,n,o):r.apply(this,arguments):E.effects.animateClass.call(this,{toggle:t},e,i,n)}),switchClass:function(t,e,i,n,o){return E.effects.animateClass.call(this,{add:e,remove:t},i,n,o)}})}(),function(){function h(t,e,i,n){return E.isPlainObject(t)&&(t=(e=t).effect),t={effect:t},null==e&&(e={}),E.isFunction(e)&&(n=e,i=null,e={}),("number"==typeof e||E.fx.speeds[e])&&(n=i,i=e,e={}),E.isFunction(i)&&(n=i,i=null),e&&E.extend(t,e),i=i||e.duration,t.duration=E.fx.off?0:"number"==typeof i?i:i in E.fx.speeds?E.fx.speeds[i]:E.fx.speeds._default,t.complete=n||e.complete,t}function i(t){return!(t&&"number"!=typeof t&&!E.fx.speeds[t])||("string"==typeof t&&!E.effects.effect[t]||(!!E.isFunction(t)||"object"==typeof t&&!t.effect))}function e(t,e){var i=e.outerWidth(),n=e.outerHeight(),o=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,i,n,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?i:parseFloat(o[2]),bottom:"auto"===o[3]?n:parseFloat(o[3]),left:parseFloat(o[4])||0}}var n,o,r,s;E.expr&&E.expr.filters&&E.expr.filters.animated&&(E.expr.filters.animated=(s=E.expr.filters.animated,function(t){return!!E(t).data(w)||s(t)})),!1!==E.uiBackCompat&&E.extend(E.effects,{save:function(t,e){for(var i=0,n=e.length;i<n;i++)null!==e[i]&&t.data(y+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,n=0,o=e.length;n<o;n++)null!==e[n]&&(i=t.data(y+e[n]),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(i){if(i.parent().is(".ui-effects-wrapper"))return i.parent();var n={width:i.outerWidth(!0),height:i.outerHeight(!0),float:i.css("float")},t=E("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:i.width(),height:i.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}return i.wrap(t),(i[0]===o||E.contains(i[0],o))&&E(o).trigger("focus"),t=i.parent(),"static"===i.css("position")?(t.css({position:"relative"}),i.css({position:"relative"})):(E.extend(n,{position:i.css("position"),zIndex:i.css("z-index")}),E.each(["top","left","bottom","right"],function(t,e){n[e]=i.css(e),isNaN(parseInt(n[e],10))&&(n[e]="auto")}),i.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),i.css(e),t.css(n).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===e||E.contains(t[0],e))&&E(e).trigger("focus")),t}}),E.extend(E.effects,{version:"1.12.1",define:function(t,e,i){return i||(i=e,e="effect"),E.effects.effect[t]=i,E.effects.effect[t].mode=e,i},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==i?(e||100)/100:1,o="vertical"!==i?(e||100)/100:1;return{height:t.height()*o,width:t.width()*n,outerHeight:t.outerHeight()*o,outerWidth:t.outerWidth()*n}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var n=t.queue();1<e&&n.splice.apply(n,[1,0].concat(n.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(b,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(b)||"",t.removeData(b)},mode:function(t,e){var i=t.is(":hidden");return"toggle"===e&&(e=i?"show":"hide"),(i?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createPlaceholder:function(t){var e,i=t.css("position"),n=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(i)&&(i="absolute",e=E("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(y+"placeholder",e)),t.css({position:i,left:n.left,top:n.top}),e},removePlaceholder:function(t){var e=y+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(t){E.effects.restoreStyle(t),E.effects.removePlaceholder(t)},setTransition:function(n,t,o,r){return r=r||{},E.each(t,function(t,e){var i=n.cssUnit(e);0<i[0]&&(r[e]=i[0]*o+i[1])}),r}}),E.fn.extend({effect:function(){function t(t){function e(){E.isFunction(s)&&s.call(i[0]),E.isFunction(t)&&t()}var i=E(this);n.mode=l.shift(),!1===E.uiBackCompat||r?"none"===n.mode?(i[a](),e()):o.call(i[0],n,function(){i.removeData(w),E.effects.cleanUp(i),"hide"===n.mode&&i.hide(),e()}):(i.is(":hidden")?"hide"===a:"show"===a)?(i[a](),e()):o.call(i[0],n,e)}var n=h.apply(this,arguments),o=E.effects.effect[n.effect],r=o.mode,e=n.queue,i=e||"fx",s=n.complete,a=n.mode,l=[],c=function(t){var e=E(this),i=E.effects.mode(e,a)||r;e.data(w,!0),l.push(i),r&&("show"===i||i===r&&"hide"===i)&&e.show(),r&&"none"===i||E.effects.saveStyle(e),E.isFunction(t)&&t()};return E.fx.off||!o?a?this[a](n.duration,s):this.each(function(){s&&s.call(this)}):!1===e?this.each(c).each(t):this.queue(i,c).queue(i,t)},show:(r=E.fn.show,function(t){if(i(t))return r.apply(this,arguments);var e=h.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}),hide:(o=E.fn.hide,function(t){if(i(t))return o.apply(this,arguments);var e=h.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}),toggle:(n=E.fn.toggle,function(t){if(i(t)||"boolean"==typeof t)return n.apply(this,arguments);var e=h.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}),cssUnit:function(t){var i=this.css(t),n=[];return E.each(["em","px","%","pt"],function(t,e){0<i.indexOf(e)&&(n=[parseFloat(i),e])}),n},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):e(this.css("clip"),this)},transfer:function(t,e){var i=E(this),n=E(t.to),o="fixed"===n.css("position"),r=E("body"),s=o?r.scrollTop():0,a=o?r.scrollLeft():0,l=n.offset(),c={top:l.top-s,left:l.left-a,height:n.innerHeight(),width:n.innerWidth()},h=i.offset(),u=E("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:h.top-s,left:h.left-a,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){u.remove(),E.isFunction(e)&&e()})}}),E.fx.step.clip=function(t){t.clipInit||(t.start=E(t.elem).cssClip(),"string"==typeof t.end&&(t.end=e(t.end,t.elem)),t.clipInit=!0),E(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),v={},E.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){v[t]=function(t){return Math.pow(t,e+2)}}),E.extend(v,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),E.each(v,function(t,e){E.easing["easeIn"+t]=e,E.easing["easeOut"+t]=function(t){return 1-e(1-t)},E.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}});E.effects;E.effects.define("blind","hide",function(t,e){var i={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},n=E(this),o=t.direction||"up",r=n.cssClip(),s={clip:E.extend({},r)},a=E.effects.createPlaceholder(n);s.clip[i[o][0]]=s.clip[i[o][1]],"show"===t.mode&&(n.cssClip(s.clip),a&&a.css(E.effects.clipToBox(s)),s.clip=r),a&&a.animate(E.effects.clipToBox(s),t.duration,t.easing),n.animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),E.effects.define("bounce",function(t,e){var i,n,o,r=E(this),s=t.mode,a="hide"===s,l="show"===s,c=t.direction||"up",h=t.distance,u=t.times||5,d=2*u+(l||a?1:0),p=t.duration/d,f=t.easing,m="up"===c||"down"===c?"top":"left",g="up"===c||"left"===c,v=0,y=r.queue().length;for(E.effects.createPlaceholder(r),o=r.css(m),h||(h=r["top"===m?"outerHeight":"outerWidth"]()/3),l&&((n={opacity:1})[m]=o,r.css("opacity",0).css(m,g?2*-h:2*h).animate(n,p,f)),a&&(h/=Math.pow(2,u-1)),(n={})[m]=o;v<u;v++)(i={})[m]=(g?"-=":"+=")+h,r.animate(i,p,f).animate(n,p,f),h=a?2*h:h/2;a&&((i={opacity:0})[m]=(g?"-=":"+=")+h,r.animate(i,p,f)),r.queue(e),E.effects.unshift(r,y,d+1)}),E.effects.define("clip","hide",function(t,e){var i,n={},o=E(this),r=t.direction||"vertical",s="both"===r,a=s||"horizontal"===r,l=s||"vertical"===r;i=o.cssClip(),n.clip={top:l?(i.bottom-i.top)/2:i.top,right:a?(i.right-i.left)/2:i.right,bottom:l?(i.bottom-i.top)/2:i.bottom,left:a?(i.right-i.left)/2:i.left},E.effects.createPlaceholder(o),"show"===t.mode&&(o.cssClip(n.clip),n.clip=i),o.animate(n,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),E.effects.define("drop","hide",function(t,e){var i,n=E(this),o="show"===t.mode,r=t.direction||"left",s="up"===r||"down"===r?"top":"left",a="up"===r||"left"===r?"-=":"+=",l="+="===a?"-=":"+=",c={opacity:0};E.effects.createPlaceholder(n),i=t.distance||n["top"===s?"outerHeight":"outerWidth"](!0)/2,c[s]=a+i,o&&(n.css(c),c[s]=l+i,c.opacity=1),n.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),E.effects.define("explode","hide",function(t,e){function i(){g.push(this),g.length===c*h&&(u.css({visibility:"visible"}),E(g).remove(),e())}var n,o,r,s,a,l,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=c,u=E(this),d="show"===t.mode,p=u.show().css("visibility","hidden").offset(),f=Math.ceil(u.outerWidth()/h),m=Math.ceil(u.outerHeight()/c),g=[];for(n=0;n<c;n++)for(s=p.top+n*m,l=n-(c-1)/2,o=0;o<h;o++)r=p.left+o*f,a=o-(h-1)/2,u.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*f,top:-n*m}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:m,left:r+(d?a*f:0),top:s+(d?l*m:0),opacity:d?0:1}).animate({left:r+(d?0:a*f),top:s+(d?0:l*m),opacity:d?1:0},t.duration||500,t.easing,i)}),E.effects.define("fade","toggle",function(t,e){var i="show"===t.mode;E(this).css("opacity",i?0:1).animate({opacity:i?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),E.effects.define("fold","hide",function(e,t){var i=E(this),n=e.mode,o="show"===n,r="hide"===n,s=e.size||15,a=/([0-9]+)%/.exec(s),l=!!e.horizFirst?["right","bottom"]:["bottom","right"],c=e.duration/2,h=E.effects.createPlaceholder(i),u=i.cssClip(),d={clip:E.extend({},u)},p={clip:E.extend({},u)},f=[u[l[0]],u[l[1]]],m=i.queue().length;a&&(s=parseInt(a[1],10)/100*f[r?0:1]),d.clip[l[0]]=s,p.clip[l[0]]=s,p.clip[l[1]]=0,o&&(i.cssClip(p.clip),h&&h.css(E.effects.clipToBox(p)),p.clip=u),i.queue(function(t){h&&h.animate(E.effects.clipToBox(d),c,e.easing).animate(E.effects.clipToBox(p),c,e.easing),t()}).animate(d,c,e.easing).animate(p,c,e.easing).queue(t),E.effects.unshift(i,m,4)}),E.effects.define("highlight","show",function(t,e){var i=E(this),n={backgroundColor:i.css("backgroundColor")};"hide"===t.mode&&(n.opacity=0),E.effects.saveStyle(i),i.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(n,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),E.effects.define("size",function(o,e){var t,r,i,n=E(this),s=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=o.mode,h="effect"!==c,u=o.scale||"both",d=o.origin||["middle","center"],p=n.css("position"),f=n.position(),m=E.effects.scaledDimensions(n),g=o.from||m,v=o.to||E.effects.scaledDimensions(n,0);E.effects.createPlaceholder(n),"show"===c&&(i=g,g=v,v=i),r={from:{y:g.height/m.height,x:g.width/m.width},to:{y:v.height/m.height,x:v.width/m.width}},("box"===u||"both"===u)&&(r.from.y!==r.to.y&&(g=E.effects.setTransition(n,a,r.from.y,g),v=E.effects.setTransition(n,a,r.to.y,v)),r.from.x!==r.to.x&&(g=E.effects.setTransition(n,l,r.from.x,g),v=E.effects.setTransition(n,l,r.to.x,v))),("content"===u||"both"===u)&&r.from.y!==r.to.y&&(g=E.effects.setTransition(n,s,r.from.y,g),v=E.effects.setTransition(n,s,r.to.y,v)),d&&(t=E.effects.getBaseline(d,m),g.top=(m.outerHeight-g.outerHeight)*t.y+f.top,g.left=(m.outerWidth-g.outerWidth)*t.x+f.left,v.top=(m.outerHeight-v.outerHeight)*t.y+f.top,v.left=(m.outerWidth-v.outerWidth)*t.x+f.left),n.css(g),("content"===u||"both"===u)&&(a=a.concat(["marginTop","marginBottom"]).concat(s),l=l.concat(["marginLeft","marginRight"]),n.find("*[width]").each(function(){var t=E(this),e=E.effects.scaledDimensions(t),i={height:e.height*r.from.y,width:e.width*r.from.x,outerHeight:e.outerHeight*r.from.y,outerWidth:e.outerWidth*r.from.x},n={height:e.height*r.to.y,width:e.width*r.to.x,outerHeight:e.height*r.to.y,outerWidth:e.width*r.to.x};r.from.y!==r.to.y&&(i=E.effects.setTransition(t,a,r.from.y,i),n=E.effects.setTransition(t,a,r.to.y,n)),r.from.x!==r.to.x&&(i=E.effects.setTransition(t,l,r.from.x,i),n=E.effects.setTransition(t,l,r.to.x,n)),h&&E.effects.saveStyle(t),t.css(i),t.animate(n,o.duration,o.easing,function(){h&&E.effects.restoreStyle(t)})})),n.animate(v,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){var t=n.offset();0===v.opacity&&n.css("opacity",g.opacity),h||(n.css("position","static"===p?"relative":p).offset(t),E.effects.saveStyle(n)),e()}})}),E.effects.define("scale",function(t,e){var i=E(this),n=t.mode,o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"effect"!==n?0:100),r=E.extend(!0,{from:E.effects.scaledDimensions(i),to:E.effects.scaledDimensions(i,o,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(r.from.opacity=1,r.to.opacity=0),E.effects.effect.size.call(this,r,e)}),E.effects.define("puff","hide",function(t,e){var i=E.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});E.effects.effect.scale.call(this,i,e)}),E.effects.define("pulsate","show",function(t,e){var i=E(this),n=t.mode,o="show"===n,r=o||"hide"===n,s=2*(t.times||5)+(r?1:0),a=t.duration/s,l=0,c=1,h=i.queue().length;for((o||!i.is(":visible"))&&(i.css("opacity",0).show(),l=1);c<s;c++)i.animate({opacity:l},a,t.easing),l=1-l;i.animate({opacity:l},a,t.easing),i.queue(e),E.effects.unshift(i,h,s+1)}),E.effects.define("shake",function(t,e){var i=1,n=E(this),o=t.direction||"left",r=t.distance||20,s=t.times||3,a=2*s+1,l=Math.round(t.duration/a),c="up"===o||"down"===o?"top":"left",h="up"===o||"left"===o,u={},d={},p={},f=n.queue().length;for(E.effects.createPlaceholder(n),u[c]=(h?"-=":"+=")+r,d[c]=(h?"+=":"-=")+2*r,p[c]=(h?"-=":"+=")+2*r,n.animate(u,l,t.easing);i<s;i++)n.animate(d,l,t.easing).animate(p,l,t.easing);n.animate(d,l,t.easing).animate(u,l/2,t.easing).queue(e),E.effects.unshift(n,f,a+1)}),E.effects.define("slide","show",function(t,e){var i,n,o=E(this),r={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},s=t.mode,a=t.direction||"left",l="up"===a||"down"===a?"top":"left",c="up"===a||"left"===a,h=t.distance||o["top"===l?"outerHeight":"outerWidth"](!0),u={};E.effects.createPlaceholder(o),i=o.cssClip(),n=o.position()[l],u[l]=(c?-1:1)*h+n,u.clip=o.cssClip(),u.clip[r[a][1]]=u.clip[r[a][0]],"show"===s&&(o.cssClip(u.clip),o.css(l,u[l]),u.clip=i,u[l]=n),o.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),!1!==E.uiBackCompat&&E.effects.define("transfer",function(t,e){E(this).transfer(t,e)})}),function(t){"function"==typeof define&&define.amd?define(["../widgets/datepicker"],t):t(jQuery.datepicker)}(function(t){return t.regional["zh-TW"]={closeText:"關閉",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy/mm/dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},t.setDefaults(t.regional["zh-TW"]),t.regional["zh-TW"]});var isAndroid=-1<(u=navigator.userAgent).indexOf("Android")||-1<u.indexOf("Adr"),isiOS=!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),device=isAndroid||isiOS;$("body").on("click","a",function(t){function e(t){var e=t.pop();return-1<e.indexOf("#")?t.push(e):0<e.indexOf("html")?t.push(e):(""==e||t.push(e),t.push("index.html")),t}t.preventDefault();var i=$(this).attr("class")?$(this).attr("class"):"noClass",n=$(this).attr("target"),o=$(this).attr("href"),r=window.location.pathname.split("/");r=e(r);var s=$(this).attr("href"),a=s.split("/");a=e(a);var l=0<window.navigator.userAgent.indexOf("MSIE"),c=0<window.navigator.userAgent.indexOf("Trident");if("_blank"==n)window.open(o);else if(-1<i.indexOf("nodoit"));else if(-1<s.indexOf("jpg")||-1<s.indexOf("javascript"));else if(-1<s.indexOf("#")){var h=$(this.hash);h.length&&$("html, body").animate({scrollTop:h.offset().top},{duration:900,easing:"easeInOutCirc"})}else r[r.length-1]==a[a.length-1]&&r[r.length-2]==a[a.length-2]||(l||c?pagechange.CG_B(s):pagechange.CG_A(s))}),localStorage.setItem("alreadyLogin",!1);var pagechange={CG_A:function(t){switch(o=Math.floor(Math.random()*Math.floor(3))+1){case 1:var e="#4f3015",i=1;break;case 2:e="#236486",i=2;break;case 3:e="#d09b37",i=3}for(var n="",o=0;o<=10;o++)n="<circle class='circle"+o+"' cx='50%' cy='50%' r='"+(5*o+.01)+"%' stroke='"+e+"'> </circle>"+n;var r="<svg id='endbg'>"+n+"</svg>"+("<article id='svgLogo'><img src='../../assets/js/vendor/cgpagechange/cglogo"+i+".png' alt='' /></article>");$("body").append(r),$windowHeight=$(window).height(),$windowWidth=$(window).width();var s=Math.sqrt($windowHeight*$windowHeight+$windowWidth*$windowWidth);$("#endbg").attr("width",2*s),$("#endbg").attr("height",2*s),$(document).click(function(t){var e=t.clientX,i=t.clientY;$("#endbg").css("top",i),$("#endbg").css("left",e)});var a=s/5;device?($("circle").addClass("stroke"),$("html").delay(1500).animate({opacity:"0"},{queue:!0,duration:600,easing:"easeOutQuad",complete:function(){setTimeout(function(){window.location.assign(t)},100)}})):($("circle").each(function(){$(this).css("stroke-width",a)}),$("html").delay(1150).animate({opacity:"0"},{queue:!0,duration:800,easing:"easeOutQuad",complete:function(){setTimeout(function(){window.location.assign(t)},100)}}))},CG_B:function(t){$("html").delay(100).animate({opacity:"0"},{queue:!0,duration:800,easing:"easeOutQuad",complete:function(){setTimeout(function(){window.location.assign(t)},100)}})}};!function(){"use strict";function e(t){if(!t)throw new Error("No options passed to Waypoint constructor");if(!t.element)throw new Error("No element option passed to Waypoint constructor");if(!t.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+i,this.options=e.Adapter.extend({},e.defaults,t),this.element=this.options.element,this.adapter=new e.Adapter(this.element),this.callback=t.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=e.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=e.Context.findOrCreateByElement(this.options.context),e.offsetAliases[this.options.offset]&&(this.options.offset=e.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),r[this.key]=this,i+=1}var i=0,r={};e.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},e.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},e.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete r[this.key]},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},e.prototype.next=function(){return this.group.next(this)},e.prototype.previous=function(){return this.group.previous(this)},e.invokeAll=function(t){var e=[];for(var i in r)e.push(r[i]);for(var n=0,o=e.length;n<o;n++)e[n][t]()},e.destroyAll=function(){e.invokeAll("destroy")},e.disableAll=function(){e.invokeAll("disable")},e.enableAll=function(){for(var t in e.Context.refreshAll(),r)r[t].enabled=!0;return this},e.refreshAll=function(){e.Context.refreshAll()},e.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},e.viewportWidth=function(){return document.documentElement.clientWidth},e.adapters=[],e.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},e.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=e}(),function(){"use strict";function e(t){window.setTimeout(t,1e3/60)}function i(t){this.element=t,this.Adapter=g.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+n,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,n+=1,g.windowContext||(g.windowContext=!0,g.windowContext=new i(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var n=0,o={},g=window.Waypoint,t=window.onload;i.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},i.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical),i=this.element==this.element.window;t&&e&&!i&&(this.adapter.off(".waypoints"),delete o[this.key])},i.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,g.requestAnimationFrame(t))})},i.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){(!e.didScroll||g.isTouch)&&(e.didScroll=!0,g.requestAnimationFrame(t))})},i.prototype.handleResize=function(){g.Context.refreshAll()},i.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var n=e[i],o=n.newScroll>n.oldScroll?n.forward:n.backward;for(var r in this.waypoints[i]){var s=this.waypoints[i][r];if(null!==s.triggerPoint){var a=n.oldScroll<s.triggerPoint,l=n.newScroll>=s.triggerPoint;(a&&l||!a&&!l)&&(s.queueTrigger(o),t[s.group.id]=s.group)}}}for(var c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},i.prototype.innerHeight=function(){return this.element==this.element.window?g.viewportHeight():this.adapter.innerHeight()},i.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},i.prototype.innerWidth=function(){return this.element==this.element.window?g.viewportWidth():this.adapter.innerWidth()},i.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var n=0,o=t.length;n<o;n++)t[n].destroy()},i.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),n={};for(var o in this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var r=t[o];for(var s in this.waypoints[o]){var a,l,c,h,u=this.waypoints[o][s],d=u.options.offset,p=u.triggerPoint,f=0,m=null==p;u.element!==u.element.window&&(f=u.adapter.offset()[r.offsetProp]),"function"==typeof d?d=d.apply(u):"string"==typeof d&&(d=parseFloat(d),-1<u.options.offset.indexOf("%")&&(d=Math.ceil(r.contextDimension*d/100))),a=r.contextScroll-r.contextOffset,u.triggerPoint=Math.floor(f+a-d),l=p<r.oldScroll,c=u.triggerPoint>=r.oldScroll,h=!l&&!c,!m&&(l&&c)?(u.queueTrigger(r.backward),n[u.group.id]=u.group):!m&&h?(u.queueTrigger(r.forward),n[u.group.id]=u.group):m&&r.oldScroll>=u.triggerPoint&&(u.queueTrigger(r.forward),n[u.group.id]=u.group)}}return g.requestAnimationFrame(function(){for(var t in n)n[t].flushTriggers()}),this},i.findOrCreateByElement=function(t){return i.findByElement(t)||new i(t)},i.refreshAll=function(){for(var t in o)o[t].refresh()},i.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){t&&t(),i.refreshAll()},g.requestAnimationFrame=function(t){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e).call(window,t)},g.Context=i}(),function(){"use strict";function s(t,e){return t.triggerPoint-e.triggerPoint}function a(t,e){return e.triggerPoint-t.triggerPoint}function e(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),i[this.axis][this.name]=this}var i={vertical:{},horizontal:{}},n=window.Waypoint;e.prototype.add=function(t){this.waypoints.push(t)},e.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},e.prototype.flushTriggers=function(){for(var t in this.triggerQueues){var e=this.triggerQueues[t],i="up"===t||"left"===t;e.sort(i?a:s);for(var n=0,o=e.length;n<o;n+=1){var r=e[n];(r.options.continuous||n===e.length-1)&&r.trigger([t])}}this.clearTriggerQueues()},e.prototype.next=function(t){this.waypoints.sort(s);var e=n.Adapter.inArray(t,this.waypoints);return e===this.waypoints.length-1?null:this.waypoints[e+1]},e.prototype.previous=function(t){this.waypoints.sort(s);var e=n.Adapter.inArray(t,this.waypoints);return e?this.waypoints[e-1]:null},e.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},e.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);-1<e&&this.waypoints.splice(e,1)},e.prototype.first=function(){return this.waypoints[0]},e.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},e.findOrCreate=function(t){return i[t.axis][t.name]||new e(t)},n.Group=e}(),function(){"use strict";function i(t){this.$element=n(t)}var n=window.jQuery,t=window.Waypoint;n.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(t,e){i.prototype[e]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[e].apply(this.$element,t)}}),n.each(["extend","inArray","isEmptyObject"],function(t,e){i[e]=n[e]}),t.adapters.push({name:"jquery",Adapter:i}),t.Adapter=i}(),function(){"use strict";function t(n){return function(){var e=[],i=arguments[0];return n.isFunction(arguments[0])&&((i=n.extend({},arguments[1])).handler=arguments[0]),this.each(function(){var t=n.extend({},i,{element:this});"string"==typeof t.context&&(t.context=n(this).closest(t.context)[0]),e.push(new o(t))}),e}}var o=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}(),function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.Blazy=e()}(this,function(){function n(t){var e=t._util;e.elements=function(t){for(var e=[],i=(t=t.root.querySelectorAll(t.selector)).length;i--;e.unshift(t[i]));return e}(t.options),e.count=e.elements.length,e.destroyed&&(e.destroyed=!1,t.options.container&&g(t.options.container,function(t){f(t,"scroll",e.validateT)}),f(window,"resize",e.saveViewportOffsetT),f(window,"resize",e.validateT),f(window,"scroll",e.validateT)),o(t)}function o(t){for(var e=t._util,i=0;i<e.count;i++){var n,o=e.elements[i],r=o;n=t.options;var s=r.getBoundingClientRect();n.container&&w&&(r=r.closest(n.containerClass))?n=!!a(r=r.getBoundingClientRect(),y)&&a(s,{top:r.top-n.offset,right:r.right+n.offset,bottom:r.bottom+n.offset,left:r.left-n.offset}):n=a(s,y),(n||d(o,t.options.successClass))&&(t.load(o),e.elements.splice(i,1),e.count--,i--)}0===e.count&&t.destroy()}function a(t,e){return t.right>=e.left&&t.bottom>=e.top&&t.left<=e.right&&t.top<=e.bottom}function s(t,e,n){if(!d(t,n.successClass)&&(e||n.loadInvisible||0<t.offsetWidth&&0<t.offsetHeight))if(e=t.getAttribute(v)||t.getAttribute(n.src)){var i=(e=e.split(n.separator))[b&&1<e.length?1:0],o=t.getAttribute(n.srcset),r="img"===t.nodeName.toLowerCase(),s=(e=t.parentNode)&&"picture"===e.nodeName.toLowerCase();if(r||void 0===t.src){var a=new Image,l=function(){n.error&&n.error(t,"invalid"),p(t,n.errorClass),m(a,"error",l),m(a,"load",c)},c=function(){r?s||u(t,i,o):t.style.backgroundImage='url("'+i+'")',h(t,n),m(a,"load",c),m(a,"error",l)};s&&(a=t,g(e.getElementsByTagName("source"),function(t){var e=n.srcset,i=t.getAttribute(e);i&&(t.setAttribute("srcset",i),t.removeAttribute(e))})),f(a,"error",l),f(a,"load",c),u(a,i,o)}else t.src=i,h(t,n)}else"video"===t.nodeName.toLowerCase()?(g(t.getElementsByTagName("source"),function(t){var e=n.src,i=t.getAttribute(e);i&&(t.setAttribute("src",i),t.removeAttribute(e))}),t.load(),h(t,n)):(n.error&&n.error(t,"missing"),p(t,n.errorClass))}function h(e,t){p(e,t.successClass),t.success&&t.success(e),e.removeAttribute(t.src),e.removeAttribute(t.srcset),g(t.breakpoints,function(t){e.removeAttribute(t.src)})}function u(t,e,i){i&&t.setAttribute("srcset",i),t.src=e}function d(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")}function p(t,e){d(t,e)||(t.className+=" "+e)}function l(t){y.bottom=(window.innerHeight||document.documentElement.clientHeight)+t,y.right=(window.innerWidth||document.documentElement.clientWidth)+t}function f(t,e,i){t.attachEvent?t.attachEvent&&t.attachEvent("on"+e,i):t.addEventListener(e,i,{capture:!1,passive:!0})}function m(t,e,i){t.detachEvent?t.detachEvent&&t.detachEvent("on"+e,i):t.removeEventListener(e,i,{capture:!1,passive:!0})}function g(t,e){if(t&&e)for(var i=t.length,n=0;n<i&&!1!==e(t[n],n);n++);}function c(e,i,n){var o=0;return function(){var t=+new Date;t-o<i||(o=t,e.apply(n,arguments))}}var v,y,b,w;return function(t){if(!document.querySelectorAll){var r=document.createStyleSheet();document.querySelectorAll=function(t,e,i,n,o){for(o=document.all,e=[],i=(t=t.replace(/\[for\b/gi,"[htmlFor").split(",")).length;i--;){for(r.addRule(t[i],"k:v"),n=o.length;n--;)o[n].currentStyle.k&&e.push(o[n]);r.removeRule(0)}return e}}var e=this,i=e._util={};i.elements=[],i.destroyed=!0,e.options=t||{},e.options.error=e.options.error||!1,e.options.offset=e.options.offset||100,e.options.root=e.options.root||document,e.options.success=e.options.success||!1,e.options.selector=e.options.selector||".b-lazy",e.options.separator=e.options.separator||"|",e.options.containerClass=e.options.container,e.options.container=!!e.options.containerClass&&document.querySelectorAll(e.options.containerClass),e.options.errorClass=e.options.errorClass||"b-error",e.options.breakpoints=e.options.breakpoints||!1,e.options.loadInvisible=e.options.loadInvisible||!1,e.options.successClass=e.options.successClass||"b-loaded",e.options.validateDelay=e.options.validateDelay||25,e.options.saveViewportOffsetDelay=e.options.saveViewportOffsetDelay||50,e.options.srcset=e.options.srcset||"data-srcset",e.options.src=v=e.options.src||"data-src",w=Element.prototype.closest,b=1<window.devicePixelRatio,(y={}).top=0-e.options.offset,y.left=0-e.options.offset,e.revalidate=function(){n(e)},e.load=function(t,e){var i=this.options;void 0===t.length?s(t,e,i):g(t,function(t){s(t,e,i)})},e.destroy=function(){var e=this._util;this.options.container&&g(this.options.container,function(t){m(t,"scroll",e.validateT)}),m(window,"scroll",e.validateT),m(window,"resize",e.validateT),m(window,"resize",e.saveViewportOffsetT),e.count=0,e.elements.length=0,e.destroyed=!0},i.validateT=c(function(){o(e)},e.options.validateDelay,e),i.saveViewportOffsetT=c(function(){l(e.options.offset)},e.options.saveViewportOffsetDelay,e),l(e.options.offset),g(e.options.breakpoints,function(t){if(t.width>=window.screen.width)return v=t.src,!1}),setTimeout(function(){n(e)})}}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(c){"use strict";var o,r=window.Slick||{};o=0,(r=function(t,e){var i,n=this;n.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:c(t),appendDots:c(t),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,e){return c('<button type="button" data-role="none" role="button" tabindex="0" />').text(e+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},n.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},c.extend(n,n.initials),n.activeBreakpoint=null,n.animType=null,n.animProp=null,n.breakpoints=[],n.breakpointSettings=[],n.cssTransitions=!1,n.focussed=!1,n.interrupted=!1,n.hidden="hidden",n.paused=!0,n.positionProp=null,n.respondTo=null,n.rowCount=1,n.shouldClick=!0,n.$slider=c(t),n.$slidesCache=null,n.transformType=null,n.transitionType=null,n.visibilityChange="visibilitychange",n.windowWidth=0,n.windowTimer=null,i=c(t).data("slick")||{},n.options=c.extend({},n.defaults,e,i),n.currentSlide=n.options.initialSlide,n.originalSettings=n.options,void 0!==document.mozHidden?(n.hidden="mozHidden",n.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(n.hidden="webkitHidden",n.visibilityChange="webkitvisibilitychange"),n.autoPlay=c.proxy(n.autoPlay,n),n.autoPlayClear=c.proxy(n.autoPlayClear,n),n.autoPlayIterator=c.proxy(n.autoPlayIterator,n),n.changeSlide=c.proxy(n.changeSlide,n),n.clickHandler=c.proxy(n.clickHandler,n),n.selectHandler=c.proxy(n.selectHandler,n),n.setPosition=c.proxy(n.setPosition,n),n.swipeHandler=c.proxy(n.swipeHandler,n),n.dragHandler=c.proxy(n.dragHandler,n),n.keyHandler=c.proxy(n.keyHandler,n),n.instanceUid=o++,n.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,n.registerBreakpoints(),n.init(!0)}).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},r.prototype.addSlide=r.prototype.slickAdd=function(t,e,i){var n=this;if("boolean"==typeof e)i=e,e=null;else if(e<0||e>=n.slideCount)return!1;n.unload(),"number"==typeof e?0===e&&0===n.$slides.length?c(t).appendTo(n.$slideTrack):i?c(t).insertBefore(n.$slides.eq(e)):c(t).insertAfter(n.$slides.eq(e)):!0===i?c(t).prependTo(n.$slideTrack):c(t).appendTo(n.$slideTrack),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slides.each(function(t,e){c(e).attr("data-slick-index",t)}),n.$slidesCache=n.$slides,n.reinit()},r.prototype.animateHeight=function(){if(1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical){var t=this.$slides.eq(this.currentSlide).outerHeight(!0);this.$list.animate({height:t},this.options.speed)}},r.prototype.animateSlide=function(t,e){var i={},n=this;n.animateHeight(),!0===n.options.rtl&&!1===n.options.vertical&&(t=-t),!1===n.transformsEnabled?!1===n.options.vertical?n.$slideTrack.animate({left:t},n.options.speed,n.options.easing,e):n.$slideTrack.animate({top:t},n.options.speed,n.options.easing,e):!1===n.cssTransitions?(!0===n.options.rtl&&(n.currentLeft=-n.currentLeft),c({animStart:n.currentLeft}).animate({animStart:t},{duration:n.options.speed,easing:n.options.easing,step:function(t){t=Math.ceil(t),!1===n.options.vertical?i[n.animType]="translate("+t+"px, 0px)":i[n.animType]="translate(0px,"+t+"px)",n.$slideTrack.css(i)},complete:function(){e&&e.call()}})):(n.applyTransition(),t=Math.ceil(t),!1===n.options.vertical?i[n.animType]="translate3d("+t+"px, 0px, 0px)":i[n.animType]="translate3d(0px,"+t+"px, 0px)",n.$slideTrack.css(i),e&&setTimeout(function(){n.disableTransition(),e.call()},n.options.speed))},r.prototype.getNavTarget=function(){var t=this.options.asNavFor;return t&&null!==t&&(t=c(t).not(this.$slider)),t},r.prototype.asNavFor=function(e){var t=this.getNavTarget();null!==t&&"object"==typeof t&&t.each(function(){var t=c(this).slick("getSlick");t.unslicked||t.slideHandler(e,!0)})},r.prototype.applyTransition=function(t){var e=this,i={};!1===e.options.fade?i[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:i[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,!1===e.options.fade?e.$slideTrack.css(i):e.$slides.eq(t).css(i)},r.prototype.autoPlay=function(){this.autoPlayClear(),this.slideCount>this.options.slidesToShow&&(this.autoPlayTimer=setInterval(this.autoPlayIterator,this.options.autoplaySpeed))},r.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},r.prototype.autoPlayIterator=function(){var t=this,e=t.currentSlide+t.options.slidesToScroll;t.paused||t.interrupted||t.focussed||(!1===t.options.infinite&&(1===t.direction&&t.currentSlide+1===t.slideCount-1?t.direction=0:0===t.direction&&(e=t.currentSlide-t.options.slidesToScroll,t.currentSlide-1==0&&(t.direction=1))),t.slideHandler(e))},r.prototype.buildArrows=function(){var t=this;!0===t.options.arrows&&(t.$prevArrow=c(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=c(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),!0!==t.options.infinite&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},r.prototype.buildDots=function(){var t,e,i=this;if(!0===i.options.dots&&i.slideCount>i.options.slidesToShow){for(i.$slider.addClass("slick-dotted"),e=c("<ul />").addClass(i.options.dotsClass),t=0;t<=i.getDotCount();t+=1)e.append(c("<li />").append(i.options.customPaging.call(this,i,t)));i.$dots=e.appendTo(i.options.appendDots),i.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},r.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,e){c(e).attr("data-slick-index",t).data("originalStyling",c(e).attr("style")||"")}),t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?c('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),(!0===t.options.centerMode||!0===t.options.swipeToSlide)&&(t.options.slidesToScroll=1),c("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),!0===t.options.draggable&&t.$list.addClass("draggable")},r.prototype.buildRows=function(){var t,e,i,n,o,r,s,a=this;if(n=document.createDocumentFragment(),r=a.$slider.children(),1<a.options.rows){for(s=a.options.slidesPerRow*a.options.rows,o=Math.ceil(r.length/s),t=0;t<o;t++){var l=document.createElement("div");for(e=0;e<a.options.rows;e++){var c=document.createElement("div");for(i=0;i<a.options.slidesPerRow;i++){var h=t*s+(e*a.options.slidesPerRow+i);r.get(h)&&c.appendChild(r.get(h))}l.appendChild(c)}n.appendChild(l)}a.$slider.empty().append(n),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},r.prototype.checkResponsive=function(t,e){var i,n,o,r=this,s=!1,a=r.$slider.width(),l=window.innerWidth||c(window).width();if("window"===r.respondTo?o=l:"slider"===r.respondTo?o=a:"min"===r.respondTo&&(o=Math.min(l,a)),r.options.responsive&&r.options.responsive.length&&null!==r.options.responsive){for(i in n=null,r.breakpoints)r.breakpoints.hasOwnProperty(i)&&(!1===r.originalSettings.mobileFirst?o<r.breakpoints[i]&&(n=r.breakpoints[i]):o>r.breakpoints[i]&&(n=r.breakpoints[i]));null!==n?null!==r.activeBreakpoint?(n!==r.activeBreakpoint||e)&&(r.activeBreakpoint=n,"unslick"===r.breakpointSettings[n]?r.unslick(n):(r.options=c.extend({},r.originalSettings,r.breakpointSettings[n]),!0===t&&(r.currentSlide=r.options.initialSlide),r.refresh(t)),s=n):(r.activeBreakpoint=n,"unslick"===r.breakpointSettings[n]?r.unslick(n):(r.options=c.extend({},r.originalSettings,r.breakpointSettings[n]),!0===t&&(r.currentSlide=r.options.initialSlide),r.refresh(t)),s=n):null!==r.activeBreakpoint&&(r.activeBreakpoint=null,r.options=r.originalSettings,!0===t&&(r.currentSlide=r.options.initialSlide),r.refresh(t),s=n),t||!1===s||r.$slider.trigger("breakpoint",[r,s])}},r.prototype.changeSlide=function(t,e){var i,n,o=this,r=c(t.currentTarget);switch(r.is("a")&&t.preventDefault(),r.is("li")||(r=r.closest("li")),i=o.slideCount%o.options.slidesToScroll!=0?0:(o.slideCount-o.currentSlide)%o.options.slidesToScroll,t.data.message){case"previous":n=0===i?o.options.slidesToScroll:o.options.slidesToShow-i,o.slideCount>o.options.slidesToShow&&o.slideHandler(o.currentSlide-n,!1,e);break;case"next":n=0===i?o.options.slidesToScroll:i,o.slideCount>o.options.slidesToShow&&o.slideHandler(o.currentSlide+n,!1,e);break;case"index":var s=0===t.data.index?0:t.data.index||r.index()*o.options.slidesToScroll;o.slideHandler(o.checkNavigable(s),!1,e),r.children().trigger("focus");break;default:return}},r.prototype.checkNavigable=function(t){var e,i;if(i=0,t>(e=this.getNavigableIndexes())[e.length-1])t=e[e.length-1];else for(var n in e){if(t<e[n]){t=i;break}i=e[n]}return t},r.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&c("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",c.proxy(t.interrupt,t,!0)).off("mouseleave.slick",c.proxy(t.interrupt,t,!1)),t.$slider.off("focus.slick blur.slick"),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide)),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),c(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),!0===t.options.accessibility&&t.$list.off("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&c(t.$slideTrack).children().off("click.slick",t.selectHandler),c(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),c(window).off("resize.slick.slick-"+t.instanceUid,t.resize),c("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),c(window).off("load.slick.slick-"+t.instanceUid,t.setPosition),c(document).off("ready.slick.slick-"+t.instanceUid,t.setPosition)},r.prototype.cleanUpSlideEvents=function(){this.$list.off("mouseenter.slick",c.proxy(this.interrupt,this,!0)),this.$list.off("mouseleave.slick",c.proxy(this.interrupt,this,!1))},r.prototype.cleanUpRows=function(){var t;1<this.options.rows&&((t=this.$slides.children().children()).removeAttr("style"),this.$slider.empty().append(t))},r.prototype.clickHandler=function(t){!1===this.shouldClick&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())},r.prototype.destroy=function(t){var e=this;e.autoPlayClear(),e.touchObject={},e.cleanUpEvents(),c(".slick-cloned",e.$slider).detach(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.$prevArrow.length&&(e.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove()),e.$nextArrow&&e.$nextArrow.length&&(e.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove()),e.$slides&&(e.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){c(this).attr("style",c(this).data("originalStyling"))}),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.detach(),e.$list.detach(),e.$slider.append(e.$slides)),e.cleanUpRows(),e.$slider.removeClass("slick-slider"),e.$slider.removeClass("slick-initialized"),e.$slider.removeClass("slick-dotted"),e.unslicked=!0,t||e.$slider.trigger("destroy",[e])},r.prototype.disableTransition=function(t){var e={};e[this.transitionType]="",!1===this.options.fade?this.$slideTrack.css(e):this.$slides.eq(t).css(e)},r.prototype.fadeSlide=function(t,e){var i=this;!1===i.cssTransitions?(i.$slides.eq(t).css({zIndex:i.options.zIndex}),i.$slides.eq(t).animate({opacity:1},i.options.speed,i.options.easing,e)):(i.applyTransition(t),i.$slides.eq(t).css({opacity:1,zIndex:i.options.zIndex}),e&&setTimeout(function(){i.disableTransition(t),e.call()},i.options.speed))},r.prototype.fadeSlideOut=function(t){!1===this.cssTransitions?this.$slides.eq(t).animate({opacity:0,zIndex:this.options.zIndex-2},this.options.speed,this.options.easing):(this.applyTransition(t),this.$slides.eq(t).css({opacity:0,zIndex:this.options.zIndex-2}))},r.prototype.filterSlides=r.prototype.slickFilter=function(t){null!==t&&(this.$slidesCache=this.$slides,this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.filter(t).appendTo(this.$slideTrack),this.reinit())},r.prototype.focusHandler=function(){var i=this;i.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(t){t.stopImmediatePropagation();var e=c(this);setTimeout(function(){i.options.pauseOnFocus&&(i.focussed=e.is(":focus"),i.autoPlay())},0)})},r.prototype.getCurrent=r.prototype.slickCurrentSlide=function(){return this.currentSlide},r.prototype.getDotCount=function(){var t=this,e=0,i=0,n=0;if(!0===t.options.infinite)for(;e<t.slideCount;)++n,e=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else if(!0===t.options.centerMode)n=t.slideCount;else if(t.options.asNavFor)for(;e<t.slideCount;)++n,e=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else n=1+Math.ceil((t.slideCount-t.options.slidesToShow)/t.options.slidesToScroll);return n-1},r.prototype.getLeft=function(t){var e,i,n,o=this,r=0;return o.slideOffset=0,i=o.$slides.first().outerHeight(!0),!0===o.options.infinite?(o.slideCount>o.options.slidesToShow&&(o.slideOffset=o.slideWidth*o.options.slidesToShow*-1,r=i*o.options.slidesToShow*-1),o.slideCount%o.options.slidesToScroll!=0&&t+o.options.slidesToScroll>o.slideCount&&o.slideCount>o.options.slidesToShow&&(t>o.slideCount?(o.slideOffset=(o.options.slidesToShow-(t-o.slideCount))*o.slideWidth*-1,r=(o.options.slidesToShow-(t-o.slideCount))*i*-1):(o.slideOffset=o.slideCount%o.options.slidesToScroll*o.slideWidth*-1,r=o.slideCount%o.options.slidesToScroll*i*-1))):t+o.options.slidesToShow>o.slideCount&&(o.slideOffset=(t+o.options.slidesToShow-o.slideCount)*o.slideWidth,r=(t+o.options.slidesToShow-o.slideCount)*i),o.slideCount<=o.options.slidesToShow&&(r=o.slideOffset=0),!0===o.options.centerMode&&!0===o.options.infinite?o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)-o.slideWidth:!0===o.options.centerMode&&(o.slideOffset=0,o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)),e=!1===o.options.vertical?t*o.slideWidth*-1+o.slideOffset:t*i*-1+r,!0===o.options.variableWidth&&(n=o.slideCount<=o.options.slidesToShow||!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(t):o.$slideTrack.children(".slick-slide").eq(t+o.options.slidesToShow),e=!0===o.options.rtl?n[0]?-1*(o.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,!0===o.options.centerMode&&(n=o.slideCount<=o.options.slidesToShow||!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(t):o.$slideTrack.children(".slick-slide").eq(t+o.options.slidesToShow+1),e=!0===o.options.rtl?n[0]?-1*(o.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,e+=(o.$list.width()-n.outerWidth())/2)),e},r.prototype.getOption=r.prototype.slickGetOption=function(t){return this.options[t]},r.prototype.getNavigableIndexes=function(){var t,e=this,i=0,n=0,o=[];for(!1===e.options.infinite?t=e.slideCount:(i=-1*e.options.slidesToScroll,n=-1*e.options.slidesToScroll,t=2*e.slideCount);i<t;)o.push(i),i=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return o},r.prototype.getSlick=function(){return this},r.prototype.getSlideCount=function(){var i,n,o=this;return n=!0===o.options.centerMode?o.slideWidth*Math.floor(o.options.slidesToShow/2):0,!0===o.options.swipeToSlide?(o.$slideTrack.find(".slick-slide").each(function(t,e){return e.offsetLeft-n+c(e).outerWidth()/2>-1*o.swipeLeft?(i=e,!1):void 0}),Math.abs(c(i).attr("data-slick-index")-o.currentSlide)||1):o.options.slidesToScroll},r.prototype.goTo=r.prototype.slickGoTo=function(t,e){this.changeSlide({data:{message:"index",index:parseInt(t)}},e)},r.prototype.init=function(t){var e=this;c(e.$slider).hasClass("slick-initialized")||(c(e.$slider).addClass("slick-initialized"),e.buildRows(),e.buildOut(),e.setProps(),e.startLoad(),e.loadSlider(),e.initializeEvents(),e.updateArrows(),e.updateDots(),e.checkResponsive(!0),e.focusHandler()),t&&e.$slider.trigger("init",[e]),!0===e.options.accessibility&&e.initADA(),e.options.autoplay&&(e.paused=!1,e.autoPlay())},r.prototype.initADA=function(){var e=this;e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),e.$slideTrack.attr("role","listbox"),e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(t){c(this).attr({role:"option","aria-describedby":"slick-slide"+e.instanceUid+t})}),null!==e.$dots&&e.$dots.attr("role","tablist").find("li").each(function(t){c(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+e.instanceUid+t,id:"slick-slide"+e.instanceUid+t})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),e.activateADA()},r.prototype.initArrowEvents=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},this.changeSlide),this.$nextArrow.off("click.slick").on("click.slick",{message:"next"},this.changeSlide))},r.prototype.initDotEvents=function(){var t=this;!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&c("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&c("li",t.$dots).on("mouseenter.slick",c.proxy(t.interrupt,t,!0)).on("mouseleave.slick",c.proxy(t.interrupt,t,!1))},r.prototype.initSlideEvents=function(){this.options.pauseOnHover&&(this.$list.on("mouseenter.slick",c.proxy(this.interrupt,this,!0)),this.$list.on("mouseleave.slick",c.proxy(this.interrupt,this,!1)))},r.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),c(document).on(t.visibilityChange,c.proxy(t.visibility,t)),!0===t.options.accessibility&&t.$list.on("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&c(t.$slideTrack).children().on("click.slick",t.selectHandler),c(window).on("orientationchange.slick.slick-"+t.instanceUid,c.proxy(t.orientationChange,t)),c(window).on("resize.slick.slick-"+t.instanceUid,c.proxy(t.resize,t)),c("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),c(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),c(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},r.prototype.initUI=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.show(),this.$nextArrow.show()),!0===this.options.dots&&this.slideCount>this.options.slidesToShow&&this.$dots.show()},r.prototype.keyHandler=function(t){t.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===t.keyCode&&!0===this.options.accessibility?this.changeSlide({data:{message:!0===this.options.rtl?"next":"previous"}}):39===t.keyCode&&!0===this.options.accessibility&&this.changeSlide({data:{message:!0===this.options.rtl?"previous":"next"}}))},r.prototype.lazyLoad=function(){function t(t){c("img[data-lazy]",t).each(function(){var t=c(this),e=c(this).attr("data-lazy"),i=document.createElement("img");i.onload=function(){t.animate({opacity:0},100,function(){t.attr("src",e).animate({opacity:1},200,function(){t.removeAttr("data-lazy").removeClass("slick-loading")}),n.$slider.trigger("lazyLoaded",[n,t,e])})},i.onerror=function(){t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),n.$slider.trigger("lazyLoadError",[n,t,e])},i.src=e})}var e,i,n=this;!0===n.options.centerMode?!0===n.options.infinite?i=(e=n.currentSlide+(n.options.slidesToShow/2+1))+n.options.slidesToShow+2:(e=Math.max(0,n.currentSlide-(n.options.slidesToShow/2+1)),i=n.options.slidesToShow/2+1+2+n.currentSlide):(e=n.options.infinite?n.options.slidesToShow+n.currentSlide:n.currentSlide,i=Math.ceil(e+n.options.slidesToShow),!0===n.options.fade&&(0<e&&e--,i<=n.slideCount&&i++)),t(n.$slider.find(".slick-slide").slice(e,i)),n.slideCount<=n.options.slidesToShow?t(n.$slider.find(".slick-slide")):n.currentSlide>=n.slideCount-n.options.slidesToShow?t(n.$slider.find(".slick-cloned").slice(0,n.options.slidesToShow)):0===n.currentSlide&&t(n.$slider.find(".slick-cloned").slice(-1*n.options.slidesToShow))},r.prototype.loadSlider=function(){this.setPosition(),this.$slideTrack.css({opacity:1}),this.$slider.removeClass("slick-loading"),this.initUI(),"progressive"===this.options.lazyLoad&&this.progressiveLazyLoad()},r.prototype.next=r.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},r.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},r.prototype.pause=r.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},r.prototype.play=r.prototype.slickPlay=function(){this.autoPlay(),this.options.autoplay=!0,this.paused=!1,this.focussed=!1,this.interrupted=!1},r.prototype.postSlide=function(t){var e=this;e.unslicked||(e.$slider.trigger("afterChange",[e,t]),e.animating=!1,e.setPosition(),e.swipeLeft=null,e.options.autoplay&&e.autoPlay(),!0===e.options.accessibility&&e.initADA())},r.prototype.prev=r.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},r.prototype.preventDefault=function(t){t.preventDefault()},r.prototype.progressiveLazyLoad=function(t){t=t||1;var e,i,n,o=this,r=c("img[data-lazy]",o.$slider);r.length?(e=r.first(),i=e.attr("data-lazy"),(n=document.createElement("img")).onload=function(){e.attr("src",i).removeAttr("data-lazy").removeClass("slick-loading"),!0===o.options.adaptiveHeight&&o.setPosition(),o.$slider.trigger("lazyLoaded",[o,e,i]),o.progressiveLazyLoad()},n.onerror=function(){t<3?setTimeout(function(){o.progressiveLazyLoad(t+1)},500):(e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),o.$slider.trigger("lazyLoadError",[o,e,i]),o.progressiveLazyLoad())},n.src=i):o.$slider.trigger("allImagesLoaded",[o])},r.prototype.refresh=function(t){var e,i,n=this;i=n.slideCount-n.options.slidesToShow,!n.options.infinite&&n.currentSlide>i&&(n.currentSlide=i),n.slideCount<=n.options.slidesToShow&&(n.currentSlide=0),e=n.currentSlide,n.destroy(!0),c.extend(n,n.initials,{currentSlide:e}),n.init(),t||n.changeSlide({data:{message:"index",index:e}},!1)},r.prototype.registerBreakpoints=function(){var t,e,i,n=this,o=n.options.responsive||null;if("array"===c.type(o)&&o.length){for(t in n.respondTo=n.options.respondTo||"window",o)if(i=n.breakpoints.length-1,e=o[t].breakpoint,o.hasOwnProperty(t)){for(;0<=i;)n.breakpoints[i]&&n.breakpoints[i]===e&&n.breakpoints.splice(i,1),i--;n.breakpoints.push(e),n.breakpointSettings[e]=o[t].settings}n.breakpoints.sort(function(t,e){return n.options.mobileFirst?t-e:e-t})}},r.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),t.initSlideEvents(),t.checkResponsive(!1,!0),!0===t.options.focusOnSelect&&c(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},r.prototype.resize=function(){var t=this;c(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=c(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},r.prototype.removeSlide=r.prototype.slickRemove=function(t,e,i){var n=this;return"boolean"==typeof t?t=!0===(e=t)?0:n.slideCount-1:t=!0===e?--t:t,!(n.slideCount<1||t<0||t>n.slideCount-1)&&(n.unload(),!0===i?n.$slideTrack.children().remove():n.$slideTrack.children(this.options.slide).eq(t).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,void n.reinit())},r.prototype.setCSS=function(t){var e,i,n=this,o={};!0===n.options.rtl&&(t=-t),e="left"==n.positionProp?Math.ceil(t)+"px":"0px",i="top"==n.positionProp?Math.ceil(t)+"px":"0px",o[n.positionProp]=t,!1===n.transformsEnabled||(!(o={})===n.cssTransitions?o[n.animType]="translate("+e+", "+i+")":o[n.animType]="translate3d("+e+", "+i+", 0px)"),n.$slideTrack.css(o)},r.prototype.setDimensions=function(){var t=this;!1===t.options.vertical?!0===t.options.centerMode&&t.$list.css({padding:"0px "+t.options.centerPadding}):(t.$list.height(t.$slides.first().outerHeight(!0)*t.options.slidesToShow),!0===t.options.centerMode&&t.$list.css({padding:t.options.centerPadding+" 0px"})),t.listWidth=t.$list.width(),t.listHeight=t.$list.height(),!1===t.options.vertical&&!1===t.options.variableWidth?(t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.width(Math.ceil(t.slideWidth*t.$slideTrack.children(".slick-slide").length))):!0===t.options.variableWidth?t.$slideTrack.width(5e3*t.slideCount):(t.slideWidth=Math.ceil(t.listWidth),t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0)*t.$slideTrack.children(".slick-slide").length)));var e=t.$slides.first().outerWidth(!0)-t.$slides.first().width();!1===t.options.variableWidth&&t.$slideTrack.children(".slick-slide").width(t.slideWidth-e)},r.prototype.setFade=function(){var i,n=this;n.$slides.each(function(t,e){i=n.slideWidth*t*-1,!0===n.options.rtl?c(e).css({position:"relative",right:i,top:0,zIndex:n.options.zIndex-2,opacity:0}):c(e).css({position:"relative",left:i,top:0,zIndex:n.options.zIndex-2,opacity:0})}),n.$slides.eq(n.currentSlide).css({zIndex:n.options.zIndex-1,opacity:1})},r.prototype.setHeight=function(){if(1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical){var t=this.$slides.eq(this.currentSlide).outerHeight(!0);this.$list.css("height",t)}},r.prototype.setOption=r.prototype.slickSetOption=function(){var t,e,i,n,o,r=this,s=!1;if("object"===c.type(arguments[0])?(i=arguments[0],s=arguments[1],o="multiple"):"string"===c.type(arguments[0])&&(i=arguments[0],n=arguments[1],s=arguments[2],"responsive"===arguments[0]&&"array"===c.type(arguments[1])?o="responsive":void 0!==arguments[1]&&(o="single")),"single"===o)r.options[i]=n;else if("multiple"===o)c.each(i,function(t,e){r.options[t]=e});else if("responsive"===o)for(e in n)if("array"!==c.type(r.options.responsive))r.options.responsive=[n[e]];else{for(t=r.options.responsive.length-1;0<=t;)r.options.responsive[t].breakpoint===n[e].breakpoint&&r.options.responsive.splice(t,1),t--;r.options.responsive.push(n[e])}s&&(r.unload(),r.reinit())},r.prototype.setPosition=function(){this.setDimensions(),this.setHeight(),!1===this.options.fade?this.setCSS(this.getLeft(this.currentSlide)):this.setFade(),this.$slider.trigger("setPosition",[this])},r.prototype.setProps=function(){var t=this,e=document.body.style;t.positionProp=!0===t.options.vertical?"top":"left","top"===t.positionProp?t.$slider.addClass("slick-vertical"):t.$slider.removeClass("slick-vertical"),(void 0!==e.WebkitTransition||void 0!==e.MozTransition||void 0!==e.msTransition)&&!0===t.options.useCSS&&(t.cssTransitions=!0),t.options.fade&&("number"==typeof t.options.zIndex?t.options.zIndex<3&&(t.options.zIndex=3):t.options.zIndex=t.defaults.zIndex),void 0!==e.OTransform&&(t.animType="OTransform",t.transformType="-o-transform",t.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.MozTransform&&(t.animType="MozTransform",t.transformType="-moz-transform",t.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(t.animType=!1)),void 0!==e.webkitTransform&&(t.animType="webkitTransform",t.transformType="-webkit-transform",t.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.msTransform&&(t.animType="msTransform",t.transformType="-ms-transform",t.transitionType="msTransition",void 0===e.msTransform&&(t.animType=!1)),void 0!==e.transform&&!1!==t.animType&&(t.animType="transform",t.transformType="transform",t.transitionType="transition"),t.transformsEnabled=t.options.useTransform&&null!==t.animType&&!1!==t.animType},r.prototype.setSlideClasses=function(t){var e,i,n,o,r=this;i=r.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),r.$slides.eq(t).addClass("slick-current"),!0===r.options.centerMode?(e=Math.floor(r.options.slidesToShow/2),!0===r.options.infinite&&(e<=t&&t<=r.slideCount-1-e?r.$slides.slice(t-e,t+e+1).addClass("slick-active").attr("aria-hidden","false"):(n=r.options.slidesToShow+t,i.slice(n-e+1,n+e+2).addClass("slick-active").attr("aria-hidden","false")),0===t?i.eq(i.length-1-r.options.slidesToShow).addClass("slick-center"):t===r.slideCount-1&&i.eq(r.options.slidesToShow).addClass("slick-center")),r.$slides.eq(t).addClass("slick-center")):0<=t&&t<=r.slideCount-r.options.slidesToShow?r.$slides.slice(t,t+r.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=r.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(o=r.slideCount%r.options.slidesToShow,n=!0===r.options.infinite?r.options.slidesToShow+t:t,r.options.slidesToShow==r.options.slidesToScroll&&r.slideCount-t<r.options.slidesToShow?i.slice(n-(r.options.slidesToShow-o),n+o).addClass("slick-active").attr("aria-hidden","false"):i.slice(n,n+r.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===r.options.lazyLoad&&r.lazyLoad()},r.prototype.setupInfinite=function(){var t,e,i,n=this;if(!0===n.options.fade&&(n.options.centerMode=!1),!0===n.options.infinite&&!1===n.options.fade&&(e=null,n.slideCount>n.options.slidesToShow)){for(i=!0===n.options.centerMode?n.options.slidesToShow+1:n.options.slidesToShow,t=n.slideCount;t>n.slideCount-i;t-=1)e=t-1,c(n.$slides[e]).clone(!0).attr("id","").attr("data-slick-index",e-n.slideCount).prependTo(n.$slideTrack).addClass("slick-cloned");for(t=0;t<i;t+=1)e=t,c(n.$slides[e]).clone(!0).attr("id","").attr("data-slick-index",e+n.slideCount).appendTo(n.$slideTrack).addClass("slick-cloned");n.$slideTrack.find(".slick-cloned").find("[id]").each(function(){c(this).attr("id","")})}},r.prototype.interrupt=function(t){t||this.autoPlay(),this.interrupted=t},r.prototype.selectHandler=function(t){var e=c(t.target).is(".slick-slide")?c(t.target):c(t.target).parents(".slick-slide"),i=parseInt(e.attr("data-slick-index"));return i||(i=0),this.slideCount<=this.options.slidesToShow?(this.setSlideClasses(i),void this.asNavFor(i)):void this.slideHandler(i)},r.prototype.slideHandler=function(t,e,i){var n,o,r,s,a,l=null,c=this;return e=e||!1,!0===c.animating&&!0===c.options.waitForAnimate||!0===c.options.fade&&c.currentSlide===t||c.slideCount<=c.options.slidesToShow?void 0:(!1===e&&c.asNavFor(t),n=t,l=c.getLeft(n),s=c.getLeft(c.currentSlide),c.currentLeft=null===c.swipeLeft?s:c.swipeLeft,!1===c.options.infinite&&!1===c.options.centerMode&&(t<0||t>c.getDotCount()*c.options.slidesToScroll)?void(!1===c.options.fade&&(n=c.currentSlide,!0!==i?c.animateSlide(s,function(){c.postSlide(n)}):c.postSlide(n))):!1===c.options.infinite&&!0===c.options.centerMode&&(t<0||t>c.slideCount-c.options.slidesToScroll)?void(!1===c.options.fade&&(n=c.currentSlide,!0!==i?c.animateSlide(s,function(){c.postSlide(n)}):c.postSlide(n))):(c.options.autoplay&&clearInterval(c.autoPlayTimer),o=n<0?c.slideCount%c.options.slidesToScroll!=0?c.slideCount-c.slideCount%c.options.slidesToScroll:c.slideCount+n:n>=c.slideCount?c.slideCount%c.options.slidesToScroll!=0?0:n-c.slideCount:n,c.animating=!0,c.$slider.trigger("beforeChange",[c,c.currentSlide,o]),r=c.currentSlide,c.currentSlide=o,c.setSlideClasses(c.currentSlide),c.options.asNavFor&&((a=(a=c.getNavTarget()).slick("getSlick")).slideCount<=a.options.slidesToShow&&a.setSlideClasses(c.currentSlide)),c.updateDots(),c.updateArrows(),!0===c.options.fade?(!0!==i?(c.fadeSlideOut(r),c.fadeSlide(o,function(){c.postSlide(o)})):c.postSlide(o),void c.animateHeight()):void(!0!==i?c.animateSlide(l,function(){c.postSlide(o)}):c.postSlide(o))))},r.prototype.startLoad=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.hide(),t.$nextArrow.hide()),!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&t.$dots.hide(),t.$slider.addClass("slick-loading")},r.prototype.swipeDirection=function(){var t,e,i,n;return t=this.touchObject.startX-this.touchObject.curX,e=this.touchObject.startY-this.touchObject.curY,i=Math.atan2(e,t),(n=Math.round(180*i/Math.PI))<0&&(n=360-Math.abs(n)),n<=45&&0<=n?!1===this.options.rtl?"left":"right":n<=360&&315<=n?!1===this.options.rtl?"left":"right":135<=n&&n<=225?!1===this.options.rtl?"right":"left":!0===this.options.verticalSwiping?35<=n&&n<=135?"down":"up":"vertical"},r.prototype.swipeEnd=function(t){var e,i,n=this;if(n.dragging=!1,n.interrupted=!1,n.shouldClick=!(10<n.touchObject.swipeLength),void 0===n.touchObject.curX)return!1;if(!0===n.touchObject.edgeHit&&n.$slider.trigger("edge",[n,n.swipeDirection()]),n.touchObject.swipeLength>=n.touchObject.minSwipe){switch(i=n.swipeDirection()){case"left":case"down":e=n.options.swipeToSlide?n.checkNavigable(n.currentSlide+n.getSlideCount()):n.currentSlide+n.getSlideCount(),n.currentDirection=0;break;case"right":case"up":e=n.options.swipeToSlide?n.checkNavigable(n.currentSlide-n.getSlideCount()):n.currentSlide-n.getSlideCount(),n.currentDirection=1}"vertical"!=i&&(n.slideHandler(e),n.touchObject={},n.$slider.trigger("swipe",[n,i]))}else n.touchObject.startX!==n.touchObject.curX&&(n.slideHandler(n.currentSlide),n.touchObject={})},r.prototype.swipeHandler=function(t){var e=this;if(!(!1===e.options.swipe||"ontouchend"in document&&!1===e.options.swipe||!1===e.options.draggable&&-1!==t.type.indexOf("mouse")))switch(e.touchObject.fingerCount=t.originalEvent&&void 0!==t.originalEvent.touches?t.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,!0===e.options.verticalSwiping&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),t.data.action){case"start":e.swipeStart(t);break;case"move":e.swipeMove(t);break;case"end":e.swipeEnd(t)}},r.prototype.swipeMove=function(t){var e,i,n,o,r,s=this;return r=void 0!==t.originalEvent?t.originalEvent.touches:null,!(!s.dragging||r&&1!==r.length)&&(e=s.getLeft(s.currentSlide),s.touchObject.curX=void 0!==r?r[0].pageX:t.clientX,s.touchObject.curY=void 0!==r?r[0].pageY:t.clientY,s.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(s.touchObject.curX-s.touchObject.startX,2))),!0===s.options.verticalSwiping&&(s.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(s.touchObject.curY-s.touchObject.startY,2)))),"vertical"!==(i=s.swipeDirection())?(void 0!==t.originalEvent&&4<s.touchObject.swipeLength&&t.preventDefault(),o=(!1===s.options.rtl?1:-1)*(s.touchObject.curX>s.touchObject.startX?1:-1),!0===s.options.verticalSwiping&&(o=s.touchObject.curY>s.touchObject.startY?1:-1),n=s.touchObject.swipeLength,(s.touchObject.edgeHit=!1)===s.options.infinite&&(0===s.currentSlide&&"right"===i||s.currentSlide>=s.getDotCount()&&"left"===i)&&(n=s.touchObject.swipeLength*s.options.edgeFriction,s.touchObject.edgeHit=!0),!1===s.options.vertical?s.swipeLeft=e+n*o:s.swipeLeft=e+n*(s.$list.height()/s.listWidth)*o,!0===s.options.verticalSwiping&&(s.swipeLeft=e+n*o),!0!==s.options.fade&&!1!==s.options.touchMove&&(!0===s.animating?(s.swipeLeft=null,!1):void s.setCSS(s.swipeLeft))):void 0)},r.prototype.swipeStart=function(t){var e,i=this;return i.interrupted=!0,1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow?!(i.touchObject={}):(void 0!==t.originalEvent&&void 0!==t.originalEvent.touches&&(e=t.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==e?e.pageX:t.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==e?e.pageY:t.clientY,void(i.dragging=!0))},r.prototype.unfilterSlides=r.prototype.slickUnfilter=function(){null!==this.$slidesCache&&(this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.appendTo(this.$slideTrack),this.reinit())},r.prototype.unload=function(){var t=this;c(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},r.prototype.unslick=function(t){this.$slider.trigger("unslick",[this,t]),this.destroy()},r.prototype.updateArrows=function(){var t=this;Math.floor(t.options.slidesToShow/2),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&!1===t.options.centerMode?(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-1&&!0===t.options.centerMode&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},r.prototype.updateDots=function(){null!==this.$dots&&(this.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),this.$dots.find("li").eq(Math.floor(this.currentSlide/this.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},r.prototype.visibility=function(){this.options.autoplay&&(document[this.hidden]?this.interrupted=!0:this.interrupted=!1)},c.fn.slick=function(){var t,e,i=arguments[0],n=Array.prototype.slice.call(arguments,1),o=this.length;for(t=0;t<o;t++)if("object"==typeof i||void 0===i?this[t].slick=new r(this[t],i):e=this[t].slick[i].apply(this[t].slick,n),void 0!==e)return e;return this}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";var E=!1,C=!1,A=0,k=2e3,P=0,L=t,R=document,D=window,I=L(D),O=[],N=D.requestAnimationFrame||D.webkitRequestAnimationFrame||D.mozRequestAnimationFrame||!1,z=D.cancelAnimationFrame||D.webkitCancelAnimationFrame||D.mozCancelAnimationFrame||!1;if(N)D.cancelAnimationFrame||(z=function(t){});else{var r=0;N=function(t,e){var i=(new Date).getTime(),n=Math.max(0,16-(i-r)),o=D.setTimeout(function(){t(i+n)},n);return r=i+n,o},z=function(t){D.clearTimeout(t)}}var e,i,n,H=D.MutationObserver||D.WebKitMutationObserver||!1,B=Date.now||function(){return(new Date).getTime()},F={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"6px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:40,mousescrollstep:27,touchbehavior:!1,emulatetouch:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:(i=R.currentScript||!!(e=R.getElementsByTagName("script")).length&&e[e.length-1],n=i?i.src.split("?")[0]:"",0<n.split("/").length?n.split("/").slice(0,-1).join("/")+"/":""),preventmultitouchscrolling:!0,disablemutationobserver:!1,enableobserver:!0,scrollbarid:!1},U=!1,a=function(t,e){function i(){var t=b.doc.css(x.trstyle);return!(!t||"matrix"!=t.substr(0,6))&&t.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function s(t,e,i){var n=t.css(e),o=parseFloat(n);if(isNaN(o)){var r=3==(o=d[n]||0)?i?b.win.outerHeight()-b.win.innerHeight():b.win.outerWidth()-b.win.innerWidth():1;return b.isie8&&o&&(o+=1),r?o:0}return o}function r(i,n,o,t){b._bind(i,n,function(t){var e={original:t=t||D.event,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return t.preventDefault?t.preventDefault():t.returnValue=!1,!1},stopImmediatePropagation:function(){t.stopImmediatePropagation?t.stopImmediatePropagation():t.cancelBubble=!0}};return"mousewheel"==n?(t.wheelDeltaX&&(e.deltaX=-.025*t.wheelDeltaX),t.wheelDeltaY&&(e.deltaY=-.025*t.wheelDeltaY),!e.deltaY&&!e.deltaX&&(e.deltaY=-.025*t.wheelDelta)):e.deltaY=t.detail,o.call(i,e)},t)}function a(t,e,i,n){b.scrollrunning||(b.newscrolly=b.getScrollTop(),b.newscrollx=b.getScrollLeft(),y=B());var o=B()-y;if(y=B(),350<o?S=1:S+=(2-S)/10,e=e*S|0,t=t*S|0){if(n)if(t<0){if(b.getScrollLeft()>=b.page.maxw)return!0}else if(b.getScrollLeft()<=0)return!0;var r=0<t?1:-1;v!==r&&(b.scrollmom&&b.scrollmom.stop(),b.newscrollx=b.getScrollLeft(),v=r),b.lastdeltax-=t}if(e){if(function(){var t=b.getScrollTop();if(e<0){if(t>=b.page.maxh)return!0}else if(t<=0)return!0}()){if(_.nativeparentscrolling&&i&&!b.ispage&&!b.zoomactive)return!0;var s=b.view.h>>1;b.newscrolly<-s?(b.newscrolly=-s,e=-1):b.newscrolly>b.page.maxh+s?(b.newscrolly=b.page.maxh+s,e=1):e=0}var a=0<e?1:-1;g!==a&&(b.scrollmom&&b.scrollmom.stop(),b.newscrolly=b.getScrollTop(),g=a),b.lastdeltay-=e}(e||t)&&b.synched("relativexy",function(){var t=b.lastdeltay+b.newscrolly;b.lastdeltay=0;var e=b.lastdeltax+b.newscrollx;b.lastdeltax=0,b.rail.drag||b.doScrollPos(e,t)})}function o(t,e,i){var n,o;return!(i||!T)||(0===t.deltaMode?(n=-t.deltaX*(_.mousescrollstep/54)|0,o=-t.deltaY*(_.mousescrollstep/54)|0):1===t.deltaMode&&(n=-t.deltaX*_.mousescrollstep*50/80|0,o=-t.deltaY*_.mousescrollstep*50/80|0),e&&_.oneaxismousemode&&0===n&&o&&(n=o,o=0,i&&(n<0?b.getScrollLeft()>=b.page.maxw:b.getScrollLeft()<=0)&&(o=n,n=0)),b.isrtlmode&&(n=-n),a(n,o,i,!0)?void(i&&(T=!0)):(T=!1,t.stopImmediatePropagation(),t.preventDefault()))}var b=this;this.version="3.7.6",this.name="nicescroll",this.me=e;var w=L("body"),_=this.opt={doc:w,win:!1};if(L.extend(_,F),_.snapbackspeed=80,t)for(var n in _)void 0!==t[n]&&(_[n]=t[n]);if(_.disablemutationobserver&&(H=!1),this.doc=_.doc,this.iddoc=this.doc&&this.doc[0]&&this.doc[0].id||"",this.ispage=/^BODY|HTML/.test(_.win?_.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==_.win,this.win=_.win||(this.ispage?I:this.doc),this.docscroll=this.ispage&&!this.haswrapper?I:this.win,this.body=w,this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=_.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,"auto"==_.rtlmode){var l=this.win[0]==D?this.body:this.win,c=l.css("writing-mode")||l.css("-webkit-writing-mode")||l.css("-ms-writing-mode")||l.css("-moz-writing-mode");"horizontal-tb"==c||"lr-tb"==c||""===c?(this.isrtlmode="rtl"==l.css("direction"),this.isvertical=!1):(this.isrtlmode="vertical-rl"==c||"tb"==c||"tb-rl"==c||"rl-tb"==c,this.isvertical="vertical-rl"==c||"tb"==c||"tb-rl"==c)}else this.isrtlmode=!0===_.rtlmode,this.isvertical=!1;if(this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1,(this.observerbody=!1)!==_.scrollbarid)this.id=_.scrollbarid;else for(;this.id="ascrail"+k++,R.getElementById(this.id););this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.railslocked=!1,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=_.overflowx,this.overflowy=_.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=function(){if(U)return U;var t=R.createElement("DIV"),r=t.style,e=navigator.userAgent,i=navigator.platform,s={};return s.haspointerlock="pointerLockElement"in R||"webkitPointerLockElement"in R||"mozPointerLockElement"in R,s.isopera="opera"in D,s.isopera12=s.isopera&&"getUserMedia"in navigator,s.isoperamini="[object OperaMini]"===Object.prototype.toString.call(D.operamini),s.isie="all"in R&&"attachEvent"in t&&!s.isopera,s.isieold=s.isie&&!("msInterpolationMode"in r),s.isie7=s.isie&&!s.isieold&&(!("documentMode"in R)||7===R.documentMode),s.isie8=s.isie&&"documentMode"in R&&8===R.documentMode,s.isie9=s.isie&&"performance"in D&&9===R.documentMode,s.isie10=s.isie&&"performance"in D&&10===R.documentMode,s.isie11="msRequestFullscreen"in t&&11<=R.documentMode,s.ismsedge="msCredentials"in D,s.ismozilla="MozAppearance"in r,s.iswebkit=!s.ismsedge&&"WebkitAppearance"in r,s.ischrome=s.iswebkit&&"chrome"in D,s.ischrome38=s.ischrome&&"touchAction"in r,s.ischrome22=!s.ischrome38&&s.ischrome&&s.haspointerlock,s.ischrome26=!s.ischrome38&&s.ischrome&&"transition"in r,s.cantouch="ontouchstart"in R.documentElement||"ontouchstart"in D,s.hasw3ctouch=!!D.PointerEvent&&(0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints),s.hasmstouch=!s.hasw3ctouch&&(D.MSPointerEvent||!1),s.ismac=/^mac$/i.test(i),s.isios=s.cantouch&&/iphone|ipad|ipod/i.test(i),s.isios4=s.isios&&!("seal"in Object),s.isios7=s.isios&&"webkitHidden"in R,s.isios8=s.isios&&"hidden"in R,s.isios10=s.isios&&D.Proxy,s.isandroid=/android/i.test(e),s.haseventlistener="addEventListener"in t,s.trstyle=!1,s.hastransform=!1,s.hastranslate3d=!1,s.transitionstyle=!1,s.hastransition=!1,s.transitionend=!1,s.trstyle="transform",s.hastransform="transform"in r||function(){for(var t=["msTransform","webkitTransform","MozTransform","OTransform"],e=0,i=t.length;e<i;e++)if(void 0!==r[t[e]]){s.trstyle=t[e];break}s.hastransform=!!s.trstyle}(),s.hastransform&&(r[s.trstyle]="translate3d(1px,2px,3px)",s.hastranslate3d=/translate3d/.test(r[s.trstyle])),s.transitionstyle="transition",s.prefixstyle="",s.transitionend="transitionend",s.hastransition="transition"in r||function(){s.transitionend=!1;for(var t=["webkitTransition","msTransition","MozTransition","OTransition","OTransition","KhtmlTransition"],e=["-webkit-","-ms-","-moz-","-o-","-o","-khtml-"],i=["webkitTransitionEnd","msTransitionEnd","transitionend","otransitionend","oTransitionEnd","KhtmlTransitionEnd"],n=0,o=t.length;n<o;n++)if(t[n]in r){s.transitionstyle=t[n],s.prefixstyle=e[n],s.transitionend=i[n];break}s.ischrome26&&(s.prefixstyle=e[1]),s.hastransition=s.transitionstyle}(),s.cursorgrabvalue=function(){var t=["grab","-webkit-grab","-moz-grab"];(s.ischrome&&!s.ischrome38||s.isie)&&(t=[]);for(var e=0,i=t.length;e<i;e++){var n=t[e];if(r.cursor=n,r.cursor==n)return n}return"url(https://cdnjs.cloudflare.com/ajax/libs/slider-pro/1.3.0/css/images/openhand.cur),n-resize"}(),s.hasmousecapture="setCapture"in t,s.hasMutationObserver=!1!==H,t=null,U=s}();var x=L.extend({},this.detected);this.canhwscroll=x.hastransform&&_.hwacceleration,this.ishwscroll=this.canhwscroll&&b.haswrapper,this.isrtlmode?this.isvertical?this.hasreversehr=!(x.iswebkit||x.isie||x.isie11):this.hasreversehr=!(x.iswebkit||x.isie&&!x.isie10&&!x.isie11):this.hasreversehr=!1,this.istouchcapable=!1,(x.cantouch||!x.hasw3ctouch&&!x.hasmstouch)&&(!x.cantouch||x.isios||x.isandroid||!x.iswebkit&&!x.ismozilla)||(this.istouchcapable=!0),_.enablemouselockapi||(x.hasmousecapture=!1,x.haspointerlock=!1),this.debounced=function(t,e,i){b&&(b.delaylist[t]||(b.delaylist[t]={h:N(function(){b.delaylist[t].fn.call(b),b.delaylist[t]=!1},i)},e.call(b)),b.delaylist[t].fn=e)},this.synched=function(t,e){b.synclist[t]?b.synclist[t]=e:(b.synclist[t]=e,N(function(){b&&(b.synclist[t]&&b.synclist[t].call(b),b.synclist[t]=null)}))},this.unsynched=function(t){b.synclist[t]&&(b.synclist[t]=!1)},this.css=function(t,e){for(var i in e)b.saved.css.push([t,i,t.css(i)]),t.css(i,e[i])},this.scrollTop=function(t){return void 0===t?b.getScrollTop():b.setScrollTop(t)},this.scrollLeft=function(t){return void 0===t?b.getScrollLeft():b.setScrollLeft(t)};var h=function(t,e,i,n,o,r,s){this.st=t,this.ed=e,this.spd=i,this.p1=n||0,this.p2=o||1,this.p3=r||0,this.p4=s||1,this.ts=B(),this.df=e-t};if(h.prototype={B2:function(t){return 3*(1-t)*(1-t)*t},B3:function(t){return 3*(1-t)*t*t},B4:function(t){return t*t*t},getPos:function(){return(B()-this.ts)/this.spd},getNow:function(){var t=(B()-this.ts)/this.spd,e=this.B2(t)+this.B3(t)+this.B4(t);return 1<=t?this.ed:this.st+this.df*e|0},update:function(t,e){return this.st=this.getNow(),this.ed=t,this.spd=e,this.ts=B(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},x.hastranslate3d&&x.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(t){if(!t){var e=i();if(e)return 16==e.length?-e[13]:-e[5];if(b.timerscroll&&b.timerscroll.bz)return b.timerscroll.bz.getNow()}return b.doc.translate.y},this.getScrollLeft=function(t){if(!t){var e=i();if(e)return 16==e.length?-e[12]:-e[4];if(b.timerscroll&&b.timerscroll.bh)return b.timerscroll.bh.getNow()}return b.doc.translate.x},this.notifyScrollEvent=function(t){var e=R.createEvent("UIEvents");e.initUIEvent("scroll",!1,!1,D,1),e.niceevent=!0,t.dispatchEvent(e)};var u=this.isrtlmode?1:-1;x.hastranslate3d&&_.enabletranslate3d?(this.setScrollTop=function(t,e){b.doc.translate.y=t,b.doc.translate.ty=-1*t+"px",b.doc.css(x.trstyle,"translate3d("+b.doc.translate.tx+","+b.doc.translate.ty+",0)"),e||b.notifyScrollEvent(b.win[0])},this.setScrollLeft=function(t,e){b.doc.translate.x=t,b.doc.translate.tx=t*u+"px",b.doc.css(x.trstyle,"translate3d("+b.doc.translate.tx+","+b.doc.translate.ty+",0)"),e||b.notifyScrollEvent(b.win[0])}):(this.setScrollTop=function(t,e){b.doc.translate.y=t,b.doc.translate.ty=-1*t+"px",b.doc.css(x.trstyle,"translate("+b.doc.translate.tx+","+b.doc.translate.ty+")"),e||b.notifyScrollEvent(b.win[0])},this.setScrollLeft=function(t,e){b.doc.translate.x=t,b.doc.translate.tx=t*u+"px",b.doc.css(x.trstyle,"translate("+b.doc.translate.tx+","+b.doc.translate.ty+")"),e||b.notifyScrollEvent(b.win[0])})}else this.getScrollTop=function(){return b.docscroll.scrollTop()},this.setScrollTop=function(t){b.docscroll.scrollTop(t)},this.getScrollLeft=function(){return b.hasreversehr?b.detected.ismozilla?b.page.maxw-Math.abs(b.docscroll.scrollLeft()):b.page.maxw-b.docscroll.scrollLeft():b.docscroll.scrollLeft()},this.setScrollLeft=function(t){return setTimeout(function(){if(b)return b.hasreversehr&&(t=b.detected.ismozilla?-(b.page.maxw-t):b.page.maxw-t),b.docscroll.scrollLeft(t)},1)};this.getTarget=function(t){return!!t&&(t.target?t.target:!!t.srcElement&&t.srcElement)},this.hasParent=function(t,e){if(!t)return!1;for(var i=t.target||t.srcElement||t||!1;i&&i.id!=e;)i=i.parentNode||!1;return!1!==i};var d={thin:1,medium:3,thick:5};this.getDocumentScrollOffset=function(){return{top:D.pageYOffset||R.documentElement.scrollTop,left:D.pageXOffset||R.documentElement.scrollLeft}},this.getOffset=function(){if(b.isfixed){var t=b.win.offset(),e=b.getDocumentScrollOffset();return t.top-=e.top,t.left-=e.left,t}var i=b.win.offset();if(!b.viewport)return i;var n=b.viewport.offset();return{top:i.top-n.top,left:i.left-n.left}},this.updateScrollBar=function(t){var e,i;if(b.ishwscroll)b.rail.css({height:b.win.innerHeight()-(_.railpadding.top+_.railpadding.bottom)}),b.railh&&b.railh.css({width:b.win.innerWidth()-(_.railpadding.left+_.railpadding.right)});else{var n=b.getOffset();if((e={top:n.top,left:n.left-(_.railpadding.left+_.railpadding.right)}).top+=s(b.win,"border-top-width",!0),e.left+=b.rail.align?b.win.outerWidth()-s(b.win,"border-right-width")-b.rail.width:s(b.win,"border-left-width"),(i=_.railoffset)&&(i.top&&(e.top+=i.top),i.left&&(e.left+=i.left)),b.railslocked||b.rail.css({top:e.top,left:e.left,height:(t?t.h:b.win.innerHeight())-(_.railpadding.top+_.railpadding.bottom)}),b.zoom&&b.zoom.css({top:e.top+1,left:1==b.rail.align?e.left-20:e.left+b.rail.width+4}),b.railh&&!b.railslocked){e={top:n.top,left:n.left},(i=_.railhoffset)&&(i.top&&(e.top+=i.top),i.left&&(e.left+=i.left));var o=b.railh.align?e.top+s(b.win,"border-top-width",!0)+b.win.innerHeight()-b.railh.height:e.top+s(b.win,"border-top-width",!0),r=e.left+s(b.win,"border-left-width");b.railh.css({top:o-(_.railpadding.top+_.railpadding.bottom),left:r,width:b.railh.width})}}},this.doRailClick=function(t,e,i){var n,o,r,s;b.railslocked||(b.cancelEvent(t),"pageY"in t||(t.pageX=t.clientX+R.documentElement.scrollLeft,t.pageY=t.clientY+R.documentElement.scrollTop),e?(n=i?b.doScrollLeft:b.doScrollTop,r=i?(t.pageX-b.railh.offset().left-b.cursorwidth/2)*b.scrollratio.x:(t.pageY-b.rail.offset().top-b.cursorheight/2)*b.scrollratio.y,b.unsynched("relativexy"),n(0|r)):(n=i?b.doScrollLeftBy:b.doScrollBy,r=i?b.scroll.x:b.scroll.y,s=i?t.pageX-b.railh.offset().left:t.pageY-b.rail.offset().top,o=i?b.view.w:b.view.h,n(s<=r?o:-o)))},b.newscrolly=b.newscrollx=0,b.hasanimationframe="requestAnimationFrame"in D,b.hascancelanimationframe="cancelAnimationFrame"in D,b.hasborderbox=!1,this.init=function(){if(b.saved.css=[],x.isoperamini)return!0;if(x.isandroid&&!("hidden"in R))return!0;_.emulatetouch=_.emulatetouch||_.touchbehavior,b.hasborderbox=D.getComputedStyle&&"border-box"===D.getComputedStyle(R.body)["box-sizing"];var i={"overflow-y":"hidden"};if((x.isie11||x.isie10)&&(i["-ms-overflow-style"]="none"),b.ishwscroll&&(this.doc.css(x.transitionstyle,x.prefixstyle+"transform 0ms ease-out"),x.transitionend&&b.bind(b.doc,x.transitionend,b.onScrollTransitionEnd,!1)),b.zindex="auto",b.ispage||"auto"!=_.zindex?b.zindex=_.zindex:b.zindex=function(){var t=b.win;if("zIndex"in t)return t.zIndex();for(;0<t.length;){if(9==t[0].nodeType)return!1;var e=t.css("zIndex");if(!isNaN(e)&&0!==e)return parseInt(e);t=t.parent()}return!1}()||"auto",!b.ispage&&"auto"!=b.zindex&&b.zindex>P&&(P=b.zindex),b.isie&&0===b.zindex&&"auto"==_.zindex&&(b.zindex="auto"),!b.ispage||!x.isieold){var t=b.docscroll;b.ispage&&(t=b.haswrapper?b.win:b.doc),b.css(t,i),b.ispage&&(x.isie11||x.isie)&&b.css(L("html"),i),!x.isios||b.ispage||b.haswrapper||b.css(w,{"-webkit-overflow-scrolling":"touch"});var e=L(R.createElement("div"));e.css({position:"relative",top:0,float:"right",width:_.cursorwidth,height:0,"background-color":_.cursorcolor,border:_.cursorborder,"background-clip":"padding-box","-webkit-border-radius":_.cursorborderradius,"-moz-border-radius":_.cursorborderradius,"border-radius":_.cursorborderradius}),e.addClass("nicescroll-cursors"),b.cursor=e;var n=L(R.createElement("div"));n.attr("id",b.id),n.addClass("nicescroll-rails nicescroll-rails-vr");var o,r,s=["left","right","top","bottom"];for(var a in s)r=s[a],(o=_.railpadding[r]||0)&&n.css("padding-"+r,o+"px");n.append(e),n.width=Math.max(parseFloat(_.cursorwidth),e.outerWidth()),n.css({width:n.width+"px",zIndex:b.zindex,background:_.background,cursor:"default"}),n.visibility=!0,n.scrollable=!0,n.align="left"==_.railalign?0:1,b.rail=n;var l,c=b.rail.drag=!1;if(!_.boxzoom||b.ispage||x.isieold||(c=R.createElement("div"),b.bind(c,"click",b.doZoom),b.bind(c,"mouseenter",function(){b.zoom.css("opacity",_.cursoropacitymax)}),b.bind(c,"mouseleave",function(){b.zoom.css("opacity",_.cursoropacitymin)}),b.zoom=L(c),b.zoom.css({cursor:"pointer",zIndex:b.zindex,backgroundImage:"url("+_.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0 0"}),_.dblclickzoom&&b.bind(b.win,"dblclick",b.doZoom),x.cantouch&&_.gesturezoom&&(b.ongesturezoom=function(t){return 1.5<t.scale&&b.doZoomIn(t),t.scale<.8&&b.doZoomOut(t),b.cancelEvent(t)},b.bind(b.win,"gestureend",b.ongesturezoom))),b.railh=!1,_.horizrailenabled&&(b.css(t,{overflowX:"hidden"}),(e=L(R.createElement("div"))).css({position:"absolute",top:0,height:_.cursorwidth,width:0,backgroundColor:_.cursorcolor,border:_.cursorborder,backgroundClip:"padding-box","-webkit-border-radius":_.cursorborderradius,"-moz-border-radius":_.cursorborderradius,"border-radius":_.cursorborderradius}),x.isieold&&e.css("overflow","hidden"),e.addClass("nicescroll-cursors"),b.cursorh=e,(l=L(R.createElement("div"))).attr("id",b.id+"-hr"),l.addClass("nicescroll-rails nicescroll-rails-hr"),l.height=Math.max(parseFloat(_.cursorwidth),e.outerHeight()),l.css({height:l.height+"px",zIndex:b.zindex,background:_.background}),l.append(e),l.visibility=!0,l.scrollable=!0,l.align="top"==_.railvalign?0:1,b.railh=l,b.railh.drag=!1),b.ispage)n.css({position:"fixed",top:0,height:"100%"}),n.css(n.align?{right:0}:{left:0}),b.body.append(n),b.railh&&(l.css({position:"fixed",left:0,width:"100%"}),l.css(l.align?{bottom:0}:{top:0}),b.body.append(l));else{if(b.ishwscroll){"static"==b.win.css("position")&&b.css(b.win,{position:"relative"});var h="HTML"==b.win[0].nodeName?b.body:b.win;L(h).scrollTop(0).scrollLeft(0),b.zoom&&(b.zoom.css({position:"absolute",top:1,right:0,"margin-right":n.width+4}),h.append(b.zoom)),n.css({position:"absolute",top:0}),n.css(n.align?{right:0}:{left:0}),h.append(n),l&&(l.css({position:"absolute",left:0,bottom:0}),l.css(l.align?{bottom:0}:{top:0}),h.append(l))}else{b.isfixed="fixed"==b.win.css("position");var u=b.isfixed?"fixed":"absolute";b.isfixed||(b.viewport=b.getViewport(b.win[0])),b.viewport&&(b.body=b.viewport,/fixed|absolute/.test(b.viewport.css("position"))||b.css(b.viewport,{position:"relative"})),n.css({position:u}),b.zoom&&b.zoom.css({position:u}),b.updateScrollBar(),b.body.append(n),b.zoom&&b.body.append(b.zoom),b.railh&&(l.css({position:u}),b.body.append(l))}x.isios&&b.css(b.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),_.disableoutline&&(x.isie&&b.win.attr("hideFocus","true"),x.iswebkit&&b.win.css("outline","none"))}if(!1===_.autohidemode?(b.autohidedom=!1,b.rail.css({opacity:_.cursoropacitymax}),b.railh&&b.railh.css({opacity:_.cursoropacitymax})):!0===_.autohidemode||"leave"===_.autohidemode?(b.autohidedom=L().add(b.rail),x.isie8&&(b.autohidedom=b.autohidedom.add(b.cursor)),b.railh&&(b.autohidedom=b.autohidedom.add(b.railh)),b.railh&&x.isie8&&(b.autohidedom=b.autohidedom.add(b.cursorh))):"scroll"==_.autohidemode?(b.autohidedom=L().add(b.rail),b.railh&&(b.autohidedom=b.autohidedom.add(b.railh))):"cursor"==_.autohidemode?(b.autohidedom=L().add(b.cursor),b.railh&&(b.autohidedom=b.autohidedom.add(b.cursorh))):"hidden"==_.autohidemode&&(b.autohidedom=!1,b.hide(),b.railslocked=!1),x.cantouch||b.istouchcapable||_.emulatetouch||x.hasmstouch){b.scrollmom=new W(b),b.ontouchstart=function(t){if(b.locked)return!1;if(t.pointerType&&("mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))return!1;if(b.hasmoving=!1,b.scrollmom.timer&&(b.triggerScrollEnd(),b.scrollmom.stop()),!b.railslocked){var e=b.getTarget(t);if(e&&/INPUT/i.test(e.nodeName)&&/range/i.test(e.type))return b.stopPropagation(t);var i="mousedown"===t.type;if(!("clientX"in t)&&"changedTouches"in t&&(t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),b.forcescreen){var n=t;(t={original:t.original?t.original:t}).clientX=n.screenX,t.clientY=n.screenY}if(b.rail.drag={x:t.clientX,y:t.clientY,sx:b.scroll.x,sy:b.scroll.y,st:b.getScrollTop(),sl:b.getScrollLeft(),pt:2,dl:!1,tg:e},b.ispage||!_.directionlockdeadzone)b.rail.drag.dl="f";else{var o=I.width(),r=I.height(),s=b.getContentSize(),a=s.h-r,l=s.w-o;b.rail.scrollable&&!b.railh.scrollable?b.rail.drag.ck=0<a&&"v":!b.rail.scrollable&&b.railh.scrollable?b.rail.drag.ck=0<l&&"h":b.rail.drag.ck=!1}if(_.emulatetouch&&b.isiframe&&x.isie){var c=b.win.position();b.rail.drag.x+=c.left,b.rail.drag.y+=c.top}if(b.hasmoving=!1,b.lastmouseup=!1,b.scrollmom.reset(t.clientX,t.clientY),e&&i){if(!/INPUT|SELECT|BUTTON|TEXTAREA/i.test(e.nodeName))return x.hasmousecapture&&e.setCapture(),_.emulatetouch?(e.onclick&&!e._onclick&&(e._onclick=e.onclick,e.onclick=function(t){if(b.hasmoving)return!1;e._onclick.call(this,t)}),b.cancelEvent(t)):b.stopPropagation(t);/SUBMIT|CANCEL|BUTTON/i.test(L(e).attr("type"))&&(b.preventclick={tg:e,click:!1})}}},b.ontouchend=function(t){if(!b.rail.drag)return!0;if(2==b.rail.drag.pt){if(t.pointerType&&("mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))return!1;b.rail.drag=!1;var e="mouseup"===t.type;if(b.hasmoving&&(b.scrollmom.doMomentum(),b.lastmouseup=!0,b.hideCursor(),x.hasmousecapture&&R.releaseCapture(),e))return b.cancelEvent(t)}else if(1==b.rail.drag.pt)return b.onmouseup(t)};var f=_.emulatetouch&&b.isiframe&&!x.hasmousecapture,m=.3*_.directionlockdeadzone|0;b.ontouchmove=function(t,e){if(!b.rail.drag)return!0;if(t.targetTouches&&_.preventmultitouchscrolling&&1<t.targetTouches.length)return!0;if(t.pointerType&&("mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))return!0;if(2==b.rail.drag.pt){var i,n;if("changedTouches"in t&&(t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n=i=0,f&&!e){var o=b.win.position();n=-o.left,i=-o.top}var r=t.clientY+i,s=r-b.rail.drag.y,a=t.clientX+n,l=a-b.rail.drag.x,c=b.rail.drag.st-s;if(b.ishwscroll&&_.bouncescroll)c<0?c=Math.round(c/2):c>b.page.maxh&&(c=b.page.maxh+Math.round((c-b.page.maxh)/2));else if(c<0?r=c=0:c>b.page.maxh&&(c=b.page.maxh,r=0),0===r&&!b.hasmoving)return b.ispage||(b.rail.drag=!1),!0;var h=b.getScrollLeft();if(b.railh&&b.railh.scrollable&&(h=b.isrtlmode?l-b.rail.drag.sl:b.rail.drag.sl-l,b.ishwscroll&&_.bouncescroll?h<0?h=Math.round(h/2):h>b.page.maxw&&(h=b.page.maxw+Math.round((h-b.page.maxw)/2)):(h<0&&(a=h=0),h>b.page.maxw&&(h=b.page.maxw,a=0))),!b.hasmoving){if(b.rail.drag.y===t.clientY&&b.rail.drag.x===t.clientX)return b.cancelEvent(t);var u=Math.abs(s),d=Math.abs(l),p=_.directionlockdeadzone;if(b.rail.drag.ck?"v"==b.rail.drag.ck?p<d&&u<=m?b.rail.drag=!1:p<u&&(b.rail.drag.dl="v"):"h"==b.rail.drag.ck&&(p<u&&d<=m?b.rail.drag=!1:p<d&&(b.rail.drag.dl="h")):p<u&&p<d?b.rail.drag.dl="f":p<u?b.rail.drag.dl=m<d?"f":"v":p<d&&(b.rail.drag.dl=m<u?"f":"h"),!b.rail.drag.dl)return b.cancelEvent(t);b.triggerScrollStart(t.clientX,t.clientY,0,0,0),b.hasmoving=!0}return b.preventclick&&!b.preventclick.click&&(b.preventclick.click=b.preventclick.tg.onclick||!1,b.preventclick.tg.onclick=b.onpreventclick),b.rail.drag.dl&&("v"==b.rail.drag.dl?h=b.rail.drag.sl:"h"==b.rail.drag.dl&&(c=b.rail.drag.st)),b.synched("touchmove",function(){b.rail.drag&&2==b.rail.drag.pt&&(b.prepareTransition&&b.resetTransition(),b.rail.scrollable&&b.setScrollTop(c),b.scrollmom.update(a,r),b.railh&&b.railh.scrollable?(b.setScrollLeft(h),b.showCursor(c,h)):b.showCursor(c),x.isie10&&R.selection.clear())}),b.cancelEvent(t)}return 1==b.rail.drag.pt?b.onmousemove(t):void 0},b.ontouchstartCursor=function(t,e){if(!b.rail.drag||3==b.rail.drag.pt){if(b.locked)return b.cancelEvent(t);b.cancelScroll(),b.rail.drag={x:t.touches[0].clientX,y:t.touches[0].clientY,sx:b.scroll.x,sy:b.scroll.y,pt:3,hr:!!e};var i=b.getTarget(t);return!b.ispage&&x.hasmousecapture&&i.setCapture(),b.isiframe&&!x.hasmousecapture&&(b.saved.csspointerevents=b.doc.css("pointer-events"),b.css(b.doc,{"pointer-events":"none"})),b.cancelEvent(t)}},b.ontouchendCursor=function(t){if(b.rail.drag){if(x.hasmousecapture&&R.releaseCapture(),b.isiframe&&!x.hasmousecapture&&b.doc.css("pointer-events",b.saved.csspointerevents),3!=b.rail.drag.pt)return;return b.rail.drag=!1,b.cancelEvent(t)}},b.ontouchmoveCursor=function(t){if(b.rail.drag){if(3!=b.rail.drag.pt)return;if(b.cursorfreezed=!0,b.rail.drag.hr){b.scroll.x=b.rail.drag.sx+(t.touches[0].clientX-b.rail.drag.x),b.scroll.x<0&&(b.scroll.x=0);var e=b.scrollvaluemaxw;b.scroll.x>e&&(b.scroll.x=e)}else{b.scroll.y=b.rail.drag.sy+(t.touches[0].clientY-b.rail.drag.y),b.scroll.y<0&&(b.scroll.y=0);var i=b.scrollvaluemax;b.scroll.y>i&&(b.scroll.y=i)}return b.synched("touchmove",function(){b.rail.drag&&3==b.rail.drag.pt&&(b.showCursor(),b.rail.drag.hr?b.doScrollLeft(Math.round(b.scroll.x*b.scrollratio.x),_.cursordragspeed):b.doScrollTop(Math.round(b.scroll.y*b.scrollratio.y),_.cursordragspeed))}),b.cancelEvent(t)}}}if(b.onmousedown=function(t,e){if(!b.rail.drag||1==b.rail.drag.pt){if(b.railslocked)return b.cancelEvent(t);b.cancelScroll(),b.rail.drag={x:t.clientX,y:t.clientY,sx:b.scroll.x,sy:b.scroll.y,pt:1,hr:e||!1};var i=b.getTarget(t);return x.hasmousecapture&&i.setCapture(),b.isiframe&&!x.hasmousecapture&&(b.saved.csspointerevents=b.doc.css("pointer-events"),b.css(b.doc,{"pointer-events":"none"})),b.hasmoving=!1,b.cancelEvent(t)}},b.onmouseup=function(t){if(b.rail.drag)return 1!=b.rail.drag.pt||(x.hasmousecapture&&R.releaseCapture(),b.isiframe&&!x.hasmousecapture&&b.doc.css("pointer-events",b.saved.csspointerevents),b.rail.drag=!1,b.cursorfreezed=!1,b.hasmoving&&b.triggerScrollEnd(),b.cancelEvent(t))},b.onmousemove=function(t){if(b.rail.drag){if(1!==b.rail.drag.pt)return;if(x.ischrome&&0===t.which)return b.onmouseup(t);if(b.cursorfreezed=!0,b.hasmoving||b.triggerScrollStart(t.clientX,t.clientY,0,0,0),b.hasmoving=!0,b.rail.drag.hr){b.scroll.x=b.rail.drag.sx+(t.clientX-b.rail.drag.x),b.scroll.x<0&&(b.scroll.x=0);var e=b.scrollvaluemaxw;b.scroll.x>e&&(b.scroll.x=e)}else{b.scroll.y=b.rail.drag.sy+(t.clientY-b.rail.drag.y),b.scroll.y<0&&(b.scroll.y=0);var i=b.scrollvaluemax;b.scroll.y>i&&(b.scroll.y=i)}return b.synched("mousemove",function(){b.cursorfreezed&&(b.showCursor(),b.rail.drag.hr?b.scrollLeft(Math.round(b.scroll.x*b.scrollratio.x)):b.scrollTop(Math.round(b.scroll.y*b.scrollratio.y)))}),b.cancelEvent(t)}b.checkarea=0},x.cantouch||_.emulatetouch)b.onpreventclick=function(t){if(b.preventclick)return b.preventclick.tg.onclick=b.preventclick.click,b.preventclick=!1,b.cancelEvent(t)},b.onclick=!x.isios&&function(t){return!b.lastmouseup||(b.lastmouseup=!1,b.cancelEvent(t))},_.grabcursorenabled&&x.cursorgrabvalue&&(b.css(b.ispage?b.doc:b.win,{cursor:x.cursorgrabvalue}),b.css(b.rail,{cursor:x.cursorgrabvalue}));else{var d=function(t){if(b.selectiondrag){if(t){var e=b.win.outerHeight(),i=t.pageY-b.selectiondrag.top;0<i&&i<e&&(i=0),e<=i&&(i-=e),b.selectiondrag.df=i}if(0!==b.selectiondrag.df){var n=-2*b.selectiondrag.df/6|0;b.doScrollBy(n),b.debounced("doselectionscroll",function(){d()},50)}}};b.hasTextSelected="getSelection"in R?function(){return 0<R.getSelection().rangeCount}:"selection"in R?function(){return"None"!=R.selection.type}:function(){return!1},b.onselectionstart=function(t){b.ispage||(b.selectiondrag=b.win.offset())},b.onselectionend=function(t){b.selectiondrag=!1},b.onselectiondrag=function(t){b.selectiondrag&&b.hasTextSelected()&&b.debounced("selectionscroll",function(){d(t)},250)}}if(x.hasw3ctouch?(b.css(b.ispage?L("html"):b.win,{"touch-action":"none"}),b.css(b.rail,{"touch-action":"none"}),b.css(b.cursor,{"touch-action":"none"}),b.bind(b.win,"pointerdown",b.ontouchstart),b.bind(R,"pointerup",b.ontouchend),b.delegate(R,"pointermove",b.ontouchmove)):x.hasmstouch?(b.css(b.ispage?L("html"):b.win,{"-ms-touch-action":"none"}),b.css(b.rail,{"-ms-touch-action":"none"}),b.css(b.cursor,{"-ms-touch-action":"none"}),b.bind(b.win,"MSPointerDown",b.ontouchstart),b.bind(R,"MSPointerUp",b.ontouchend),b.delegate(R,"MSPointerMove",b.ontouchmove),b.bind(b.cursor,"MSGestureHold",function(t){t.preventDefault()}),b.bind(b.cursor,"contextmenu",function(t){t.preventDefault()})):x.cantouch&&(b.bind(b.win,"touchstart",b.ontouchstart,!1,!0),b.bind(R,"touchend",b.ontouchend,!1,!0),b.bind(R,"touchcancel",b.ontouchend,!1,!0),b.delegate(R,"touchmove",b.ontouchmove,!1,!0)),_.emulatetouch&&(b.bind(b.win,"mousedown",b.ontouchstart,!1,!0),b.bind(R,"mouseup",b.ontouchend,!1,!0),b.bind(R,"mousemove",b.ontouchmove,!1,!0)),(_.cursordragontouch||!x.cantouch&&!_.emulatetouch)&&(b.rail.css({cursor:"default"}),b.railh&&b.railh.css({cursor:"default"}),b.jqbind(b.rail,"mouseenter",function(){if(!b.ispage&&!b.win.is(":visible"))return!1;b.canshowonmouseevent&&b.showCursor(),b.rail.active=!0}),b.jqbind(b.rail,"mouseleave",function(){b.rail.active=!1,b.rail.drag||b.hideCursor()}),_.sensitiverail&&(b.bind(b.rail,"click",function(t){b.doRailClick(t,!1,!1)}),b.bind(b.rail,"dblclick",function(t){b.doRailClick(t,!0,!1)}),b.bind(b.cursor,"click",function(t){b.cancelEvent(t)}),b.bind(b.cursor,"dblclick",function(t){b.cancelEvent(t)})),b.railh&&(b.jqbind(b.railh,"mouseenter",function(){if(!b.ispage&&!b.win.is(":visible"))return!1;b.canshowonmouseevent&&b.showCursor(),b.rail.active=!0}),b.jqbind(b.railh,"mouseleave",function(){b.rail.active=!1,b.rail.drag||b.hideCursor()}),_.sensitiverail&&(b.bind(b.railh,"click",function(t){b.doRailClick(t,!1,!0)}),b.bind(b.railh,"dblclick",function(t){b.doRailClick(t,!0,!0)}),b.bind(b.cursorh,"click",function(t){b.cancelEvent(t)}),b.bind(b.cursorh,"dblclick",function(t){b.cancelEvent(t)})))),_.cursordragontouch&&(this.istouchcapable||x.cantouch)&&(b.bind(b.cursor,"touchstart",b.ontouchstartCursor),b.bind(b.cursor,"touchmove",b.ontouchmoveCursor),b.bind(b.cursor,"touchend",b.ontouchendCursor),b.cursorh&&b.bind(b.cursorh,"touchstart",function(t){b.ontouchstartCursor(t,!0)}),b.cursorh&&b.bind(b.cursorh,"touchmove",b.ontouchmoveCursor),b.cursorh&&b.bind(b.cursorh,"touchend",b.ontouchendCursor)),_.emulatetouch||x.isandroid||x.isios?(b.bind(x.hasmousecapture?b.win:R,"mouseup",b.ontouchend),b.onclick&&b.bind(R,"click",b.onclick),_.cursordragontouch?(b.bind(b.cursor,"mousedown",b.onmousedown),b.bind(b.cursor,"mouseup",b.onmouseup),b.cursorh&&b.bind(b.cursorh,"mousedown",function(t){b.onmousedown(t,!0)}),b.cursorh&&b.bind(b.cursorh,"mouseup",b.onmouseup)):(b.bind(b.rail,"mousedown",function(t){t.preventDefault()}),b.railh&&b.bind(b.railh,"mousedown",function(t){t.preventDefault()}))):(b.bind(x.hasmousecapture?b.win:R,"mouseup",b.onmouseup),b.bind(R,"mousemove",b.onmousemove),b.onclick&&b.bind(R,"click",b.onclick),b.bind(b.cursor,"mousedown",b.onmousedown),b.bind(b.cursor,"mouseup",b.onmouseup),b.railh&&(b.bind(b.cursorh,"mousedown",function(t){b.onmousedown(t,!0)}),b.bind(b.cursorh,"mouseup",b.onmouseup)),!b.ispage&&_.enablescrollonselection&&(b.bind(b.win[0],"mousedown",b.onselectionstart),b.bind(R,"mouseup",b.onselectionend),b.bind(b.cursor,"mouseup",b.onselectionend),b.cursorh&&b.bind(b.cursorh,"mouseup",b.onselectionend),b.bind(R,"mousemove",b.onselectiondrag)),b.zoom&&(b.jqbind(b.zoom,"mouseenter",function(){b.canshowonmouseevent&&b.showCursor(),b.rail.active=!0}),b.jqbind(b.zoom,"mouseleave",function(){b.rail.active=!1,b.rail.drag||b.hideCursor()}))),_.enablemousewheel&&(b.isiframe||b.mousewheel(x.isie&&b.ispage?R:b.win,b.onmousewheel),b.mousewheel(b.rail,b.onmousewheel),b.railh&&b.mousewheel(b.railh,b.onmousewheelhr)),b.ispage||x.cantouch||/HTML|^BODY/.test(b.win[0].nodeName)||(b.win.attr("tabindex")||b.win.attr({tabindex:++A}),b.bind(b.win,"focus",function(t){E=b.getTarget(t).id||b.getTarget(t)||!1,b.hasfocus=!0,b.canshowonmouseevent&&b.noticeCursor()}),b.bind(b.win,"blur",function(t){E=!1,b.hasfocus=!1}),b.bind(b.win,"mouseenter",function(t){C=b.getTarget(t).id||b.getTarget(t)||!1,b.hasmousefocus=!0,b.canshowonmouseevent&&b.noticeCursor()}),b.bind(b.win,"mouseleave",function(t){C=!1,b.hasmousefocus=!1,b.rail.drag||b.hideCursor()})),b.onkeypress=function(t){if(b.railslocked&&0===b.page.maxh)return!0;t=t||D.event;var e=b.getTarget(t);if(e&&/INPUT|TEXTAREA|SELECT|OPTION/.test(e.nodeName)&&(!e.getAttribute("type")&&!e.type||!/submit|button|cancel/i.tp))return!0;if(L(e).attr("contenteditable"))return!0;if(b.hasfocus||b.hasmousefocus&&!E||b.ispage&&!E&&!C){var i=t.keyCode;if(b.railslocked&&27!=i)return b.cancelEvent(t);var n=t.ctrlKey||!1,o=t.shiftKey||!1,r=!1;switch(i){case 38:case 63233:b.doScrollBy(72),r=!0;break;case 40:case 63235:b.doScrollBy(-72),r=!0;break;case 37:case 63232:b.railh&&(n?b.doScrollLeft(0):b.doScrollLeftBy(72),r=!0);break;case 39:case 63234:b.railh&&(n?b.doScrollLeft(b.page.maxw):b.doScrollLeftBy(-72),r=!0);break;case 33:case 63276:b.doScrollBy(b.view.h),r=!0;break;case 34:case 63277:b.doScrollBy(-b.view.h),r=!0;break;case 36:case 63273:b.railh&&n?b.doScrollPos(0,0):b.doScrollTo(0),r=!0;break;case 35:case 63275:b.railh&&n?b.doScrollPos(b.page.maxw,b.page.maxh):b.doScrollTo(b.page.maxh),r=!0;break;case 32:_.spacebarenabled&&(o?b.doScrollBy(b.view.h):b.doScrollBy(-b.view.h),r=!0);break;case 27:b.zoomactive&&(b.doZoom(),r=!0)}if(r)return b.cancelEvent(t)}},_.enablekeyboard&&b.bind(R,x.isopera&&!x.isopera12?"keypress":"keydown",b.onkeypress),b.bind(R,"keydown",function(t){t.ctrlKey&&(b.wheelprevented=!0)}),b.bind(R,"keyup",function(t){t.ctrlKey||(b.wheelprevented=!1)}),b.bind(D,"blur",function(t){b.wheelprevented=!1}),b.bind(D,"resize",b.onscreenresize),b.bind(D,"orientationchange",b.onscreenresize),b.bind(D,"load",b.lazyResize),x.ischrome&&!b.ispage&&!b.haswrapper){var p=b.win.attr("style"),g=parseFloat(b.win.css("width"))+1;b.win.css("width",g),b.synched("chromefix",function(){b.win.attr("style",p)})}if(b.onAttributeChange=function(t){b.lazyResize(b.isieold?250:30)},_.enableobserver&&(b.isie11||!1===H||(b.observerbody=new H(function(t){if(t.forEach(function(t){if("attributes"==t.type)return w.hasClass("modal-open")&&w.hasClass("modal-dialog")&&!L.contains(L(".modal-dialog")[0],b.doc[0])?b.hide():b.show()}),b.me.clientWidth!=b.page.width||b.me.clientHeight!=b.page.height)return b.lazyResize(30)}),b.observerbody.observe(R.body,{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["class"]})),!b.ispage&&!b.haswrapper)){var v=b.win[0];!1!==H?(b.observer=new H(function(t){t.forEach(b.onAttributeChange)}),b.observer.observe(v,{childList:!0,characterData:!1,attributes:!0,subtree:!1}),b.observerremover=new H(function(t){t.forEach(function(t){if(0<t.removedNodes.length)for(var e in t.removedNodes)if(b&&t.removedNodes[e]===v)return b.remove()})}),b.observerremover.observe(v.parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(b.bind(v,x.isie&&!x.isie9?"propertychange":"DOMAttrModified",b.onAttributeChange),x.isie9&&v.attachEvent("onpropertychange",b.onAttributeChange),b.bind(v,"DOMNodeRemoved",function(t){t.target===v&&b.remove()}))}!b.ispage&&_.boxzoom&&b.bind(D,"resize",b.resizeZoom),b.istextarea&&(b.bind(b.win,"keydown",b.lazyResize),b.bind(b.win,"mouseup",b.lazyResize)),b.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){var y=function(){var e;b.iframexd=!1;try{(e="contentDocument"in this?this.contentDocument:this.contentWindow._doc).domain}catch(t){e=!(b.iframexd=!0)}if(b.iframexd)return"console"in D&&console.log("NiceScroll error: policy restriced iframe"),!0;if(b.forcescreen=!0,b.isiframe&&(b.iframe={doc:L(e),html:b.doc.contents().find("html")[0],body:b.doc.contents().find("body")[0]},b.getContentSize=function(){return{w:Math.max(b.iframe.html.scrollWidth,b.iframe.body.scrollWidth),h:Math.max(b.iframe.html.scrollHeight,b.iframe.body.scrollHeight)}},b.docscroll=L(b.iframe.body)),!x.isios&&_.iframeautoresize&&!b.isiframe){b.win.scrollTop(0),b.doc.height("");var t=Math.max(e.getElementsByTagName("html")[0].scrollHeight,e.body.scrollHeight);b.doc.height(t)}b.lazyResize(30),b.css(L(b.iframe.body),i),x.isios&&b.haswrapper&&b.css(L(e.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?b.bind(this.contentWindow,"scroll",b.onscroll):b.bind(e,"scroll",b.onscroll),_.enablemousewheel&&b.mousewheel(e,b.onmousewheel),_.enablekeyboard&&b.bind(e,x.isopera?"keypress":"keydown",b.onkeypress),x.cantouch?(b.bind(e,"touchstart",b.ontouchstart),b.bind(e,"touchmove",b.ontouchmove)):_.emulatetouch&&(b.bind(e,"mousedown",b.ontouchstart),b.bind(e,"mousemove",function(t){return b.ontouchmove(t,!0)}),_.grabcursorenabled&&x.cursorgrabvalue&&b.css(L(e.body),{cursor:x.cursorgrabvalue})),b.bind(e,"mouseup",b.ontouchend),b.zoom&&(_.dblclickzoom&&b.bind(e,"dblclick",b.doZoom),b.ongesturezoom&&b.bind(e,"gestureend",b.ongesturezoom))};this.doc[0].readyState&&"complete"===this.doc[0].readyState&&setTimeout(function(){y.call(b.doc[0],!1)},500),b.bind(this.doc,"load",y)}},this.showCursor=function(t,e){if(b.cursortimeout&&(clearTimeout(b.cursortimeout),b.cursortimeout=0),b.rail){if(b.autohidedom&&(b.autohidedom.stop().css({opacity:_.cursoropacitymax}),b.cursoractive=!0),b.rail.drag&&1==b.rail.drag.pt||(void 0!==t&&!1!==t&&(b.scroll.y=t/b.scrollratio.y|0),void 0!==e&&(b.scroll.x=e/b.scrollratio.x|0)),b.cursor.css({height:b.cursorheight,top:b.scroll.y}),b.cursorh){var i=b.hasreversehr?b.scrollvaluemaxw-b.scroll.x:b.scroll.x;b.cursorh.css({width:b.cursorwidth,left:!b.rail.align&&b.rail.visibility?i+b.rail.width:i}),b.cursoractive=!0}b.zoom&&b.zoom.stop().css({opacity:_.cursoropacitymax})}},this.hideCursor=function(t){b.cursortimeout||b.rail&&b.autohidedom&&(b.hasmousefocus&&"leave"===_.autohidemode||(b.cursortimeout=setTimeout(function(){b.rail.active&&b.showonmouseevent||(b.autohidedom.stop().animate({opacity:_.cursoropacitymin}),b.zoom&&b.zoom.stop().animate({opacity:_.cursoropacitymin}),b.cursoractive=!1),b.cursortimeout=0},t||_.hidecursordelay)))},this.noticeCursor=function(t,e,i){b.showCursor(e,i),b.rail.active||b.hideCursor(t)},this.getContentSize=b.ispage?function(){return{w:Math.max(R.body.scrollWidth,R.documentElement.scrollWidth),h:Math.max(R.body.scrollHeight,R.documentElement.scrollHeight)}}:b.haswrapper?function(){return{w:b.doc[0].offsetWidth,h:b.doc[0].offsetHeight}}:function(){return{w:b.docscroll[0].scrollWidth,h:b.docscroll[0].scrollHeight}},this.onResize=function(t,e){if(!b||!b.win)return!1;var i=b.page.maxh,n=b.page.maxw,o=b.view.h,r=b.view.w;if(b.view={w:b.ispage?b.win.width():b.win[0].clientWidth,h:b.ispage?b.win.height():b.win[0].clientHeight},b.page=e||b.getContentSize(),b.page.maxh=Math.max(0,b.page.h-b.view.h),b.page.maxw=Math.max(0,b.page.w-b.view.w),b.page.maxh==i&&b.page.maxw==n&&b.view.w==r&&b.view.h==o){if(b.ispage)return b;var s=b.win.offset();if(b.lastposition){var a=b.lastposition;if(a.top==s.top&&a.left==s.left)return b}b.lastposition=s}return 0===b.page.maxh?(b.hideRail(),b.scrollvaluemax=0,b.scroll.y=0,b.scrollratio.y=0,b.cursorheight=0,b.setScrollTop(0),b.rail&&(b.rail.scrollable=!1)):(b.page.maxh-=_.railpadding.top+_.railpadding.bottom,b.rail.scrollable=!0),0===b.page.maxw?(b.hideRailHr(),b.scrollvaluemaxw=0,b.scroll.x=0,b.scrollratio.x=0,b.cursorwidth=0,b.setScrollLeft(0),b.railh&&(b.railh.scrollable=!1)):(b.page.maxw-=_.railpadding.left+_.railpadding.right,b.railh&&(b.railh.scrollable=_.horizrailenabled)),b.railslocked=b.locked||0===b.page.maxh&&0===b.page.maxw,b.railslocked?(b.ispage||b.updateScrollBar(b.view),!1):(b.hidden||(b.rail.visibility||b.showRail(),b.railh&&!b.railh.visibility&&b.showRailHr()),b.istextarea&&b.win.css("resize")&&"none"!=b.win.css("resize")&&(b.view.h-=20),b.cursorheight=Math.min(b.view.h,Math.round(b.view.h*(b.view.h/b.page.h))),b.cursorheight=_.cursorfixedheight?_.cursorfixedheight:Math.max(_.cursorminheight,b.cursorheight),b.cursorwidth=Math.min(b.view.w,Math.round(b.view.w*(b.view.w/b.page.w))),b.cursorwidth=_.cursorfixedheight?_.cursorfixedheight:Math.max(_.cursorminheight,b.cursorwidth),b.scrollvaluemax=b.view.h-b.cursorheight-(_.railpadding.top+_.railpadding.bottom),b.hasborderbox||(b.scrollvaluemax-=b.cursor[0].offsetHeight-b.cursor[0].clientHeight),b.railh&&(b.railh.width=0<b.page.maxh?b.view.w-b.rail.width:b.view.w,b.scrollvaluemaxw=b.railh.width-b.cursorwidth-(_.railpadding.left+_.railpadding.right)),b.ispage||b.updateScrollBar(b.view),b.scrollratio={x:b.page.maxw/b.scrollvaluemaxw,y:b.page.maxh/b.scrollvaluemax},b.getScrollTop()>b.page.maxh?b.doScrollTop(b.page.maxh):(b.scroll.y=b.getScrollTop()/b.scrollratio.y|0,b.scroll.x=b.getScrollLeft()/b.scrollratio.x|0,b.cursoractive&&b.noticeCursor()),b.scroll.y&&0===b.getScrollTop()&&b.doScrollTo(b.scroll.y*b.scrollratio.y|0),b)},this.resize=b.onResize;var p=0;this.onscreenresize=function(t){clearTimeout(p);var e=!b.ispage&&!b.haswrapper;e&&b.hideRails(),p=setTimeout(function(){b&&(e&&b.showRails(),b.resize()),p=0},120)},this.lazyResize=function(t){return clearTimeout(p),t=isNaN(t)?240:t,p=setTimeout(function(){b&&b.resize(),p=0},t),b},this.jqbind=function(t,e,i){b.events.push({e:t,n:e,f:i,q:!0}),L(t).on(e,i)};var f=!(this.mousewheel=function(t,e,i){var n="jquery"in t?t[0]:t;if("onwheel"in R.createElement("div"))b._bind(n,"wheel",e,i||!1);else{var o=void 0!==R.onmousewheel?"mousewheel":"DOMMouseScroll";r(n,o,e,i||!1),"DOMMouseScroll"==o&&r(n,"MozMousePixelScroll",e,i||!1)}});if(x.haseventlistener){try{var m=Object.defineProperty({},"passive",{get:function(){f=!0}});D.addEventListener("test",null,m)}catch(t){}this.stopPropagation=function(t){return!!t&&((t=t.original?t.original:t).stopPropagation(),!1)},this.cancelEvent=function(t){return t.cancelable&&t.preventDefault(),t.stopImmediatePropagation(),t.preventManipulation&&t.preventManipulation(),!1}}else Event.prototype.preventDefault=function(){this.returnValue=!1},Event.prototype.stopPropagation=function(){this.cancelBubble=!0},D.constructor.prototype.addEventListener=R.constructor.prototype.addEventListener=Element.prototype.addEventListener=function(t,e,i){this.attachEvent("on"+t,e)},D.constructor.prototype.removeEventListener=R.constructor.prototype.removeEventListener=Element.prototype.removeEventListener=function(t,e,i){this.detachEvent("on"+t,e)},this.cancelEvent=function(t){return(t=t||D.event)&&(t.cancelBubble=!0,t.cancel=!0,t.returnValue=!1),!1},this.stopPropagation=function(t){return(t=t||D.event)&&(t.cancelBubble=!0),!1};this.delegate=function(t,e,i,n,o){var r=O[e]||!1;r||(r={a:[],l:[],f:function(t){for(var e=r.l,i=!1,n=e.length-1;0<=n;n--)if(!1===(i=e[n].call(t.target,t)))return!1;return i}},b.bind(t,e,r.f,n,o),O[e]=r),b.ispage?(r.a=[b.id].concat(r.a),r.l=[i].concat(r.l)):(r.a.push(b.id),r.l.push(i))},this.undelegate=function(t,e,i,n,o){var r=O[e]||!1;if(r&&r.l)for(var s=0,a=r.l.length;s<a;s++)r.a[s]===b.id&&(r.a.splice(s),r.l.splice(s),0===r.a.length&&(b._unbind(t,e,r.l.f),O[e]=null))},this.bind=function(t,e,i,n,o){var r="jquery"in t?t[0]:t;b._bind(r,e,i,n||!1,o||!1)},this._bind=function(t,e,i,n,o){b.events.push({e:t,n:e,f:i,b:n,q:!1}),f&&o?t.addEventListener(e,i,{passive:!1,capture:n}):t.addEventListener(e,i,n||!1)},this._unbind=function(t,e,i,n){O[e]?b.undelegate(t,e,i,n):t.removeEventListener(e,i,n)},this.unbindAll=function(){for(var t=0;t<b.events.length;t++){var e=b.events[t];e.q?e.e.unbind(e.n,e.f):b._unbind(e.e,e.n,e.f,e.b)}},this.showRails=function(){return b.showRail().showRailHr()},this.showRail=function(){return 0===b.page.maxh||!b.ispage&&"none"==b.win.css("display")||(b.rail.visibility=!0,b.rail.css("display","block")),b},this.showRailHr=function(){return b.railh&&(0===b.page.maxw||!b.ispage&&"none"==b.win.css("display")||(b.railh.visibility=!0,b.railh.css("display","block"))),b},this.hideRails=function(){return b.hideRail().hideRailHr()},this.hideRail=function(){return b.rail.visibility=!1,b.rail.css("display","none"),b},this.hideRailHr=function(){return b.railh&&(b.railh.visibility=!1,b.railh.css("display","none")),b},this.show=function(){return b.hidden=!1,b.railslocked=!1,b.showRails()},this.hide=function(){return b.hidden=!0,b.railslocked=!0,b.hideRails()},this.toggle=function(){return b.hidden?b.show():b.hide()},this.remove=function(){for(var t in b.stop(),b.cursortimeout&&clearTimeout(b.cursortimeout),b.delaylist)b.delaylist[t]&&z(b.delaylist[t].h);b.doZoomOut(),b.unbindAll(),x.isie9&&b.win[0].detachEvent("onpropertychange",b.onAttributeChange),!1!==b.observer&&b.observer.disconnect(),!1!==b.observerremover&&b.observerremover.disconnect(),!1!==b.observerbody&&b.observerbody.disconnect(),b.events=null,b.cursor&&b.cursor.remove(),b.cursorh&&b.cursorh.remove(),b.rail&&b.rail.remove(),b.railh&&b.railh.remove(),b.zoom&&b.zoom.remove();for(var e=0;e<b.saved.css.length;e++){var i=b.saved.css[e];i[0].css(i[1],void 0===i[2]?"":i[2])}b.saved=!1,b.me.data("__nicescroll","");var n=L.nicescroll;for(var o in n.each(function(t){if(this&&this.id===b.id){delete n[t];for(var e=++t;e<n.length;e++,t++)n[t]=n[e];--n.length&&delete n[n.length]}}),b)b[o]=null,delete b[o];b=null},this.scrollstart=function(t){return this.onscrollstart=t,b},this.scrollend=function(t){return this.onscrollend=t,b},this.scrollcancel=function(t){return this.onscrollcancel=t,b},this.zoomin=function(t){return this.onzoomin=t,b},this.zoomout=function(t){return this.onzoomout=t,b},this.isScrollable=function(t){var e=t.target?t.target:t;if("OPTION"==e.nodeName)return!0;for(;e&&1==e.nodeType&&e!==this.me[0]&&!/^BODY|HTML/.test(e.nodeName);){var i=L(e),n=i.css("overflowY")||i.css("overflowX")||i.css("overflow")||"";if(/scroll|auto/.test(n))return e.clientHeight!=e.scrollHeight;e=!!e.parentNode&&e.parentNode}return!1},this.getViewport=function(t){for(var e=!(!t||!t.parentNode)&&t.parentNode;e&&1==e.nodeType&&!/^BODY|HTML/.test(e.nodeName);){var i=L(e);if(/fixed|absolute/.test(i.css("position")))return i;var n=i.css("overflowY")||i.css("overflowX")||i.css("overflow")||"";if(/scroll|auto/.test(n)&&e.clientHeight!=e.scrollHeight)return i;if(0<i.getNiceScroll().length)return i;e=!!e.parentNode&&e.parentNode}return!1},this.triggerScrollStart=function(t,e,i,n,o){if(b.onscrollstart){var r={type:"scrollstart",current:{x:t,y:e},request:{x:i,y:n},end:{x:b.newscrollx,y:b.newscrolly},speed:o};b.onscrollstart.call(b,r)}},this.triggerScrollEnd=function(){if(b.onscrollend){var t=b.getScrollLeft(),e=b.getScrollTop(),i={type:"scrollend",current:{x:t,y:e},end:{x:t,y:e}};b.onscrollend.call(b,i)}};var g=0,v=0,y=0,S=1,T=!1;if(this.onmousewheel=function(t){if(b.wheelprevented||b.locked)return!1;if(b.railslocked)return b.debounced("checkunlock",b.resize,250),!1;if(b.rail.drag)return b.cancelEvent(t);if("auto"===_.oneaxismousemode&&0!==t.deltaX&&(_.oneaxismousemode=!1),_.oneaxismousemode&&0===t.deltaX&&!b.rail.scrollable)return!b.railh||!b.railh.scrollable||b.onmousewheelhr(t);var e=B(),i=!1;if(_.preservenativescrolling&&b.checkarea+600<e&&(b.nativescrollingarea=b.isScrollable(t),i=!0),b.checkarea=e,b.nativescrollingarea)return!0;var n=o(t,!1,i);return n&&(b.checkarea=0),n},this.onmousewheelhr=function(t){if(!b.wheelprevented){if(b.railslocked||!b.railh.scrollable)return!0;if(b.rail.drag)return b.cancelEvent(t);var e=B(),i=!1;return _.preservenativescrolling&&b.checkarea+600<e&&(b.nativescrollingarea=b.isScrollable(t),i=!0),b.checkarea=e,!!b.nativescrollingarea||(b.railslocked?b.cancelEvent(t):o(t,!0,i))}},this.stop=function(){return b.cancelScroll(),b.scrollmon&&b.scrollmon.stop(),b.cursorfreezed=!1,b.scroll.y=Math.round(b.getScrollTop()*(1/b.scrollratio.y)),b.noticeCursor(),b},this.getTransitionSpeed=function(t){return 80+t/72*_.scrollspeed|0},_.smoothscroll)if(b.ishwscroll&&x.hastransition&&_.usetransition&&_.smoothscroll){var M="";this.resetTransition=function(){M="",b.doc.css(x.prefixstyle+"transition-duration","0ms")},this.prepareTransition=function(t,e){var i=e?t:b.getTransitionSpeed(t),n=i+"ms";return M!==n&&(M=n,b.doc.css(x.prefixstyle+"transition-duration",n)),i},this.doScrollLeft=function(t,e){var i=b.scrollrunning?b.newscrolly:b.getScrollTop();b.doScrollPos(t,i,e)},this.doScrollTop=function(t,e){var i=b.scrollrunning?b.newscrollx:b.getScrollLeft();b.doScrollPos(i,t,e)},this.cursorupdate={running:!1,start:function(){var t=this;if(!t.running){t.running=!0;var e=function(){t.running&&N(e),b.showCursor(b.getScrollTop(),b.getScrollLeft()),b.notifyScrollEvent(b.win[0])};N(e)}},stop:function(){this.running=!1}},this.doScrollPos=function(t,e,i){var n=b.getScrollTop(),o=b.getScrollLeft();if(((b.newscrolly-n)*(e-n)<0||(b.newscrollx-o)*(t-o)<0)&&b.cancelScroll(),_.bouncescroll?(e<0?e=e/2|0:e>b.page.maxh&&(e=b.page.maxh+(e-b.page.maxh)/2|0),t<0?t=t/2|0:t>b.page.maxw&&(t=b.page.maxw+(t-b.page.maxw)/2|0)):(e<0?e=0:e>b.page.maxh&&(e=b.page.maxh),t<0?t=0:t>b.page.maxw&&(t=b.page.maxw)),b.scrollrunning&&t==b.newscrollx&&e==b.newscrolly)return!1;b.newscrolly=e,b.newscrollx=t;var r=b.getScrollTop(),s=b.getScrollLeft(),a={};a.x=t-s,a.y=e-r;var l=0|Math.sqrt(a.x*a.x+a.y*a.y),c=b.prepareTransition(l);b.scrollrunning||(b.scrollrunning=!0,b.triggerScrollStart(s,r,t,e,c),b.cursorupdate.start()),b.scrollendtrapped=!0,x.transitionend||(b.scrollendtrapped&&clearTimeout(b.scrollendtrapped),b.scrollendtrapped=setTimeout(b.onScrollTransitionEnd,c)),b.setScrollTop(b.newscrolly),b.setScrollLeft(b.newscrollx)},this.cancelScroll=function(){if(!b.scrollendtrapped)return!0;var t=b.getScrollTop(),e=b.getScrollLeft();return b.scrollrunning=!1,x.transitionend||clearTimeout(x.transitionend),b.scrollendtrapped=!1,b.resetTransition(),b.setScrollTop(t),b.railh&&b.setScrollLeft(e),b.timerscroll&&b.timerscroll.tm&&clearInterval(b.timerscroll.tm),b.timerscroll=!1,b.cursorfreezed=!1,b.cursorupdate.stop(),b.showCursor(t,e),b},this.onScrollTransitionEnd=function(){if(b.scrollendtrapped){var t=b.getScrollTop(),e=b.getScrollLeft();if(t<0?t=0:t>b.page.maxh&&(t=b.page.maxh),e<0?e=0:e>b.page.maxw&&(e=b.page.maxw),t!=b.newscrolly||e!=b.newscrollx)return b.doScrollPos(e,t,_.snapbackspeed);b.scrollrunning&&b.triggerScrollEnd(),b.scrollrunning=!1,b.scrollendtrapped=!1,b.resetTransition(),b.timerscroll=!1,b.setScrollTop(t),b.railh&&b.setScrollLeft(e),b.cursorupdate.stop(),b.noticeCursor(!1,t,e),b.cursorfreezed=!1}}}else this.doScrollLeft=function(t,e){var i=b.scrollrunning?b.newscrolly:b.getScrollTop();b.doScrollPos(t,i,e)},this.doScrollTop=function(t,e){var i=b.scrollrunning?b.newscrollx:b.getScrollLeft();b.doScrollPos(i,t,e)},this.doScrollPos=function(t,e,i){var n=b.getScrollTop(),o=b.getScrollLeft();((b.newscrolly-n)*(e-n)<0||(b.newscrollx-o)*(t-o)<0)&&b.cancelScroll();var r=!1;if(b.bouncescroll&&b.rail.visibility||(e<0?r=!(e=0):e>b.page.maxh&&(e=b.page.maxh,r=!0)),b.bouncescroll&&b.railh.visibility||(t<0?r=!(t=0):t>b.page.maxw&&(t=b.page.maxw,r=!0)),b.scrollrunning&&b.newscrolly===e&&b.newscrollx===t)return!0;b.newscrolly=e,b.newscrollx=t,b.dst={},b.dst.x=t-o,b.dst.y=e-n,b.dst.px=o,b.dst.py=n;var s=0|Math.sqrt(b.dst.x*b.dst.x+b.dst.y*b.dst.y),a=b.getTransitionSpeed(s);b.bzscroll={};var l=r?1:.58;b.bzscroll.x=new h(o,b.newscrollx,a,0,0,l,1),b.bzscroll.y=new h(n,b.newscrolly,a,0,0,l,1),B();var c=function(){if(b.scrollrunning){var t=b.bzscroll.y.getPos();b.setScrollLeft(b.bzscroll.x.getNow()),b.setScrollTop(b.bzscroll.y.getNow()),t<=1?b.timer=N(c):(b.scrollrunning=!1,b.timer=0,b.triggerScrollEnd())}};b.scrollrunning||(b.triggerScrollStart(o,n,t,e,a),b.scrollrunning=!0,b.timer=N(c))},this.cancelScroll=function(){return b.timer&&z(b.timer),b.timer=0,b.bzscroll=!1,b.scrollrunning=!1,b};else this.doScrollLeft=function(t,e){var i=b.getScrollTop();b.doScrollPos(t,i,e)},this.doScrollTop=function(t,e){var i=b.getScrollLeft();b.doScrollPos(i,t,e)},this.doScrollPos=function(t,e,i){var n=t>b.page.maxw?b.page.maxw:t;n<0&&(n=0);var o=e>b.page.maxh?b.page.maxh:e;o<0&&(o=0),b.synched("scroll",function(){b.setScrollTop(o),b.setScrollLeft(n)})},this.cancelScroll=function(){};this.doScrollBy=function(t,e){a(0,t)},this.doScrollLeftBy=function(t,e){a(t,0)},this.doScrollTo=function(t,e){var i=e?Math.round(t*b.scrollratio.y):t;i<0?i=0:i>b.page.maxh&&(i=b.page.maxh),b.cursorfreezed=!1,b.doScrollTop(t)},this.checkContentSize=function(){var t=b.getContentSize();t.h==b.page.h&&t.w==b.page.w||b.resize(!1,t)},b.onscroll=function(t){b.rail.drag||b.cursorfreezed||b.synched("scroll",function(){b.scroll.y=Math.round(b.getScrollTop()/b.scrollratio.y),b.railh&&(b.scroll.x=Math.round(b.getScrollLeft()/b.scrollratio.x)),b.noticeCursor()})},b.bind(b.docscroll,"scroll",b.onscroll),this.doZoomIn=function(t){if(!b.zoomactive){b.zoomactive=!0,b.zoomrestore={style:{}};var e=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],i=b.win[0].style;for(var n in e){var o=e[n];b.zoomrestore.style[o]=void 0!==i[o]?i[o]:""}b.zoomrestore.style.width=b.win.css("width"),b.zoomrestore.style.height=b.win.css("height"),b.zoomrestore.padding={w:b.win.outerWidth()-b.win.width(),h:b.win.outerHeight()-b.win.height()},x.isios4&&(b.zoomrestore.scrollTop=I.scrollTop(),I.scrollTop(0)),b.win.css({position:x.isios4?"absolute":"fixed",top:0,left:0,zIndex:P+100,margin:0});var r=b.win.css("backgroundColor");return(""===r||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(r))&&b.win.css("backgroundColor","#fff"),b.rail.css({zIndex:P+101}),b.zoom.css({zIndex:P+102}),b.zoom.css("backgroundPosition","0 -18px"),b.resizeZoom(),b.onzoomin&&b.onzoomin.call(b),b.cancelEvent(t)}},this.doZoomOut=function(t){if(b.zoomactive)return b.zoomactive=!1,b.win.css("margin",""),b.win.css(b.zoomrestore.style),x.isios4&&I.scrollTop(b.zoomrestore.scrollTop),b.rail.css({"z-index":b.zindex}),b.zoom.css({"z-index":b.zindex}),b.zoomrestore=!1,b.zoom.css("backgroundPosition","0 0"),b.onResize(),b.onzoomout&&b.onzoomout.call(b),b.cancelEvent(t)},this.doZoom=function(t){return b.zoomactive?b.doZoomOut(t):b.doZoomIn(t)},this.resizeZoom=function(){if(b.zoomactive){var t=b.getScrollTop();b.win.css({width:I.width()-b.zoomrestore.padding.w+"px",height:I.height()-b.zoomrestore.padding.h+"px"}),b.onResize(),b.setScrollTop(Math.min(b.page.maxh,t))}},this.init(),L.nicescroll.push(this)},W=function(t){var m=this;this.nc=t,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.reset=function(t,e){m.stop(),m.steptime=0,m.lasttime=B(),m.speedx=0,m.speedy=0,m.lastx=t,m.lasty=e,m.lastscrollx=-1,m.lastscrolly=-1},this.update=function(t,e){var i=B();m.steptime=i-m.lasttime,m.lasttime=i;var n=e-m.lasty,o=t-m.lastx,r=m.nc.getScrollTop()+n,s=m.nc.getScrollLeft()+o;m.snapx=s<0||s>m.nc.page.maxw,m.snapy=r<0||r>m.nc.page.maxh,m.speedx=o,m.speedy=n,m.lastx=t,m.lasty=e},this.stop=function(){m.nc.unsynched("domomentum2d"),m.timer&&clearTimeout(m.timer),m.timer=0,m.lastscrollx=-1,m.lastscrolly=-1},this.doSnapy=function(t,e){var i=!1;e<0?i=!(e=0):e>m.nc.page.maxh&&(e=m.nc.page.maxh,i=!0),t<0?i=!(t=0):t>m.nc.page.maxw&&(t=m.nc.page.maxw,i=!0),i?m.nc.doScrollPos(t,e,m.nc.opt.snapbackspeed):m.nc.triggerScrollEnd()},this.doMomentum=function(t){var e=B(),i=t?e+t:m.lasttime,n=m.nc.getScrollLeft(),o=m.nc.getScrollTop(),r=m.nc.page.maxh,s=m.nc.page.maxw;m.speedx=0<s?Math.min(60,m.speedx):0,m.speedy=0<r?Math.min(60,m.speedy):0;var a=i&&e-i<=60;(o<0||r<o||n<0||s<n)&&(a=!1);var l=!(!m.speedy||!a)&&m.speedy,c=!(!m.speedx||!a)&&m.speedx;if(l||c){var h=Math.max(16,m.steptime);if(50<h){var u=h/50;m.speedx*=u,m.speedy*=u,h=50}m.demulxy=0,m.lastscrollx=m.nc.getScrollLeft(),m.chkx=m.lastscrollx,m.lastscrolly=m.nc.getScrollTop(),m.chky=m.lastscrolly;var d=m.lastscrollx,p=m.lastscrolly,f=function(){var t=600<B()-e?.04:.02;m.speedx&&(d=Math.floor(m.lastscrollx-m.speedx*(1-m.demulxy)),((m.lastscrollx=d)<0||s<d)&&(t=.1)),m.speedy&&(p=Math.floor(m.lastscrolly-m.speedy*(1-m.demulxy)),((m.lastscrolly=p)<0||r<p)&&(t=.1)),m.demulxy=Math.min(1,m.demulxy+t),m.nc.synched("domomentum2d",function(){m.speedx&&(m.nc.getScrollLeft(),m.chkx=d,m.nc.setScrollLeft(d)),m.speedy&&(m.nc.getScrollTop(),m.chky=p,m.nc.setScrollTop(p)),m.timer||(m.nc.hideCursor(),m.doSnapy(d,p))}),m.demulxy<1?m.timer=setTimeout(f,h):(m.stop(),m.nc.hideCursor(),m.doSnapy(d,p))};f()}else m.doSnapy(m.nc.getScrollLeft(),m.nc.getScrollTop())}},o=t.fn.scrollTop;t.cssHooks.pageYOffset={get:function(t,e,i){var n=L.data(t,"__nicescroll")||!1;return n&&n.ishwscroll?n.getScrollTop():o.call(t)},set:function(t,e){var i=L.data(t,"__nicescroll")||!1;return i&&i.ishwscroll?i.setScrollTop(parseInt(e)):o.call(t,e),this}},t.fn.scrollTop=function(e){if(void 0===e){var t=!!this[0]&&(L.data(this[0],"__nicescroll")||!1);return t&&t.ishwscroll?t.getScrollTop():o.call(this)}return this.each(function(){var t=L.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollTop(parseInt(e)):o.call(L(this),e)})};var s=t.fn.scrollLeft;L.cssHooks.pageXOffset={get:function(t,e,i){var n=L.data(t,"__nicescroll")||!1;return n&&n.ishwscroll?n.getScrollLeft():s.call(t)},set:function(t,e){var i=L.data(t,"__nicescroll")||!1;return i&&i.ishwscroll?i.setScrollLeft(parseInt(e)):s.call(t,e),this}},t.fn.scrollLeft=function(e){if(void 0===e){var t=!!this[0]&&(L.data(this[0],"__nicescroll")||!1);return t&&t.ishwscroll?t.getScrollLeft():s.call(this)}return this.each(function(){var t=L.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollLeft(parseInt(e)):s.call(L(this),e)})};var l=function(t){var e=this;if(this.length=0,this.name="nicescrollarray",this.each=function(t){return L.each(e,t),e},this.push=function(t){e[e.length]=t,e.length++},this.eq=function(t){return e[t]},t)for(var i=0;i<t.length;i++){var n=L.data(t[i],"__nicescroll")||!1;n&&(this[this.length]=n,this.length++)}return this};!function(t,e,i){for(var n=0,o=e.length;n<o;n++)i(t,e[n])}(l.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(t,e){t[e]=function(){var t=arguments;return this.each(function(){this[e].apply(this,t)})}}),t.fn.getNiceScroll=function(t){return void 0===t?new l(this):this[t]&&L.data(this[t],"__nicescroll")||!1},(t.expr.pseudos||t.expr[":"]).nicescroll=function(t){return void 0!==L.data(t,"__nicescroll")},L.fn.niceScroll=function(o,r){void 0!==r||"object"!=typeof o||"jquery"in o||(r=o,o=!1);var s=new l;return this.each(function(){var t=L(this),e=L.extend({},r);if(o){var i=L(o);e.doc=1<i.length?L(o,t):i,e.win=t}!("doc"in e)||"win"in e||(e.win=t);var n=t.data("__nicescroll")||!1;n||(e.doc=e.doc||t,n=new a(e,t),t.data("__nicescroll",n)),s.push(n)}),1===s.length?s[0]:s},D.NiceScroll={getjQuery:function(){return t}},L.nicescroll||(L.nicescroll=new l,L.nicescroll.options=F)}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t:t(jQuery,window,document)}(function(z){var H,p,B,n,o,a,r,g,F,_,f,c,l,h,u,d,m,v,y,b,w,x,C,S,T,M,E,A,U,s,k,P,L,R,W,D,I,O,N,j,$,G,V,q,Y,X,Z,K,J,Q,tt,et,it,nt,ot,rt,st,t,e,i;t="function"==typeof define&&define.amd,e="undefined"!=typeof module&&module.exports,i="https:"==document.location.protocol?"https:":"http:",t||(e?require("jquery-mousewheel")(z):z.event.special.mousewheel||z("head").append(decodeURI("%3Cscript src="+i+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js%3E%3C/script%3E"))),p="mCustomScrollbar",B="mCS",n=".mCustomScrollbar",o={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},a=0,r={},g=window.attachEvent&&!window.addEventListener?1:0,F=!1,_=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],f={init:function(s){var s=z.extend(!0,{},o,s),t=c.call(this);if(s.live){var e=s.liveSelector||this.selector||n,i=z(e);if("off"===s.live)return void h(e);r[e]=setTimeout(function(){i.mCustomScrollbar(s),"once"===s.live&&i.length&&h(e)},500)}else h(e);return s.setWidth=s.set_width?s.set_width:s.setWidth,s.setHeight=s.set_height?s.set_height:s.setHeight,s.axis=s.horizontalScroll?"x":u(s.axis),s.scrollInertia=0<s.scrollInertia&&s.scrollInertia<17?17:s.scrollInertia,"object"!=typeof s.mouseWheel&&1==s.mouseWheel&&(s.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),s.mouseWheel.scrollAmount=s.mouseWheelPixels?s.mouseWheelPixels:s.mouseWheel.scrollAmount,s.mouseWheel.normalizeDelta=s.advanced.normalizeMouseWheelDelta?s.advanced.normalizeMouseWheelDelta:s.mouseWheel.normalizeDelta,s.scrollButtons.scrollType=d(s.scrollButtons.scrollType),l(s),z(t).each(function(){var t=z(this);if(!t.data(B)){t.data(B,{idx:++a,opt:s,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:t.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var e=t.data(B),i=e.opt,n=t.data("mcs-axis"),o=t.data("mcs-scrollbar-position"),r=t.data("mcs-theme");n&&(i.axis=n),o&&(i.scrollbarPosition=o),r&&(i.theme=r,l(i)),m.call(this),e&&i.callbacks.onCreate&&"function"==typeof i.callbacks.onCreate&&i.callbacks.onCreate.call(this),z("#mCSB_"+e.idx+"_container img:not(."+_[2]+")").addClass(_[2]),f.update.call(null,t)}})},update:function(t,a){var e=t||c.call(this);return z(e).each(function(){var t=z(this);if(t.data(B)){var e=t.data(B),i=e.opt,n=z("#mCSB_"+e.idx+"_container"),o=z("#mCSB_"+e.idx),r=[z("#mCSB_"+e.idx+"_dragger_vertical"),z("#mCSB_"+e.idx+"_dragger_horizontal")];if(!n.length)return;e.tweenRunning&&Z(t),a&&e&&i.callbacks.onBeforeUpdate&&"function"==typeof i.callbacks.onBeforeUpdate&&i.callbacks.onBeforeUpdate.call(this),t.hasClass(_[3])&&t.removeClass(_[3]),t.hasClass(_[4])&&t.removeClass(_[4]),o.css("max-height","none"),o.height()!==t.height()&&o.css("max-height",t.height()),y.call(this),"y"===i.axis||i.advanced.autoExpandHorizontalScroll||n.css("width",v(n)),e.overflowed=S.call(this),A.call(this),i.autoDraggerLength&&w.call(this),x.call(this),M.call(this);var s=[Math.abs(n[0].offsetTop),Math.abs(n[0].offsetLeft)];"x"!==i.axis&&(e.overflowed[0]?r[0].height()>r[0].parent().height()?T.call(this):(K(t,s[0].toString(),{dir:"y",dur:0,overwrite:"none"}),e.contentReset.y=null):(T.call(this),"y"===i.axis?E.call(this):"yx"===i.axis&&e.overflowed[1]&&K(t,s[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==i.axis&&(e.overflowed[1]?r[1].width()>r[1].parent().width()?T.call(this):(K(t,s[1].toString(),{dir:"x",dur:0,overwrite:"none"}),e.contentReset.x=null):(T.call(this),"x"===i.axis?E.call(this):"yx"===i.axis&&e.overflowed[0]&&K(t,s[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),a&&e&&(2===a&&i.callbacks.onImageLoad&&"function"==typeof i.callbacks.onImageLoad?i.callbacks.onImageLoad.call(this):3===a&&i.callbacks.onSelectorChange&&"function"==typeof i.callbacks.onSelectorChange?i.callbacks.onSelectorChange.call(this):i.callbacks.onUpdate&&"function"==typeof i.callbacks.onUpdate&&i.callbacks.onUpdate.call(this)),X.call(this)}})},scrollTo:function(a,l){if(void 0!==a&&null!=a){var t=c.call(this);return z(t).each(function(){var t=z(this);if(t.data(B)){var e=t.data(B),i=e.opt,n={trigger:"external",scrollInertia:i.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},o=z.extend(!0,{},n,l),r=q.call(this,a),s=0<o.scrollInertia&&o.scrollInertia<17?17:o.scrollInertia;r[0]=Y.call(this,r[0],"y"),r[1]=Y.call(this,r[1],"x"),o.moveDragger&&(r[0]*=e.scrollRatio.y,r[1]*=e.scrollRatio.x),o.dur=st()?0:s,setTimeout(function(){null!==r[0]&&void 0!==r[0]&&"x"!==i.axis&&e.overflowed[0]&&(o.dir="y",o.overwrite="all",K(t,r[0].toString(),o)),null!==r[1]&&void 0!==r[1]&&"y"!==i.axis&&e.overflowed[1]&&(o.dir="x",o.overwrite="none",K(t,r[1].toString(),o))},o.timeout)}})}},stop:function(){var t=c.call(this);return z(t).each(function(){var t=z(this);t.data(B)&&Z(t)})},disable:function(e){var t=c.call(this);return z(t).each(function(){var t=z(this);t.data(B)&&(t.data(B),X.call(this,"remove"),E.call(this),e&&T.call(this),A.call(this,!0),t.addClass(_[3]))})},destroy:function(){var s=c.call(this);return z(s).each(function(){var t=z(this);if(t.data(B)){var e=t.data(B),i=e.opt,n=z("#mCSB_"+e.idx),o=z("#mCSB_"+e.idx+"_container"),r=z(".mCSB_"+e.idx+"_scrollbar");i.live&&h(i.liveSelector||z(s).selector),X.call(this,"remove"),E.call(this),T.call(this),t.removeData(B),et(this,"mcs"),r.remove(),o.find("img."+_[2]).removeClass(_[2]),n.replaceWith(o.contents()),t.removeClass(p+" _"+B+"_"+e.idx+" "+_[6]+" "+_[7]+" "+_[5]+" "+_[3]).addClass(_[4])}})}},c=function(){return"object"!=typeof z(this)||z(this).length<1?n:this},l=function(t){t.autoDraggerLength=!(-1<z.inArray(t.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"]))&&t.autoDraggerLength,t.autoExpandScrollbar=!(-1<z.inArray(t.theme,["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"]))&&t.autoExpandScrollbar,t.scrollButtons.enable=!(-1<z.inArray(t.theme,["minimal","minimal-dark"]))&&t.scrollButtons.enable,t.autoHideScrollbar=-1<z.inArray(t.theme,["minimal","minimal-dark"])||t.autoHideScrollbar,t.scrollbarPosition=-1<z.inArray(t.theme,["minimal","minimal-dark"])?"outside":t.scrollbarPosition},h=function(t){r[t]&&(clearTimeout(r[t]),et(r,t))},u=function(t){return"yx"===t||"xy"===t||"auto"===t?"yx":"x"===t||"horizontal"===t?"x":"y"},d=function(t){return"stepped"===t||"pixels"===t||"step"===t||"click"===t?"stepped":"stepless"},m=function(){var t=z(this),e=t.data(B),i=e.opt,n=i.autoExpandScrollbar?" "+_[1]+"_expand":"",o=["<div id='mCSB_"+e.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+e.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_vertical"+n+"'><div class='"+_[12]+"'><div id='mCSB_"+e.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+e.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+e.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_horizontal"+n+"'><div class='"+_[12]+"'><div id='mCSB_"+e.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],r="yx"===i.axis?"mCSB_vertical_horizontal":"x"===i.axis?"mCSB_horizontal":"mCSB_vertical",s="yx"===i.axis?o[0]+o[1]:"x"===i.axis?o[1]:o[0],a="yx"===i.axis?"<div id='mCSB_"+e.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",l=i.autoHideScrollbar?" "+_[6]:"",c="x"!==i.axis&&"rtl"===e.langDir?" "+_[7]:"";i.setWidth&&t.css("width",i.setWidth),i.setHeight&&t.css("height",i.setHeight),i.setLeft="y"!==i.axis&&"rtl"===e.langDir?"989999px":i.setLeft,t.addClass(p+" _"+B+"_"+e.idx+l+c).wrapInner("<div id='mCSB_"+e.idx+"' class='mCustomScrollBox mCS-"+i.theme+" "+r+"'><div id='mCSB_"+e.idx+"_container' class='mCSB_container' style='position:relative; top:"+i.setTop+"; left:"+i.setLeft+";' dir='"+e.langDir+"' /></div>");var h=z("#mCSB_"+e.idx),u=z("#mCSB_"+e.idx+"_container");"y"===i.axis||i.advanced.autoExpandHorizontalScroll||u.css("width",v(u)),"outside"===i.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),h.addClass("mCSB_outside").after(s)):(h.addClass("mCSB_inside").append(s),u.wrap(a)),b.call(this);var d=[z("#mCSB_"+e.idx+"_dragger_vertical"),z("#mCSB_"+e.idx+"_dragger_horizontal")];d[0].css("min-height",d[0].height()),d[1].css("min-width",d[1].width())},v=function(t){var e=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return z(this).outerWidth(!0)}).get())],i=t.parent().width();return e[0]>i?e[0]:e[1]>i?e[1]:"100%"},y=function(){var t=z(this),e=t.data(B),i=e.opt,n=z("#mCSB_"+e.idx+"_container");if(i.advanced.autoExpandHorizontalScroll&&"y"!==i.axis){n.css({width:"auto","min-width":0,"overflow-x":"scroll"});var o=Math.ceil(n[0].scrollWidth);3===i.advanced.autoExpandHorizontalScroll||2!==i.advanced.autoExpandHorizontalScroll&&o>n.parent().width()?n.css({width:o,"min-width":"100%","overflow-x":"inherit"}):n.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(n[0].getBoundingClientRect().right+.4)-Math.floor(n[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},b=function(){var t=z(this),e=t.data(B),i=e.opt,n=z(".mCSB_"+e.idx+"_scrollbar:first"),o=ot(i.scrollButtons.tabindex)?"tabindex='"+i.scrollButtons.tabindex+"'":"",r=["<a href='#' class='"+_[13]+"' "+o+" />","<a href='#' class='"+_[14]+"' "+o+" />","<a href='#' class='"+_[15]+"' "+o+" />","<a href='#' class='"+_[16]+"' "+o+" />"],s=["x"===i.axis?r[2]:r[0],"x"===i.axis?r[3]:r[1],r[2],r[3]];i.scrollButtons.enable&&n.prepend(s[0]).append(s[1]).next(".mCSB_scrollTools").prepend(s[2]).append(s[3])},w=function(){var t=z(this),e=t.data(B),i=z("#mCSB_"+e.idx),n=z("#mCSB_"+e.idx+"_container"),o=[z("#mCSB_"+e.idx+"_dragger_vertical"),z("#mCSB_"+e.idx+"_dragger_horizontal")],r=[i.height()/n.outerHeight(!1),i.width()/n.outerWidth(!1)],s=[parseInt(o[0].css("min-height")),Math.round(r[0]*o[0].parent().height()),parseInt(o[1].css("min-width")),Math.round(r[1]*o[1].parent().width())],a=g&&s[1]<s[0]?s[0]:s[1],l=g&&s[3]<s[2]?s[2]:s[3];o[0].css({height:a,"max-height":o[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":s[0]+"px"}),o[1].css({width:l,"max-width":o[1].parent().width()-10})},x=function(){var t=z(this),e=t.data(B),i=z("#mCSB_"+e.idx),n=z("#mCSB_"+e.idx+"_container"),o=[z("#mCSB_"+e.idx+"_dragger_vertical"),z("#mCSB_"+e.idx+"_dragger_horizontal")],r=[n.outerHeight(!1)-i.height(),n.outerWidth(!1)-i.width()],s=[r[0]/(o[0].parent().height()-o[0].height()),r[1]/(o[1].parent().width()-o[1].width())];e.scrollRatio={y:s[0],x:s[1]}},C=function(t,e,i){var n=i?_[0]+"_expanded":"",o=t.closest(".mCSB_scrollTools");"active"===e?(t.toggleClass(_[0]+" "+n),o.toggleClass(_[1]),t[0]._draggable=t[0]._draggable?0:1):t[0]._draggable||("hide"===e?(t.removeClass(_[0]),o.removeClass(_[1])):(t.addClass(_[0]),o.addClass(_[1])))},S=function(){var t=z(this),e=t.data(B),i=z("#mCSB_"+e.idx),n=z("#mCSB_"+e.idx+"_container"),o=null==e.overflowed?n.height():n.outerHeight(!1),r=null==e.overflowed?n.width():n.outerWidth(!1),s=n[0].scrollHeight,a=n[0].scrollWidth;return o<s&&(o=s),r<a&&(r=a),[o>i.height(),r>i.width()]},T=function(){var t=z(this),e=t.data(B),i=e.opt,n=z("#mCSB_"+e.idx),o=z("#mCSB_"+e.idx+"_container"),r=[z("#mCSB_"+e.idx+"_dragger_vertical"),z("#mCSB_"+e.idx+"_dragger_horizontal")];if(Z(t),("x"!==i.axis&&!e.overflowed[0]||"y"===i.axis&&e.overflowed[0])&&(r[0].add(o).css("top",0),K(t,"_resetY")),"y"!==i.axis&&!e.overflowed[1]||"x"===i.axis&&e.overflowed[1]){var s=dx=0;"rtl"===e.langDir&&(s=n.width()-o.outerWidth(!1),dx=Math.abs(s/e.scrollRatio.x)),o.css("left",s),r[1].css("left",dx),K(t,"_resetX")}},M=function(){var e,i=z(this),t=i.data(B),n=t.opt;t.bindEvents||(s.call(this),n.contentTouchScroll&&k.call(this),P.call(this),n.mouseWheel.enable&&function t(){e=setTimeout(function(){z.event.special.mousewheel?(clearTimeout(e),L.call(i[0])):t()},100)}(),O.call(this),j.call(this),n.advanced.autoScrollOnFocus&&N.call(this),n.scrollButtons.enable&&$.call(this),n.keyboard.enable&&G.call(this),t.bindEvents=!0)},E=function(){var t=z(this),e=t.data(B),i=e.opt,n="mCS_"+e.idx,o=".mCSB_"+e.idx+"_scrollbar",r=z("#mCSB_"+e.idx+",#mCSB_"+e.idx+"_container,#mCSB_"+e.idx+"_container_wrapper,"+o+" ."+_[12]+",#mCSB_"+e.idx+"_dragger_vertical,#mCSB_"+e.idx+"_dragger_horizontal,"+o+">a"),s=z("#mCSB_"+e.idx+"_container");i.advanced.releaseDraggableSelectors&&r.add(z(i.advanced.releaseDraggableSelectors)),i.advanced.extraDraggableSelectors&&r.add(z(i.advanced.extraDraggableSelectors)),e.bindEvents&&(z(document).add(z(!W()||top.document)).unbind("."+n),r.each(function(){z(this).unbind("."+n)}),clearTimeout(t[0]._focusTimeout),et(t[0],"_focusTimeout"),clearTimeout(e.sequential.step),et(e.sequential,"step"),clearTimeout(s[0].onCompleteTimeout),et(s[0],"onCompleteTimeout"),e.bindEvents=!1)},A=function(t){var e=z(this),i=e.data(B),n=i.opt,o=z("#mCSB_"+i.idx+"_container_wrapper"),r=o.length?o:z("#mCSB_"+i.idx+"_container"),s=[z("#mCSB_"+i.idx+"_scrollbar_vertical"),z("#mCSB_"+i.idx+"_scrollbar_horizontal")],a=[s[0].find(".mCSB_dragger"),s[1].find(".mCSB_dragger")];"x"!==n.axis&&(i.overflowed[0]&&!t?(s[0].add(a[0]).add(s[0].children("a")).css("display","block"),r.removeClass(_[8]+" "+_[10])):(n.alwaysShowScrollbar?(2!==n.alwaysShowScrollbar&&a[0].css("display","none"),r.removeClass(_[10])):(s[0].css("display","none"),r.addClass(_[10])),r.addClass(_[8]))),"y"!==n.axis&&(i.overflowed[1]&&!t?(s[1].add(a[1]).add(s[1].children("a")).css("display","block"),r.removeClass(_[9]+" "+_[11])):(n.alwaysShowScrollbar?(2!==n.alwaysShowScrollbar&&a[1].css("display","none"),r.removeClass(_[11])):(s[1].css("display","none"),r.addClass(_[11])),r.addClass(_[9]))),i.overflowed[0]||i.overflowed[1]?e.removeClass(_[5]):e.addClass(_[5])},U=function(t){var e=t.type,i=t.target.ownerDocument!==document&&null!==frameElement?[z(frameElement).offset().top,z(frameElement).offset().left]:null,n=W()&&t.target.ownerDocument!==top.document&&null!==frameElement?[z(t.view.frameElement).offset().top,z(t.view.frameElement).offset().left]:[0,0];switch(e){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return i?[t.originalEvent.pageY-i[0]+n[0],t.originalEvent.pageX-i[1]+n[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var o=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],r=t.originalEvent.touches.length||t.originalEvent.changedTouches.length;return t.target.ownerDocument!==document?[o.screenY,o.screenX,1<r]:[o.pageY,o.pageX,1<r];default:return i?[t.pageY-i[0]+n[0],t.pageX-i[1]+n[1],!1]:[t.pageY,t.pageX,!1]}},s=function(){function o(t,e,i,n){if(p[0].idleTimer=u.scrollInertia<233?250:0,s.attr("id")===d[1])var o="x",r=(s[0].offsetLeft-e+n)*h.scrollRatio.x;else var o="y",r=(s[0].offsetTop-t+i)*h.scrollRatio.y;K(c,r.toString(),{dir:o,drag:!0})}var s,a,l,c=z(this),h=c.data(B),u=h.opt,t="mCS_"+h.idx,d=["mCSB_"+h.idx+"_dragger_vertical","mCSB_"+h.idx+"_dragger_horizontal"],p=z("#mCSB_"+h.idx+"_container"),e=z("#"+d[0]+",#"+d[1]),i=u.advanced.releaseDraggableSelectors?e.add(z(u.advanced.releaseDraggableSelectors)):e,n=u.advanced.extraDraggableSelectors?z(!W()||top.document).add(z(u.advanced.extraDraggableSelectors)):z(!W()||top.document);e.bind("contextmenu."+t,function(t){t.preventDefault()}).bind("mousedown."+t+" touchstart."+t+" pointerdown."+t+" MSPointerDown."+t,function(t){if(t.stopImmediatePropagation(),t.preventDefault(),it(t)){F=!0,g&&(document.onselectstart=function(){return!1}),D.call(p,!1),Z(c);var e=(s=z(this)).offset(),i=U(t)[0]-e.top,n=U(t)[1]-e.left,o=s.height()+e.top,r=s.width()+e.left;i<o&&0<i&&n<r&&0<n&&(a=i,l=n),C(s,"active",u.autoExpandScrollbar)}}).bind("touchmove."+t,function(t){t.stopImmediatePropagation(),t.preventDefault();var e=s.offset(),i=U(t)[0]-e.top,n=U(t)[1]-e.left;o(a,l,i,n)}),z(document).add(n).bind("mousemove."+t+" pointermove."+t+" MSPointerMove."+t,function(t){if(s){var e=s.offset(),i=U(t)[0]-e.top,n=U(t)[1]-e.left;if(a===i&&l===n)return;o(a,l,i,n)}}).add(i).bind("mouseup."+t+" touchend."+t+" pointerup."+t+" MSPointerUp."+t,function(){s&&(C(s,"active",u.autoExpandScrollbar),s=null),F=!1,g&&(document.onselectstart=null),D.call(p,!0)})},k=function(){function e(t){if(!nt(t)||F||U(t)[2])H=0;else{T=S=0,d=H=1,M.removeClass("mCS_touch_action");var e=k.offset();c=U(t)[0]-e.top,p=U(t)[1]-e.left,O=[U(t)[0],U(t)[1]]}}function i(t){if(nt(t)&&!F&&!U(t)[2]&&(C.documentTouchScroll||t.preventDefault(),t.stopImmediatePropagation(),(!T||S)&&d)){v=Q();var e=A.offset(),i=U(t)[0]-e.top,n=U(t)[1]-e.left,o="mcsLinearOut";if(L.push(i),R.push(n),O[2]=Math.abs(U(t)[0]-O[0]),O[3]=Math.abs(U(t)[1]-O[1]),E.overflowed[0])var r=P[0].parent().height()-P[0].height(),s=0<c-i&&i-c>-r*E.scrollRatio.y&&(2*O[3]<O[2]||"yx"===C.axis);if(E.overflowed[1])var a=P[1].parent().width()-P[1].width(),l=0<p-n&&n-p>-a*E.scrollRatio.x&&(2*O[2]<O[3]||"yx"===C.axis);s||l?(N||t.preventDefault(),S=1):(T=1,M.addClass("mCS_touch_action")),N&&t.preventDefault(),_="yx"===C.axis?[c-i,p-n]:"x"===C.axis?[null,p-n]:[c-i,null],k[0].idleTimer=250,E.overflowed[0]&&u(_[0],D,o,"y","all",!0),E.overflowed[1]&&u(_[1],D,o,"x",I,!0)}}function n(t){if(!nt(t)||F||U(t)[2])H=0;else{H=1,t.stopImmediatePropagation(),Z(M),g=Q();var e=A.offset();f=U(t)[0]-e.top,m=U(t)[1]-e.left,L=[],R=[]}}function o(t){if(nt(t)&&!F&&!U(t)[2]){d=0,t.stopImmediatePropagation(),T=S=0,y=Q();var e=A.offset(),i=U(t)[0]-e.top,n=U(t)[1]-e.left;if(!(30<y-v)){var o="mcsEaseOut",r=(w=1e3/(y-g))<2.5,s=r?[L[L.length-2],R[R.length-2]]:[0,0];b=r?[i-s[0],n-s[1]]:[i-f,n-m];var a=[Math.abs(b[0]),Math.abs(b[1])];w=r?[Math.abs(b[0]/4),Math.abs(b[1]/4)]:[w,w];var l=[Math.abs(k[0].offsetTop)-b[0]*h(a[0]/w[0],w[0]),Math.abs(k[0].offsetLeft)-b[1]*h(a[1]/w[1],w[1])];_="yx"===C.axis?[l[0],l[1]]:"x"===C.axis?[null,l[1]]:[l[0],null],x=[4*a[0]+C.scrollInertia,4*a[1]+C.scrollInertia];var c=parseInt(C.contentTouchScroll)||0;_[0]=a[0]>c?_[0]:0,_[1]=a[1]>c?_[1]:0,E.overflowed[0]&&u(_[0],x[0],o,"y",I,!1),E.overflowed[1]&&u(_[1],x[1],o,"x",I,!1)}}}function h(t,e){var i=[1.5*e,2*e,e/1.5,e/2];return 90<t?4<e?i[0]:i[3]:60<t?3<e?i[3]:i[2]:30<t?8<e?i[1]:6<e?i[0]:4<e?e:i[2]:8<e?e:i[3]}function u(t,e,i,n,o,r){t&&K(M,t.toString(),{dur:e,scrollEasing:i,dir:n,overwrite:o,drag:r})}var d,c,p,f,m,g,v,y,b,w,_,x,S,T,M=z(this),E=M.data(B),C=E.opt,t="mCS_"+E.idx,A=z("#mCSB_"+E.idx),k=z("#mCSB_"+E.idx+"_container"),P=[z("#mCSB_"+E.idx+"_dragger_vertical"),z("#mCSB_"+E.idx+"_dragger_horizontal")],L=[],R=[],D=0,I="yx"===C.axis?"none":"all",O=[],r=k.find("iframe"),s=["touchstart."+t+" pointerdown."+t+" MSPointerDown."+t,"touchmove."+t+" pointermove."+t+" MSPointerMove."+t,"touchend."+t+" pointerup."+t+" MSPointerUp."+t],N=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;k.bind(s[0],function(t){e(t)}).bind(s[1],function(t){i(t)}),A.bind(s[0],function(t){n(t)}).bind(s[2],function(t){o(t)}),r.length&&r.each(function(){z(this).bind("load",function(){W(this)&&z(this.contentDocument||this.contentWindow.document).bind(s[0],function(t){e(t),n(t)}).bind(s[1],function(t){i(t)}).bind(s[2],function(t){o(t)})})})},P=function(){function o(t,e,i){l.type=i&&r?"stepped":"stepless",l.scrollAmount=10,V(n,t,e,"mcsLinearOut",i?60:null)}var r,n=z(this),s=n.data(B),a=s.opt,l=s.sequential,t="mCS_"+s.idx,c=z("#mCSB_"+s.idx+"_container"),h=c.parent();c.bind("mousedown."+t,function(){H||r||(r=1,F=!0)}).add(document).bind("mousemove."+t,function(t){if(!H&&r&&(window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&document.selection.createRange().text)){var e=c.offset(),i=U(t)[0]-e.top+c[0].offsetTop,n=U(t)[1]-e.left+c[0].offsetLeft;0<i&&i<h.height()&&0<n&&n<h.width()?l.step&&o("off",null,"stepped"):("x"!==a.axis&&s.overflowed[0]&&(i<0?o("on",38):i>h.height()&&o("on",40)),"y"!==a.axis&&s.overflowed[1]&&(n<0?o("on",37):n>h.width()&&o("on",39)))}}).bind("mouseup."+t+" dragend."+t,function(){H||(r&&(r=0,o("off",null)),F=!1)})},L=function(){function i(t,e){if(Z(u),!I(u,t.target)){var i="auto"!==p.mouseWheel.deltaFactor?parseInt(p.mouseWheel.deltaFactor):g&&t.deltaFactor<100?100:t.deltaFactor||100,n=p.scrollInertia;if("x"===p.axis||"x"===p.mouseWheel.axis)var o="x",r=[Math.round(i*d.scrollRatio.x),parseInt(p.mouseWheel.scrollAmount)],s="auto"!==p.mouseWheel.scrollAmount?r[1]:r[0]>=f.width()?.9*f.width():r[0],a=Math.abs(z("#mCSB_"+d.idx+"_container")[0].offsetLeft),l=m[1][0].offsetLeft,c=m[1].parent().width()-m[1].width(),h="y"===p.mouseWheel.axis?t.deltaY||e:t.deltaX;else var o="y",r=[Math.round(i*d.scrollRatio.y),parseInt(p.mouseWheel.scrollAmount)],s="auto"!==p.mouseWheel.scrollAmount?r[1]:r[0]>=f.height()?.9*f.height():r[0],a=Math.abs(z("#mCSB_"+d.idx+"_container")[0].offsetTop),l=m[0][0].offsetTop,c=m[0].parent().height()-m[0].height(),h=t.deltaY||e;"y"===o&&!d.overflowed[0]||"x"===o&&!d.overflowed[1]||((p.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(h=-h),p.mouseWheel.normalizeDelta&&(h=h<0?-1:1),(0<h&&0!==l||h<0&&l!==c||p.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<5&&!p.mouseWheel.normalizeDelta&&(s=t.deltaFactor,n=17),K(u,(a-h*s).toString(),{dir:o,dur:n}))}}if(z(this).data(B)){var u=z(this),d=u.data(B),p=d.opt,t="mCS_"+d.idx,f=z("#mCSB_"+d.idx),m=[z("#mCSB_"+d.idx+"_dragger_vertical"),z("#mCSB_"+d.idx+"_dragger_horizontal")],e=z("#mCSB_"+d.idx+"_container").find("iframe");e.length&&e.each(function(){z(this).bind("load",function(){W(this)&&z(this.contentDocument||this.contentWindow.document).bind("mousewheel."+t,function(t,e){i(t,e)})})}),f.bind("mousewheel."+t,function(t,e){i(t,e)})}},R=new Object,W=function(t){var e=!1,i=!1,n=null;if(void 0===t?i="#empty":void 0!==z(t).attr("id")&&(i=z(t).attr("id")),!1!==i&&void 0!==R[i])return R[i];if(t){try{var o=t.contentDocument||t.contentWindow.document;n=o.body.innerHTML}catch(t){}e=null!==n}else{try{var o=top.document;n=o.body.innerHTML}catch(t){}e=null!==n}return!1!==i&&(R[i]=e),e},D=function(t){var e=this.find("iframe");if(e.length){var i=t?"auto":"none";e.css("pointer-events",i)}},I=function(t,e){var i=e.nodeName.toLowerCase(),n=t.data(B).opt.mouseWheel.disableOver;return-1<z.inArray(i,n)&&!(-1<z.inArray(i,["select","textarea"])&&!z(e).is(":focus"))},O=function(){var s,a=z(this),l=a.data(B),t="mCS_"+l.idx,c=z("#mCSB_"+l.idx+"_container"),h=c.parent(),e=z(".mCSB_"+l.idx+"_scrollbar ."+_[12]);e.bind("mousedown."+t+" touchstart."+t+" pointerdown."+t+" MSPointerDown."+t,function(t){F=!0,z(t.target).hasClass("mCSB_dragger")||(s=1)}).bind("touchend."+t+" pointerup."+t+" MSPointerUp."+t,function(){F=!1}).bind("click."+t,function(t){if(s&&(s=0,z(t.target).hasClass(_[12])||z(t.target).hasClass("mCSB_draggerRail"))){Z(a);var e=z(this),i=e.find(".mCSB_dragger");if(0<e.parent(".mCSB_scrollTools_horizontal").length){if(!l.overflowed[1])return;var n="x",o=t.pageX>i.offset().left?-1:1,r=Math.abs(c[0].offsetLeft)-o*(.9*h.width())}else{if(!l.overflowed[0])return;var n="y",o=t.pageY>i.offset().top?-1:1,r=Math.abs(c[0].offsetTop)-o*(.9*h.height())}K(a,r.toString(),{dir:n,scrollEasing:"mcsEaseInOut"})}})},N=function(){var r=z(this),t=r.data(B),s=t.opt,e="mCS_"+t.idx,a=z("#mCSB_"+t.idx+"_container"),l=a.parent();a.bind("focusin."+e,function(){var o=z(document.activeElement),t=a.find(".mCustomScrollBox").length;o.is(s.advanced.autoScrollOnFocus)&&(Z(r),clearTimeout(r[0]._focusTimeout),r[0]._focusTimer=t?17*t:0,r[0]._focusTimeout=setTimeout(function(){var t=[rt(o)[0],rt(o)[1]],e=[a[0].offsetTop,a[0].offsetLeft],i=[0<=e[0]+t[0]&&e[0]+t[0]<l.height()-o.outerHeight(!1),0<=e[1]+t[1]&&e[0]+t[1]<l.width()-o.outerWidth(!1)],n="yx"!==s.axis||i[0]||i[1]?"all":"none";"x"===s.axis||i[0]||K(r,t[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:n,dur:0}),"y"===s.axis||i[1]||K(r,t[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:n,dur:0})},r[0]._focusTimer))})},j=function(){var t=z(this),e=t.data(B),i="mCS_"+e.idx,n=z("#mCSB_"+e.idx+"_container").parent();n.bind("scroll."+i,function(){0===n.scrollTop()&&0===n.scrollLeft()||z(".mCSB_"+e.idx+"_scrollbar").css("visibility","hidden")})},$=function(){var n=z(this),o=n.data(B),r=o.opt,s=o.sequential,t="mCS_"+o.idx,e=".mCSB_"+o.idx+"_scrollbar",i=z(e+">a");i.bind("contextmenu."+t,function(t){t.preventDefault()}).bind("mousedown."+t+" touchstart."+t+" pointerdown."+t+" MSPointerDown."+t+" mouseup."+t+" touchend."+t+" pointerup."+t+" MSPointerUp."+t+" mouseout."+t+" pointerout."+t+" MSPointerOut."+t+" click."+t,function(t){function e(t,e){s.scrollAmount=r.scrollButtons.scrollAmount,V(n,t,e)}if(t.preventDefault(),it(t)){var i=z(this).attr("class");switch(s.type=r.scrollButtons.scrollType,t.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===s.type)return;F=!0,o.tweenRunning=!1,e("on",i);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===s.type)return;F=!1,s.dir&&e("off",i);break;case"click":if("stepped"!==s.type||o.tweenRunning)return;e("on",i)}}})},G=function(){function e(t){function e(t,e){h.type=c.keyboard.scrollType,h.scrollAmount=c.keyboard.scrollAmount,"stepped"===h.type&&l.tweenRunning||V(a,t,e)}switch(t.type){case"blur":l.tweenRunning&&h.dir&&e("off",null);break;case"keydown":case"keyup":var i=t.keyCode?t.keyCode:t.which,n="on";if("x"!==c.axis&&(38===i||40===i)||"y"!==c.axis&&(37===i||39===i)){if((38===i||40===i)&&!l.overflowed[0]||(37===i||39===i)&&!l.overflowed[1])return;"keyup"===t.type&&(n="off"),z(document.activeElement).is(p)||(t.preventDefault(),t.stopImmediatePropagation(),e(n,i))}else if(33===i||34===i){if((l.overflowed[0]||l.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type){Z(a);var o=34===i?-1:1;if("x"===c.axis||"yx"===c.axis&&l.overflowed[1]&&!l.overflowed[0])var r="x",s=Math.abs(u[0].offsetLeft)-o*(.9*d.width());else var r="y",s=Math.abs(u[0].offsetTop)-o*(.9*d.height());K(a,s.toString(),{dir:r,scrollEasing:"mcsEaseInOut"})}}else if((35===i||36===i)&&!z(document.activeElement).is(p)&&((l.overflowed[0]||l.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)){if("x"===c.axis||"yx"===c.axis&&l.overflowed[1]&&!l.overflowed[0])var r="x",s=35===i?Math.abs(d.width()-u.outerWidth(!1)):0;else var r="y",s=35===i?Math.abs(d.height()-u.outerHeight(!1)):0;K(a,s.toString(),{dir:r,scrollEasing:"mcsEaseInOut"})}}}var a=z(this),l=a.data(B),c=l.opt,h=l.sequential,t="mCS_"+l.idx,i=z("#mCSB_"+l.idx),u=z("#mCSB_"+l.idx+"_container"),d=u.parent(),p="input,textarea,select,datalist,keygen,[contenteditable='true']",n=u.find("iframe"),o=["blur."+t+" keydown."+t+" keyup."+t];n.length&&n.each(function(){z(this).bind("load",function(){W(this)&&z(this.contentDocument||this.contentWindow.document).bind(o[0],function(t){e(t)})})}),i.attr("tabindex","0").bind(o[0],function(t){e(t)})},V=function(u,t,e,d,p){function f(t){g.snapAmount&&(v.scrollAmount=g.snapAmount instanceof Array?"x"===v.dir[0]?g.snapAmount[1]:g.snapAmount[0]:g.snapAmount);var e="stepped"!==v.type,i=p||(t?e?b/1.5:w:1e3/60),n=t?e?7.5:40:2.5,o=[Math.abs(y[0].offsetTop),Math.abs(y[0].offsetLeft)],r=[10<m.scrollRatio.y?10:m.scrollRatio.y,10<m.scrollRatio.x?10:m.scrollRatio.x],s="x"===v.dir[0]?o[1]+v.dir[1]*(r[1]*n):o[0]+v.dir[1]*(r[0]*n),a="x"===v.dir[0]?o[1]+v.dir[1]*parseInt(v.scrollAmount):o[0]+v.dir[1]*parseInt(v.scrollAmount),l="auto"!==v.scrollAmount?a:s,c=d||(t?e?"mcsLinearOut":"mcsEaseInOut":"mcsLinear"),h=!!t;return t&&i<17&&(l="x"===v.dir[0]?o[1]:o[0]),K(u,l.toString(),{dir:v.dir[0],scrollEasing:c,dur:i,onComplete:h}),t?void(v.dir=!1):(clearTimeout(v.step),void(v.step=setTimeout(function(){f()},i)))}var m=u.data(B),g=m.opt,v=m.sequential,y=z("#mCSB_"+m.idx+"_container"),i="stepped"===v.type,b=g.scrollInertia<26?26:g.scrollInertia,w=g.scrollInertia<1?17:g.scrollInertia;switch(t){case"on":if(v.dir=[e===_[16]||e===_[15]||39===e||37===e?"x":"y",e===_[13]||e===_[15]||38===e||37===e?-1:1],Z(u),ot(e)&&"stepped"===v.type)return;f(i);break;case"off":clearTimeout(v.step),et(v,"step"),Z(u),(i||m.tweenRunning&&v.dir)&&f(!0)}},q=function(t){var e=z(this).data(B).opt,i=[];return"function"==typeof t&&(t=t()),t instanceof Array?i=1<t.length?[t[0],t[1]]:"x"===e.axis?[null,t[0]]:[t[0],null]:(i[0]=t.y?t.y:t.x||"x"===e.axis?null:t,i[1]=t.x?t.x:t.y||"y"===e.axis?null:t),"function"==typeof i[0]&&(i[0]=i[0]()),"function"==typeof i[1]&&(i[1]=i[1]()),i},Y=function(t,e){if(null!=t&&void 0!==t){var i=z(this),n=i.data(B),o=n.opt,r=z("#mCSB_"+n.idx+"_container"),s=r.parent(),a=typeof t;e||(e="x"===o.axis?"x":"y");var l="x"===e?r.outerWidth(!1)-s.width():r.outerHeight(!1)-s.height(),c="x"===e?r[0].offsetLeft:r[0].offsetTop,h="x"===e?"left":"top";switch(a){case"function":return t();case"object":var u=t.jquery?t:z(t);if(!u.length)return;return"x"===e?rt(u)[1]:rt(u)[0];case"string":case"number":if(ot(t))return Math.abs(t);if(-1!==t.indexOf("%"))return Math.abs(l*parseInt(t)/100);if(-1!==t.indexOf("-="))return Math.abs(c-parseInt(t.split("-=")[1]));if(-1!==t.indexOf("+=")){var d=c+parseInt(t.split("+=")[1]);return 0<=d?0:Math.abs(d)}if(-1!==t.indexOf("px")&&ot(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(s.height()-r.outerHeight(!1));if("right"===t)return Math.abs(s.width()-r.outerWidth(!1));if("first"===t||"last"===t){var u=r.find(":"+t);return"x"===e?rt(u)[1]:rt(u)[0]}return z(t).length?"x"===e?rt(z(t))[1]:rt(z(t))[0]:(r.css(h,t),void f.update.call(null,i[0]))}}},X=function(t){function o(t){clearTimeout(r[0].autoUpdate),f.update.call(null,e[0],t)}var e=z(this),i=e.data(B),n=i.opt,r=z("#mCSB_"+i.idx+"_container");return t?(clearTimeout(r[0].autoUpdate),void et(r[0],"autoUpdate")):void function t(){return clearTimeout(r[0].autoUpdate),0===e.parents("html").length?void(e=null):void(r[0].autoUpdate=setTimeout(function(){return n.advanced.updateOnSelectorChange&&(i.poll.change.n=function(){!0===n.advanced.updateOnSelectorChange&&(n.advanced.updateOnSelectorChange="*");var t=0,e=r.find(n.advanced.updateOnSelectorChange);return n.advanced.updateOnSelectorChange&&0<e.length&&e.each(function(){t+=this.offsetHeight+this.offsetWidth}),t}(),i.poll.change.n!==i.poll.change.o)?(i.poll.change.o=i.poll.change.n,void o(3)):n.advanced.updateOnContentResize&&(i.poll.size.n=e[0].scrollHeight+e[0].scrollWidth+r[0].offsetHeight+e[0].offsetHeight+e[0].offsetWidth,i.poll.size.n!==i.poll.size.o)?(i.poll.size.o=i.poll.size.n,void o(1)):!n.advanced.updateOnImageLoad||"auto"===n.advanced.updateOnImageLoad&&"y"===n.axis||(i.poll.img.n=r.find("img").length,i.poll.img.n===i.poll.img.o)?void((n.advanced.updateOnSelectorChange||n.advanced.updateOnContentResize||n.advanced.updateOnImageLoad)&&t()):(i.poll.img.o=i.poll.img.n,void r.find("img").each(function(){!function(t){if(z(t).hasClass(_[2]))return o();var e,i,n=new Image;n.onload=(e=n,i=function(){this.onload=null,z(t).addClass(_[2]),o(2)},function(){return i.apply(e,arguments)}),n.src=t.src}(this)}))},n.advanced.autoUpdateTimeout))}()},Z=function(t){var e=t.data(B),i=z("#mCSB_"+e.idx+"_container,#mCSB_"+e.idx+"_container_wrapper,#mCSB_"+e.idx+"_dragger_vertical,#mCSB_"+e.idx+"_dragger_horizontal");i.each(function(){tt.call(this)})},K=function(o,t,r){function e(t){return l&&c.callbacks[t]&&"function"==typeof c.callbacks[t]}function i(){var t=[p[0].offsetTop,p[0].offsetLeft],e=[y[0].offsetTop,y[0].offsetLeft],i=[p.outerHeight(!1),p.outerWidth(!1)],n=[d.height(),d.width()];o[0].mcs={content:p,top:t[0],left:t[1],draggerTop:e[0],draggerLeft:e[1],topPct:Math.round(100*Math.abs(t[0])/(Math.abs(i[0])-n[0])),leftPct:Math.round(100*Math.abs(t[1])/(Math.abs(i[1])-n[1])),direction:r.dir}}var n,s,a,l=o.data(B),c=l.opt,h={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},r=z.extend(h,r),u=[r.dur,r.drag?0:r.dur],d=z("#mCSB_"+l.idx),p=z("#mCSB_"+l.idx+"_container"),f=p.parent(),m=c.callbacks.onTotalScrollOffset?q.call(o,c.callbacks.onTotalScrollOffset):[0,0],g=c.callbacks.onTotalScrollBackOffset?q.call(o,c.callbacks.onTotalScrollBackOffset):[0,0];if(l.trigger=r.trigger,0===f.scrollTop()&&0===f.scrollLeft()||(z(".mCSB_"+l.idx+"_scrollbar").css("visibility","visible"),f.scrollTop(0).scrollLeft(0)),"_resetY"!==t||l.contentReset.y||(e("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(o[0]),l.contentReset.y=1),"_resetX"!==t||l.contentReset.x||(e("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(o[0]),l.contentReset.x=1),"_resetY"!==t&&"_resetX"!==t){if(!l.contentReset.y&&o[0].mcs||!l.overflowed[0]||(e("onOverflowY")&&c.callbacks.onOverflowY.call(o[0]),l.contentReset.x=null),!l.contentReset.x&&o[0].mcs||!l.overflowed[1]||(e("onOverflowX")&&c.callbacks.onOverflowX.call(o[0]),l.contentReset.x=null),c.snapAmount){var v=c.snapAmount instanceof Array?"x"===r.dir?c.snapAmount[1]:c.snapAmount[0]:c.snapAmount;n=t,s=v,a=c.snapOffset,t=Math.round(n/s)*s-a}switch(r.dir){case"x":var y=z("#mCSB_"+l.idx+"_dragger_horizontal"),b="left",w=p[0].offsetLeft,_=[d.width()-p.outerWidth(!1),y.parent().width()-y.width()],x=[t,0===t?0:t/l.scrollRatio.x],S=m[1],T=g[1],M=0<S?S/l.scrollRatio.x:0,E=0<T?T/l.scrollRatio.x:0;break;case"y":var y=z("#mCSB_"+l.idx+"_dragger_vertical"),b="top",w=p[0].offsetTop,_=[d.height()-p.outerHeight(!1),y.parent().height()-y.height()],x=[t,0===t?0:t/l.scrollRatio.y],S=m[0],T=g[0],M=0<S?S/l.scrollRatio.y:0,E=0<T?T/l.scrollRatio.y:0}x[1]<0||0===x[0]&&0===x[1]?x=[0,0]:x[1]>=_[1]?x=[_[0],_[1]]:x[0]=-x[0],o[0].mcs||(i(),e("onInit")&&c.callbacks.onInit.call(o[0])),clearTimeout(p[0].onCompleteTimeout),J(y[0],b,Math.round(x[1]),u[1],r.scrollEasing),!l.tweenRunning&&(0===w&&0<=x[0]||w===_[0]&&x[0]<=_[0])||J(p[0],b,Math.round(x[0]),u[0],r.scrollEasing,r.overwrite,{onStart:function(){r.callbacks&&r.onStart&&!l.tweenRunning&&(e("onScrollStart")&&(i(),c.callbacks.onScrollStart.call(o[0])),l.tweenRunning=!0,C(y),l.cbOffsets=[c.callbacks.alwaysTriggerOffsets||w>=_[0]+S,c.callbacks.alwaysTriggerOffsets||w<=-T])},onUpdate:function(){r.callbacks&&r.onUpdate&&e("whileScrolling")&&(i(),c.callbacks.whileScrolling.call(o[0]))},onComplete:function(){if(r.callbacks&&r.onComplete){"yx"===c.axis&&clearTimeout(p[0].onCompleteTimeout);var t=p[0].idleTimer||0;p[0].onCompleteTimeout=setTimeout(function(){e("onScroll")&&(i(),c.callbacks.onScroll.call(o[0])),e("onTotalScroll")&&x[1]>=_[1]-M&&l.cbOffsets[0]&&(i(),c.callbacks.onTotalScroll.call(o[0])),e("onTotalScrollBack")&&x[1]<=E&&l.cbOffsets[1]&&(i(),c.callbacks.onTotalScrollBack.call(o[0])),l.tweenRunning=!1,p[0].idleTimer=0,C(y,"hide")},t)}}})}},J=function(t,e,i,n,o,r,s){function a(){y.stop||(m||u.call(),m=Q()-f,l(),m>=y.time&&(y.time=m>y.time?m+c-(m-y.time):m+c-1,y.time<m+1&&(y.time=m+1)),y.time<n?y.id=h(a):p.call())}function l(){0<n?(y.currVal=function(t,e,i,n,o){switch(o){case"linear":case"mcsLinear":return i*t/n+e;case"mcsLinearOut":return t/=n,t--,i*Math.sqrt(1-t*t)+e;case"easeInOutSmooth":return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e;case"easeInOutStrong":return(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:(t--,i/2*(2-Math.pow(2,-10*t))+e);case"easeInOut":case"mcsEaseInOut":return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e;case"easeOutSmooth":return t/=n,-i*(--t*t*t*t-1)+e;case"easeOutStrong":return i*(1-Math.pow(2,-10*t/n))+e;case"easeOut":case"mcsEaseOut":default:var r=(t/=n)*t,s=r*t;return e+i*(.499999999999997*s*r+-2.5*r*r+5.5*s+-6.5*r+4*t)}}(y.time,g,b,n,o),v[e]=Math.round(y.currVal)+"px"):v[e]=i+"px",d.call()}t._mTween||(t._mTween={top:{},left:{}});var c,h,s=s||{},u=s.onStart||function(){},d=s.onUpdate||function(){},p=s.onComplete||function(){},f=Q(),m=0,g=t.offsetTop,v=t.style,y=t._mTween[e];"left"===e&&(g=t.offsetLeft);var b=i-g;y.stop=0,"none"!==r&&null!=y.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(y.id):clearTimeout(y.id),y.id=null),c=1e3/60,y.time=m+c,h=window.requestAnimationFrame?window.requestAnimationFrame:function(t){return l(),setTimeout(t,.01)},y.id=h(a)},Q=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},tt=function(){this._mTween||(this._mTween={top:{},left:{}});for(var t=["top","left"],e=0;e<t.length;e++){var i=t[e];this._mTween[i].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(this._mTween[i].id):clearTimeout(this._mTween[i].id),this._mTween[i].id=null,this._mTween[i].stop=1)}},et=function(e,i){try{delete e[i]}catch(t){e[i]=null}},it=function(t){return!(t.which&&1!==t.which)},nt=function(t){var e=t.originalEvent.pointerType;return!(e&&"touch"!==e&&2!==e)},ot=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},rt=function(t){var e=t.parents(".mCSB_container");return[t.offset().top-e.offset().top,t.offset().left-e.offset().left]},st=function(){var t=function(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null}();return!!t&&document[t]},z.fn[p]=function(t){return f[t]?f[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void z.error("Method "+t+" does not exist"):f.init.apply(this,arguments)},z[p]=function(t){return f[t]?f[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void z.error("Method "+t+" does not exist"):f.init.apply(this,arguments)},z[p].defaults=o,window[p]=!0,z(window).bind("load",function(){z(n)[p](),z.extend(z.expr[":"],{mcsInView:z.expr[":"].mcsInView||function(t){var e,i,n=z(t),o=n.parents(".mCSB_container");if(o.length)return e=o.parent(),0<=(i=[o[0].offsetTop,o[0].offsetLeft])[0]+rt(n)[0]&&i[0]+rt(n)[0]<e.height()-n.outerHeight(!1)&&0<=i[1]+rt(n)[1]&&i[1]+rt(n)[1]<e.width()-n.outerWidth(!1)},mcsInSight:z.expr[":"].mcsInSight||function(t,e,i){var n,o,r,s,a=z(t),l=a.parents(".mCSB_container"),c="exact"===i[3]?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];if(l.length)return n=[a.outerHeight(!1),a.outerWidth(!1)],r=[l[0].offsetTop+rt(a)[0],l[0].offsetLeft+rt(a)[1]],o=[l.parent()[0].offsetHeight,l.parent()[0].offsetWidth],s=[n[0]<o[0]?c[0]:c[1],n[1]<o[1]?c[0]:c[1]],r[0]-o[0]*s[0][0]<0&&0<=r[0]+n[0]-o[0]*s[0][1]&&r[1]-o[1]*s[1][0]<0&&0<=r[1]+n[1]-o[1]*s[1][1]},mcsOverflow:z.expr[":"].mcsOverflow||function(t){var e=z(t).data(B);if(e)return e.overflowed[0]||e.overflowed[1]}})})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.PerfectScrollbar=e()}(this,function(){"use strict";function g(t){return getComputedStyle(t)}function d(t,e){for(var i in e){var n=e[i];"number"==typeof n&&(n+="px"),t.style[i]=n}return t}function p(t){var e=document.createElement("div");return e.className=t,e}function a(t,e){if(!r)throw new Error("No element matching method supported");return r.call(t,e)}function i(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function n(t,e){return Array.prototype.filter.call(t.children,function(t){return a(t,e)})}function v(t,e){var i=t.element.classList,n=b.state.scrolling(e);i.contains(n)?clearTimeout(l[e]):i.add(n)}function y(t,e){l[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(b.state.scrolling(e))},t.settings.scrollingThreshold)}function f(t){if("function"==typeof window.CustomEvent)return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function s(t,e,i,n,o){var r=i[0],s=i[1],a=i[2],l=i[3],c=i[4],h=i[5];void 0===n&&(n=!0),void 0===o&&(o=!1);var u,d,p=t.element;t.reach[l]=null,p[a]<1&&(t.reach[l]="start"),p[a]>t[r]-t[s]-1&&(t.reach[l]="end"),e&&(p.dispatchEvent(f("ps-scroll-"+l)),e<0?p.dispatchEvent(f("ps-scroll-"+c)):0<e&&p.dispatchEvent(f("ps-scroll-"+h)),n&&(v(u=t,d=l),y(u,d))),t.reach[l]&&(e||o)&&p.dispatchEvent(f("ps-"+l+"-reach-"+t.reach[l]))}function m(t){return parseInt(t,10)||0}function o(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function e(e,t){function i(t){d[h]=p+m*(t[s]-f),v(e,u),x(e),t.stopPropagation(),t.preventDefault()}function n(){y(e,u),e.event.unbind(e.ownerDocument,"mousemove",i)}var o=t[0],r=t[1],s=t[2],a=t[3],l=t[4],c=t[5],h=t[6],u=t[7],d=e.element,p=null,f=null,m=null;e.event.bind(e[l],"mousedown",function(t){p=d[h],f=t[s],m=(e[r]-e[o])/(e[a]-e[c]),e.event.bind(e.ownerDocument,"mousemove",i),e.event.once(e.ownerDocument,"mouseup",n),t.stopPropagation(),t.preventDefault()})}var r="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.msMatchesSelector),b={main:"ps",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},l={x:null,y:null},c=function(t){this.element=t,this.handlers={}},t={isEmpty:{configurable:!0}};c.prototype.bind=function(t,e){void 0===this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this.element.addEventListener(t,e,!1)},c.prototype.unbind=function(e,i){var n=this;this.handlers[e]=this.handlers[e].filter(function(t){return!(!i||t===i)||(n.element.removeEventListener(e,t,!1),!1)})},c.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)},t.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return 0===e.handlers[t].length})},Object.defineProperties(c.prototype,t);var w=function(){this.eventElements=[]};w.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return t||(t=new c(e),this.eventElements.push(t)),t},w.prototype.bind=function(t,e,i){this.eventElement(t).bind(e,i)},w.prototype.unbind=function(t,e,i){var n=this.eventElement(t);n.unbind(e,i),n.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(n),1)},w.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]},w.prototype.once=function(t,e,i){var n=this.eventElement(t),o=function(t){n.unbind(e,o),i(t)};n.bind(e,o)};var h=function(t,e,i,n,o){var r;if(void 0===n&&(n=!0),void 0===o&&(o=!1),"top"===e)r=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==e)throw new Error("A proper axis should be provided");r=["contentWidth","containerWidth","scrollLeft","x","left","right"]}s(t,i,r,n,o)},_={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)},x=function(t){var e=t.element;t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(n(e,b.element.rail("x")).forEach(function(t){return i(t)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(n(e,b.element.rail("y")).forEach(function(t){return i(t)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=o(t,m(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=m((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=o(t,m(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=m(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),function(t,e){var i={width:e.railXWidth};e.isRtl?i.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:i.left=t.scrollLeft,e.isScrollbarXUsingBottom?i.bottom=e.scrollbarXBottom-t.scrollTop:i.top=e.scrollbarXTop+t.scrollTop,d(e.scrollbarXRail,i);var n={top:t.scrollTop,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?n.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth:n.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:n.left=e.scrollbarYLeft+t.scrollLeft,d(e.scrollbarYRail,n),d(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),d(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}(e,t),t.scrollbarXActive?e.classList.add(b.state.active("x")):(e.classList.remove(b.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=0),t.scrollbarYActive?e.classList.add(b.state.active("y")):(e.classList.remove(b.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)},S={"click-rail":function(i){i.event.bind(i.scrollbarY,"mousedown",function(t){return t.stopPropagation()}),i.event.bind(i.scrollbarYRail,"mousedown",function(t){var e=t.pageY-window.pageYOffset-i.scrollbarYRail.getBoundingClientRect().top>i.scrollbarYTop?1:-1;i.element.scrollTop+=e*i.containerHeight,x(i),t.stopPropagation()}),i.event.bind(i.scrollbarX,"mousedown",function(t){return t.stopPropagation()}),i.event.bind(i.scrollbarXRail,"mousedown",function(t){var e=t.pageX-window.pageXOffset-i.scrollbarXRail.getBoundingClientRect().left>i.scrollbarXLeft?1:-1;i.element.scrollLeft+=e*i.containerWidth,x(i),t.stopPropagation()})},"drag-thumb":function(t){e(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x"]),e(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y"])},keyboard:function(r){var s=r.element;r.event.bind(r.ownerDocument,"keydown",function(t){if(!(t.isDefaultPrevented&&t.isDefaultPrevented()||t.defaultPrevented)&&(a(s,":hover")||a(r.scrollbarX,":focus")||a(r.scrollbarY,":focus"))){var e=document.activeElement?document.activeElement:r.ownerDocument.activeElement;if(e){if("IFRAME"===e.tagName)e=e.contentDocument.activeElement;else for(;e.shadowRoot;)e=e.shadowRoot.activeElement;if(a(o=e,"input,[contenteditable]")||a(o,"select,[contenteditable]")||a(o,"textarea,[contenteditable]")||a(o,"button,[contenteditable]"))return}var i=0,n=0;switch(t.which){case 37:i=t.metaKey?-r.contentWidth:t.altKey?-r.containerWidth:-30;break;case 38:n=t.metaKey?r.contentHeight:t.altKey?r.containerHeight:30;break;case 39:i=t.metaKey?r.contentWidth:t.altKey?r.containerWidth:30;break;case 40:n=t.metaKey?-r.contentHeight:t.altKey?-r.containerHeight:-30;break;case 32:n=t.shiftKey?r.containerHeight:-r.containerHeight;break;case 33:n=r.containerHeight;break;case 34:n=-r.containerHeight;break;case 36:n=r.contentHeight;break;case 35:n=-r.contentHeight;break;default:return}r.settings.suppressScrollX&&0!==i||r.settings.suppressScrollY&&0!==n||(s.scrollTop-=n,s.scrollLeft+=i,x(r),function(t,e){var i=s.scrollTop;if(0===t){if(!r.scrollbarYActive)return!1;if(0===i&&0<e||i>=r.contentHeight-r.containerHeight&&e<0)return!r.settings.wheelPropagation}var n=s.scrollLeft;if(0===e){if(!r.scrollbarXActive)return!1;if(0===n&&t<0||n>=r.contentWidth-r.containerWidth&&0<t)return!r.settings.wheelPropagation}return!0}(i,n)&&t.preventDefault())}var o})},wheel:function(f){function t(t){var e,i,n,o,r,s,a,l,c,h=(i=(e=t).deltaX,n=-1*e.deltaY,void 0!==i&&void 0!==n||(i=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(i*=10,n*=10),i!=i&&n!=n&&(i=0,n=e.wheelDelta),e.shiftKey?[-n,-i]:[i,n]),u=h[0],d=h[1];if(!function(t,e,i){if(!_.isWebKit&&m.querySelector("select:focus"))return!0;if(!m.contains(t))return!1;for(var n=t;n&&n!==m;){if(n.classList.contains(b.element.consuming))return!0;var o=g(n);if([o.overflow,o.overflowX,o.overflowY].join("").match(/(scroll|auto)/)){var r=n.scrollHeight-n.clientHeight;if(0<r&&!(0===n.scrollTop&&0<i||n.scrollTop===r&&i<0))return!0;var s=n.scrollLeft-n.clientWidth;if(0<s&&!(0===n.scrollLeft&&e<0||n.scrollLeft===s&&0<e))return!0}n=n.parentNode}return!1}(t.target,u,d)){var p=!1;f.settings.useBothWheelAxes?f.scrollbarYActive&&!f.scrollbarXActive?(d?m.scrollTop-=d*f.settings.wheelSpeed:m.scrollTop+=u*f.settings.wheelSpeed,p=!0):f.scrollbarXActive&&!f.scrollbarYActive&&(u?m.scrollLeft+=u*f.settings.wheelSpeed:m.scrollLeft-=d*f.settings.wheelSpeed,p=!0):(m.scrollTop-=d*f.settings.wheelSpeed,m.scrollLeft+=u*f.settings.wheelSpeed),x(f),(p=p||(o=u,r=d,s=0===m.scrollTop,a=m.scrollTop+m.offsetHeight===m.scrollHeight,l=0===m.scrollLeft,c=m.scrollLeft+m.offsetWidth===m.offsetWidth,!(Math.abs(r)>Math.abs(o)?s||a:l||c)||!f.settings.wheelPropagation))&&!t.ctrlKey&&(t.stopPropagation(),t.preventDefault())}}var m=f.element;void 0!==window.onwheel?f.event.bind(m,"wheel",t):void 0!==window.onmousewheel&&f.event.bind(m,"mousewheel",t)},touch:function(a){function l(t,e){u.scrollTop-=e,u.scrollLeft-=t,x(a)}function c(t){return t.targetTouches?t.targetTouches[0]:t}function h(t){return!(t.pointerType&&"pen"===t.pointerType&&0===t.buttons||(!t.targetTouches||1!==t.targetTouches.length)&&(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))}function t(t){if(h(t)){var e=c(t);d.pageX=e.pageX,d.pageY=e.pageY,p=(new Date).getTime(),null!==n&&clearInterval(n)}}function e(t){if(h(t)){var e=c(t),i={pageX:e.pageX,pageY:e.pageY},n=i.pageX-d.pageX,o=i.pageY-d.pageY;if(function(t,e,i){if(!u.contains(t))return!1;for(var n=t;n&&n!==u;){if(n.classList.contains(b.element.consuming))return!0;var o=g(n);if([o.overflow,o.overflowX,o.overflowY].join("").match(/(scroll|auto)/)){var r=n.scrollHeight-n.clientHeight;if(0<r&&!(0===n.scrollTop&&0<i||n.scrollTop===r&&i<0))return!0;var s=n.scrollLeft-n.clientWidth;if(0<s&&!(0===n.scrollLeft&&e<0||n.scrollLeft===s&&0<e))return!0}n=n.parentNode}return!1}(t.target,n,o))return;l(n,o),d=i;var r=(new Date).getTime(),s=r-p;0<s&&(f.x=n/s,f.y=o/s,p=r),function(t,e){var i=u.scrollTop,n=u.scrollLeft,o=Math.abs(t),r=Math.abs(e);if(o<r){if(e<0&&i===a.contentHeight-a.containerHeight||0<e&&0===i)return 0===window.scrollY&&0<e&&_.isChrome}else if(r<o&&(t<0&&n===a.contentWidth-a.containerWidth||0<t&&0===n))return!0;return!0}(n,o)&&t.preventDefault()}}function i(){a.settings.swipeEasing&&(clearInterval(n),n=setInterval(function(){a.isInitialized?clearInterval(n):f.x||f.y?Math.abs(f.x)<.01&&Math.abs(f.y)<.01?clearInterval(n):(l(30*f.x,30*f.y),f.x*=.8,f.y*=.8):clearInterval(n)},10))}if(_.supportsTouch||_.supportsIePointer){var u=a.element,d={},p=0,f={},n=null;_.supportsTouch?(a.event.bind(u,"touchstart",t),a.event.bind(u,"touchmove",e),a.event.bind(u,"touchend",i)):_.supportsIePointer&&(window.PointerEvent?(a.event.bind(u,"pointerdown",t),a.event.bind(u,"pointermove",e),a.event.bind(u,"pointerup",i)):window.MSPointerEvent&&(a.event.bind(u,"MSPointerDown",t),a.event.bind(u,"MSPointerMove",e),a.event.bind(u,"MSPointerUp",i)))}}},u=function(t,e){var i=this;if(void 0===e&&(e={}),"string"==typeof t&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var n in(this.element=t).classList.add(b.main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1},e)i.settings[n]=e[n];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var o,r,s=function(){return t.classList.add(b.state.focus)},a=function(){return t.classList.remove(b.state.focus)};this.isRtl="rtl"===g(t).direction,this.isNegativeScroll=(r=t.scrollLeft,t.scrollLeft=-1,o=t.scrollLeft<0,t.scrollLeft=r,o),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new w,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=p(b.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=p(b.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",s),this.event.bind(this.scrollbarX,"blur",a),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var l=g(this.scrollbarXRail);this.scrollbarXBottom=parseInt(l.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=m(l.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=m(l.borderLeftWidth)+m(l.borderRightWidth),d(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=m(l.marginLeft)+m(l.marginRight),d(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=p(b.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=p(b.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",s),this.event.bind(this.scrollbarY,"blur",a),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var c,h,u=g(this.scrollbarYRail);this.scrollbarYRight=parseInt(u.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=m(u.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?(c=this.scrollbarY,m((h=g(c)).width)+m(h.paddingLeft)+m(h.paddingRight)+m(h.borderLeftWidth)+m(h.borderRightWidth)):null,this.railBorderYWidth=m(u.borderTopWidth)+m(u.borderBottomWidth),d(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=m(u.marginTop)+m(u.marginBottom),d(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(t){return S[t](i)}),this.lastScrollTop=t.scrollTop,this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",function(t){return i.onScroll(t)}),x(this)};return u.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,d(this.scrollbarXRail,{display:"block"}),d(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=m(g(this.scrollbarXRail).marginLeft)+m(g(this.scrollbarXRail).marginRight),this.railYMarginHeight=m(g(this.scrollbarYRail).marginTop)+m(g(this.scrollbarYRail).marginBottom),d(this.scrollbarXRail,{display:"none"}),d(this.scrollbarYRail,{display:"none"}),x(this),h(this,"top",0,!1,!0),h(this,"left",0,!1,!0),d(this.scrollbarXRail,{display:""}),d(this.scrollbarYRail,{display:""}))},u.prototype.onScroll=function(t){this.isAlive&&(x(this),h(this,"top",this.element.scrollTop-this.lastScrollTop),h(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=this.element.scrollTop,this.lastScrollLeft=this.element.scrollLeft)},u.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),i(this.scrollbarX),i(this.scrollbarY),i(this.scrollbarXRail),i(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},u.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(" ")},u}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(d){function e(t){var e=t||window.event,i=v.call(arguments,1),n=0,o=0,r=0,s=0,a=0,l=0;if((t=d.event.fix(e)).type="mousewheel","detail"in e&&(r=-1*e.detail),"wheelDelta"in e&&(r=e.wheelDelta),"wheelDeltaY"in e&&(r=e.wheelDeltaY),"wheelDeltaX"in e&&(o=-1*e.wheelDeltaX),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(o=-1*r,r=0),n=0===r?o:r,"deltaY"in e&&(n=r=-1*e.deltaY),"deltaX"in e&&(o=e.deltaX,0===r&&(n=-1*o)),0!==r||0!==o){if(1===e.deltaMode){var c=d.data(this,"mousewheel-line-height");n*=c,r*=c,o*=c}else if(2===e.deltaMode){var h=d.data(this,"mousewheel-page-height");n*=h,r*=h,o*=h}if(s=Math.max(Math.abs(r),Math.abs(o)),(!g||s<g)&&(f(e,g=s)&&(g/=40)),f(e,s)&&(n/=40,o/=40,r/=40),n=Math[1<=n?"floor":"ceil"](n/g),o=Math[1<=o?"floor":"ceil"](o/g),r=Math[1<=r?"floor":"ceil"](r/g),y.settings.normalizeOffset&&this.getBoundingClientRect){var u=this.getBoundingClientRect();a=t.clientX-u.left,l=t.clientY-u.top}return t.deltaX=o,t.deltaY=r,t.deltaFactor=g,t.offsetX=a,t.offsetY=l,t.deltaMode=0,i.unshift(t,n,o,r),m&&clearTimeout(m),m=setTimeout(p,200),(d.event.dispatch||d.event.handle).apply(this,i)}}function p(){g=null}function f(t,e){return y.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var m,g,t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],v=Array.prototype.slice;if(d.event.fixHooks)for(var n=t.length;n;)d.event.fixHooks[t[--n]]=d.event.mouseHooks;var y=d.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],e,!1);else this.onmousewheel=e;d.data(this,"mousewheel-line-height",y.getLineHeight(this)),d.data(this,"mousewheel-page-height",y.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=i.length;t;)this.removeEventListener(i[--t],e,!1);else this.onmousewheel=null;d.removeData(this,"mousewheel-line-height"),d.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var e=d(t),i=e["offsetParent"in d.fn?"offsetParent":"parent"]();return i.length||(i=d("body")),parseInt(i.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(t){return d(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};d.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(t){var e,o,i,n,r,s,a,l=navigator.userAgent;t.HTMLPictureElement&&/ecko/.test(l)&&l.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",(o=document.createElement("source"),i=function(t){var e,i,n=t.parentNode;"PICTURE"===n.nodeName.toUpperCase()?(e=o.cloneNode(),n.insertBefore(e,n.firstElementChild),setTimeout(function(){n.removeChild(e)})):(!t._pfLastSize||t.offsetWidth>t._pfLastSize)&&(t._pfLastSize=t.offsetWidth,i=t.sizes,t.sizes+=",100vw",setTimeout(function(){t.sizes=i}))},n=function(){var t,e=document.querySelectorAll("picture > img, img[srcset][sizes]");for(t=0;t<e.length;t++)i(e[t])},r=function(){clearTimeout(e),e=setTimeout(n,99)},s=t.matchMedia&&matchMedia("(orientation: landscape)"),a=function(){r(),s&&s.addListener&&s.addListener(r)},o.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?a():document.addEventListener("DOMContentLoaded",a),r))}(window),function(t,r,e){"use strict";function h(t){return" "===t||"\t"===t||"\n"===t||"\f"===t||"\r"===t}function T(t,e){return t.res-e.res}function M(t,e){var i,n,o;if(t&&e)for(o=A.parseSet(e),t=A.makeUrl(t),i=0;i<o.length;i++)if(t===A.makeUrl(o[i].url)){n=o[i];break}return n}r.createElement("picture");var o,c,l,n,s,i,a,u,d,p,f,m,g,v,y,b,w,_,x,S,E,C,A={},k=!1,P=function(){},L=r.createElement("img"),R=L.getAttribute,D=L.setAttribute,I=L.removeAttribute,O=r.documentElement,N={},z={algorithm:""},H="data-pfsrc",B=H+"set",F=navigator.userAgent,U=/rident/.test(F)||/ecko/.test(F)&&F.match(/rv\:(\d+)/)&&35<RegExp.$1,W="currentSrc",j=/\s+\+?\d+(e\d+)?w/,$=/(\([^)]+\))?\s*(.+)/,G=t.picturefillCFG,V="font-size:100%!important;",q=!0,Y={},X={},Z=t.devicePixelRatio,K={px:1,in:96},J=r.createElement("a"),Q=!1,tt=/^[ \t\n\r\u000c]+/,et=/^[, \t\n\r\u000c]+/,it=/^[^ \t\n\r\u000c]+/,nt=/[,]+$/,ot=/^\d+$/,rt=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,st=function(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n||!1):t.attachEvent&&t.attachEvent("on"+e,i)},at=function(e){var i={};return function(t){return t in i||(i[t]=e(t)),i[t]}},lt=(n=/^([\d\.]+)(em|vw|px)$/,s=at(function(t){return"return "+function(){for(var t=arguments,e=0,i=t[0];++e in t;)i=i.replace(t[e],t[++e]);return i}((t||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"}),function(t,e){var i;if(!(t in Y))if(Y[t]=!1,e&&(i=t.match(n)))Y[t]=i[1]*K[i[2]];else try{Y[t]=new Function("e",s(t))(K)}catch(t){}return Y[t]}),ct=function(t,e){return t.w?(t.cWidth=A.calcListLength(e||"100vw"),t.res=t.w/t.cWidth):t.res=t.d,t},ht=function(t){if(k){var e,i,n,o=t||{};if(o.elements&&1===o.elements.nodeType&&("IMG"===o.elements.nodeName.toUpperCase()?o.elements=[o.elements]:(o.context=o.elements,o.elements=null)),n=(e=o.elements||A.qsa(o.context||r,o.reevaluate||o.reselect?A.sel:A.selShort)).length){for(A.setupRun(o),Q=!0,i=0;i<n;i++)A.fillImg(e[i],o);A.teardownRun(o)}}};t.console&&console.warn,W in L||(W="src"),N["image/jpeg"]=!0,N["image/gif"]=!0,N["image/png"]=!0,N["image/svg+xml"]=r.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),A.ns=("pf"+(new Date).getTime()).substr(0,9),A.supSrcset="srcset"in L,A.supSizes="sizes"in L,A.supPicture=!!t.HTMLPictureElement,A.supSrcset&&A.supPicture&&!A.supSizes&&(x=r.createElement("img"),L.srcset="data:,a",x.src="data:,a",A.supSrcset=L.complete===x.complete,A.supPicture=A.supSrcset&&A.supPicture),A.supSrcset&&!A.supSizes?(b="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",w=r.createElement("img"),_=function(){2===w.width&&(A.supSizes=!0),c=A.supSrcset&&!A.supSizes,k=!0,setTimeout(ht)},w.onload=_,w.onerror=_,w.setAttribute("sizes","9px"),w.srcset=b+" 1w,data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw== 9w",w.src=b):k=!0,A.selShort="picture>img,img[srcset]",A.sel=A.selShort,A.cfg=z,A.DPR=Z||1,A.u=K,A.types=N,A.setSize=P,A.makeUrl=at(function(t){return J.href=t,J.href}),A.qsa=function(t,e){return"querySelector"in t?t.querySelectorAll(e):[]},A.matchesMedia=function(){return t.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?A.matchesMedia=function(t){return!t||matchMedia(t).matches}:A.matchesMedia=A.mMQ,A.matchesMedia.apply(this,arguments)},A.mMQ=function(t){return!t||lt(t)},A.calcLength=function(t){var e=lt(t,!0)||!1;return e<0&&(e=!1),e},A.supportsType=function(t){return!t||N[t]},A.parseSize=at(function(t){var e=(t||"").match($);return{media:e&&e[1],length:e&&e[2]}}),A.parseSet=function(t){return t.cands||(t.cands=function(n,u){function t(t){var e,i=t.exec(n.substring(l));return i?(e=i[0],l+=e.length,e):void 0}function e(){var t,e,i,n,o,r,s,a,l,c=!1,h={};for(n=0;n<p.length;n++)r=(o=p[n])[o.length-1],s=o.substring(0,o.length-1),a=parseInt(s,10),l=parseFloat(s),ot.test(s)&&"w"===r?((t||e)&&(c=!0),0===a?c=!0:t=a):rt.test(s)&&"x"===r?((t||e||i)&&(c=!0),l<0?c=!0:e=l):ot.test(s)&&"h"===r?((i||e)&&(c=!0),0===a?c=!0:i=a):c=!0;c||(h.url=d,t&&(h.w=t),e&&(h.d=e),i&&(h.h=i),i||e||t||(h.d=1),1===h.d&&(u.has1x=!0),h.set=u,f.push(h))}function i(){for(t(tt),o="",r="in descriptor";;){if(s=n.charAt(l),"in descriptor"===r)if(h(s))o&&(p.push(o),o="",r="after descriptor");else{if(","===s)return l+=1,o&&p.push(o),void e();if("("===s)o+=s,r="in parens";else{if(""===s)return o&&p.push(o),void e();o+=s}}else if("in parens"===r)if(")"===s)o+=s,r="in descriptor";else{if(""===s)return p.push(o),void e();o+=s}else if("after descriptor"===r)if(h(s));else{if(""===s)return void e();r="in descriptor",l-=1}l+=1}}for(var d,p,o,r,s,a=n.length,l=0,f=[];;){if(t(et),a<=l)return f;d=t(it),p=[],","===d.slice(-1)?(d=d.replace(nt,""),e()):i()}}(t.srcset,t)),t.cands},A.getEmValue=function(){var t;if(!o&&(t=r.body)){var e=r.createElement("div"),i=O.style.cssText,n=t.style.cssText;e.style.cssText="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",O.style.cssText=V,t.style.cssText=V,t.appendChild(e),o=e.offsetWidth,t.removeChild(e),o=parseFloat(o,10),O.style.cssText=i,t.style.cssText=n}return o||16},A.calcListLength=function(t){if(!(t in X)||z.uT){var e=A.calcLength(function(t){var e,i,n,o,r,s,a,l=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,c=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(n=(i=function(t){function e(){o&&(r.push(o),o="")}function i(){r[0]&&(s.push(r),r=[])}for(var n,o="",r=[],s=[],a=0,l=0,c=!1;;){if(""===(n=t.charAt(l)))return e(),i(),s;if(c){if("*"===n&&"/"===t[l+1]){c=!1,l+=2,e();continue}l+=1}else{if(h(n)){if(t.charAt(l-1)&&h(t.charAt(l-1))||!o){l+=1;continue}if(0===a){e(),l+=1;continue}n=" "}else if("("===n)a+=1;else if(")"===n)a-=1;else{if(","===n){e(),i(),l+=1;continue}if("/"===n&&"*"===t.charAt(l+1)){c=!0,l+=2;continue}}o+=n,l+=1}}}(t)).length,e=0;e<n;e++)if(r=(o=i[e])[o.length-1],a=r,l.test(a)&&0<=parseFloat(a)||c.test(a)||"0"===a||"-0"===a||"+0"===a){if(s=r,o.pop(),0===o.length)return s;if(o=o.join(" "),A.matchesMedia(o))return s}return"100vw"}(t));X[t]=e||K.width}return X[t]},A.setRes=function(t){var e;if(t)for(var i=0,n=(e=A.parseSet(t)).length;i<n;i++)ct(e[i],t.sizes);return e},A.setRes.res=ct,A.applySetCandidate=function(t,e){if(t.length){var i,n,o,r,s,a,l,c,h,u=e[A.ns],d=A.DPR;if(a=u.curSrc||e[W],(l=u.curCan||(w=e,_=a,!(x=t[0].set)&&_&&(x=(x=w[A.ns].sets)&&x[x.length-1]),(S=M(_,x))&&(_=A.makeUrl(_),w[A.ns].curSrc=_,(w[A.ns].curCan=S).res||ct(S,S.set.sizes)),S))&&l.set===t[0].set&&((h=U&&!e.complete&&l.res-.1>d)||(l.cached=!0,l.res>=d&&(s=l))),!s)for(t.sort(T),s=t[(r=t.length)-1],n=0;n<r;n++)if((i=t[n]).res>=d){s=t[o=n-1]&&(h||a!==A.makeUrl(i.url))&&(p=t[o].res,f=i.res,m=d,g=t[o].cached,b=y=v=void 0,"saveData"===z.algorithm?2.7<p?b=m+1:(y=(f-m)*(v=Math.pow(p-.6,1.5)),g&&(y+=.1*v),b=p+y):b=1<m?Math.sqrt(p*f):p,m<b)?t[o]:i;break}s&&(c=A.makeUrl(s.url),u.curSrc=c,u.curCan=s,c!==a&&A.setSrc(e,s),A.setSize(e))}var p,f,m,g,v,y,b,w,_,x,S},A.setSrc=function(t,e){var i;t.src=e.url,"image/svg+xml"===e.set.type&&(i=t.style.width,t.style.width=t.offsetWidth+1+"px",t.offsetWidth+1&&(t.style.width=i))},A.getSet=function(t){var e,i,n,o=!1,r=t[A.ns].sets;for(e=0;e<r.length&&!o;e++)if((i=r[e]).srcset&&A.matchesMedia(i.media)&&(n=A.supportsType(i.type))){"pending"===n&&(i=n),o=i;break}return o},A.parseSets=function(t,e,i){var n,o,r,s,a=e&&"PICTURE"===e.nodeName.toUpperCase(),l=t[A.ns];(void 0===l.src||i.src)&&(l.src=R.call(t,"src"),l.src?D.call(t,H,l.src):I.call(t,H)),(void 0===l.srcset||i.srcset||!A.supSrcset||t.srcset)&&(n=R.call(t,"srcset"),l.srcset=n,s=!0),l.sets=[],a&&(l.pic=!0,function(t,e){var i,n,o,r,s=t.getElementsByTagName("source");for(i=0,n=s.length;i<n;i++)(o=s[i])[A.ns]=!0,(r=o.getAttribute("srcset"))&&e.push({srcset:r,media:o.getAttribute("media"),type:o.getAttribute("type"),sizes:o.getAttribute("sizes")})}(e,l.sets)),l.srcset?(o={srcset:l.srcset,sizes:R.call(t,"sizes")},l.sets.push(o),(r=(c||l.src)&&j.test(l.srcset||""))||!l.src||M(l.src,o)||o.has1x||(o.srcset+=", "+l.src,o.cands.push({url:l.src,d:1,set:o}))):l.src&&l.sets.push({srcset:l.src,sizes:null}),l.curCan=null,l.curSrc=void 0,l.supported=!(a||o&&!A.supSrcset||r&&!A.supSizes),s&&A.supSrcset&&!l.supported&&(n?(D.call(t,B,n),t.srcset=""):I.call(t,B)),l.supported&&!l.srcset&&(!l.src&&t.src||t.src!==A.makeUrl(l.src))&&(null===l.src?t.removeAttribute("src"):t.src=l.src),l.parsed=!0},A.fillImg=function(t,e){var i,n,o,r,s,a=e.reselect||e.reevaluate;t[A.ns]||(t[A.ns]={}),i=t[A.ns],(a||i.evaled!==l)&&((!i.parsed||e.reevaluate)&&A.parseSets(t,t.parentNode,e),i.supported?i.evaled=l:(n=t,r=A.getSet(n),s=!1,"pending"!==r&&(s=l,r&&(o=A.setRes(r),A.applySetCandidate(o,n))),n[A.ns].evaled=s))},A.setupRun=function(){(!Q||q||Z!==t.devicePixelRatio)&&(q=!1,Z=t.devicePixelRatio,Y={},X={},A.DPR=Z||1,K.width=Math.max(t.innerWidth||0,O.clientWidth),K.height=Math.max(t.innerHeight||0,O.clientHeight),K.vw=K.width/100,K.vh=K.height/100,l=[K.height,K.width,Z].join("-"),K.em=A.getEmValue(),K.rem=K.em)},A.supPicture?(ht=P,A.fillImg=P):(m=t.attachEvent?/d$|^c/:/d$|^c|^i/,g=function(){var t=r.readyState||"";v=setTimeout(g,"loading"===t?200:999),r.body&&(A.fillImgs(),(i=i||m.test(t))&&clearTimeout(v))},v=setTimeout(g,r.body?9:99),y=O.clientHeight,st(t,"resize",(a=function(){q=Math.max(t.innerWidth||0,O.clientWidth)!==K.width||O.clientHeight!==y,y=O.clientHeight,q&&A.fillImgs()},u=99,f=function(){var t=new Date-p;t<u?d=setTimeout(f,u-t):(d=null,a())},function(){p=new Date,d||(d=setTimeout(f,u))})),st(r,"readystatechange",g)),A.picturefill=ht,A.fillImgs=ht,A.teardownRun=P,ht._=A,t.picturefillCFG={pf:A,push:function(t){var e=t.shift();"function"==typeof A[e]?A[e].apply(A,t):(z[e]=t[0],Q&&A.fillImgs({reselect:!0}))}};for(;G&&G.length;)t.picturefillCFG.push(G.shift());t.picturefill=ht,"object"==typeof module&&"object"==typeof module.exports?module.exports=ht:"function"==typeof define&&define.amd&&define("picturefill",function(){return ht}),A.supPicture||(N["image/webp"]=(S="image/webp",E="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",(C=new t.Image).onerror=function(){N[S]=!1,ht()},C.onload=function(){N[S]=1===C.width,ht()},C.src=E,"pending"))}(window,document),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.THREE={})}(this,function(t){function e(){}function V(t,e){this.x=t||0,this.y=e||0}function _t(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function xt(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1}function St(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function Tt(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function d(t,e,i,n,o,r,s,a,l,c){Object.defineProperty(this,"id",{value:sr++}),this.uuid=Wo.generateUUID(),this.name="",this.image=void 0!==t?t:d.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:d.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:1001,this.wrapT=void 0!==n?n:1001,this.magFilter=void 0!==o?o:1006,this.minFilter=void 0!==r?r:1008,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:1023,this.type=void 0!==a?a:1009,this.offset=new V(0,0),this.repeat=new V(1,1),this.center=new V(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:3e3,this.version=0,this.onUpdate=null}function Mt(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1}function C(t,e,i){this.width=t,this.height=e,this.scissor=new Mt(0,0,t,e),this.scissorTest=!1,this.viewport=new Mt(0,0,t,e),void 0===(i=i||{}).minFilter&&(i.minFilter=1006),this.texture=new d(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function n(t,e,i){C.call(this,t,e,i),this.activeMipMapLevel=this.activeCubeFace=0}function Et(t,e,i,n,o,r,s,a,l,c,h,u){d.call(this,null,r,s,a,l,c,n,o,h,u),this.image={data:t,width:e,height:i},this.magFilter=void 0!==l?l:1003,this.minFilter=void 0!==c?c:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function i(t,e){this.min=void 0!==t?t:new St(1/0,1/0,1/0),this.max=void 0!==e?e:new St(-1/0,-1/0,-1/0)}function s(t,e){this.center=void 0!==t?t:new St,this.radius=void 0!==e?e:0}function Ct(t,e){this.normal=void 0!==t?t:new St(1,0,0),this.constant=void 0!==e?e:0}function At(t,e,i,n,o,r){this.planes=[void 0!==t?t:new Ct,void 0!==e?e:new Ct,void 0!==i?i:new Ct,void 0!==n?n:new Ct,void 0!==o?o:new Ct,void 0!==r?r:new Ct]}function kt(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function Pt(u){var d=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),d.get(t)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var e=d.get(t);e&&(u.deleteBuffer(e.buffer),d.delete(t))},update:function(t,e){t.isInterleavedBufferAttribute&&(t=t.data);var i,n,o,r,s,a=d.get(t);if(void 0===a)d.set(t,(n=e,o=(i=t).array,r=i.dynamic?u.DYNAMIC_DRAW:u.STATIC_DRAW,s=u.createBuffer(),u.bindBuffer(n,s),u.bufferData(n,o,r),i.onUploadCallback(),n=u.FLOAT,o instanceof Float32Array?n=u.FLOAT:o instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):o instanceof Uint16Array?n=u.UNSIGNED_SHORT:o instanceof Int16Array?n=u.SHORT:o instanceof Uint32Array?n=u.UNSIGNED_INT:o instanceof Int32Array?n=u.INT:o instanceof Int8Array?n=u.BYTE:o instanceof Uint8Array&&(n=u.UNSIGNED_BYTE),{buffer:s,type:n,bytesPerElement:o.BYTES_PER_ELEMENT,version:i.version}));else if(a.version<t.version){var l=t,c=l.array,h=l.updateRange;u.bindBuffer(e,a.buffer),!1===l.dynamic?u.bufferData(e,c,u.STATIC_DRAW):-1===h.count?u.bufferSubData(e,0,c):0===h.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(u.bufferSubData(e,h.offset*c.BYTES_PER_ELEMENT,c.subarray(h.offset,h.offset+h.count)),h.count=-1),a.version=t.version}}}}function o(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||o.DefaultOrder}function r(){this.mask=1}function h(){Object.defineProperty(this,"id",{value:Dr++}),this.uuid=Wo.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=h.DefaultUp.clone();var t=new St,e=new o,i=new xt,n=new St(1,1,1);e.onChange(function(){i.setFromEuler(e,!1)}),i.onChange(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:n},modelViewMatrix:{value:new _t},normalMatrix:{value:new Tt}}),this.matrix=new _t,this.matrixWorld=new _t,this.matrixAutoUpdate=h.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new r,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function l(){h.call(this),this.type="Camera",this.matrixWorldInverse=new _t,this.projectionMatrix=new _t}function Lt(t,e,i,n,o,r){l.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=void 0!==o?o:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()}function z(t,e,i,n,o,r){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new St,this.vertexNormals=Array.isArray(n)?n:[],this.color=o&&o.isColor?o:new kt,this.vertexColors=Array.isArray(o)?o:[],this.materialIndex=void 0!==r?r:0}function x(){Object.defineProperty(this,"id",{value:Ur+=2}),this.uuid=Wo.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function v(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function a(t,e,i){v.call(this,new Int8Array(t),e,i)}function c(t,e,i){v.call(this,new Uint8Array(t),e,i)}function u(t,e,i){v.call(this,new Uint8ClampedArray(t),e,i)}function p(t,e,i){v.call(this,new Int16Array(t),e,i)}function Rt(t,e,i){v.call(this,new Uint16Array(t),e,i)}function f(t,e,i){v.call(this,new Int32Array(t),e,i)}function Dt(t,e,i){v.call(this,new Uint32Array(t),e,i)}function q(t,e,i){v.call(this,new Float32Array(t),e,i)}function m(t,e,i){v.call(this,new Float64Array(t),e,i)}function g(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function It(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}function Ot(){Object.defineProperty(this,"id",{value:Jr+=2}),this.uuid=Wo.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0}}function y(t,e,i,n,o,r){x.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:o,depthSegments:r},this.fromBufferGeometry(new Nt(t,e,i,n,o,r)),this.mergeVertices()}function Nt(t,e,i,n,o,r){function s(t,e,i,n,o,r,s,a,l,c,h){var u=r/l,d=s/c,p=r/2,f=s/2,m=a/2;s=l+1;var g,v,y=c+1,b=r=0,w=new St;for(v=0;v<y;v++){var _=v*d-f;for(g=0;g<s;g++)w[t]=(g*u-p)*n,w[e]=_*o,w[i]=m,T.push(w.x,w.y,w.z),w[t]=0,w[e]=0,w[i]=0<a?1:-1,M.push(w.x,w.y,w.z),E.push(g/l),E.push(1-v/c),r+=1}for(v=0;v<c;v++)for(g=0;g<l;g++)t=C+g+s*(v+1),e=C+(g+1)+s*(v+1),i=C+(g+1)+s*v,S.push(C+g+s*v,t,i),S.push(t,e,i),b+=6;x.addGroup(A,b,h),A+=b,C+=r}Ot.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:o,depthSegments:r};var x=this;t=t||1,e=e||1,i=i||1,n=Math.floor(n)||1,o=Math.floor(o)||1,r=Math.floor(r)||1;var S=[],T=[],M=[],E=[],C=0,A=0;s("z","y","x",-1,-1,i,e,t,r,o,0),s("z","y","x",1,-1,i,e,-t,r,o,1),s("x","z","y",1,1,t,i,e,n,r,2),s("x","z","y",1,-1,t,i,-e,n,r,3),s("x","y","z",1,-1,t,e,i,n,o,4),s("x","y","z",-1,-1,t,e,-i,n,o,5),this.setIndex(S),this.addAttribute("position",new q(T,3)),this.addAttribute("normal",new q(M,3)),this.addAttribute("uv",new q(E,2))}function b(t,e,i,n){x.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new zt(t,e,i,n)),this.mergeVertices()}function zt(t,e,i,n){Ot.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};var o=(t=t||1)/2,r=(e=e||1)/2,s=(i=Math.floor(i)||1)+1,a=(n=Math.floor(n)||1)+1,l=t/i,c=e/n,h=[],u=[],d=[],p=[];for(t=0;t<a;t++){var f=t*c-r;for(e=0;e<s;e++)u.push(e*l-o,-f,0),d.push(0,0,1),p.push(e/i),p.push(1-t/n)}for(t=0;t<n;t++)for(e=0;e<i;e++)o=e+s*(t+1),r=e+1+s*(t+1),a=e+1+s*t,h.push(e+s*t,o,a),h.push(o,r,a);this.setIndex(h),this.addAttribute("position",new q(u,3)),this.addAttribute("normal",new q(d,3)),this.addAttribute("uv",new q(p,2))}function w(){Object.defineProperty(this,"id",{value:Ss++}),this.uuid=Wo.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function Ht(t){w.call(this),this.type="MeshBasicMaterial",this.color=new kt(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(t)}function Bt(t){w.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function H(t,e){this.origin=void 0!==t?t:new St,this.direction=void 0!==e?e:new St}function _(t,e){this.start=void 0!==t?t:new St,this.end=void 0!==e?e:new St}function B(t,e,i){this.a=void 0!==t?t:new St,this.b=void 0!==e?e:new St,this.c=void 0!==i?i:new St}function Ft(t,e){h.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Ot,this.material=void 0!==e?e:new Ht({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function Ut(t,e){return Math.abs(e[1])-Math.abs(t[1])}function S(t,e,i,n,o,r,s,a,l,c){t=void 0!==t?t:[],d.call(this,t,void 0!==e?e:301,i,n,o,r,s,a,l,c),this.flipY=!1}function T(t,e,i){var n=t[0];if(n<=0||0<n)return t;var o=e*i,r=Es[o];if(void 0===r&&(r=new Float32Array(o),Es[o]=r),0!==e)for(n.toArray(r,0),n=1,o=0;n!==e;++n)o+=i,t[n].toArray(r,o);return r}function M(t,e){var i=Cs[e];void 0===i&&(i=new Int32Array(e),Cs[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocTextureUnit();return i}function E(t,e){t.uniform1f(this.addr,e)}function A(t,e){t.uniform1i(this.addr,e)}function k(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function P(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function L(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function R(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function D(t,e){void 0===e.elements?t.uniformMatrix3fv(this.addr,!1,e):(ks.set(e.elements),t.uniformMatrix3fv(this.addr,!1,ks))}function I(t,e){void 0===e.elements?t.uniformMatrix4fv(this.addr,!1,e):(As.set(e.elements),t.uniformMatrix4fv(this.addr,!1,As))}function O(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTexture2D(e||Ts,n)}function N(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTextureCube(e||Ms,n)}function F(t,e){t.uniform2iv(this.addr,e)}function U(t,e){t.uniform3iv(this.addr,e)}function W(t,e){t.uniform4iv(this.addr,e)}function j(t,e){t.uniform1fv(this.addr,e)}function $(t,e){t.uniform1iv(this.addr,e)}function G(t,e){t.uniform2fv(this.addr,T(e,this.size,2))}function Y(t,e){t.uniform3fv(this.addr,T(e,this.size,3))}function X(t,e){t.uniform4fv(this.addr,T(e,this.size,4))}function Z(t,e){t.uniformMatrix2fv(this.addr,!1,T(e,this.size,4))}function K(t,e){t.uniformMatrix3fv(this.addr,!1,T(e,this.size,9))}function J(t,e){t.uniformMatrix4fv(this.addr,!1,T(e,this.size,16))}function Q(t,e,i){var n=e.length,o=M(i,n);for(t.uniform1iv(this.addr,o),t=0;t!==n;++t)i.setTexture2D(e[t]||Ts,o[t])}function tt(t,e,i){var n=e.length,o=M(i,n);for(t.uniform1iv(this.addr,o),t=0;t!==n;++t)i.setTextureCube(e[t]||Ms,o[t])}function et(t,e,i){this.id=t,this.addr=i,this.setValue=function(t){switch(t){case 5126:return E;case 35664:return k;case 35665:return P;case 35666:return L;case 35674:return R;case 35675:return D;case 35676:return I;case 35678:case 36198:return O;case 35680:return N;case 5124:case 35670:return A;case 35667:case 35671:return F;case 35668:case 35672:return U;case 35669:case 35673:return W}}(e.type)}function it(t,e,i){this.id=t,this.addr=i,this.size=e.size,this.setValue=function(t){switch(t){case 5126:return j;case 35664:return G;case 35665:return Y;case 35666:return X;case 35674:return Z;case 35675:return K;case 35676:return J;case 35678:return Q;case 35680:return tt;case 5124:case 35670:return $;case 35667:case 35671:return F;case 35668:case 35672:return U;case 35669:case 35673:return W}}(e.type)}function nt(t){this.id=t,this.seq=[],this.map={}}function Wt(t,e,i){this.seq=[],this.map={},this.renderer=i,i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(var n=0;n<i;++n){var o=t.getActiveUniform(e,n),r=t.getUniformLocation(e,o.name),s=this,a=o.name,l=a.length;for(Ps.lastIndex=0;;){var c=Ps.exec(a),h=Ps.lastIndex,u=c[1],d=c[3];if("]"===c[2]&&(u|=0),void 0===d||"["===d&&h+2===l){a=s,o=void 0===d?new et(u,o,r):new it(u,o,r),a.seq.push(o),a.map[o.id]=o;break}void 0===(d=s.map[u])&&(d=new nt(u),u=s,s=d,u.seq.push(s),u.map[s.id]=s),s=d}}}function ot(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),!1===t.getShaderParameter(n,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(n),function(t){t=t.split("\n");for(var e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(i)),n}function rt(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+t)}}function st(t,e){return"vec4 "+t+"( vec4 value ) { return "+(e=rt(e))[0]+"ToLinear"+e[1]+"; }"}function at(t){return""!==t}function lt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function ct(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function ht(t){return t.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(t,e){if(void 0===(t=lr[e]))throw Error("Can not resolve #include <"+e+">");return ht(t)})}function ut(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,e,i,n){for(t="",e=parseInt(e);e<parseInt(i);e++)t+=n.replace(/\[ i \]/g,"[ "+e+" ]");return t})}function jt(t,e,i,n,o,r){var s=t.context,a=n.defines,l=o.vertexShader,c=o.fragmentShader,h="SHADOWMAP_TYPE_BASIC";1===r.shadowMapType?h="SHADOWMAP_TYPE_PCF":2===r.shadowMapType&&(h="SHADOWMAP_TYPE_PCF_SOFT");var u="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(n.envMap.mapping){case 301:case 302:u="ENVMAP_TYPE_CUBE";break;case 306:case 307:u="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:u="ENVMAP_TYPE_EQUIREC";break;case 305:u="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case 302:case 304:d="ENVMAP_MODE_REFRACTION"}switch(n.combine){case 0:p="ENVMAP_BLENDING_MULTIPLY";break;case 1:p="ENVMAP_BLENDING_MIX";break;case 2:p="ENVMAP_BLENDING_ADD"}}var f,m,g,v,y,b,w,_=0<t.gammaFactor?t.gammaFactor:1,x=(f=n.extensions,m=r,g=e,[(f=f||{}).derivatives||m.envMapCubeUV||m.bumpMap||m.normalMap||m.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(f.fragDepth||m.logarithmicDepthBuffer)&&g.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",f.drawBuffers&&g.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(f.shaderTextureLOD||m.envMap)&&g.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(at).join("\n")),S=function(t){var e,i=[];for(e in t){var n=t[e];!1!==n&&i.push("#define "+e+" "+n)}return i.join("\n")}(a),T=s.createProgram();return n.isRawShaderMaterial?(0<(a=[S].filter(at).join("\n")).length&&(a+="\n"),0<(e=[x,S].filter(at).join("\n")).length&&(e+="\n")):(a=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+o.name,S,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+_,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+h:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(at).join("\n"),e=[x,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+o.name,S,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+_,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+d:"",r.envMap?"#define "+p:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+h:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&e.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==r.toneMapping?"#define TONE_MAPPING":"",0!==r.toneMapping?lr.tonemapping_pars_fragment:"",0!==r.toneMapping?function(t,e){switch(e){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="Uncharted2";break;case 4:e="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?lr.encodings_pars_fragment:"",r.mapEncoding?st("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?st("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?st("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?(v="linearToOutputTexel",y=r.outputEncoding,"vec4 "+v+"( vec4 value ) { return LinearTo"+(y=rt(y))[0]+y[1]+"; }"):"",r.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(at).join("\n")),l=ct(l=lt(l=ht(l),r),r),c=ct(c=lt(c=ht(c),r),r),l=ut(l),c=e+(c=ut(c)),l=ot(s,s.VERTEX_SHADER,a+l),c=ot(s,s.FRAGMENT_SHADER,c),s.attachShader(T,l),s.attachShader(T,c),void 0!==n.index0AttributeName?s.bindAttribLocation(T,0,n.index0AttributeName):!0===r.morphTargets&&s.bindAttribLocation(T,0,"position"),s.linkProgram(T),r=s.getProgramInfoLog(T).trim(),o=s.getShaderInfoLog(l).trim(),h=s.getShaderInfoLog(c).trim(),d=u=!0,!1===s.getProgramParameter(T,s.LINK_STATUS)?(u=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(T,s.VALIDATE_STATUS),"gl.getProgramInfoLog",r,o,h)):""!==r?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",r):""!==o&&""!==h||(d=!1),d&&(this.diagnostics={runnable:u,material:n,programLog:r,vertexShader:{log:o,prefix:a},fragmentShader:{log:h,prefix:e}}),s.deleteShader(l),s.deleteShader(c),this.getUniforms=function(){return void 0===b&&(b=new Wt(s,T,t)),b},this.getAttributes=function(){if(void 0===w){for(var t={},e=s.getProgramParameter(T,s.ACTIVE_ATTRIBUTES),i=0;i<e;i++){var n=s.getActiveAttrib(T,i).name;t[n]=s.getAttribLocation(T,n)}w=t}return w},this.destroy=function(){s.deleteProgram(T),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Xs++,this.code=i,this.usedTimes=1,this.program=T,this.vertexShader=l,this.fragmentShader=c,this}function dt(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function pt(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function $t(){var i={};return{get:function(t,e){return t=t.id+","+e.id,void 0===(e=i[t])&&(e=new function(){var s=[],a=0,l=[],c=[];return{opaque:l,transparent:c,init:function(){a=0,l.length=0,c.length=0},push:function(t,e,i,n,o){var r=s[a];void 0===r?(r={id:t.id,object:t,geometry:e,material:i,program:i.program,renderOrder:t.renderOrder,z:n,group:o},s[a]=r):(r.id=t.id,r.object=t,r.geometry=e,r.material=i,r.program=i.program,r.renderOrder=t.renderOrder,r.z=n,r.group=o),(!0===i.transparent?c:l).push(r),a++},sort:function(){1<l.length&&l.sort(dt),1<c.length&&c.sort(pt)}}},i[t]=e),e},dispose:function(){i={}}}}function ft(){var b=new function(){var i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];switch(t.type){case"DirectionalLight":var e={direction:new St,color:new kt,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new V};break;case"SpotLight":e={position:new St,direction:new St,color:new kt,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new V};break;case"PointLight":e={position:new St,color:new kt,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new V,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":e={direction:new St,skyColor:new kt,groundColor:new kt};break;case"RectAreaLight":e={color:new kt,position:new St,halfWidth:new St,halfHeight:new St}}return i[t.id]=e}}},w={id:Zs++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},_=new St,x=new _t,S=new _t;return{setup:function(t,e,i){var n=0,o=0,r=0,s=0,a=0,l=0,c=0,h=0;i=i.matrixWorldInverse;for(var u=0,d=t.length;u<d;u++){var p=t[u],f=p.color,m=p.intensity,g=p.distance,v=p.shadow&&p.shadow.map?p.shadow.map.texture:null;if(p.isAmbientLight)n+=f.r*m,o+=f.g*m,r+=f.b*m;else if(p.isDirectionalLight){var y=b.get(p);y.color.copy(p.color).multiplyScalar(p.intensity),y.direction.setFromMatrixPosition(p.matrixWorld),_.setFromMatrixPosition(p.target.matrixWorld),y.direction.sub(_),y.direction.transformDirection(i),(y.shadow=p.castShadow)&&(f=p.shadow,y.shadowBias=f.bias,y.shadowRadius=f.radius,y.shadowMapSize=f.mapSize),w.directionalShadowMap[s]=v,w.directionalShadowMatrix[s]=p.shadow.matrix,w.directional[s]=y,s++}else p.isSpotLight?((y=b.get(p)).position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(i),y.color.copy(f).multiplyScalar(m),y.distance=g,y.direction.setFromMatrixPosition(p.matrixWorld),_.setFromMatrixPosition(p.target.matrixWorld),y.direction.sub(_),y.direction.transformDirection(i),y.coneCos=Math.cos(p.angle),y.penumbraCos=Math.cos(p.angle*(1-p.penumbra)),y.decay=0===p.distance?0:p.decay,(y.shadow=p.castShadow)&&(f=p.shadow,y.shadowBias=f.bias,y.shadowRadius=f.radius,y.shadowMapSize=f.mapSize),w.spotShadowMap[l]=v,w.spotShadowMatrix[l]=p.shadow.matrix,w.spot[l]=y,l++):p.isRectAreaLight?((y=b.get(p)).color.copy(f).multiplyScalar(m),y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(i),S.identity(),x.copy(p.matrixWorld),x.premultiply(i),S.extractRotation(x),y.halfWidth.set(.5*p.width,0,0),y.halfHeight.set(0,.5*p.height,0),y.halfWidth.applyMatrix4(S),y.halfHeight.applyMatrix4(S),w.rectArea[c]=y,c++):p.isPointLight?((y=b.get(p)).position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(i),y.color.copy(p.color).multiplyScalar(p.intensity),y.distance=p.distance,y.decay=0===p.distance?0:p.decay,(y.shadow=p.castShadow)&&(f=p.shadow,y.shadowBias=f.bias,y.shadowRadius=f.radius,y.shadowMapSize=f.mapSize,y.shadowCameraNear=f.camera.near,y.shadowCameraFar=f.camera.far),w.pointShadowMap[a]=v,w.pointShadowMatrix[a]=p.shadow.matrix,w.point[a]=y,a++):p.isHemisphereLight&&((y=b.get(p)).direction.setFromMatrixPosition(p.matrixWorld),y.direction.transformDirection(i),y.direction.normalize(),y.skyColor.copy(p.color).multiplyScalar(m),y.groundColor.copy(p.groundColor).multiplyScalar(m),w.hemi[h]=y,h++)}w.ambient[0]=n,w.ambient[1]=o,w.ambient[2]=r,w.directional.length=s,w.spot.length=l,w.rectArea.length=c,w.point.length=a,w.hemi.length=h,w.hash=w.id+","+s+","+a+","+l+","+c+","+h+","+e.length},state:w}}function Gt(){var i={};return{get:function(t,e){return t=t.id+","+e.id,void 0===(e=i[t])&&(e=new function(){var e=new ft,i=[],n=[],o=[];return{init:function(){i.length=0,n.length=0,o.length=0},state:{lightsArray:i,shadowsArray:n,spritesArray:o,lights:e},setupLights:function(t){e.setup(i,n,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){n.push(t)},pushSprite:function(t){o.push(t)}}},i[t]=e),e},dispose:function(){i={}}}}function mt(t){w.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(t)}function gt(t){w.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new St,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.lights=this.fog=!1,this.setValues(t)}function Vt(d,u,t){function p(t,e,i,n,o,r){var s=t.geometry,a=c,l=t.customDepthMaterial;return i&&(a=h,l=t.customDistanceMaterial),l?a=l:(l=!1,e.morphTargets&&(s&&s.isBufferGeometry?l=s.morphAttributes&&s.morphAttributes.position&&0<s.morphAttributes.position.length:s&&s.isGeometry&&(l=s.morphTargets&&0<s.morphTargets.length)),t.isSkinnedMesh&&!1===e.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t),s=0,l&&(s|=1),(t=t.isSkinnedMesh&&e.skinning)&&(s|=2),a=a[s]),d.localClippingEnabled&&!0===e.clipShadows&&0!==e.clippingPlanes.length&&(s=a.uuid,l=e.uuid,void 0===(t=_[s])&&(t={},_[s]=t),void 0===(s=t[l])&&(s=a.clone(),t[l]=s),a=s),a.visible=e.visible,a.wireframe=e.wireframe,a.side=null!=e.shadowSide?e.shadowSide:x[e.side],a.clipShadows=e.clipShadows,a.clippingPlanes=e.clippingPlanes,a.clipIntersection=e.clipIntersection,a.wireframeLinewidth=e.wireframeLinewidth,a.linewidth=e.linewidth,i&&a.isMeshDistanceMaterial&&(a.referencePosition.copy(n),a.nearDistance=o,a.farDistance=r),a}function f(t,e,i,n){if(!1!==t.visible){if(t.layers.test(e.layers)&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(!t.frustumCulled||m.intersectsObject(t))){t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld);var o=u.update(t),r=t.material;if(Array.isArray(r))for(var s=o.groups,a=0,l=s.length;a<l;a++){var c=s[a],h=r[c.materialIndex];h&&h.visible&&(h=p(t,h,n,w,i.near,i.far),d.renderBufferDirect(i,null,o,h,t,c))}else r.visible&&(h=p(t,r,n,w,i.near,i.far),d.renderBufferDirect(i,null,o,h,t,null))}for(o=0,r=(t=t.children).length;o<r;o++)f(t[o],e,i,n)}}var m=new At,g=new _t,v=new V,y=new V(t,t),b=new St,w=new St,c=Array(4),h=Array(4),_={},x={0:1,1:0,2:2},S=[new St(1,0,0),new St(-1,0,0),new St(0,0,1),new St(0,0,-1),new St(0,1,0),new St(0,-1,0)],T=[new St(0,1,0),new St(0,1,0),new St(0,1,0),new St(0,1,0),new St(0,0,1),new St(0,0,-1)],M=[new Mt,new Mt,new Mt,new Mt,new Mt,new Mt];for(t=0;4!==t;++t){var e=0!=(1&t),i=0!=(2&t),n=new mt({depthPacking:3201,morphTargets:e,skinning:i});c[t]=n,e=new gt({morphTargets:e,skinning:i}),h[t]=e}var E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,e,i){if(!1!==E.enabled&&(!1!==E.autoUpdate||!1!==E.needsUpdate)&&0!==t.length){var n=d.state;n.disable(d.context.BLEND),n.buffers.color.setClear(1,1,1,1),n.buffers.depth.setTest(!0),n.setScissorTest(!1);for(var o,r=0,s=t.length;r<s;r++){var a=t[r];o=a.shadow;var l=a&&a.isPointLight;if(void 0===o)console.warn("THREE.WebGLShadowMap:",a,"has no shadow.");else{var c=o.camera;if(v.copy(o.mapSize),v.min(y),l){var h=v.x,u=v.y;M[0].set(2*h,u,h,u),M[1].set(0,u,h,u),M[2].set(3*h,u,h,u),M[3].set(h,u,h,u),M[4].set(3*h,0,h,u),M[5].set(h,0,h,u),v.x*=4,v.y*=2}for(null===o.map&&(o.map=new C(v.x,v.y,{minFilter:1003,magFilter:1003,format:1023}),o.map.texture.name=a.name+".shadowMap",c.updateProjectionMatrix()),o.isSpotLightShadow&&o.update(a),h=o.map,u=o.matrix,w.setFromMatrixPosition(a.matrixWorld),c.position.copy(w),l?(o=6,u.makeTranslation(-w.x,-w.y,-w.z)):(o=1,b.setFromMatrixPosition(a.target.matrixWorld),c.lookAt(b),c.updateMatrixWorld(),u.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),u.multiply(c.projectionMatrix),u.multiply(c.matrixWorldInverse)),d.setRenderTarget(h),d.clear(),a=0;a<o;a++)l&&(b.copy(c.position),b.add(S[a]),c.up.copy(T[a]),c.lookAt(b),c.updateMatrixWorld(),n.viewport(M[a])),g.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),m.setFromMatrix(g),f(e,i,c,l)}}E.needsUpdate=!1}}}function qt(t,e,i,n,o,r,s,a,l){d.call(this,t,e,i,n,o,r,s,a,l),this.needsUpdate=!0}function Yt(i,n){return{convert:function(t){if(1e3===t)return i.REPEAT;if(1001===t)return i.CLAMP_TO_EDGE;if(1002===t)return i.MIRRORED_REPEAT;if(1003===t)return i.NEAREST;if(1004===t)return i.NEAREST_MIPMAP_NEAREST;if(1005===t)return i.NEAREST_MIPMAP_LINEAR;if(1006===t)return i.LINEAR;if(1007===t)return i.LINEAR_MIPMAP_NEAREST;if(1008===t)return i.LINEAR_MIPMAP_LINEAR;if(1009===t)return i.UNSIGNED_BYTE;if(1017===t)return i.UNSIGNED_SHORT_4_4_4_4;if(1018===t)return i.UNSIGNED_SHORT_5_5_5_1;if(1019===t)return i.UNSIGNED_SHORT_5_6_5;if(1010===t)return i.BYTE;if(1011===t)return i.SHORT;if(1012===t)return i.UNSIGNED_SHORT;if(1013===t)return i.INT;if(1014===t)return i.UNSIGNED_INT;if(1015===t)return i.FLOAT;if(1016===t){var e=n.get("OES_texture_half_float");if(null!==e)return e.HALF_FLOAT_OES}if(1021===t)return i.ALPHA;if(1022===t)return i.RGB;if(1023===t)return i.RGBA;if(1024===t)return i.LUMINANCE;if(1025===t)return i.LUMINANCE_ALPHA;if(1026===t)return i.DEPTH_COMPONENT;if(1027===t)return i.DEPTH_STENCIL;if(100===t)return i.FUNC_ADD;if(101===t)return i.FUNC_SUBTRACT;if(102===t)return i.FUNC_REVERSE_SUBTRACT;if(200===t)return i.ZERO;if(201===t)return i.ONE;if(202===t)return i.SRC_COLOR;if(203===t)return i.ONE_MINUS_SRC_COLOR;if(204===t)return i.SRC_ALPHA;if(205===t)return i.ONE_MINUS_SRC_ALPHA;if(206===t)return i.DST_ALPHA;if(207===t)return i.ONE_MINUS_DST_ALPHA;if(208===t)return i.DST_COLOR;if(209===t)return i.ONE_MINUS_DST_COLOR;if(210===t)return i.SRC_ALPHA_SATURATE;if((33776===t||33777===t||33778===t||33779===t)&&null!==(e=n.get("WEBGL_compressed_texture_s3tc"))){if(33776===t)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===t||35841===t||35842===t||35843===t)&&null!==(e=n.get("WEBGL_compressed_texture_pvrtc"))){if(35840===t)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t&&null!==(e=n.get("WEBGL_compressed_texture_etc1")))return e.COMPRESSED_RGB_ETC1_WEBGL;if((37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t)&&null!==(e=n.get("WEBGL_compressed_texture_astc")))return t;if((103===t||104===t)&&null!==(e=n.get("EXT_blend_minmax"))){if(103===t)return e.MIN_EXT;if(104===t)return e.MAX_EXT}return 1020===t&&null!==(e=n.get("WEBGL_depth_texture"))?e.UNSIGNED_INT_24_8_WEBGL:0}}}function vt(t,e,i,n){l.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function yt(t){vt.call(this),this.cameras=t||[]}function Xt(i){function t(){if(null!==o&&o.isPresenting){var t=o.getEyeParameters("left"),e=t.renderWidth;t=t.renderHeight,m=i.getPixelRatio(),f=i.getSize(),i.setDrawingBufferSize(2*e,t,1)}else n.enabled&&i.setDrawingBufferSize(f.width,f.height,m)}var n=this,o=null,r=null,s=null,a=new _t,l=new _t;"undefined"!=typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData);var c=new _t,h=new xt,u=new St,d=new vt;d.bounds=new Mt(0,0,.5,1),d.layers.enable(1);var p=new vt;p.bounds=new Mt(.5,0,.5,1),p.layers.enable(2);var f,m,g=new yt([d,p]);g.layers.enable(1),g.layers.enable(2),"undefined"!=typeof window&&window.addEventListener("vrdisplaypresentchange",t,!1),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return o},this.setDevice=function(t){void 0!==t&&(o=t)},this.setPoseTarget=function(t){void 0!==t&&(s=t)},this.getCamera=function(t){if(null===o)return t;o.depthNear=t.near,o.depthFar=t.far,o.getFrameData(r);var e=o.stageParameters;e?a.fromArray(e.sittingToStandingTransform):a.makeTranslation(0,n.userHeight,0),e=r.pose;var i=null!==s?s:t;return i.matrix.copy(a),i.matrix.decompose(i.position,i.quaternion,i.scale),null!==e.orientation&&(h.fromArray(e.orientation),i.quaternion.multiply(h)),null!==e.position&&(h.setFromRotationMatrix(a),u.fromArray(e.position),u.applyQuaternion(h),i.position.add(u)),i.updateMatrixWorld(),!1===o.isPresenting?t:(d.near=t.near,p.near=t.near,d.far=t.far,p.far=t.far,g.matrixWorld.copy(t.matrixWorld),g.matrixWorldInverse.copy(t.matrixWorldInverse),d.matrixWorldInverse.fromArray(r.leftViewMatrix),p.matrixWorldInverse.fromArray(r.rightViewMatrix),l.getInverse(a),d.matrixWorldInverse.multiply(l),p.matrixWorldInverse.multiply(l),null!==(t=i.parent)&&(c.getInverse(t.matrixWorld),d.matrixWorldInverse.multiply(c),p.matrixWorldInverse.multiply(c)),d.matrixWorld.getInverse(d.matrixWorldInverse),p.matrixWorld.getInverse(p.matrixWorldInverse),d.projectionMatrix.fromArray(r.leftProjectionMatrix),p.projectionMatrix.fromArray(r.rightProjectionMatrix),g.projectionMatrix.copy(d.projectionMatrix),(t=o.getLayers()).length&&(null!==(t=t[0]).leftBounds&&4===t.leftBounds.length&&d.bounds.fromArray(t.leftBounds),null!==t.rightBounds&&4===t.rightBounds.length&&p.bounds.fromArray(t.rightBounds)),g)},this.getStandingMatrix=function(){return a},this.submitFrame=function(){o&&o.isPresenting&&o.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",t)}}function bt(t){function e(){(M=new function(i){var n={};return{get:function(t){if(void 0!==n[t])return n[t];switch(t){case"WEBGL_depth_texture":var e=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":e=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":e=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":e=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":e=i.getExtension("WEBGL_compressed_texture_etc1");break;default:e=i.getExtension(t)}return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),n[t]=e}}}(pt)).get("WEBGL_depth_texture"),M.get("OES_texture_float"),M.get("OES_texture_float_linear"),M.get("OES_texture_half_float"),M.get("OES_texture_half_float_linear"),M.get("OES_standard_derivatives"),M.get("OES_element_index_uint"),M.get("ANGLE_instanced_arrays"),W=new Yt(pt,M),E=new function(e,i,t){function n(t){if("highp"===t){if(0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision)return"highp";t="mediump"}return"mediump"===t&&0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision?"mediump":"lowp"}var o,r=void 0!==t.precision?t.precision:"highp",s=n(r);s!==r&&(console.warn("THREE.WebGLRenderer:",r,"not supported, using",s,"instead."),r=s),t=!0===t.logarithmicDepthBuffer,s=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);var a=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_TEXTURE_SIZE),c=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),h=e.getParameter(e.MAX_VERTEX_ATTRIBS),u=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),d=e.getParameter(e.MAX_VARYING_VECTORS),p=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),f=0<a,m=!!i.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==o)return o;var t=i.get("EXT_texture_filter_anisotropic");return o=null!==t?e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:r,logarithmicDepthBuffer:t,maxTextures:s,maxVertexTextures:a,maxTextureSize:l,maxCubemapSize:c,maxAttributes:h,maxVertexUniforms:u,maxVaryings:d,maxFragmentUniforms:p,vertexTextures:f,floatFragmentTextures:m,floatVertexTextures:f&&m}}(pt,M,t),(C=new function(h,i,l){function t(t,e,i){var n=new Uint8Array(4),o=h.createTexture();for(h.bindTexture(t,o),h.texParameteri(t,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(t,h.TEXTURE_MAG_FILTER,h.NEAREST),t=0;t<i;t++)h.texImage2D(e+t,0,h.RGBA,1,1,0,h.RGBA,h.UNSIGNED_BYTE,n);return o}function u(t){!0!==y[t]&&(h.enable(t),y[t]=!0)}function d(t){!1!==y[t]&&(h.disable(t),y[t]=!1)}function n(t,e,i,n,o,r,s,a){if(0!==t?u(h.BLEND):d(h.BLEND),5!==t){if(t!==_||a!==A)switch(t){case 2:a?(h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):(h.blendEquation(h.FUNC_ADD),h.blendFunc(h.SRC_ALPHA,h.ONE));break;case 3:a?(h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ZERO,h.ZERO,h.ONE_MINUS_SRC_COLOR,h.ONE_MINUS_SRC_ALPHA)):(h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ZERO,h.ONE_MINUS_SRC_COLOR));break;case 4:a?(h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ZERO,h.SRC_COLOR,h.ZERO,h.SRC_ALPHA)):(h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ZERO,h.SRC_COLOR));break;default:a?(h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA)):(h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA))}C=E=M=T=S=x=null}else o=o||e,r=r||i,s=s||n,e===x&&o===M||(h.blendEquationSeparate(l.convert(e),l.convert(o)),x=e,M=o),i===S&&n===T&&r===E&&s===C||(h.blendFuncSeparate(l.convert(i),l.convert(n),l.convert(r),l.convert(s)),S=i,T=n,E=r,C=s);_=t,A=a}function o(t){k!==t&&(t?h.frontFace(h.CW):h.frontFace(h.CCW),k=t)}function e(t){0!==t?(u(h.CULL_FACE),t!==P&&(1===t?h.cullFace(h.BACK):2===t?h.cullFace(h.FRONT):h.cullFace(h.FRONT_AND_BACK))):d(h.CULL_FACE),P=t}function r(t,e,i){t?(u(h.POLYGON_OFFSET_FILL),(R!==e||D!==i)&&(h.polygonOffset(e,i),R=e,D=i)):d(h.POLYGON_OFFSET_FILL)}function s(t){void 0===t&&(t=h.TEXTURE0+I-1),N!==t&&(h.activeTexture(t),N=t)}var a=new function(){var e=!1,r=new Mt,i=null,s=new Mt(0,0,0,0);return{setMask:function(t){i===t||e||(h.colorMask(t,t,t,t),i=t)},setLocked:function(t){e=t},setClear:function(t,e,i,n,o){!0===o&&(t*=n,e*=n,i*=n),r.set(t,e,i,n),!1===s.equals(r)&&(h.clearColor(t,e,i,n),s.copy(r))},reset:function(){e=!1,i=null,s.set(-1,0,0,0)}}},c=new function(){var e=!1,i=null,n=null,o=null;return{setTest:function(t){t?u(h.DEPTH_TEST):d(h.DEPTH_TEST)},setMask:function(t){i===t||e||(h.depthMask(t),i=t)},setFunc:function(t){if(n!==t){if(t)switch(t){case 0:h.depthFunc(h.NEVER);break;case 1:h.depthFunc(h.ALWAYS);break;case 2:h.depthFunc(h.LESS);break;case 3:h.depthFunc(h.LEQUAL);break;case 4:h.depthFunc(h.EQUAL);break;case 5:h.depthFunc(h.GEQUAL);break;case 6:h.depthFunc(h.GREATER);break;case 7:h.depthFunc(h.NOTEQUAL);break;default:h.depthFunc(h.LEQUAL)}else h.depthFunc(h.LEQUAL);n=t}},setLocked:function(t){e=t},setClear:function(t){o!==t&&(h.clearDepth(t),o=t)},reset:function(){e=!1,o=n=i=null}}},p=new function(){var e=!1,i=null,n=null,o=null,r=null,s=null,a=null,l=null,c=null;return{setTest:function(t){t?u(h.STENCIL_TEST):d(h.STENCIL_TEST)},setMask:function(t){i===t||e||(h.stencilMask(t),i=t)},setFunc:function(t,e,i){n===t&&o===e&&r===i||(h.stencilFunc(t,e,i),n=t,o=e,r=i)},setOp:function(t,e,i){s===t&&a===e&&l===i||(h.stencilOp(t,e,i),s=t,a=e,l=i)},setLocked:function(t){e=t},setClear:function(t){c!==t&&(h.clearStencil(t),c=t)},reset:function(){e=!1,c=l=a=s=r=o=n=i=null}}},f=h.getParameter(h.MAX_VERTEX_ATTRIBS),m=new Uint8Array(f),g=new Uint8Array(f),v=new Uint8Array(f),y={},b=null,w=null,_=null,x=null,S=null,T=null,M=null,E=null,C=null,A=!1,k=null,P=null,L=null,R=null,D=null,I=h.getParameter(h.MAX_COMBINED_TEXTURE_IMAGE_UNITS),O=!1;f=0,-1!==(f=h.getParameter(h.VERSION)).indexOf("WebGL")?(f=parseFloat(/^WebGL ([0-9])/.exec(f)[1]),O=1<=f):-1!==f.indexOf("OpenGL ES")&&(f=parseFloat(/^OpenGL ES ([0-9])/.exec(f)[1]),O=2<=f);var N=null,z={},H=new Mt,B=new Mt,F={};return F[h.TEXTURE_2D]=t(h.TEXTURE_2D,h.TEXTURE_2D,1),F[h.TEXTURE_CUBE_MAP]=t(h.TEXTURE_CUBE_MAP,h.TEXTURE_CUBE_MAP_POSITIVE_X,6),a.setClear(0,0,0,1),c.setClear(1),p.setClear(0),u(h.DEPTH_TEST),c.setFunc(3),o(!1),e(1),u(h.CULL_FACE),u(h.BLEND),n(1),{buffers:{color:a,depth:c,stencil:p},initAttributes:function(){for(var t=0,e=m.length;t<e;t++)m[t]=0},enableAttribute:function(t){m[t]=1,0===g[t]&&(h.enableVertexAttribArray(t),g[t]=1),0!==v[t]&&(i.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(t,0),v[t]=0)},enableAttributeAndDivisor:function(t,e){m[t]=1,0===g[t]&&(h.enableVertexAttribArray(t),g[t]=1),v[t]!==e&&(i.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(t,e),v[t]=e)},disableUnusedAttributes:function(){for(var t=0,e=g.length;t!==e;++t)g[t]!==m[t]&&(h.disableVertexAttribArray(t),g[t]=0)},enable:u,disable:d,getCompressedTextureFormats:function(){if(null===b&&(b=[],i.get("WEBGL_compressed_texture_pvrtc")||i.get("WEBGL_compressed_texture_s3tc")||i.get("WEBGL_compressed_texture_etc1")||i.get("WEBGL_compressed_texture_astc")))for(var t=h.getParameter(h.COMPRESSED_TEXTURE_FORMATS),e=0;e<t.length;e++)b.push(t[e]);return b},useProgram:function(t){return w!==t&&(h.useProgram(t),w=t,!0)},setBlending:n,setMaterial:function(t,e){2===t.side?d(h.CULL_FACE):u(h.CULL_FACE);var i=1===t.side;e&&(i=!i),o(i),!0===t.transparent?n(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):n(0),c.setFunc(t.depthFunc),c.setTest(t.depthTest),c.setMask(t.depthWrite),a.setMask(t.colorWrite),r(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:o,setCullFace:e,setLineWidth:function(t){t!==L&&(O&&h.lineWidth(t),L=t)},setPolygonOffset:r,setScissorTest:function(t){t?u(h.SCISSOR_TEST):d(h.SCISSOR_TEST)},activeTexture:s,bindTexture:function(t,e){null===N&&s();var i=z[N];void 0===i&&(i={type:void 0,texture:void 0},z[N]=i),i.type===t&&i.texture===e||(h.bindTexture(t,e||F[t]),i.type=t,i.texture=e)},compressedTexImage2D:function(){try{h.compressedTexImage2D.apply(h,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{h.texImage2D.apply(h,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===H.equals(t)&&(h.scissor(t.x,t.y,t.z,t.w),H.copy(t))},viewport:function(t){!1===B.equals(t)&&(h.viewport(t.x,t.y,t.z,t.w),B.copy(t))},reset:function(){for(var t=0;t<g.length;t++)1===g[t]&&(h.disableVertexAttribArray(t),g[t]=0);y={},N=b=null,z={},P=k=_=w=null,a.reset(),c.reset(),p.reset()}}}(pt,M,W)).scissor(J.copy(rt).multiplyScalar(nt)),C.viewport(K.copy(ot).multiplyScalar(nt)),A=new function(n){var o={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:o,programs:null,autoReset:!0,reset:function(){o.frame++,o.calls=0,o.triangles=0,o.points=0,o.lines=0},update:function(t,e,i){switch(i=i||1,o.calls++,e){case n.TRIANGLES:o.triangles+=t/3*i;break;case n.TRIANGLE_STRIP:case n.TRIANGLE_FAN:o.triangles+=i*(t-2);break;case n.LINES:o.lines+=t/2*i;break;case n.LINE_STRIP:o.lines+=i*(t-1);break;case n.LINE_LOOP:o.lines+=i*t;break;case n.POINTS:o.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e)}}}}(pt),k=new function(){var n=new WeakMap;return{get:function(t){var e=n.get(t);return void 0===e&&(e={},n.set(t,e)),e},remove:function(t){n.delete(t)},update:function(t,e,i){n.get(t)[e]=i},dispose:function(){n=new WeakMap}}},P=new function(f,n,m,g,v,y,b){function w(t,e){if(t.width>e||t.height>e){if("data"in t)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+t.width+"x"+t.height+").");e/=Math.max(t.width,t.height);var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(t.width*e),i.height=Math.floor(t.height*e),i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+i.width+"x"+i.height,t),i}return t}function _(t){return Wo.isPowerOfTwo(t.width)&&Wo.isPowerOfTwo(t.height)}function x(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function S(t,e,i,n){f.generateMipmap(t),g.get(e).__maxMipLevel=Math.log2(Math.max(i,n))}function o(t){return 1003===t||1004===t||1005===t?f.NEAREST:f.LINEAR}function T(t){(t=t.target).removeEventListener("dispose",T);t:{var e=g.get(t);if(t.image&&e.__image__webglTextureCube)f.deleteTexture(e.__image__webglTextureCube);else{if(void 0===e.__webglInit)break t;f.deleteTexture(e.__webglTexture)}g.remove(t)}t.isVideoTexture&&delete d[t.id],b.memory.textures--}function s(t){(t=t.target).removeEventListener("dispose",s);var e=g.get(t),i=g.get(t.texture);if(t){if(void 0!==i.__webglTexture&&f.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(i=0;i<6;i++)f.deleteFramebuffer(e.__webglFramebuffer[i]),e.__webglDepthbuffer&&f.deleteRenderbuffer(e.__webglDepthbuffer[i]);else f.deleteFramebuffer(e.__webglFramebuffer),e.__webglDepthbuffer&&f.deleteRenderbuffer(e.__webglDepthbuffer);g.remove(t.texture),g.remove(t)}b.memory.textures--}function a(t,e){var i=g.get(t);if(t.isVideoTexture){var n=t.id,o=b.render.frame;d[n]!==o&&(d[n]=o,t.update())}if(0<t.version&&i.__version!==t.version)if(void 0===(n=t.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==n.complete){void 0===i.__webglInit&&(i.__webglInit=!0,t.addEventListener("dispose",T),i.__webglTexture=f.createTexture(),b.memory.textures++),m.activeTexture(f.TEXTURE0+e),m.bindTexture(f.TEXTURE_2D,i.__webglTexture),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,t.flipY),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),f.pixelStorei(f.UNPACK_ALIGNMENT,t.unpackAlignment),e=w(t.image,v.maxTextureSize),(1001!==t.wrapS||1001!==t.wrapT||1003!==t.minFilter&&1006!==t.minFilter)&&!1===_(e)&&(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap)&&(void 0===h&&(h=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),h.width=Wo.floorPowerOfTwo(e.width),h.height=Wo.floorPowerOfTwo(e.height),h.getContext("2d").drawImage(e,0,0,h.width,h.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+h.width+"x"+h.height,e),e=h),n=_(e),o=y.convert(t.format);var r=y.convert(t.type);M(f.TEXTURE_2D,t,n);var s=t.mipmaps;if(t.isDepthTexture){var a=f.DEPTH_COMPONENT;if(1015===t.type){if(!u)throw Error("Float Depth Texture only supported in WebGL2.0");a=f.DEPTH_COMPONENT32F}else u&&(a=f.DEPTH_COMPONENT16);1026===t.format&&a===f.DEPTH_COMPONENT&&1012!==t.type&&1014!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),t.type=1012,r=y.convert(t.type)),1027===t.format&&(a=f.DEPTH_STENCIL,1020!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),t.type=1020,r=y.convert(t.type))),m.texImage2D(f.TEXTURE_2D,0,a,e.width,e.height,0,o,r,null)}else if(t.isDataTexture)if(0<s.length&&n){for(var l=0,c=s.length;l<c;l++)a=s[l],m.texImage2D(f.TEXTURE_2D,l,o,a.width,a.height,0,o,r,a.data);t.generateMipmaps=!1,i.__maxMipLevel=s.length-1}else m.texImage2D(f.TEXTURE_2D,0,o,e.width,e.height,0,o,r,e.data),i.__maxMipLevel=0;else if(t.isCompressedTexture){for(l=0,c=s.length;l<c;l++)a=s[l],1023!==t.format&&1022!==t.format?-1<m.getCompressedTextureFormats().indexOf(o)?m.compressedTexImage2D(f.TEXTURE_2D,l,o,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):m.texImage2D(f.TEXTURE_2D,l,o,a.width,a.height,0,o,r,a.data);i.__maxMipLevel=s.length-1}else if(0<s.length&&n){for(l=0,c=s.length;l<c;l++)a=s[l],m.texImage2D(f.TEXTURE_2D,l,o,o,r,a);t.generateMipmaps=!1,i.__maxMipLevel=s.length-1}else m.texImage2D(f.TEXTURE_2D,0,o,o,r,e),i.__maxMipLevel=0;return x(t,n)&&S(f.TEXTURE_2D,t,e.width,e.height),i.__version=t.version,void(t.onUpdate&&t.onUpdate(t))}console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}m.activeTexture(f.TEXTURE0+e),m.bindTexture(f.TEXTURE_2D,i.__webglTexture)}function M(t,e,i){i?(f.texParameteri(t,f.TEXTURE_WRAP_S,y.convert(e.wrapS)),f.texParameteri(t,f.TEXTURE_WRAP_T,y.convert(e.wrapT)),f.texParameteri(t,f.TEXTURE_MAG_FILTER,y.convert(e.magFilter)),f.texParameteri(t,f.TEXTURE_MIN_FILTER,y.convert(e.minFilter))):(f.texParameteri(t,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(t,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),1001===e.wrapS&&1001===e.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",e),f.texParameteri(t,f.TEXTURE_MAG_FILTER,o(e.magFilter)),f.texParameteri(t,f.TEXTURE_MIN_FILTER,o(e.minFilter)),1003!==e.minFilter&&1006!==e.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",e)),!(i=n.get("EXT_texture_filter_anisotropic"))||1015===e.type&&null===n.get("OES_texture_float_linear")||1016===e.type&&null===n.get("OES_texture_half_float_linear")||!(1<e.anisotropy||g.get(e).__currentAnisotropy)||(f.texParameterf(t,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e.anisotropy,v.getMaxAnisotropy())),g.get(e).__currentAnisotropy=e.anisotropy)}function l(t,e,i,n){var o=y.convert(e.texture.format),r=y.convert(e.texture.type);m.texImage2D(n,0,o,e.width,e.height,0,o,r,null),f.bindFramebuffer(f.FRAMEBUFFER,t),f.framebufferTexture2D(f.FRAMEBUFFER,i,n,g.get(e.texture).__webglTexture,0),f.bindFramebuffer(f.FRAMEBUFFER,null)}function c(t,e){f.bindRenderbuffer(f.RENDERBUFFER,t),e.depthBuffer&&!e.stencilBuffer?(f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,e.width,e.height),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,t)):e.depthBuffer&&e.stencilBuffer?(f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_STENCIL,e.width,e.height),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,t)):f.renderbufferStorage(f.RENDERBUFFER,f.RGBA4,e.width,e.height),f.bindRenderbuffer(f.RENDERBUFFER,null)}var h,u="undefined"!=typeof WebGL2RenderingContext&&f instanceof WebGL2RenderingContext,d={};this.setTexture2D=a,this.setTextureCube=function(t,e){var i=g.get(t);if(6===t.image.length)if(0<t.version&&i.__version!==t.version){i.__image__webglTextureCube||(t.addEventListener("dispose",T),i.__image__webglTextureCube=f.createTexture(),b.memory.textures++),m.activeTexture(f.TEXTURE0+e),m.bindTexture(f.TEXTURE_CUBE_MAP,i.__image__webglTextureCube),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,t.flipY),e=t&&t.isCompressedTexture;for(var n=t.image[0]&&t.image[0].isDataTexture,o=[],r=0;r<6;r++)o[r]=e||n?n?t.image[r].image:t.image[r]:w(t.image[r],v.maxCubemapSize);var s=o[0],a=_(s),l=y.convert(t.format),c=y.convert(t.type);for(M(f.TEXTURE_CUBE_MAP,t,a),r=0;r<6;r++)if(e)for(var h,u=o[r].mipmaps,d=0,p=u.length;d<p;d++)h=u[d],1023!==t.format&&1022!==t.format?-1<m.getCompressedTextureFormats().indexOf(l)?m.compressedTexImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+r,d,l,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):m.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+r,d,l,h.width,h.height,0,l,c,h.data);else n?m.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,l,o[r].width,o[r].height,0,l,c,o[r].data):m.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,l,l,c,o[r]);i.__maxMipLevel=e?u.length-1:0,x(t,a)&&S(f.TEXTURE_CUBE_MAP,t,s.width,s.height),i.__version=t.version,t.onUpdate&&t.onUpdate(t)}else m.activeTexture(f.TEXTURE0+e),m.bindTexture(f.TEXTURE_CUBE_MAP,i.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,e){m.activeTexture(f.TEXTURE0+e),m.bindTexture(f.TEXTURE_CUBE_MAP,g.get(t).__webglTexture)},this.setupRenderTarget=function(t){var e=g.get(t),i=g.get(t.texture);t.addEventListener("dispose",s),i.__webglTexture=f.createTexture(),b.memory.textures++;var n=!0===t.isWebGLRenderTargetCube,o=_(t);if(n){e.__webglFramebuffer=[];for(var r=0;r<6;r++)e.__webglFramebuffer[r]=f.createFramebuffer()}else e.__webglFramebuffer=f.createFramebuffer();if(n){for(m.bindTexture(f.TEXTURE_CUBE_MAP,i.__webglTexture),M(f.TEXTURE_CUBE_MAP,t.texture,o),r=0;r<6;r++)l(e.__webglFramebuffer[r],t,f.COLOR_ATTACHMENT0,f.TEXTURE_CUBE_MAP_POSITIVE_X+r);x(t.texture,o)&&S(f.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),m.bindTexture(f.TEXTURE_CUBE_MAP,null)}else m.bindTexture(f.TEXTURE_2D,i.__webglTexture),M(f.TEXTURE_2D,t.texture,o),l(e.__webglFramebuffer,t,f.COLOR_ATTACHMENT0,f.TEXTURE_2D),x(t.texture,o)&&S(f.TEXTURE_2D,t.texture,t.width,t.height),m.bindTexture(f.TEXTURE_2D,null);if(t.depthBuffer){if(e=g.get(t),i=!0===t.isWebGLRenderTargetCube,t.depthTexture){if(i)throw Error("target.depthTexture not supported in Cube render targets");if(t&&t.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");if(f.bindFramebuffer(f.FRAMEBUFFER,e.__webglFramebuffer),!t.depthTexture||!t.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(g.get(t.depthTexture).__webglTexture&&t.depthTexture.image.width===t.width&&t.depthTexture.image.height===t.height||(t.depthTexture.image.width=t.width,t.depthTexture.image.height=t.height,t.depthTexture.needsUpdate=!0),a(t.depthTexture,0),e=g.get(t.depthTexture).__webglTexture,1026===t.depthTexture.format)f.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.TEXTURE_2D,e,0);else{if(1027!==t.depthTexture.format)throw Error("Unknown depthTexture format");f.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.TEXTURE_2D,e,0)}}else if(i)for(e.__webglDepthbuffer=[],i=0;i<6;i++)f.bindFramebuffer(f.FRAMEBUFFER,e.__webglFramebuffer[i]),e.__webglDepthbuffer[i]=f.createRenderbuffer(),c(e.__webglDepthbuffer[i],t);else f.bindFramebuffer(f.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=f.createRenderbuffer(),c(e.__webglDepthbuffer,t);f.bindFramebuffer(f.FRAMEBUFFER,null)}},this.updateRenderTargetMipmap=function(t){var e=t.texture,i=_(t);if(x(e,i)){i=t.isWebGLRenderTargetCube?f.TEXTURE_CUBE_MAP:f.TEXTURE_2D;var n=g.get(e).__webglTexture;m.bindTexture(i,n),S(i,e,t.width,t.height),m.bindTexture(i,null)}}}(pt,M,C,k,E,W,A),L=new Pt(pt),R=new function(l,c,n){function o(t){t=t.target;var e=r[t.id];for(var i in null!==e.index&&c.remove(e.index),e.attributes)c.remove(e.attributes[i]);t.removeEventListener("dispose",o),delete r[t.id],(i=h[t.id])&&(c.remove(i),delete h[t.id]),(i=h[e.id])&&(c.remove(i),delete h[e.id]),n.memory.geometries--}var r={},h={};return{get:function(t,e){var i=r[e.id];return i||(e.addEventListener("dispose",o),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Ot).setFromObject(t)),i=e._bufferGeometry),r[e.id]=i,n.memory.geometries++,i)},update:function(t){var e=t.index,i=t.attributes;for(var n in null!==e&&c.update(e,l.ELEMENT_ARRAY_BUFFER),i)c.update(i[n],l.ARRAY_BUFFER);for(n in t=t.morphAttributes){i=0;for(var o=(e=t[n]).length;i<o;i++)c.update(e[i],l.ARRAY_BUFFER)}},getWireframeAttribute:function(t){var e=h[t.id];if(e)return e;e=[];var i=t.index,n=t.attributes;if(null!==i){n=0;for(var o=(i=i.array).length;n<o;n+=3){var r=i[n+0],s=i[n+1],a=i[n+2];e.push(r,s,s,a,a,r)}}else for(i=n.position.array,n=0,o=i.length/3-1;n<o;n+=3)r=n+0,s=n+1,a=n+2,e.push(r,s,s,a,a,r);return e=new(65535<It(e)?Dt:Rt)(e,1),c.update(e,l.ELEMENT_ARRAY_BUFFER),h[t.id]=e}}}(pt,L,A),D=new function(o,r){var s={};return{update:function(t){var e=r.render.frame,i=t.geometry,n=o.get(t,i);return s[n.id]!==e&&(i.isGeometry&&n.updateFromObject(t),o.update(n),s[n.id]=e),n},dispose:function(){s={}}}}(R,A),H=new function(c){var h={},u=new Float32Array(8);return{update:function(t,e,i,n){var o=t.morphTargetInfluences,r=o.length;if(void 0===(t=h[e.id])){t=[];for(var s=0;s<r;s++)t[s]=[s,0];h[e.id]=t}var a=i.morphTargets&&e.morphAttributes.position;for(i=i.morphNormals&&e.morphAttributes.normal,s=0;s<r;s++){var l=t[s];0!==l[1]&&(a&&e.removeAttribute("morphTarget"+s),i&&e.removeAttribute("morphNormal"+s))}for(s=0;s<r;s++)(l=t[s])[0]=s,l[1]=o[s];for(t.sort(Ut),s=0;s<8;s++)(l=t[s])&&(o=l[0],r=l[1])?(a&&e.addAttribute("morphTarget"+s,a[o]),i&&e.addAttribute("morphNormal"+s,i[o]),u[s]=r):u[s]=0;n.getUniforms().setValue(c,"morphTargetInfluences",u)}}}(pt),I=new function(u,l,d){function p(t,e){if(t)t.isTexture?i=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=t.texture.encoding);else var i=3e3;return 3e3===i&&e&&(i=3007),i}var c=[],f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},o="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");this.getParameters=function(t,e,i,n,o,r,s){var a=f[t.type];if(s.isSkinnedMesh){var l=s.skeleton.bones;if(d.floatVertexTextures)l=1024;else{var c=Math.min(Math.floor((d.maxVertexUniforms-20)/4),l.length);c<l.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+l.length+" bones. This GPU supports "+c+"."),l=0):l=c}}else l=0;c=d.precision,null!==t.precision&&(c=d.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",c,"instead.");var h=u.getRenderTarget();return{shaderID:a,precision:c,supportsVertexTextures:d.vertexTextures,outputEncoding:p(h?h.texture:null,u.gammaOutput),map:!!t.map,mapEncoding:p(t.map,u.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:p(t.envMap,u.gammaInput),envMapCubeUV:!!t.envMap&&(306===t.envMap.mapping||307===t.envMap.mapping),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:p(t.emissiveMap,u.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!n,useFog:t.fog,fogExp:n&&n.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:d.logarithmicDepthBuffer,skinning:t.skinning&&0<l,maxBones:l,useVertexTexture:d.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:u.maxMorphTargets,maxMorphNormals:u.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numClippingPlanes:o,numClipIntersection:r,dithering:t.dithering,shadowMapEnabled:u.shadowMap.enabled&&s.receiveShadow&&0<i.length,shadowMapType:u.shadowMap.type,toneMapping:u.toneMapping,physicallyCorrectLights:u.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:2===t.side,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,e){var i=[];if(e.shaderID?i.push(e.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)i.push(n),i.push(t.defines[n]);for(n=0;n<o.length;n++)i.push(e[o[n]]);return i.push(t.onBeforeCompile.toString()),i.push(u.gammaOutput),i.join()},this.acquireProgram=function(t,e,i,n){for(var o,r=0,s=c.length;r<s;r++){var a=c[r];if(a.code===n){++(o=a).usedTimes;break}}return void 0===o&&(o=new jt(u,l,n,t,e,i),c.push(o)),o},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=c.indexOf(t);c[e]=c[c.length-1],c.pop(),t.destroy()}},this.programs=c}(j,M,E),O=new $t,N=new Gt,z=new function(o,i,r,n){function s(t,e){i.buffers.color.setClear(t.r,t.g,t.b,e,n)}var a,l,c,h=new kt(0),u=0;return{getClearColor:function(){return h},setClearColor:function(t,e){h.set(t),s(h,u=void 0!==e?e:1)},getClearAlpha:function(){return u},setClearAlpha:function(t){s(h,u=t)},render:function(t,e,i,n){null===(e=e.background)?s(h,u):e&&e.isColor&&(s(e,1),n=!0),(o.autoClear||n)&&o.clear(o.autoClearColor,o.autoClearDepth,o.autoClearStencil),e&&e.isCubeTexture?(void 0===c&&((c=new Ft(new Nt(1,1,1),new Bt({uniforms:fr.cube.uniforms,vertexShader:fr.cube.vertexShader,fragmentShader:fr.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),c.geometry.removeAttribute("uv"),c.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},r.update(c.geometry)),c.material.uniforms.tCube.value=e,t.push(c,c.geometry,c.material,0,null)):e&&e.isTexture&&(void 0===a&&(a=new Lt(-1,1,1,-1,0,1),l=new Ft(new zt(2,2),new Ht({depthTest:!1,depthWrite:!1,fog:!1})),r.update(l.geometry)),l.material.map=e,o.renderBufferDirect(a,null,l.geometry,l.material,l,null))}}}(j,C,R,b),B=new function(i,r,s){var a;this.setMode=function(t){a=t},this.render=function(t,e){i.drawArrays(a,t,e),s.update(e,a)},this.renderInstances=function(t,e,i){var n=r.get("ANGLE_instanced_arrays");if(null===n)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var o=t.attributes.position;o.isInterleavedBufferAttribute?(i=o.data.count,n.drawArraysInstancedANGLE(a,0,i,t.maxInstancedCount)):n.drawArraysInstancedANGLE(a,e,i,t.maxInstancedCount),s.update(i,a,t.maxInstancedCount)}}}(pt,M,A),F=new function(i,o,r){var s,a,l;this.setMode=function(t){s=t},this.setIndex=function(t){a=t.type,l=t.bytesPerElement},this.render=function(t,e){i.drawElements(s,e,a,t*l),r.update(e,s)},this.renderInstances=function(t,e,i){var n=o.get("ANGLE_instanced_arrays");null===n?console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(n.drawElementsInstancedANGLE(s,i,a,e*l,t.maxInstancedCount),r.update(i,s,t.maxInstancedCount))}}(pt,M,A),U=new function(d,p,f,m,g){function v(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var y,b,w,_,x,S,T,M,E,C,A,k,P,L,R,D,I,O,N,z,H,B,F=new St,U=new xt,W=new St;this.render=function(t,e,i){if(0!==t.length){if(void 0===H){var n=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),o=new Uint16Array([0,1,2,0,2,3]);N=p.createBuffer(),z=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,N),p.bufferData(p.ARRAY_BUFFER,n,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,z),p.bufferData(p.ELEMENT_ARRAY_BUFFER,o,p.STATIC_DRAW),n=p.createProgram(),o=p.createShader(p.VERTEX_SHADER);var r=p.createShader(p.FRAGMENT_SHADER);p.shaderSource(o,["precision "+g.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 center;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvUV = uvOffset + uv * uvScale;\n\tvec2 alignedPosition = ( position - center ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\tfogDepth = - mvPosition.z;\n}"].join("\n")),p.shaderSource(r,["precision "+g.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvec4 texture = texture2D( map, vUV );\n\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\n\tif ( gl_FragColor.a < alphaTest ) discard;\n\tif ( fogType > 0 ) {\n\t\tfloat fogFactor = 0.0;\n\t\tif ( fogType == 1 ) {\n\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t\t} else {\n\t\t\tconst float LOG2 = 1.442695;\n\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\n\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\t\t}\n\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\t}\n}"].join("\n")),p.compileShader(o),p.compileShader(r),p.attachShader(n,o),p.attachShader(n,r),p.linkProgram(n),H=n,I=p.getAttribLocation(H,"position"),O=p.getAttribLocation(H,"uv"),y=p.getUniformLocation(H,"uvOffset"),b=p.getUniformLocation(H,"uvScale"),w=p.getUniformLocation(H,"rotation"),_=p.getUniformLocation(H,"center"),x=p.getUniformLocation(H,"scale"),S=p.getUniformLocation(H,"color"),T=p.getUniformLocation(H,"map"),M=p.getUniformLocation(H,"opacity"),E=p.getUniformLocation(H,"modelViewMatrix"),C=p.getUniformLocation(H,"projectionMatrix"),A=p.getUniformLocation(H,"fogType"),k=p.getUniformLocation(H,"fogDensity"),P=p.getUniformLocation(H,"fogNear"),L=p.getUniformLocation(H,"fogFar"),R=p.getUniformLocation(H,"fogColor"),p.getUniformLocation(H,"fogDepth"),D=p.getUniformLocation(H,"alphaTest"),(n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=8,n.height=8,(o=n.getContext("2d")).fillStyle="white",o.fillRect(0,0,8,8),B=new qt(n)}f.useProgram(H),f.initAttributes(),f.enableAttribute(I),f.enableAttribute(O),f.disableUnusedAttributes(),f.disable(p.CULL_FACE),f.enable(p.BLEND),p.bindBuffer(p.ARRAY_BUFFER,N),p.vertexAttribPointer(I,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(O,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,z),p.uniformMatrix4fv(C,!1,i.projectionMatrix.elements),f.activeTexture(p.TEXTURE0),p.uniform1i(T,0),o=n=0,(r=e.fog)?(p.uniform3f(R,r.color.r,r.color.g,r.color.b),r.isFog?(p.uniform1f(P,r.near),p.uniform1f(L,r.far),p.uniform1i(A,1),o=n=1):r.isFogExp2&&(p.uniform1f(k,r.density),p.uniform1i(A,2),o=n=2)):(p.uniform1i(A,0),o=n=0),r=0;for(var s=t.length;r<s;r++){var a=t[r];a.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,a.matrixWorld),a.z=-a.modelViewMatrix.elements[14]}t.sort(v);var l=[],c=[];for(r=0,s=t.length;r<s;r++){var h=(a=t[r]).material;if(!1!==h.visible){a.onBeforeRender(d,e,i,void 0,h,void 0),p.uniform1f(D,h.alphaTest),p.uniformMatrix4fv(E,!1,a.modelViewMatrix.elements),a.matrixWorld.decompose(F,U,W),l[0]=W.x,l[1]=W.y,c[0]=a.center.x-.5,c[1]=a.center.y-.5;var u=0;e.fog&&h.fog&&(u=o),n!==u&&(p.uniform1i(A,u),n=u),null!==h.map?(p.uniform2f(y,h.map.offset.x,h.map.offset.y),p.uniform2f(b,h.map.repeat.x,h.map.repeat.y)):(p.uniform2f(y,0,0),p.uniform2f(b,1,1)),p.uniform1f(M,h.opacity),p.uniform3f(S,h.color.r,h.color.g,h.color.b),p.uniform1f(w,h.rotation),p.uniform2fv(_,c),p.uniform2fv(x,l),f.setBlending(h.blending,h.blendEquation,h.blendSrc,h.blendDst,h.blendEquationAlpha,h.blendSrcAlpha,h.blendDstAlpha,h.premultipliedAlpha),f.buffers.depth.setTest(h.depthTest),f.buffers.depth.setMask(h.depthWrite),f.buffers.color.setMask(h.colorWrite),m.setTexture2D(h.map||B,0),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),a.onAfterRender(d,e,i,void 0,h,void 0)}}f.enable(p.CULL_FACE),f.reset()}}}(j,pt,C,P,E),A.programs=I.programs,j.context=pt,j.capabilities=E,j.extensions=M,j.properties=k,j.renderLists=O,j.state=C,j.info=A}function i(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),$=!0}function n(){console.log("THREE.WebGLRenderer: Context Restored."),$=!1,e()}function l(t){(t=t.target).removeEventListener("dispose",l),c(t),k.remove(t)}function c(t){var e=k.get(t).program;(t.program=void 0)!==e&&I.releaseProgram(e)}function o(){var t=ft.getDevice();t&&t.isPresenting?t.requestAnimationFrame(r):window.requestAnimationFrame(r)}function r(t){!1!==bt&&(wt(t),o())}function s(t,e,i,n){for(var o=0,r=t.length;o<r;o++){var s=t[o],a=s.object,l=s.geometry,c=void 0===n?s.material:n;if(s=s.group,i.isArrayCamera)for(var h=(Z=i).cameras,u=0,d=h.length;u<d;u++){var p=h[u];if(a.layers.test(p.layers)){var f=p.bounds;C.viewport(K.set(f.x*et,f.y*it,f.z*et,f.w*it).multiplyScalar(nt)),m(a,e,p,l,c,s)}}else Z=null,m(a,e,i,l,c,s)}}function m(t,e,i,n,o,r){if(t.onBeforeRender(j,e,i,n,o,r),T=N.get(e,Z||i),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var s=t.isMesh&&t.matrixWorld.determinant()<0;C.setMaterial(o,s),s=x(i,e.fog,o,t),Y="",a=s,l=o,t.render(function(t){j.renderBufferImmediate(t,a,l)})}else j.renderBufferDirect(i,e.fog,n,o,t,r);var a,l;t.onAfterRender(j,e,i,n,o,r),T=N.get(e,Z||i)}function p(t,e,i){var n=k.get(t),o=T.state.lights;i=I.getParameters(t,o.state,T.state.shadowsArray,e,lt.numPlanes,lt.numIntersection,i);var r=I.getProgramCode(t,i),s=n.program,a=!0;if(void 0===s)t.addEventListener("dispose",l);else if(s.code!==r)c(t);else{if(n.lightsHash!==o.state.hash)k.update(t,"lightsHash",o.state.hash);else if(void 0!==i.shaderID)return;a=!1}if(a&&(i.shaderID?(s=fr[i.shaderID],n.shader={name:t.type,uniforms:cr.clone(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader}):n.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader},t.onBeforeCompile(n.shader,j),s=I.acquireProgram(t,n.shader,i,r),n.program=s,t.program=s),i=s.getAttributes(),t.morphTargets)for(r=t.numSupportedMorphTargets=0;r<j.maxMorphTargets;r++)0<=i["morphTarget"+r]&&t.numSupportedMorphTargets++;if(t.morphNormals)for(r=t.numSupportedMorphNormals=0;r<j.maxMorphNormals;r++)0<=i["morphNormal"+r]&&t.numSupportedMorphNormals++;i=n.shader.uniforms,(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=lt.numPlanes,n.numIntersection=lt.numIntersection,i.clippingPlanes=lt.uniform),n.fog=e,n.lightsHash=o.state.hash,t.lights&&(i.ambientLightColor.value=o.state.ambient,i.directionalLights.value=o.state.directional,i.spotLights.value=o.state.spot,i.rectAreaLights.value=o.state.rectArea,i.pointLights.value=o.state.point,i.hemisphereLights.value=o.state.hemi,i.directionalShadowMap.value=o.state.directionalShadowMap,i.directionalShadowMatrix.value=o.state.directionalShadowMatrix,i.spotShadowMap.value=o.state.spotShadowMap,i.spotShadowMatrix.value=o.state.spotShadowMatrix,i.pointShadowMap.value=o.state.pointShadowMap,i.pointShadowMatrix.value=o.state.pointShadowMatrix),t=n.program.getUniforms(),t=Wt.seqWithValue(t.seq,i),n.uniformsList=t}function x(t,e,i,n){tt=0;var o=k.get(i),r=T.state.lights;ct&&(ht||t!==X)&&lt.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,o,t===X&&i.id===q),!1===i.needsUpdate&&(void 0===o.program?i.needsUpdate=!0:i.fog&&o.fog!==e?i.needsUpdate=!0:i.lights&&o.lightsHash!==r.state.hash?i.needsUpdate=!0:void 0===o.numClippingPlanes||o.numClippingPlanes===lt.numPlanes&&o.numIntersection===lt.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(p(i,e,n),i.needsUpdate=!1);var s=!1,a=!1,l=!1,c=(r=o.program).getUniforms(),h=o.shader.uniforms;if(C.useProgram(r.program)&&(l=a=s=!0),i.id!==q&&(q=i.id,a=!0),(s||t!==X)&&(c.setValue(pt,"projectionMatrix",t.projectionMatrix),E.logarithmicDepthBuffer&&c.setValue(pt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),X!==(Z||t)&&(X=Z||t,l=a=!0),(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap)&&(void 0!==(s=c.map.cameraPosition)&&s.setValue(pt,dt.setFromMatrixPosition(t.matrixWorld))),(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&c.setValue(pt,"viewMatrix",t.matrixWorldInverse)),i.skinning&&(c.setOptional(pt,n,"bindMatrix"),c.setOptional(pt,n,"bindMatrixInverse"),t=n.skeleton))if(s=t.bones,E.floatVertexTextures){if(void 0===t.boneTexture){s=Math.sqrt(4*s.length),s=Wo.ceilPowerOfTwo(s),s=Math.max(s,4);var u=new Float32Array(s*s*4);u.set(t.boneMatrices);var d=new Et(u,s,s,1023,1015);d.needsUpdate=!0,t.boneMatrices=u,t.boneTexture=d,t.boneTextureSize=s}c.setValue(pt,"boneTexture",t.boneTexture),c.setValue(pt,"boneTextureSize",t.boneTextureSize)}else c.setOptional(pt,t,"boneMatrices");return a&&(c.setValue(pt,"toneMappingExposure",j.toneMappingExposure),c.setValue(pt,"toneMappingWhitePoint",j.toneMappingWhitePoint),i.lights&&(a=l,h.ambientLightColor.needsUpdate=a,h.directionalLights.needsUpdate=a,h.pointLights.needsUpdate=a,h.spotLights.needsUpdate=a,h.rectAreaLights.needsUpdate=a,h.hemisphereLights.needsUpdate=a),e&&i.fog&&(h.fogColor.value=e.color,e.isFog?(h.fogNear.value=e.near,h.fogFar.value=e.far):e.isFogExp2&&(h.fogDensity.value=e.density)),i.isMeshBasicMaterial?f(h,i):i.isMeshLambertMaterial?(f(h,i),i.emissiveMap&&(h.emissiveMap.value=i.emissiveMap)):i.isMeshPhongMaterial?(f(h,i),i.isMeshToonMaterial?(g(h,i),i.gradientMap&&(h.gradientMap.value=i.gradientMap)):g(h,i)):i.isMeshStandardMaterial?(f(h,i),i.isMeshPhysicalMaterial&&(h.clearCoat.value=i.clearCoat,h.clearCoatRoughness.value=i.clearCoatRoughness),h.roughness.value=i.roughness,h.metalness.value=i.metalness,i.roughnessMap&&(h.roughnessMap.value=i.roughnessMap),i.metalnessMap&&(h.metalnessMap.value=i.metalnessMap),i.emissiveMap&&(h.emissiveMap.value=i.emissiveMap),i.bumpMap&&(h.bumpMap.value=i.bumpMap,h.bumpScale.value=i.bumpScale),i.normalMap&&(h.normalMap.value=i.normalMap,h.normalScale.value.copy(i.normalScale)),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias),i.envMap&&(h.envMapIntensity.value=i.envMapIntensity)):i.isMeshDepthMaterial?(f(h,i),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isMeshDistanceMaterial?(f(h,i),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias),h.referencePosition.value.copy(i.referencePosition),h.nearDistance.value=i.nearDistance,h.farDistance.value=i.farDistance):i.isMeshNormalMaterial?(f(h,i),i.bumpMap&&(h.bumpMap.value=i.bumpMap,h.bumpScale.value=i.bumpScale),i.normalMap&&(h.normalMap.value=i.normalMap,h.normalScale.value.copy(i.normalScale)),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isLineBasicMaterial?(h.diffuse.value=i.color,h.opacity.value=i.opacity,i.isLineDashedMaterial&&(h.dashSize.value=i.dashSize,h.totalSize.value=i.dashSize+i.gapSize,h.scale.value=i.scale)):i.isPointsMaterial?(h.diffuse.value=i.color,h.opacity.value=i.opacity,h.size.value=i.size*nt,h.scale.value=.5*it,h.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&(e=i.map.offset,a=i.map.repeat,l=i.map.center,i.map.matrix.setUvTransform(e.x,e.y,a.x,a.y,i.map.rotation,l.x,l.y)),h.uvTransform.value.copy(i.map.matrix))):i.isShadowMaterial&&(h.color.value=i.color,h.opacity.value=i.opacity),void 0!==h.ltc_1&&(h.ltc_1.value=pr.LTC_1),void 0!==h.ltc_2&&(h.ltc_2.value=pr.LTC_2),Wt.upload(pt,o.uniformsList,h,j)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Wt.upload(pt,o.uniformsList,h,j),i.uniformsNeedUpdate=!1),c.setValue(pt,"modelViewMatrix",n.modelViewMatrix),c.setValue(pt,"normalMatrix",n.normalMatrix),c.setValue(pt,"modelMatrix",n.matrixWorld),r}function f(t,e){if(t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=k.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map)var i=e.map;else e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap);if(void 0!==i){if(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate){e=i.offset;var n=i.repeat,o=i.center;i.matrix.setUvTransform(e.x,e.y,n.x,n.y,i.rotation,o.x,o.y)}t.uvTransform.value.copy(i.matrix)}}function g(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}console.log("THREE.WebGLRenderer","92dev");var a=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),h=void 0!==t.context?t.context:null,u=void 0!==t.alpha&&t.alpha,d=void 0===t.depth||t.depth,v=void 0===t.stencil||t.stencil,y=void 0!==t.antialias&&t.antialias,b=void 0===t.premultipliedAlpha||t.premultipliedAlpha,w=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,_=void 0!==t.powerPreference?t.powerPreference:"default",S=null,T=null;this.domElement=a,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var M,E,C,A,k,P,L,R,D,I,O,N,z,H,B,F,U,W,j=this,$=!1,G=null,V=null,q=-1,Y="",X=null,Z=null,K=new Mt,J=new Mt,Q=null,tt=0,et=a.width,it=a.height,nt=1,ot=new Mt(0,0,et,it),rt=new Mt(0,0,et,it),st=!1,at=new At,lt=new function(){function l(){m.value!==h&&(m.value=h,m.needsUpdate=0<u),s.numPlanes=u,s.numIntersection=0}function c(t,e,i,n){var o=null!==t?t.length:0,r=null;if(0!==o){if(r=m.value,!0!==n||null===r)for(n=i+4*o,e=e.matrixWorldInverse,f.getNormalMatrix(e),(null===r||r.length<n)&&(r=new Float32Array(n)),n=0;n!==o;++n,i+=4)a.copy(t[n]).applyMatrix4(e,f),a.normal.toArray(r,i),r[i+3]=a.constant;m.value=r,m.needsUpdate=!0}return s.numPlanes=o,r}var s=this,h=null,u=0,d=!1,p=!1,a=new Ct,f=new Tt,m={value:null,needsUpdate:!1};this.uniform=m,this.numIntersection=this.numPlanes=0,this.init=function(t,e,i){var n=0!==t.length||e||0!==u||d;return d=e,h=c(t,i,0),u=t.length,n},this.beginShadows=function(){p=!0,c(null)},this.endShadows=function(){p=!1,l()},this.setState=function(t,e,i,n,o,r){if(!d||null===t||0===t.length||p&&!i)p?c(null):l();else{var s=4*(i=p?0:u),a=o.clippingState||null;for(m.value=a,a=c(t,n,s,r),t=0;t!==s;++t)a[t]=h[t];o.clippingState=a,this.numIntersection=e?this.numPlanes:0,this.numPlanes+=i}}},ct=!1,ht=!1,ut=new _t,dt=new St;try{u={alpha:u,depth:d,stencil:v,antialias:y,premultipliedAlpha:b,preserveDrawingBuffer:w,powerPreference:_},a.addEventListener("webglcontextlost",i,!1),a.addEventListener("webglcontextrestored",n,!1);var pt=h||a.getContext("webgl",u)||a.getContext("experimental-webgl",u);if(null===pt){if(null!==a.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===pt.getShaderPrecisionFormat&&(pt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){console.error("THREE.WebGLRenderer: "+t.message)}e();var ft=new Xt(j);this.vr=ft;var mt=new Vt(j,D,E.maxTextureSize);this.shadowMap=mt,this.getContext=function(){return pt},this.getContextAttributes=function(){return pt.getContextAttributes()},this.forceContextLoss=function(){var t=M.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=M.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return nt},this.setPixelRatio=function(t){void 0!==t&&(nt=t,this.setSize(et,it,!1))},this.getSize=function(){return{width:et,height:it}},this.setSize=function(t,e,i){var n=ft.getDevice();n&&n.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(et=t,it=e,a.width=t*nt,a.height=e*nt,!1!==i&&(a.style.width=t+"px",a.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(){return{width:et*nt,height:it*nt}},this.setDrawingBufferSize=function(t,e,i){et=t,it=e,nt=i,a.width=t*i,a.height=e*i,this.setViewport(0,0,t,e)},this.getCurrentViewport=function(){return K},this.setViewport=function(t,e,i,n){ot.set(t,it-e-n,i,n),C.viewport(K.copy(ot).multiplyScalar(nt))},this.setScissor=function(t,e,i,n){rt.set(t,it-e-n,i,n),C.scissor(J.copy(rt).multiplyScalar(nt))},this.setScissorTest=function(t){C.setScissorTest(st=t)},this.getClearColor=function(){return z.getClearColor()},this.setClearColor=function(){z.setClearColor.apply(z,arguments)},this.getClearAlpha=function(){return z.getClearAlpha()},this.setClearAlpha=function(){z.setClearAlpha.apply(z,arguments)},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=pt.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=pt.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=pt.STENCIL_BUFFER_BIT),pt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,i,n){this.setRenderTarget(t),this.clear(e,i,n)},this.dispose=function(){a.removeEventListener("webglcontextlost",i,!1),a.removeEventListener("webglcontextrestored",n,!1),O.dispose(),N.dispose(),k.dispose(),D.dispose(),ft.dispose(),bt=!1},this.renderBufferImmediate=function(t,e,i){C.initAttributes();var n=k.get(t);if(t.hasPositions&&!n.position&&(n.position=pt.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=pt.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=pt.createBuffer()),t.hasColors&&!n.color&&(n.color=pt.createBuffer()),e=e.getAttributes(),t.hasPositions&&(pt.bindBuffer(pt.ARRAY_BUFFER,n.position),pt.bufferData(pt.ARRAY_BUFFER,t.positionArray,pt.DYNAMIC_DRAW),C.enableAttribute(e.position),pt.vertexAttribPointer(e.position,3,pt.FLOAT,!1,0,0)),t.hasNormals){if(pt.bindBuffer(pt.ARRAY_BUFFER,n.normal),!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&!0===i.flatShading)for(var o=0,r=3*t.count;o<r;o+=9){var s=t.normalArray,a=(s[o+0]+s[o+3]+s[o+6])/3,l=(s[o+1]+s[o+4]+s[o+7])/3,c=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=a,s[o+1]=l,s[o+2]=c,s[o+3]=a,s[o+4]=l,s[o+5]=c,s[o+6]=a,s[o+7]=l,s[o+8]=c}pt.bufferData(pt.ARRAY_BUFFER,t.normalArray,pt.DYNAMIC_DRAW),C.enableAttribute(e.normal),pt.vertexAttribPointer(e.normal,3,pt.FLOAT,!1,0,0)}t.hasUvs&&i.map&&(pt.bindBuffer(pt.ARRAY_BUFFER,n.uv),pt.bufferData(pt.ARRAY_BUFFER,t.uvArray,pt.DYNAMIC_DRAW),C.enableAttribute(e.uv),pt.vertexAttribPointer(e.uv,2,pt.FLOAT,!1,0,0)),t.hasColors&&0!==i.vertexColors&&(pt.bindBuffer(pt.ARRAY_BUFFER,n.color),pt.bufferData(pt.ARRAY_BUFFER,t.colorArray,pt.DYNAMIC_DRAW),C.enableAttribute(e.color),pt.vertexAttribPointer(e.color,3,pt.FLOAT,!1,0,0)),C.disableUnusedAttributes(),pt.drawArrays(pt.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,i,n,o,r){var s=o.isMesh&&o.matrixWorld.determinant()<0;C.setMaterial(n,s);var a=x(t,e,n,o),l=!1;(t=i.id+"_"+a.id+"_"+(!0===n.wireframe))!==Y&&(Y=t,l=!0),o.morphTargetInfluences&&(H.update(o,i,n,a),l=!0),s=i.index;var c=i.attributes.position;if(e=1,!0===n.wireframe&&(s=R.getWireframeAttribute(i),e=2),t=B,null!==s){var h=L.get(s);(t=F).setIndex(h)}if(l){if(i&&i.isInstancedBufferGeometry&&null===M.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{C.initAttributes(),l=i.attributes,a=a.getAttributes();var u=n.defaultAttributeValues;for(_ in a){var d=a[_];if(0<=d){var p=l[_];if(void 0!==p){var f=p.normalized,m=p.itemSize,g=L.get(p);if(void 0!==g){var v=g.buffer,y=g.type;if(g=g.bytesPerElement,p.isInterleavedBufferAttribute){var b=p.data,w=b.stride;p=p.offset,b&&b.isInstancedInterleavedBuffer?(C.enableAttributeAndDivisor(d,b.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=b.meshPerAttribute*b.count)):C.enableAttribute(d),pt.bindBuffer(pt.ARRAY_BUFFER,v),pt.vertexAttribPointer(d,m,y,f,w*g,p*g)}else p.isInstancedBufferAttribute?(C.enableAttributeAndDivisor(d,p.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=p.meshPerAttribute*p.count)):C.enableAttribute(d),pt.bindBuffer(pt.ARRAY_BUFFER,v),pt.vertexAttribPointer(d,m,y,f,0,0)}}else if(void 0!==u&&void 0!==(f=u[_]))switch(f.length){case 2:pt.vertexAttrib2fv(d,f);break;case 3:pt.vertexAttrib3fv(d,f);break;case 4:pt.vertexAttrib4fv(d,f);break;default:pt.vertexAttrib1fv(d,f)}}}C.disableUnusedAttributes()}null!==s&&pt.bindBuffer(pt.ELEMENT_ARRAY_BUFFER,h.buffer)}h=1/0,null!==s?h=s.count:void 0!==c&&(h=c.count),s=i.drawRange.start*e,c=null!==r?r.start*e:0;var _=Math.max(s,c);if(0!==(r=Math.max(0,Math.min(h,s+i.drawRange.count*e,c+(null!==r?r.count*e:1/0))-1-_+1))){if(o.isMesh)if(!0===n.wireframe)C.setLineWidth(n.wireframeLinewidth*(null===G?nt:1)),t.setMode(pt.LINES);else switch(o.drawMode){case 0:t.setMode(pt.TRIANGLES);break;case 1:t.setMode(pt.TRIANGLE_STRIP);break;case 2:t.setMode(pt.TRIANGLE_FAN)}else o.isLine?(void 0===(n=n.linewidth)&&(n=1),C.setLineWidth(n*(null===G?nt:1)),o.isLineSegments?t.setMode(pt.LINES):o.isLineLoop?t.setMode(pt.LINE_LOOP):t.setMode(pt.LINE_STRIP)):o.isPoints&&t.setMode(pt.POINTS);i&&i.isInstancedBufferGeometry?0<i.maxInstancedCount&&t.renderInstances(i,_,r):t.render(_,r)}};var gt,vt,yt,bt=!(this.compile=function(i,t){(T=N.get(i,t)).init(),i.traverse(function(t){t.isLight&&(T.pushLight(t),t.castShadow&&T.pushShadow(t))}),T.setupLights(t),i.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var e=0;e<t.material.length;e++)p(t.material[e],i.fog,t);else p(t.material,i.fog,t)})}),wt=null;this.animate=function(t){null!==(wt=t)?bt||(o(),bt=!0):bt=!1},this.render=function(t,e,i,n){if(e&&e.isCamera){if(!$){Y="",q=-1,!(X=null)===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),ft.enabled&&(e=ft.getCamera(e)),(T=N.get(t,e)).init(),t.onBeforeRender(j,t,e,i),ut.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),at.setFromMatrix(ut),ht=this.localClippingEnabled,ct=lt.init(this.clippingPlanes,ht,e),(S=O.get(t,e)).init(),function t(e,i,n){if(!1!==e.visible){if(e.layers.test(i.layers))if(e.isLight)T.pushLight(e),e.castShadow&&T.pushShadow(e);else if(e.isSprite)e.frustumCulled&&!at.intersectsSprite(e)||T.pushSprite(e);else if(e.isImmediateRenderObject)n&&dt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ut),S.push(e,null,e.material,dt.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||at.intersectsObject(e))){n&&dt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ut);var o=D.update(e),r=e.material;if(Array.isArray(r))for(var s=o.groups,a=0,l=s.length;a<l;a++){var c=s[a],h=r[c.materialIndex];h&&h.visible&&S.push(e,o,h,dt.z,c)}else r.visible&&S.push(e,o,r,dt.z,null)}for(a=0,l=(e=e.children).length;a<l;a++)t(e[a],i,n)}}(t,e,j.sortObjects),!0===j.sortObjects&&S.sort(),ct&&lt.beginShadows(),mt.render(T.state.shadowsArray,t,e),T.setupLights(e),ct&&lt.endShadows(),this.info.autoReset&&this.info.reset(),void 0===i&&(i=null),this.setRenderTarget(i),z.render(S,t,e,n),n=S.opaque;var o=S.transparent;if(t.overrideMaterial){var r=t.overrideMaterial;n.length&&s(n,t,e,r),o.length&&s(o,t,e,r)}else n.length&&s(n,t,e),o.length&&s(o,t,e);U.render(T.state.spritesArray,t,e),i&&P.updateRenderTargetMipmap(i),C.buffers.depth.setTest(!0),C.buffers.depth.setMask(!0),C.buffers.color.setMask(!0),C.setPolygonOffset(!1),t.onAfterRender(j,t,e),ft.enabled&&ft.submitFrame(),T=S=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var t=tt;return t>=E.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+E.maxTextures),tt+=1,t},this.setTexture2D=(gt=!1,function(t,e){t&&t.isWebGLRenderTarget&&(gt||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),gt=!0),t=t.texture),P.setTexture2D(t,e)}),this.setTexture=(vt=!1,function(t,e){vt||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),vt=!0),P.setTexture2D(t,e)}),this.setTextureCube=(yt=!1,function(t,e){t&&t.isWebGLRenderTargetCube&&(yt||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),yt=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?P.setTextureCube(t,e):P.setTextureCubeDynamic(t,e)}),this.getRenderTarget=function(){return G},this.setRenderTarget=function(t){(G=t)&&void 0===k.get(t).__webglFramebuffer&&P.setupRenderTarget(t);var e=null,i=!1;t?(e=k.get(t).__webglFramebuffer,t.isWebGLRenderTargetCube&&(e=e[t.activeCubeFace],i=!0),K.copy(t.viewport),J.copy(t.scissor),Q=t.scissorTest):(K.copy(ot).multiplyScalar(nt),J.copy(rt).multiplyScalar(nt),Q=st),V!==e&&(pt.bindFramebuffer(pt.FRAMEBUFFER,e),V=e),C.viewport(K),C.scissor(J),C.setScissorTest(Q),i&&(i=k.get(t.texture),pt.framebufferTexture2D(pt.FRAMEBUFFER,pt.COLOR_ATTACHMENT0,pt.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,i.__webglTexture,t.activeMipMapLevel))},this.readRenderTargetPixels=function(t,e,i,n,o,r){if(t&&t.isWebGLRenderTarget){var s=k.get(t).__webglFramebuffer;if(s){var a=!1;s!==V&&(pt.bindFramebuffer(pt.FRAMEBUFFER,s),a=!0);try{var l=t.texture,c=l.format,h=l.type;1023!==c&&W.convert(c)!==pt.getParameter(pt.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===h||W.convert(h)===pt.getParameter(pt.IMPLEMENTATION_COLOR_READ_TYPE)||1015===h&&(M.get("OES_texture_float")||M.get("WEBGL_color_buffer_float"))||1016===h&&M.get("EXT_color_buffer_half_float")?pt.checkFramebufferStatus(pt.FRAMEBUFFER)===pt.FRAMEBUFFER_COMPLETE?0<=e&&e<=t.width-n&&0<=i&&i<=t.height-o&&pt.readPixels(e,i,n,o,W.convert(c),W.convert(h),r):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{a&&pt.bindFramebuffer(pt.FRAMEBUFFER,V)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,i){var n=e.image.width,o=e.image.height,r=W.convert(e.format);this.setTexture2D(e,0),pt.copyTexImage2D(pt.TEXTURE_2D,i||0,r,t.x,t.y,n,o,0)},this.copyTextureToTexture=function(t,e,i,n){var o=e.image.width,r=e.image.height,s=W.convert(i.format),a=W.convert(i.type);e=e.isDataTexture?e.image.data:e.image,this.setTexture2D(i,0),pt.texSubImage2D(pt.TEXTURE_2D,n||0,t.x,t.y,o,r,s,a,e)}}function wt(t,e){this.name="",this.color=new kt(t),this.density=void 0!==e?e:25e-5}function Zt(t,e,i){this.name="",this.color=new kt(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}function Kt(){h.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function Jt(t){w.call(this),this.type="SpriteMaterial",this.color=new kt(16777215),this.map=null,this.rotation=0,this.lights=this.fog=!1,this.setValues(t)}function Qt(t){h.call(this),this.type="Sprite",this.material=void 0!==t?t:new Jt,this.center=new V(.5,.5)}function te(){h.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ee(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new _t)}function ie(){h.call(this),this.type="Bone"}function ne(t,e){Ft.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new _t,this.bindMatrixInverse=new _t,t=new ee(t=this.initBones()),this.bind(t,this.matrixWorld),this.normalizeSkinWeights()}function oe(t){w.call(this),this.type="LineBasicMaterial",this.color=new kt(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(t)}function re(t,e,i){if(1===i)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new se(t,e);h.call(this),this.type="Line",this.geometry=void 0!==t?t:new Ot,this.material=void 0!==e?e:new oe({color:16777215*Math.random()})}function se(t,e){re.call(this,t,e),this.type="LineSegments"}function ae(t,e){re.call(this,t,e),this.type="LineLoop"}function le(t){w.call(this),this.type="PointsMaterial",this.color=new kt(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function ce(t,e){h.call(this),this.type="Points",this.geometry=void 0!==t?t:new Ot,this.material=void 0!==e?e:new le({color:16777215*Math.random()})}function he(){h.call(this),this.type="Group"}function ue(t,e,i,n,o,r,s,a,l){d.call(this,t,e,i,n,o,r,s,a,l),this.generateMipmaps=!1}function de(t,e,i,n,o,r,s,a,l,c,h,u){d.call(this,null,r,s,a,l,c,n,o,h,u),this.image={width:e,height:i},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function pe(t,e,i,n,o,r,s,a,l,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===c&&(i=1012),void 0===i&&1027===c&&(i=1020),d.call(this,null,n,o,r,s,a,c,i,l),this.image={width:t,height:e},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==a?a:1003,this.generateMipmaps=this.flipY=!1}function fe(t){Ot.call(this),this.type="WireframeGeometry";var e,i,n,o=[],r=[0,0],s={},a=["a","b","c"];if(t&&t.isGeometry){var l=t.faces,c=0;for(i=l.length;c<i;c++){var h=l[c];for(e=0;e<3;e++){var u=h[a[e]],d=h[a[(e+1)%3]];r[0]=Math.min(u,d),r[1]=Math.max(u,d),void 0===s[u=r[0]+","+r[1]]&&(s[u]={index1:r[0],index2:r[1]})}}for(u in s)c=s[u],a=t.vertices[c.index1],o.push(a.x,a.y,a.z),a=t.vertices[c.index2],o.push(a.x,a.y,a.z)}else if(t&&t.isBufferGeometry)if(a=new St,null!==t.index){l=t.attributes.position,h=t.index;var p=t.groups;for(0===p.length&&(p=[{start:0,count:h.count,materialIndex:0}]),t=0,n=p.length;t<n;++t)for(e=(c=p[t]).start,i=c.count,i=(c=e)+i;c<i;c+=3)for(e=0;e<3;e++)u=h.getX(c+e),d=h.getX(c+(e+1)%3),r[0]=Math.min(u,d),r[1]=Math.max(u,d),void 0===s[u=r[0]+","+r[1]]&&(s[u]={index1:r[0],index2:r[1]});for(u in s)c=s[u],a.fromBufferAttribute(l,c.index1),o.push(a.x,a.y,a.z),a.fromBufferAttribute(l,c.index2),o.push(a.x,a.y,a.z)}else for(c=0,i=(l=t.attributes.position).count/3;c<i;c++)for(e=0;e<3;e++)s=3*c+e,a.fromBufferAttribute(l,s),o.push(a.x,a.y,a.z),s=3*c+(e+1)%3,a.fromBufferAttribute(l,s),o.push(a.x,a.y,a.z);this.addAttribute("position",new q(o,3))}function me(t,e,i){x.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new ge(t,e,i)),this.mergeVertices()}function ge(t,e,i){Ot.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};var n,o,r=[],s=[],a=[],l=[],c=new St,h=new St,u=new St,d=new St,p=new St,f=e+1;for(n=0;n<=i;n++){var m=n/i;for(o=0;o<=e;o++){var g=o/e;t(g,m,h),s.push(h.x,h.y,h.z),0<=g-1e-5?(t(g-1e-5,m,u),d.subVectors(h,u)):(t(g+1e-5,m,u),d.subVectors(u,h)),0<=m-1e-5?(t(g,m-1e-5,u),p.subVectors(h,u)):(t(g,m+1e-5,u),p.subVectors(u,h)),c.crossVectors(d,p).normalize(),a.push(c.x,c.y,c.z),l.push(g,m)}}for(n=0;n<i;n++)for(o=0;o<e;o++)t=n*f+o+1,c=(n+1)*f+o+1,h=(n+1)*f+o,r.push(n*f+o,t,h),r.push(t,c,h);this.setIndex(r),this.addAttribute("position",new q(s,3)),this.addAttribute("normal",new q(a,3)),this.addAttribute("uv",new q(l,2))}function ve(t,e,i,n){x.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},this.fromBufferGeometry(new ye(t,e,i,n)),this.mergeVertices()}function ye(i,m,t,e){function g(t){u.push(t.x,t.y,t.z)}function v(t,e){t*=3,e.x=i[t+0],e.y=i[t+1],e.z=i[t+2]}function h(t,e,i,n){n<0&&1===t.x&&(d[e]=t.x-1),0===i.x&&0===i.z&&(d[e]=n/2/Math.PI+.5)}Ot.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:i,indices:m,radius:t,detail:e},t=t||1;var u=[],d=[];!function(t){for(var e=new St,i=new St,n=new St,o=0;o<m.length;o+=3){v(m[o+0],e),v(m[o+1],i),v(m[o+2],n);var r,s,a=e,l=i,c=n,h=Math.pow(2,t),u=[];for(s=0;s<=h;s++){u[s]=[];var d=a.clone().lerp(c,s/h),p=l.clone().lerp(c,s/h),f=h-s;for(r=0;r<=f;r++)u[s][r]=0===r&&s===h?d:d.clone().lerp(p,r/f)}for(s=0;s<h;s++)for(r=0;r<2*(h-s)-1;r++)a=Math.floor(r/2),0==r%2?(g(u[s][a+1]),g(u[s+1][a]),g(u[s][a])):(g(u[s][a+1]),g(u[s+1][a+1]),g(u[s+1][a]))}}(e=e||0),function(t){for(var e=new St,i=0;i<u.length;i+=3)e.x=u[i+0],e.y=u[i+1],e.z=u[i+2],e.normalize().multiplyScalar(t),u[i+0]=e.x,u[i+1]=e.y,u[i+2]=e.z}(t),function(){for(var t=new St,e=0;e<u.length;e+=3)t.x=u[e+0],t.y=u[e+1],t.z=u[e+2],d.push(Math.atan2(t.z,-t.x)/2/Math.PI+.5,1-(Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5));t=new St,e=new St;for(var i=new St,n=new St,o=new V,r=new V,s=new V,a=0,l=0;a<u.length;a+=9,l+=6){t.set(u[a+0],u[a+1],u[a+2]),e.set(u[a+3],u[a+4],u[a+5]),i.set(u[a+6],u[a+7],u[a+8]),o.set(d[l+0],d[l+1]),r.set(d[l+2],d[l+3]),s.set(d[l+4],d[l+5]),n.copy(t).add(e).add(i).divideScalar(3);var c=Math.atan2(n.z,-n.x);h(o,l+0,t,c),h(r,l+2,e,c),h(s,l+4,i,c)}for(t=0;t<d.length;t+=6)e=d[t+0],i=d[t+2],n=d[t+4],o=Math.min(e,i,n),.9<Math.max(e,i,n)&&o<.1&&(e<.2&&(d[t+0]+=1),i<.2&&(d[t+2]+=1),n<.2&&(d[t+4]+=1))}(),this.addAttribute("position",new q(u,3)),this.addAttribute("normal",new q(u.slice(),3)),this.addAttribute("uv",new q(d,2)),0===e?this.computeVertexNormals():this.normalizeNormals()}function be(t,e){x.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new we(t,e)),this.mergeVertices()}function we(t,e){ye.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function _e(t,e){x.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new xe(t,e)),this.mergeVertices()}function xe(t,e){ye.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Se(t,e){x.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Te(t,e)),this.mergeVertices()}function Te(t,e){var i=(1+Math.sqrt(5))/2;ye.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Me(t,e){x.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ee(t,e)),this.mergeVertices()}function Ee(t,e){var i=(1+Math.sqrt(5))/2,n=1/i;ye.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ce(t,e,i,n,o,r){x.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:o},void 0!==r&&console.warn("THREE.TubeGeometry: taper has been removed."),t=new Ae(t,e,i,n,o),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function Ae(o,r,s,a,t){function e(t){d=o.getPointAt(t/r,d);var e=l.normals[t];for(t=l.binormals[t],c=0;c<=a;c++){var i=c/a*Math.PI*2,n=Math.sin(i);i=-Math.cos(i),u.x=i*e.x+n*t.x,u.y=i*e.y+n*t.y,u.z=i*e.z+n*t.z,u.normalize(),f.push(u.x,u.y,u.z),h.x=d.x+s*u.x,h.y=d.y+s*u.y,h.z=d.z+s*u.z,p.push(h.x,h.y,h.z)}}Ot.call(this),this.type="TubeBufferGeometry",this.parameters={path:o,tubularSegments:r,radius:s,radialSegments:a,closed:t},r=r||64,s=s||1,a=a||8,t=t||!1;var l=o.computeFrenetFrames(r,t);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;var n,c,h=new St,u=new St,i=new V,d=new St,p=[],f=[],m=[],g=[];for(n=0;n<r;n++)e(n);for(e(!1===t?r:0),n=0;n<=r;n++)for(c=0;c<=a;c++)i.x=n/r,i.y=c/a,m.push(i.x,i.y);!function(){for(c=1;c<=r;c++)for(n=1;n<=a;n++){var t=(a+1)*c+(n-1),e=(a+1)*c+n,i=(a+1)*(c-1)+n;g.push((a+1)*(c-1)+(n-1),t,i),g.push(t,e,i)}}(),this.setIndex(g),this.addAttribute("position",new q(p,3)),this.addAttribute("normal",new q(f,3)),this.addAttribute("uv",new q(m,2))}function ke(t,e,i,n,o,r,s){x.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:o,q:r},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Pe(t,e,i,n,o,r)),this.mergeVertices()}function Pe(t,e,i,n,o,r){function s(t,e,i,n,o){var r=Math.sin(t);e=i/e*t,i=Math.cos(e),o.x=n*(2+i)*.5*Math.cos(t),o.y=n*(2+i)*r*.5,o.z=n*Math.sin(e)*.5}Ot.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:o,q:r},t=t||1,e=e||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,o=o||2,r=r||3;var a,l=[],c=[],h=[],u=[],d=new St,p=new St,f=new St,m=new St,g=new St,v=new St,y=new St;for(a=0;a<=i;++a){var b=a/i*o*Math.PI*2;for(s(b,o,r,t,f),s(b+.01,o,r,t,m),v.subVectors(m,f),y.addVectors(m,f),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),b=0;b<=n;++b){var w=b/n*Math.PI*2,_=-e*Math.cos(w);w=e*Math.sin(w),d.x=f.x+(_*y.x+w*g.x),d.y=f.y+(_*y.y+w*g.y),d.z=f.z+(_*y.z+w*g.z),c.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),h.push(p.x,p.y,p.z),u.push(a/i),u.push(b/n)}}for(b=1;b<=i;b++)for(a=1;a<=n;a++)t=(n+1)*b+(a-1),e=(n+1)*b+a,o=(n+1)*(b-1)+a,l.push((n+1)*(b-1)+(a-1),t,o),l.push(t,e,o);this.setIndex(l),this.addAttribute("position",new q(c,3)),this.addAttribute("normal",new q(h,3)),this.addAttribute("uv",new q(u,2))}function Le(t,e,i,n,o){x.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:o},this.fromBufferGeometry(new Re(t,e,i,n,o)),this.mergeVertices()}function Re(t,e,i,n,o){Ot.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:o},t=t||1,e=e||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,o=o||2*Math.PI;var r,s,a=[],l=[],c=[],h=[],u=new St,d=new St,p=new St;for(r=0;r<=i;r++)for(s=0;s<=n;s++){var f=s/n*o,m=r/i*Math.PI*2;d.x=(t+e*Math.cos(m))*Math.cos(f),d.y=(t+e*Math.cos(m))*Math.sin(f),d.z=e*Math.sin(m),l.push(d.x,d.y,d.z),u.x=t*Math.cos(f),u.y=t*Math.sin(f),p.subVectors(d,u).normalize(),c.push(p.x,p.y,p.z),h.push(s/n),h.push(r/i)}for(r=1;r<=i;r++)for(s=1;s<=n;s++)t=(n+1)*(r-1)+s-1,e=(n+1)*(r-1)+s,o=(n+1)*r+s,a.push((n+1)*r+s-1,t,o),a.push(t,e,o);this.setIndex(a),this.addAttribute("position",new q(l,3)),this.addAttribute("normal",new q(c,3)),this.addAttribute("uv",new q(h,2))}function De(t,e,i,n,o){for(var r,s=0,a=e,l=i-n;a<i;a+=n)s+=(t[l]-t[a])*(t[a+1]+t[l+1]),l=a;if(o===0<s)for(o=e;o<i;o+=n)r=Ge(o,t[o],t[o+1],r);else for(o=i-n;e<=o;o-=n)r=Ge(o,t[o],t[o+1],r);return r&&Ue(r,r.next)&&(Ve(r),r=r.next),r}function Ie(t,e){if(!t)return t;e||(e=t);do{var i=!1;if(t.steiner||!Ue(t,t.next)&&0!==Fe(t.prev,t,t.next))t=t.next;else{if(Ve(t),(t=e=t.prev)===t.next)break;i=!0}}while(i||t!==e);return e}function Oe(t,e){return t.x-e.x}function Ne(t,e){var i=e,n=t.x,o=t.y,r=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&r<s){if((r=s)===n){if(o===i.y)return i;if(o===i.next.y)return i.next}var a=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!a)return null;if(n===r)return a.prev;s=(e=a).x;var l=a.y,c=1/0;for(i=a.next;i!==e;){if(n>=i.x&&i.x>=s&&n!==i.x&&Be(o<l?n:r,o,s,l,o<l?r:n,o,i.x,i.y)){var h=Math.abs(o-i.y)/(n-i.x);(h<c||h===c&&i.x>a.x)&&je(i,t)&&(a=i,c=h)}i=i.next}return a}function ze(t,e,i,n,o){return 1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*o)|t<<8))|t<<4))|t<<2))|t<<1)|(1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function He(t){for(var e=t,i=t;e.x<i.x&&(i=e),(e=e.next)!==t;);return i}function Be(t,e,i,n,o,r,s,a){return 0<=(o-s)*(e-a)-(t-s)*(r-a)&&0<=(t-s)*(n-a)-(i-s)*(e-a)&&0<=(i-s)*(r-a)-(o-s)*(n-a)}function Fe(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Ue(t,e){return t.x===e.x&&t.y===e.y}function We(t,e,i,n){return!!(Ue(t,e)&&Ue(i,n)||Ue(t,n)&&Ue(i,e))||0<Fe(t,e,i)!=0<Fe(t,e,n)&&0<Fe(i,n,t)!=0<Fe(i,n,e)}function je(t,e){return Fe(t.prev,t,t.next)<0?0<=Fe(t,e,t.next)&&0<=Fe(t,t.prev,e):Fe(t,e,t.prev)<0||Fe(t,t.next,e)<0}function $e(t,e){var i=new qe(t.i,t.x,t.y),n=new qe(e.i,e.x,e.y),o=t.next,r=e.prev;return(t.next=e).prev=t,(i.next=o).prev=i,(n.next=i).prev=n,(r.next=n).prev=r,n}function Ge(t,e,i,n){return t=new qe(t,e,i),n?(t.next=n.next,(t.prev=n).next.prev=t,n.next=t):(t.prev=t).next=t,t}function Ve(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function qe(t,e,i){this.i=t,this.x=e,this.y=i,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function Ye(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function Xe(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}function Ze(t,e){x.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Ke(t,e)),this.mergeVertices()}function Ke(t,e){void 0!==t&&(Ot.call(this),this.type="ExtrudeBufferGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeVertexNormals())}function Je(t,e){x.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Qe(t,e)),this.mergeVertices()}function Qe(t,e){var i=(e=e||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new x;t=i.generateShapes(t,e.size,e.curveSegments),e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Ke.call(this,t,e),this.type="TextBufferGeometry"}function ti(t,e,i,n,o,r,s){x.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:o,thetaStart:r,thetaLength:s},this.fromBufferGeometry(new ei(t,e,i,n,o,r,s)),this.mergeVertices()}function ei(t,e,i,n,o,r,s){Ot.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:o,thetaStart:r,thetaLength:s},t=t||1,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,o=void 0!==o?o:2*Math.PI;var a,l,c=(r=void 0!==r?r:0)+(s=void 0!==s?s:Math.PI),h=0,u=[],d=new St,p=new St,f=[],m=[],g=[],v=[];for(l=0;l<=i;l++){var y=[],b=l/i;for(a=0;a<=e;a++){var w=a/e;d.x=-t*Math.cos(n+w*o)*Math.sin(r+b*s),d.y=t*Math.cos(r+b*s),d.z=t*Math.sin(n+w*o)*Math.sin(r+b*s),m.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),g.push(p.x,p.y,p.z),v.push(w,1-b),y.push(h++)}u.push(y)}for(l=0;l<i;l++)for(a=0;a<e;a++)t=u[l][a+1],n=u[l][a],o=u[l+1][a],s=u[l+1][a+1],(0!==l||0<r)&&f.push(t,n,s),(l!==i-1||c<Math.PI)&&f.push(n,o,s);this.setIndex(f),this.addAttribute("position",new q(m,3)),this.addAttribute("normal",new q(g,3)),this.addAttribute("uv",new q(v,2))}function ii(t,e,i,n,o,r){x.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:o,thetaLength:r},this.fromBufferGeometry(new ni(t,e,i,n,o,r)),this.mergeVertices()}function ni(t,e,i,n,o,r){Ot.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:o,thetaLength:r},t=t||.5,e=e||1,o=void 0!==o?o:0,r=void 0!==r?r:2*Math.PI,i=void 0!==i?Math.max(3,i):8;var s,a,l=[],c=[],h=[],u=[],d=t,p=(e-t)/(n=void 0!==n?Math.max(1,n):1),f=new St,m=new V;for(s=0;s<=n;s++){for(a=0;a<=i;a++)t=o+a/i*r,f.x=d*Math.cos(t),f.y=d*Math.sin(t),c.push(f.x,f.y,f.z),h.push(0,0,1),m.x=(f.x/e+1)/2,m.y=(f.y/e+1)/2,u.push(m.x,m.y);d+=p}for(s=0;s<n;s++)for(e=s*(i+1),a=0;a<i;a++)o=(t=a+e)+i+1,r=t+i+2,d=t+1,l.push(t,o,d),l.push(o,r,d);this.setIndex(l),this.addAttribute("position",new q(c,3)),this.addAttribute("normal",new q(h,3)),this.addAttribute("uv",new q(u,2))}function oi(t,e,i,n){x.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},this.fromBufferGeometry(new ri(t,e,i,n)),this.mergeVertices()}function ri(t,e,i,n){Ot.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},e=Math.floor(e)||12,i=i||0,n=n||2*Math.PI,n=Wo.clamp(n,0,2*Math.PI);var o,r=[],s=[],a=[],l=1/e,c=new St,h=new V;for(o=0;o<=e;o++){var u=i+o*l*n,d=Math.sin(u),p=Math.cos(u);for(u=0;u<=t.length-1;u++)c.x=t[u].x*d,c.y=t[u].y,c.z=t[u].x*p,s.push(c.x,c.y,c.z),h.x=o/e,h.y=u/(t.length-1),a.push(h.x,h.y)}for(o=0;o<e;o++)for(u=0;u<t.length-1;u++)l=(i=u+o*t.length)+t.length,c=i+t.length+1,h=i+1,r.push(i,l,h),r.push(l,c,h);if(this.setIndex(r),this.addAttribute("position",new q(s,3)),this.addAttribute("uv",new q(a,2)),this.computeVertexNormals(),n===2*Math.PI)for(n=this.attributes.normal.array,r=new St,s=new St,a=new St,i=e*t.length*3,u=o=0;o<t.length;o++,u+=3)r.x=n[u+0],r.y=n[u+1],r.z=n[u+2],s.x=n[i+u+0],s.y=n[i+u+1],s.z=n[i+u+2],a.addVectors(r,s).normalize(),n[u+0]=n[i+u+0]=a.x,n[u+1]=n[i+u+1]=a.y,n[u+2]=n[i+u+2]=a.z}function si(t,e){x.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new ai(t,e)),this.mergeVertices()}function ai(t,a){function e(t){var e,i=c.length/3,n=(t=t.extractPoints(a)).shape,o=t.holes;if(!1===Js.isClockWise(n))for(n=n.reverse(),t=0,e=o.length;t<e;t++){var r=o[t];!0===Js.isClockWise(r)&&(o[t]=r.reverse())}var s=Js.triangulateShape(n,o);for(t=0,e=o.length;t<e;t++)r=o[t],n=n.concat(r);for(t=0,e=n.length;t<e;t++)r=n[t],c.push(r.x,r.y,0),h.push(0,0,1),u.push(r.x,r.y);for(t=0,e=s.length;t<e;t++)n=s[t],l.push(n[0]+i,n[1]+i,n[2]+i),d+=3}Ot.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:a},a=a||12;var l=[],c=[],h=[],u=[],i=0,d=0;if(!1===Array.isArray(t))e(t);else for(var n=0;n<t.length;n++)e(t[n]),this.addGroup(i,d,n),i+=d,d=0;this.setIndex(l),this.addAttribute("position",new q(c,3)),this.addAttribute("normal",new q(h,3)),this.addAttribute("uv",new q(u,2))}function li(t,e){if(e.shapes=[],Array.isArray(t))for(var i=0,n=t.length;i<n;i++)e.shapes.push(t[i].uuid);else e.shapes.push(t.uuid);return e}function ci(t,e){Ot.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e};var i=[];e=Math.cos(Wo.DEG2RAD*(void 0!==e?e:1));var n=[0,0],o={},r=["a","b","c"];if(t.isBufferGeometry){var s=new x;s.fromBufferGeometry(t)}else s=t.clone();s.mergeVertices(),s.computeFaceNormals(),t=s.vertices;for(var a=0,l=(s=s.faces).length;a<l;a++)for(var c=s[a],h=0;h<3;h++){var u=c[r[h]],d=c[r[(h+1)%3]];n[0]=Math.min(u,d),n[1]=Math.max(u,d),void 0===o[u=n[0]+","+n[1]]?o[u]={index1:n[0],index2:n[1],face1:a,face2:void 0}:o[u].face2=a}for(u in o)(void 0===(n=o[u]).face2||s[n.face1].normal.dot(s[n.face2].normal)<=e)&&(r=t[n.index1],i.push(r.x,r.y,r.z),r=t[n.index2],i.push(r.x,r.y,r.z));this.addAttribute("position",new q(i,3))}function hi(t,e,i,n,o,r,s,a){x.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:o,openEnded:r,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new ui(t,e,i,n,o,r,s,a)),this.mergeVertices()}function ui(d,p,f,m,g,t,v,y){function e(t){var e,i=new V,n=new St,o=0,r=!0===t?d:p,s=!0===t?1:-1,a=T;for(e=1;e<=m;e++)_.push(0,E*s,0),x.push(0,s,0),S.push(.5,.5),T++;var l=T;for(e=0;e<=m;e++){var c=e/m*y+v,h=Math.cos(c);c=Math.sin(c),n.x=r*c,n.y=E*s,n.z=r*h,_.push(n.x,n.y,n.z),x.push(0,s,0),i.x=.5*h+.5,i.y=.5*c*s+.5,S.push(i.x,i.y),T++}for(e=0;e<m;e++)i=a+e,n=l+e,!0===t?w.push(n,n+1,i):w.push(n+1,n,i),o+=3;b.addGroup(C,o,!0===t?1:2),C+=o}Ot.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:d,radiusBottom:p,height:f,radialSegments:m,heightSegments:g,openEnded:t,thetaStart:v,thetaLength:y};var b=this;d=void 0!==d?d:1,p=void 0!==p?p:1,f=f||1,m=Math.floor(m)||8,g=Math.floor(g)||1,t=void 0!==t&&t,v=void 0!==v?v:0,y=void 0!==y?y:2*Math.PI;var w=[],_=[],x=[],S=[],T=0,M=[],E=f/2,C=0;!function(){var t,e,i=new St,n=new St,o=0,r=(p-d)/f;for(e=0;e<=g;e++){var s=[],a=e/g,l=a*(p-d)+d;for(t=0;t<=m;t++){var c=t/m,h=c*y+v,u=Math.sin(h);h=Math.cos(h),n.x=l*u,n.y=-a*f+E,n.z=l*h,_.push(n.x,n.y,n.z),i.set(u,r,h).normalize(),x.push(i.x,i.y,i.z),S.push(c,1-a),s.push(T++)}M.push(s)}for(t=0;t<m;t++)for(e=0;e<g;e++)i=M[e+1][t],n=M[e+1][t+1],r=M[e][t+1],w.push(M[e][t],i,r),w.push(i,n,r),o+=6;b.addGroup(C,o,0),C+=o}(),!1===t&&(0<d&&e(!0),0<p&&e(!1)),this.setIndex(w),this.addAttribute("position",new q(_,3)),this.addAttribute("normal",new q(x,3)),this.addAttribute("uv",new q(S,2))}function di(t,e,i,n,o,r,s){hi.call(this,0,t,e,i,n,o,r,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:o,thetaStart:r,thetaLength:s}}function pi(t,e,i,n,o,r,s){ui.call(this,0,t,e,i,n,o,r,s),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:o,thetaStart:r,thetaLength:s}}function fi(t,e,i,n){x.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new mi(t,e,i,n)),this.mergeVertices()}function mi(t,e,i,n){Ot.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},t=t||1,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var o,r=[],s=[],a=[],l=[],c=new St,h=new V;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);var u=0;for(o=3;u<=e;u++,o+=3){var d=i+u/e*n;c.x=t*Math.cos(d),c.y=t*Math.sin(d),s.push(c.x,c.y,c.z),a.push(0,0,1),h.x=(s[o]/t+1)/2,h.y=(s[o+1]/t+1)/2,l.push(h.x,h.y)}for(o=1;o<=e;o++)r.push(o,o+1,0);this.setIndex(r),this.addAttribute("position",new q(s,3)),this.addAttribute("normal",new q(a,3)),this.addAttribute("uv",new q(l,2))}function gi(t){w.call(this),this.type="ShadowMaterial",this.color=new kt(0),this.transparent=!0,this.setValues(t)}function vi(t){Bt.call(this,t),this.type="RawShaderMaterial"}function yi(t){w.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new kt(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new V(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function bi(t){yi.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(t)}function wi(t){w.call(this),this.type="MeshPhongMaterial",this.color=new kt(16777215),this.specular=new kt(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new V(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function _i(t){wi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function xi(t){w.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new V(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(t)}function Si(t){w.call(this),this.type="MeshLambertMaterial",this.color=new kt(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function Ti(t){oe.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function Mi(t,e,i){var n=this,o=!1,r=0,s=0,a=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){s++,!1===o&&void 0!==n.onStart&&n.onStart(t,r,s),o=!0},this.itemEnd=function(t){r++,void 0!==n.onProgress&&n.onProgress(t,r,s),r===s&&(o=!1,void 0!==n.onLoad)&&n.onLoad()},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return a?a(t):t},this.setURLModifier=function(t){return a=t,this}}function Ei(t){this.manager=void 0!==t?t:ia}function Ci(t){this.manager=void 0!==t?t:ia,this._parser=null}function Ai(t){this.manager=void 0!==t?t:ia,this._parser=null}function ki(t){this.manager=void 0!==t?t:ia}function Pi(t){this.manager=void 0!==t?t:ia}function Li(t){this.manager=void 0!==t?t:ia}function Ri(){this.type="Curve",this.arcLengthDivisions=200}function Di(t,e,i,n,o,r,s,a){Ri.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=o||0,this.aEndAngle=r||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}function Ii(t,e,i,n,o,r){Di.call(this,t,e,i,i,n,o,r),this.type="ArcCurve"}function Oi(){var a=0,l=0,c=0,h=0;return{initCatmullRom:function(t,e,i,n,o){c=-3*(a=e)+3*i-2*(l=t=o*(i-t))-(n=o*(n-e)),h=2*e-2*i+t+n},initNonuniformCatmullRom:function(t,e,i,n,o,r,s){c=-3*(a=e)+3*i-2*(l=t=((e-t)/o-(i-t)/(o+r)+(i-e)/r)*r)-(n=((i-e)/r-(n-e)/(r+s)+(n-i)/s)*r),h=2*e-2*i+t+n},calc:function(t){var e=t*t;return a+l*t+c*e+h*e*t}}}function Ni(t,e,i,n){Ri.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=i||"centripetal",this.tension=n||.5}function zi(t,e,i,n,o){var r=t*t;return(2*i-2*n+(e=.5*(n-e))+(o=.5*(o-i)))*t*r+(-3*i+3*n-2*e-o)*r+e*t+i}function Hi(t,e,i,n){var o=1-t;return o*o*e+2*(1-t)*t*i+t*t*n}function Bi(t,e,i,n,o){var r=1-t,s=1-t;return r*r*r*e+3*s*s*t*i+3*(1-t)*t*t*n+t*t*t*o}function Fi(t,e,i,n){Ri.call(this),this.type="CubicBezierCurve",this.v0=t||new V,this.v1=e||new V,this.v2=i||new V,this.v3=n||new V}function Ui(t,e,i,n){Ri.call(this),this.type="CubicBezierCurve3",this.v0=t||new St,this.v1=e||new St,this.v2=i||new St,this.v3=n||new St}function Wi(t,e){Ri.call(this),this.type="LineCurve",this.v1=t||new V,this.v2=e||new V}function ji(t,e){Ri.call(this),this.type="LineCurve3",this.v1=t||new St,this.v2=e||new St}function $i(t,e,i){Ri.call(this),this.type="QuadraticBezierCurve",this.v0=t||new V,this.v1=e||new V,this.v2=i||new V}function Gi(t,e,i){Ri.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new St,this.v1=e||new St,this.v2=i||new St}function Vi(t){Ri.call(this),this.type="SplineCurve",this.points=t||[]}function qi(){Ri.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Yi(t){qi.call(this),this.type="Path",this.currentPoint=new V,t&&this.setFromPoints(t)}function Xi(t){Yi.call(this,t),this.uuid=Wo.generateUUID(),this.type="Shape",this.holes=[]}function Zi(t,e){h.call(this),this.type="Light",this.color=new kt(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Ki(t,e,i){Zi.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(h.DefaultUp),this.updateMatrix(),this.groundColor=new kt(e)}function Ji(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new V(512,512),this.map=null,this.matrix=new _t}function Qi(){Ji.call(this,new vt(50,1,.5,500))}function tn(t,e,i,n,o,r){Zi.call(this,t,e),this.type="SpotLight",this.position.copy(h.DefaultUp),this.updateMatrix(),this.target=new h,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==o?o:0,this.decay=void 0!==r?r:1,this.shadow=new Qi}function en(t,e,i,n){Zi.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new Ji(new vt(90,1,.5,500))}function nn(){Ji.call(this,new Lt(-5,5,5,-5,.5,500))}function on(t,e){Zi.call(this,t,e),this.type="DirectionalLight",this.position.copy(h.DefaultUp),this.updateMatrix(),this.target=new h,this.shadow=new nn}function rn(t,e){Zi.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function sn(t,e,i,n){Zi.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function an(t,e,i,n){vn.call(this,t,e,i,n)}function ln(t,e,i){vn.call(this,t,e,i)}function cn(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function hn(t,e,i,n){cn.call(this,t,e,i,n)}function un(t,e,i,n){vn.call(this,t,e,i,n)}function dn(t,e,i,n){vn.call(this,t,e,i,n)}function pn(t,e,i,n){vn.call(this,t,e,i,n)}function fn(t,e,i,n){cn.call(this,t,e,i,n),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function mn(t,e,i,n){cn.call(this,t,e,i,n)}function gn(t,e,i,n){cn.call(this,t,e,i,n)}function vn(t,e,i,n){if(void 0===t)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ca.convertArray(e,this.TimeBufferType),this.values=ca.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function yn(t,e,i,n){vn.call(this,t,e,i,n)}function bn(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=Wo.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function wn(t){this.manager=void 0!==t?t:ia,this.textures={}}function _n(t){this.manager=void 0!==t?t:ia}function xn(){}function Sn(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:ia,this.withCredentials=!1}function Tn(t){this.manager=void 0!==t?t:ia,this.texturePath=""}function Mn(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:ia,this.options=void 0}function En(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function Cn(t){this.type="Font",this.data=t}function An(t){this.manager=void 0!==t?t:ia}function kn(t){this.manager=void 0!==t?t:ia}function Pn(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new vt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new vt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Ln(t,e,i){h.call(this),this.type="CubeCamera";var o=new vt(90,1,t,e);o.up.set(0,-1,0),o.lookAt(new St(1,0,0)),this.add(o);var r=new vt(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new St(-1,0,0)),this.add(r);var s=new vt(90,1,t,e);s.up.set(0,0,1),s.lookAt(new St(0,1,0)),this.add(s);var a=new vt(90,1,t,e);a.up.set(0,0,-1),a.lookAt(new St(0,-1,0)),this.add(a);var l=new vt(90,1,t,e);l.up.set(0,-1,0),l.lookAt(new St(0,0,1)),this.add(l);var c=new vt(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new St(0,0,-1)),this.add(c),this.renderTarget=new n(i,i,{format:1022,magFilter:1006,minFilter:1006}),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,n=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,i.activeCubeFace=0,t.render(e,o,i),i.activeCubeFace=1,t.render(e,r,i),i.activeCubeFace=2,t.render(e,s,i),i.activeCubeFace=3,t.render(e,a,i),i.activeCubeFace=4,t.render(e,l,i),i.texture.generateMipmaps=n,i.activeCubeFace=5,t.render(e,c,i),t.setRenderTarget(null)},this.clear=function(t,e,i,n){for(var o=this.renderTarget,r=0;r<6;r++)o.activeCubeFace=r,t.setRenderTarget(o),t.clear(e,i,n);t.setRenderTarget(null)}}function Rn(){h.call(this),this.type="AudioListener",this.context=al.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Dn(t){h.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.offset=this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function In(t){Dn.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function On(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Nn(t,e,i){switch(this.binding=t,this.valueSize=i,t=Float64Array,e){case"quaternion":e=this._slerp;break;case"string":case"bool":t=Array,e=this._select;break;default:e=this._lerp}this.buffer=new t(4*i),this._mixBufferRegion=e,this.referenceCount=this.useCount=this.cumulativeWeight=0}function zn(t,e,i){i=i||Hn.parseTrackName(e),this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function Hn(t,e,i){this.path=e,this.parsedPath=i||Hn.parseTrackName(e),this.node=Hn.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Bn(){this.uuid=Wo.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,i=arguments.length;e!==i;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function Fn(t,e,i){this._mixer=t,this._clip=e,this._localRoot=i||null,e=(t=e.tracks).length,i=Array(e);for(var n={endingStart:2400,endingEnd:2400},o=0;o!==e;++o){var r=t[o].createInterpolant(null);(i[o]=r).settings=n}this._interpolantSettings=n,this._interpolants=i,this._propertyBindings=Array(e),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function Un(t){this._root=t,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function Wn(t,e){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=e),this.value=t}function jn(){Ot.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function $n(t,e,i,n){this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}function Gn(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Vn(t,e,i){Gn.call(this,t,e),this.meshPerAttribute=i||1}function qn(t,e,i){v.call(this,t,e),this.meshPerAttribute=i||1}function Yn(t,e,i,n){this.ray=new H(t,e),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Xn(t,e){return t.distance-e.distance}function Zn(t,e,i,n){if(!1!==t.visible&&(t.raycast(e,i),!0===n)){n=0;for(var o=(t=t.children).length;n<o;n++)Zn(t[n],e,i,!0)}}function Kn(t){this.autoStart=void 0===t||t,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Jn(t,e,i){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==i?i:0,this}function Qn(t,e,i){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}function to(t,e){this.min=void 0!==t?t:new V(1/0,1/0),this.max=void 0!==e?e:new V(-1/0,-1/0)}function eo(t){h.call(this),this.material=t,this.render=function(){}}function io(t,e,i,n){this.object=t,this.size=void 0!==e?e:1,t=void 0!==i?i:16711680,n=void 0!==n?n:1,e=0,(i=this.object.geometry)&&i.isGeometry?e=3*i.faces.length:i&&i.isBufferGeometry&&(e=i.attributes.normal.count),i=new Ot,e=new q(6*e,3),i.addAttribute("position",e),se.call(this,i,new oe({color:t,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function no(t,e){h.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,t=new Ot,e=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,n=1;i<32;i++,n++){var o=i/32*Math.PI*2,r=n/32*Math.PI*2;e.push(Math.cos(o),Math.sin(o),1,Math.cos(r),Math.sin(r),1)}t.addAttribute("position",new q(e,3)),e=new oe({fog:!1}),this.cone=new se(t,e),this.add(this.cone),this.update()}function oo(t){for(var e=function t(e){var i=[];e&&e.isBone&&i.push(e);for(var n=0;n<e.children.length;n++)i.push.apply(i,t(e.children[n]));return i}(t),i=new Ot,n=[],o=[],r=new kt(0,0,1),s=new kt(0,1,0),a=0;a<e.length;a++){var l=e[a];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),o.push(r.r,r.g,r.b),o.push(s.r,s.g,s.b))}i.addAttribute("position",new q(n,3)),i.addAttribute("color",new q(o,3)),n=new oe({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),se.call(this,i,n),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function ro(t,e,i){this.light=t,this.light.updateMatrixWorld(),this.color=i,t=new ei(e,4,2),e=new Ht({wireframe:!0,fog:!1}),Ft.call(this,t,e),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function so(t,e){h.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,t=new oe({fog:!1}),(e=new Ot).addAttribute("position",new v(new Float32Array(15),3)),this.line=new re(e,t),this.add(this.line),this.update()}function ao(t,e,i){h.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,(t=new xe(e)).rotateY(.5*Math.PI),this.material=new Ht({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2),e=t.getAttribute("position"),e=new Float32Array(3*e.count),t.addAttribute("color",new v(e,3)),this.add(new Ft(t,this.material)),this.update()}function lo(t,e,i,n){t=t||10,e=e||10,i=new kt(void 0!==i?i:4473924),n=new kt(void 0!==n?n:8947848);var o=e/2,r=t/e,s=t/2;t=[];for(var a=[],l=0,c=0,h=-s;l<=e;l++,h+=r){t.push(-s,0,h,s,0,h),t.push(h,0,-s,h,0,s);var u=l===o?i:n;u.toArray(a,c),c+=3,u.toArray(a,c),c+=3,u.toArray(a,c),c+=3,u.toArray(a,c),c+=3}(e=new Ot).addAttribute("position",new q(t,3)),e.addAttribute("color",new q(a,3)),i=new oe({vertexColors:2}),se.call(this,e,i)}function co(t,e,i,n,o,r){t=t||10,e=e||16,i=i||8,n=n||64,o=new kt(void 0!==o?o:4473924),r=new kt(void 0!==r?r:8947848);var s,a=[],l=[];for(s=0;s<=e;s++){var c=s/e*2*Math.PI,h=Math.sin(c)*t;c=Math.cos(c)*t,a.push(0,0,0),a.push(h,0,c);var u=1&s?o:r;l.push(u.r,u.g,u.b),l.push(u.r,u.g,u.b)}for(s=0;s<=i;s++){u=1&s?o:r;var d=t-t/i*s;for(e=0;e<n;e++)c=e/n*2*Math.PI,h=Math.sin(c)*d,c=Math.cos(c)*d,a.push(h,0,c),l.push(u.r,u.g,u.b),c=(e+1)/n*2*Math.PI,h=Math.sin(c)*d,c=Math.cos(c)*d,a.push(h,0,c),l.push(u.r,u.g,u.b)}(t=new Ot).addAttribute("position",new q(a,3)),t.addAttribute("color",new q(l,3)),a=new oe({vertexColors:2}),se.call(this,t,a)}function ho(t,e,i,n){this.object=t,this.size=void 0!==e?e:1,t=void 0!==i?i:16776960,n=void 0!==n?n:1,e=0,(i=this.object.geometry)&&i.isGeometry?e=i.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),i=new Ot,e=new q(6*e,3),i.addAttribute("position",e),se.call(this,i,new oe({color:t,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function uo(t,e,i){h.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===e&&(e=1),(t=new Ot).addAttribute("position",new q([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3)),e=new oe({fog:!1}),this.lightPlane=new re(t,e),this.add(this.lightPlane),(t=new Ot).addAttribute("position",new q([0,0,0,0,0,1],3)),this.targetLine=new re(t,e),this.add(this.targetLine),this.update()}function po(t){function e(t,e,i){n(t,i),n(e,i)}function n(t,e){r.push(0,0,0),s.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(r.length/3-1)}var i=new Ot,o=new oe({color:16777215,vertexColors:1}),r=[],s=[],a={},l=new kt(16755200),c=new kt(16711680),h=new kt(43775),u=new kt(16777215),d=new kt(3355443);e("n1","n2",l),e("n2","n4",l),e("n4","n3",l),e("n3","n1",l),e("f1","f2",l),e("f2","f4",l),e("f4","f3",l),e("f3","f1",l),e("n1","f1",l),e("n2","f2",l),e("n3","f3",l),e("n4","f4",l),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",h),e("u2","u3",h),e("u3","u1",h),e("c","t",u),e("p","c",d),e("cn1","cn2",d),e("cn3","cn4",d),e("cf1","cf2",d),e("cf3","cf4",d),i.addAttribute("position",new q(r,3)),i.addAttribute("color",new q(s,3)),se.call(this,i,o),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function fo(t,e){this.object=t,void 0===e&&(e=16776960),t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new Float32Array(24),n=new Ot;n.setIndex(new v(t,1)),n.addAttribute("position",new v(i,3)),se.call(this,n,new oe({color:e})),this.matrixAutoUpdate=!1,this.update()}function mo(t,e){this.type="Box3Helper",this.box=t,t=void 0!==e?e:16776960,e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new Ot;i.setIndex(new v(e,1)),i.addAttribute("position",new q([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),se.call(this,i,new oe({color:t})),this.geometry.computeBoundingSphere()}function go(t,e,i){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e,t=void 0!==i?i:16776960,(e=new Ot).addAttribute("position",new q([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),e.computeBoundingSphere(),re.call(this,e,new oe({color:t})),(e=new Ot).addAttribute("position",new q([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),e.computeBoundingSphere(),this.add(new Ft(e,new Ht({color:t,opacity:.2,transparent:!0,depthWrite:!1})))}function vo(t,e,i,n,o,r){h.call(this),void 0===n&&(n=16776960),void 0===i&&(i=1),void 0===o&&(o=.2*i),void 0===r&&(r=.2*o),void 0===il&&((il=new Ot).addAttribute("position",new q([0,0,0,0,1,0],3)),(nl=new ui(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new re(il,new oe({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ft(nl,new Ht({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,o,r)}function yo(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t];(t=new Ot).addAttribute("position",new q(e,3)),t.addAttribute("color",new q([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new oe({vertexColors:2}),se.call(this,t,e)}function bo(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ni.call(this,t),this.type="catmullrom",this.closed=!0}function wo(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ni.call(this,t),this.type="catmullrom"}function _o(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ni.call(this,t),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:0<t?1:+t}),!1=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){void 0!==this._listeners&&(void 0!==(t=this._listeners[t])&&(-1!==(e=t.indexOf(e))&&t.splice(e,1)))},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=0,n=(e=e.slice(0)).length;i<n;i++)e[i].call(this,t)}}}});var xo,So,To,Mo,Eo,Co,Ao,ko,Po,Lo,Ro,Do,Io,Oo,No,zo,Ho,Bo,Fo,Uo,Wo={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var o=[],t=0;t<256;t++)o[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(o[255&t]+o[t>>8&255]+o[t>>16&255]+o[t>>24&255]+"-"+o[255&e]+o[e>>8&255]+"-"+o[e>>16&15|64]+o[e>>24&255]+"-"+o[63&i|128]+o[i>>8&255]+"-"+o[i>>16&255]+o[i>>24&255]+o[255&n]+o[n>>8&255]+o[n>>16&255]+o[n>>24&255]).toUpperCase()}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,o){return n+(t-e)*(o-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Wo.DEG2RAD},radToDeg:function(t){return t*Wo.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};Object.defineProperties(V.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(V.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6],this.y=t[1]*e+t[4]*i+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:(xo=new V,So=new V,function(t,e){return xo.set(t,t),So.set(e,e),this.clamp(xo,So)}),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e);e=Math.sin(e);var n=this.x-t.x,o=this.y-t.y;return this.x=n*i-o*e+t.x,this.y=n*e+o*i+t.y,this}}),Object.assign(_t.prototype,{isMatrix4:!0,set:function(t,e,i,n,o,r,s,a,l,c,h,u,d,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=o,g[5]=r,g[9]=s,g[13]=a,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new _t).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:(Po=new St,function(t){var e=this.elements,i=t.elements,n=1/Po.setFromMatrixColumn(t,0).length(),o=1/Po.setFromMatrixColumn(t,1).length();return t=1/Po.setFromMatrixColumn(t,2).length(),e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[4]=i[4]*o,e[5]=i[5]*o,e[6]=i[6]*o,e[8]=i[8]*t,e[9]=i[9]*t,e[10]=i[10]*t,this}),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,n=t.y,o=t.z,r=Math.cos(i);i=Math.sin(i);var s=Math.cos(n);n=Math.sin(n);var a=Math.cos(o);if(o=Math.sin(o),"XYZ"===t.order){t=r*a;var l=r*o,c=i*a,h=i*o;e[0]=s*a,e[4]=-s*o,e[8]=n,e[1]=l+c*n,e[5]=t-h*n,e[9]=-i*s,e[2]=h-t*n,e[6]=c+l*n,e[10]=r*s}else"YXZ"===t.order?(t=s*a,l=s*o,c=n*a,h=n*o,e[0]=t+h*i,e[4]=c*i-l,e[8]=r*n,e[1]=r*o,e[5]=r*a,e[9]=-i,e[2]=l*i-c,e[6]=h+t*i,e[10]=r*s):"ZXY"===t.order?(t=s*a,l=s*o,c=n*a,h=n*o,e[0]=t-h*i,e[4]=-r*o,e[8]=c+l*i,e[1]=l+c*i,e[5]=r*a,e[9]=h-t*i,e[2]=-r*n,e[6]=i,e[10]=r*s):"ZYX"===t.order?(t=r*a,l=r*o,c=i*a,h=i*o,e[0]=s*a,e[4]=c*n-l,e[8]=t*n+h,e[1]=s*o,e[5]=h*n+t,e[9]=l*n-c,e[2]=-n,e[6]=i*s,e[10]=r*s):"YZX"===t.order?(t=r*s,l=r*n,c=i*s,h=i*n,e[0]=s*a,e[4]=h-t*o,e[8]=c*o+l,e[1]=o,e[5]=r*a,e[9]=-i*a,e[2]=-n*a,e[6]=l*o+c,e[10]=t-h*o):"XZY"===t.order&&(t=r*s,l=r*n,c=i*s,h=i*n,e[0]=s*a,e[4]=-o,e[8]=n*a,e[1]=t*o+h,e[5]=r*a,e[9]=l*o-c,e[2]=c*o-l,e[6]=i*a,e[10]=h*o+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,i=t._x,n=t._y,o=t._z,r=t._w,s=i+i,a=n+n,l=o+o;t=i*s;var c=i*a;i*=l;var h=n*a;return n*=l,o*=l,s*=r,a*=r,r*=l,e[0]=1-(h+o),e[4]=c-r,e[8]=i+a,e[1]=c+r,e[5]=1-(t+o),e[9]=n-s,e[2]=i-a,e[6]=n+s,e[10]=1-(t+h),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:(Co=new St,Ao=new St,ko=new St,function(t,e,i){var n=this.elements;return ko.subVectors(t,e),0===ko.lengthSq()&&(ko.z=1),ko.normalize(),Co.crossVectors(i,ko),0===Co.lengthSq()&&(1===Math.abs(i.z)?ko.x+=1e-4:ko.z+=1e-4,ko.normalize(),Co.crossVectors(i,ko)),Co.normalize(),Ao.crossVectors(ko,Co),n[0]=Co.x,n[4]=Ao.x,n[8]=ko.x,n[1]=Co.y,n[5]=Ao.y,n[9]=ko.y,n[2]=Co.z,n[6]=Ao.z,n[10]=ko.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements;e=this.elements,t=i[0];var o=i[4],r=i[8],s=i[12],a=i[1],l=i[5],c=i[9],h=i[13],u=i[2],d=i[6],p=i[10],f=i[14],m=i[3],g=i[7],v=i[11];i=i[15];var y=n[0],b=n[4],w=n[8],_=n[12],x=n[1],S=n[5],T=n[9],M=n[13],E=n[2],C=n[6],A=n[10],k=n[14],P=n[3],L=n[7],R=n[11];return n=n[15],e[0]=t*y+o*x+r*E+s*P,e[4]=t*b+o*S+r*C+s*L,e[8]=t*w+o*T+r*A+s*R,e[12]=t*_+o*M+r*k+s*n,e[1]=a*y+l*x+c*E+h*P,e[5]=a*b+l*S+c*C+h*L,e[9]=a*w+l*T+c*A+h*R,e[13]=a*_+l*M+c*k+h*n,e[2]=u*y+d*x+p*E+f*P,e[6]=u*b+d*S+p*C+f*L,e[10]=u*w+d*T+p*A+f*R,e[14]=u*_+d*M+p*k+f*n,e[3]=m*y+g*x+v*E+i*P,e[7]=m*b+g*S+v*C+i*L,e[11]=m*w+g*T+v*A+i*R,e[15]=m*_+g*M+v*k+i*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:(Eo=new St,function(t){for(var e=0,i=t.count;e<i;e++)Eo.x=t.getX(e),Eo.y=t.getY(e),Eo.z=t.getZ(e),Eo.applyMatrix4(this),t.setXYZ(e,Eo.x,Eo.y,Eo.z);return t}),determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],o=t[12],r=t[1],s=t[5],a=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14];return t[3]*(+o*a*h-n*l*h-o*s*u+i*l*u+n*s*d-i*a*d)+t[7]*(+e*a*d-e*l*u+o*r*u-n*r*d+n*l*c-o*a*c)+t[11]*(+e*l*h-e*s*d-o*r*h+i*r*d+o*s*c-i*l*c)+t[15]*(-n*s*c-e*a*h+e*s*u+n*r*h-i*r*u+i*a*c)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,n=t.elements;t=n[0];var o=n[1],r=n[2],s=n[3],a=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=d*v*h-g*p*h+g*c*f-l*v*f-d*c*(n=n[15])+l*p*n,b=m*p*h-u*v*h-m*c*f+a*v*f+u*c*n-a*p*n,w=u*g*h-m*d*h+m*l*f-a*g*f-u*l*n+a*d*n,_=m*d*c-u*g*c-m*l*p+a*g*p+u*l*v-a*d*v,x=t*y+o*b+r*w+s*_;if(0===x){if(!0===e)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return e=1/x,i[0]=y*e,i[1]=(g*p*s-d*v*s-g*r*f+o*v*f+d*r*n-o*p*n)*e,i[2]=(l*v*s-g*c*s+g*r*h-o*v*h-l*r*n+o*c*n)*e,i[3]=(d*c*s-l*p*s-d*r*h+o*p*h+l*r*f-o*c*f)*e,i[4]=b*e,i[5]=(u*v*s-m*p*s+m*r*f-t*v*f-u*r*n+t*p*n)*e,i[6]=(m*c*s-a*v*s-m*r*h+t*v*h+a*r*n-t*c*n)*e,i[7]=(a*p*s-u*c*s+u*r*h-t*p*h-a*r*f+t*c*f)*e,i[8]=w*e,i[9]=(m*d*s-u*g*s-m*o*f+t*g*f+u*o*n-t*d*n)*e,i[10]=(a*g*s-m*l*s+m*o*h-t*g*h-a*o*n+t*l*n)*e,i[11]=(u*l*s-a*d*s-u*o*h+t*d*h+a*o*f-t*l*f)*e,i[12]=_*e,i[13]=(u*g*r-m*d*r+m*o*p-t*g*p-u*o*v+t*d*v)*e,i[14]=(m*l*r-a*g*r-m*o*c+t*g*c+a*o*v-t*l*v)*e,i[15]=(a*d*r-u*l*r+u*o*c-t*d*c-a*o*p+t*l*p)*e,this},scale:function(t){var e=this.elements,i=t.x,n=t.y;return t=t.z,e[0]*=i,e[4]*=n,e[8]*=t,e[1]*=i,e[5]*=n,e[9]*=t,e[2]*=i,e[6]*=n,e[10]*=t,e[3]*=i,e[7]*=n,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e);e=Math.sin(e);var n=1-i,o=t.x,r=t.y;t=t.z;var s=n*o,a=n*r;return this.set(s*o+i,s*r-e*t,s*t+e*r,0,s*r+e*t,a*r+i,a*t-e*o,0,s*t-e*r,a*t+e*o,n*t*t+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},decompose:(To=new St,Mo=new _t,function(t,e,i){var n=this.elements,o=To.set(n[0],n[1],n[2]).length(),r=To.set(n[4],n[5],n[6]).length(),s=To.set(n[8],n[9],n[10]).length();this.determinant()<0&&(o=-o),t.x=n[12],t.y=n[13],t.z=n[14],Mo.copy(this),t=1/o,n=1/r;var a=1/s;return Mo.elements[0]*=t,Mo.elements[1]*=t,Mo.elements[2]*=t,Mo.elements[4]*=n,Mo.elements[5]*=n,Mo.elements[6]*=n,Mo.elements[8]*=a,Mo.elements[9]*=a,Mo.elements[10]*=a,e.setFromRotationMatrix(Mo),i.x=o,i.y=r,i.z=s,this}),makePerspective:function(t,e,i,n,o,r){void 0===r&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements;return s[0]=2*o/(e-t),s[4]=0,s[8]=(e+t)/(e-t),s[12]=0,s[1]=0,s[5]=2*o/(i-n),s[9]=(i+n)/(i-n),s[13]=0,s[2]=0,s[6]=0,s[10]=-(r+o)/(r-o),s[14]=-2*r*o/(r-o),s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,e,i,n,o,r){var s=this.elements,a=1/(e-t),l=1/(i-n),c=1/(r-o);return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-(e+t)*a,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-(i+n)*l,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-(r+o)*c,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){var e=this.elements;t=t.elements;for(var i=0;i<16;i++)if(e[i]!==t[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}),Object.assign(xt,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,o,r,s){var a=i[n+0],l=i[n+1],c=i[n+2];i=i[n+3],n=o[r+0];var h=o[r+1],u=o[r+2];if(i!==(o=o[r+3])||a!==n||l!==h||c!==u){r=1-s;var d=a*n+l*h+c*u+i*o,p=0<=d?1:-1,f=1-d*d;f>Number.EPSILON&&(f=Math.sqrt(f),d=Math.atan2(f,d*p),r=Math.sin(r*d)/f,s=Math.sin(s*d)/f),a=a*r+n*(p*=s),l=l*r+h*p,c=c*r+u*p,i=i*r+o*p,r===1-s&&(a*=s=1/Math.sqrt(a*a+l*l+c*c+i*i),l*=s,c*=s,i*=s)}t[e]=a,t[e+1]=l,t[e+2]=c,t[e+3]=i}}),Object.defineProperties(xt.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(xt.prototype,{set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,n=t._y,o=t._z;t=t.order;var r=Math.cos,s=Math.sin,a=r(i/2),l=r(n/2);return r=r(o/2),i=s(i/2),n=s(n/2),o=s(o/2),"XYZ"===t?(this._x=i*l*r+a*n*o,this._y=a*n*r-i*l*o,this._z=a*l*o+i*n*r,this._w=a*l*r-i*n*o):"YXZ"===t?(this._x=i*l*r+a*n*o,this._y=a*n*r-i*l*o,this._z=a*l*o-i*n*r,this._w=a*l*r+i*n*o):"ZXY"===t?(this._x=i*l*r-a*n*o,this._y=a*n*r+i*l*o,this._z=a*l*o+i*n*r,this._w=a*l*r-i*n*o):"ZYX"===t?(this._x=i*l*r-a*n*o,this._y=a*n*r+i*l*o,this._z=a*l*o-i*n*r,this._w=a*l*r+i*n*o):"YZX"===t?(this._x=i*l*r+a*n*o,this._y=a*n*r+i*l*o,this._z=a*l*o-i*n*r,this._w=a*l*r-i*n*o):"XZY"===t&&(this._x=i*l*r-a*n*o,this._y=a*n*r-i*l*o,this._z=a*l*o+i*n*r,this._w=a*l*r+i*n*o),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){e/=2;var i=Math.sin(e);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(e),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,i=e[0];t=e[4];var n=e[8],o=e[1],r=e[5],s=e[9],a=e[2],l=e[6],c=i+r+(e=e[10]);return 0<c?(i=.5/Math.sqrt(c+1),this._w=.25/i,this._x=(l-s)*i,this._y=(n-a)*i,this._z=(o-t)*i):r<i&&e<i?(i=2*Math.sqrt(1+i-r-e),this._w=(l-s)/i,this._x=.25*i,this._y=(t+o)/i,this._z=(n+a)/i):e<r?(i=2*Math.sqrt(1+r-i-e),this._w=(n-a)/i,this._x=(t+o)/i,this._y=.25*i,this._z=(s+l)/i):(i=2*Math.sqrt(1+e-i-r),this._w=(o-t)/i,this._x=(n+a)/i,this._y=(s+l)/i,this._z=.25*i),this.onChangeCallback(),this},setFromUnitVectors:(Ro=new St,function(t,e){return void 0===Ro&&(Ro=new St),(Lo=t.dot(e)+1)<1e-6?(Lo=0,Math.abs(t.x)>Math.abs(t.z)?Ro.set(-t.y,t.x,0):Ro.set(0,-t.z,t.y)):Ro.crossVectors(t,e),this._x=Ro.x,this._y=Ro.y,this._z=Ro.z,this._w=Lo,this.normalize()}),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,o=t._z;t=t._w;var r=e._x,s=e._y,a=e._z;return e=e._w,this._x=i*e+t*r+n*a-o*s,this._y=n*e+t*s+o*r-i*a,this._z=o*e+t*a+i*s-n*r,this._w=t*e-i*r-n*s-o*a,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,o=this._z,r=this._w,s=r*t._w+i*t._x+n*t._y+o*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),1<=s)return this._w=r,this._x=i,this._y=n,this._z=o,this;if(t=Math.sqrt(1-s*s),Math.abs(t)<.001)return this._w=.5*(r+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(o+this._z),this;var a=Math.atan2(t,s);return s=Math.sin((1-e)*a)/t,e=Math.sin(e*a)/t,this._w=r*s+this._w*e,this._x=i*s+this._x*e,this._y=n*s+this._y*e,this._z=o*s+this._z*e,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(St.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(Fo=new xt,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Fo.setFromEuler(t))}),applyAxisAngle:(Bo=new xt,function(t,e){return this.applyQuaternion(Bo.setFromAxisAngle(t,e))}),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6]*n,this.y=t[1]*e+t[4]*i+t[7]*n,this.z=t[2]*e+t[5]*i+t[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,o=1/((t=t.elements)[3]*e+t[7]*i+t[11]*n+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*n+t[12])*o,this.y=(t[1]*e+t[5]*i+t[9]*n+t[13])*o,this.z=(t[2]*e+t[6]*i+t[10]*n+t[14])*o,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,o=t.x,r=t.y,s=t.z,a=(t=t.w)*e+r*n-s*i,l=t*i+s*e-o*n,c=t*n+o*i-r*e;return e=-o*e-r*i-s*n,this.x=a*t+e*-o+l*-s-c*-r,this.y=l*t+e*-r+c*-o-a*-s,this.z=c*t+e*-s+a*-r-l*-o,this},project:(Ho=new _t,function(t){return Ho.multiplyMatrices(t.projectionMatrix,Ho.getInverse(t.matrixWorld)),this.applyMatrix4(Ho)}),unproject:(zo=new _t,function(t){return zo.multiplyMatrices(t.matrixWorld,zo.getInverse(t.projectionMatrix)),this.applyMatrix4(zo)}),transformDirection:function(t){var e=this.x,i=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*n,this.y=t[1]*e+t[5]*i+t[9]*n,this.z=t[2]*e+t[6]*i+t[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:(Oo=new St,No=new St,function(t,e){return Oo.set(t,t,t),No.set(e,e,e),this.clamp(Oo,No)}),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,n=t.y;t=t.z;var o=e.x,r=e.y;return e=e.z,this.x=n*e-t*r,this.y=t*o-i*e,this.z=i*r-n*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:(Io=new St,function(t){return Io.copy(this).projectOnVector(t),this.sub(Io)}),reflect:(Do=new St,function(t){return this.sub(Do.copy(t).multiplyScalar(2*this.dot(t)))}),angleTo:function(t){return t=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq()),Math.acos(Wo.clamp(t,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=e,this.y=i,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(Tt.prototype,{isMatrix3:!0,set:function(t,e,i,n,o,r,s,a,l){var c=this.elements;return c[0]=t,c[1]=n,c[2]=s,c[3]=e,c[4]=o,c[5]=a,c[6]=i,c[7]=r,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:(Uo=new St,function(t){for(var e=0,i=t.count;e<i;e++)Uo.x=t.getX(e),Uo.y=t.getY(e),Uo.z=t.getZ(e),Uo.applyMatrix3(this),t.setXYZ(e,Uo.x,Uo.y,Uo.z);return t}),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements;e=this.elements,t=i[0];var o=i[3],r=i[6],s=i[1],a=i[4],l=i[7],c=i[2],h=i[5];i=i[8];var u=n[0],d=n[3],p=n[6],f=n[1],m=n[4],g=n[7],v=n[2],y=n[5];return n=n[8],e[0]=t*u+o*f+r*v,e[3]=t*d+o*m+r*y,e[6]=t*p+o*g+r*n,e[1]=s*u+a*f+l*v,e[4]=s*d+a*m+l*y,e[7]=s*p+a*g+l*n,e[2]=c*u+h*f+i*v,e[5]=c*d+h*m+i*y,e[8]=c*p+h*g+i*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],o=t[3],r=t[4],s=t[5],a=t[6],l=t[7];return e*r*(t=t[8])-e*s*l-i*o*t+i*s*a+n*o*l-n*r*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=t.elements;t=this.elements;var n=i[0],o=i[1],r=i[2],s=i[3],a=i[4],l=i[5],c=i[6],h=i[7],u=(i=i[8])*a-l*h,d=l*c-i*s,p=h*s-a*c,f=n*u+o*d+r*p;if(0===f){if(!0===e)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return e=1/f,t[0]=u*e,t[1]=(r*h-i*o)*e,t[2]=(l*o-r*a)*e,t[3]=d*e,t[4]=(i*n-r*c)*e,t[5]=(r*s-l*n)*e,t[6]=p*e,t[7]=(o*c-h*n)*e,t[8]=(a*n-o*s)*e,this},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,n,o,r,s){var a=Math.cos(o);o=Math.sin(o),this.set(i*a,i*o,-i*(a*r+o*s)+r+t,-n*o,n*a,-n*(-o*r+a*s)+s+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t);t=Math.sin(t);var i=this.elements,n=i[0],o=i[3],r=i[6],s=i[1],a=i[4],l=i[7];return i[0]=e*n+t*s,i[3]=e*o+t*a,i[6]=e*r+t*l,i[1]=-t*n+e*s,i[4]=-t*o+e*a,i[7]=-t*r+e*l,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){var e=this.elements;t=t.elements;for(var i=0;i<9;i++)if(e[i]!==t[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}});var jo,$o,Go,Vo,qo,Yo,Xo,Zo,Ko,Jo,Qo,tr,er,ir,nr,or,rr,sr=0;d.DEFAULT_IMAGE=void 0,d.DEFAULT_MAPPING=300,d.prototype=Object.assign(Object.create(e.prototype),{constructor:d,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=Wo.generateUUID()),!e&&void 0===t.images[n.uuid]){var o=t.images,r=n.uuid,s=n.uuid;if(n instanceof HTMLCanvasElement)var a=n;else{(a=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=n.width,a.height=n.height;var l=a.getContext("2d");n instanceof ImageData?l.putImageData(n,0,0):l.drawImage(n,0,0,n.width,n.height)}a=2048<a.width||2048<a.height?a.toDataURL("image/jpeg",.6):a.toDataURL("image/png"),o[r]={uuid:s,url:a}}i.image=n.uuid}return e||(t.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300===this.mapping){if(t.applyMatrix3(this.matrix),t.x<0||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}}),Object.defineProperty(d.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Mt.prototype,{isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,o=this.w;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*n+t[12]*o,this.y=t[1]*e+t[5]*i+t[9]*n+t[13]*o,this.z=t[2]*e+t[6]*i+t[10]*n+t[14]*o,this.w=t[3]*e+t[7]*i+t[11]*n+t[15]*o,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e=(t=t.elements)[0],i=t[4],n=t[8],o=t[1],r=t[5],s=t[9],a=t[2],l=t[6],c=t[10];return Math.abs(i-o)<.01&&Math.abs(n-a)<.01&&Math.abs(s-l)<.01?Math.abs(i+o)<.1&&Math.abs(n+a)<.1&&Math.abs(s+l)<.1&&Math.abs(e+r+c-3)<.1?this.set(1,0,0,0):(t=Math.PI,c=(c+1)/2,i=(i+o)/4,n=(n+a)/4,s=(s+l)/4,(r=(r+1)/2)<(e=(e+1)/2)&&c<e?e<.01?(l=0,i=a=.707106781):(a=i/(l=Math.sqrt(e)),i=n/l):c<r?r<.01?(a=0,i=l=.707106781):(l=i/(a=Math.sqrt(r)),i=s/a):c<.01?(a=l=.707106781,i=0):(l=n/(i=Math.sqrt(c)),a=s/i),this.set(l,a,i,t)):(t=Math.sqrt((l-s)*(l-s)+(n-a)*(n-a)+(o-i)*(o-i)),Math.abs(t)<.001&&(t=1),this.x=(l-s)/t,this.y=(n-a)/t,this.z=(o-i)/t,this.w=Math.acos((e+r+c-1)/2)),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return void 0===jo&&(jo=new Mt,$o=new Mt),jo.set(t,t,t,t),$o.set(e,e,e,e),this.clamp(jo,$o)},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),C.prototype=Object.assign(Object.create(e.prototype),{constructor:C,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),n.prototype=Object.create(C.prototype),(n.prototype.constructor=n).prototype.isWebGLRenderTargetCube=!0,Et.prototype=Object.create(d.prototype),(Et.prototype.constructor=Et).prototype.isDataTexture=!0,Object.assign(i.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,n=1/0,o=-1/0,r=-1/0,s=-1/0,a=0,l=t.length;a<l;a+=3){var c=t[a],h=t[a+1],u=t[a+2];c<e&&(e=c),h<i&&(i=h),u<n&&(n=u),o<c&&(o=c),r<h&&(r=h),s<u&&(s=u)}return this.min.set(e,i,n),this.max.set(o,r,s),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,n=1/0,o=-1/0,r=-1/0,s=-1/0,a=0,l=t.count;a<l;a++){var c=t.getX(a),h=t.getY(a),u=t.getZ(a);c<e&&(e=c),h<i&&(i=h),u<n&&(n=u),o<c&&(o=c),r<h&&(r=h),s<u&&(s=u)}return this.min.set(e,i,n),this.max.set(o,r,s),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:(Xo=new St,function(t,e){return e=Xo.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this}),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new St),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new St),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){function e(t){var e=t.geometry;if(void 0!==e)if(e.isGeometry)for(e=e.vertices,n=0,o=e.length;n<o;n++)r.copy(e[n]),r.applyMatrix4(t.matrixWorld),i.expandByPoint(r);else if(e.isBufferGeometry&&void 0!==(e=e.attributes.position))for(n=0,o=e.count;n<o;n++)r.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),i.expandByPoint(r)}var i,n,o,r=new St;return function(t){return i=this,t.updateMatrixWorld(!0),t.traverse(e),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new St),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:(Yo=new St,function(t){return this.clampPoint(t.center,Yo),Yo.distanceToSquared(t.center)<=t.radius*t.radius}),intersectsPlane:function(t){if(0<t.normal.x)var e=t.normal.x*this.min.x,i=t.normal.x*this.max.x;else e=t.normal.x*this.max.x,i=t.normal.x*this.min.x;return 0<t.normal.y?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=t.constant&&i>=t.constant},intersectsTriangle:function(){function e(t){var e,i=0;for(e=t.length-3;i<=e;i+=3){h.fromArray(t,i);var n=u.x*Math.abs(h.x)+u.y*Math.abs(h.y)+u.z*Math.abs(h.z),o=a.dot(h),r=l.dot(h),s=c.dot(h);if(Math.max(-Math.max(o,r,s),Math.min(o,r,s))>n)return!1}return!0}var a=new St,l=new St,c=new St,i=new St,n=new St,o=new St,h=new St,r=new St,u=new St,s=new St;return function(t){return!this.isEmpty()&&(this.getCenter(r),u.subVectors(this.max,r),a.subVectors(t.a,r),l.subVectors(t.b,r),c.subVectors(t.c,r),i.subVectors(l,a),n.subVectors(c,l),o.subVectors(a,c),!!e(t=[0,-i.z,i.y,0,-n.z,n.y,0,-o.z,o.y,i.z,0,-i.x,n.z,0,-n.x,o.z,0,-o.x,-i.y,i.x,0,-n.y,n.x,0,-o.y,o.x,0])&&(!!e(t=[1,0,0,0,1,0,0,0,1])&&(s.crossVectors(i,n),e(t=[s.x,s.y,s.z]))))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new St),e.copy(t).clamp(this.min,this.max)},distanceToPoint:(qo=new St,function(t){return qo.copy(t).clamp(this.min,this.max).sub(t).length()}),getBoundingSphere:(Vo=new St,function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new s),this.getCenter(t.center),t.radius=.5*this.getSize(Vo).length(),t}),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(Go=[new St,new St,new St,new St,new St,new St,new St,new St],function(t){return this.isEmpty()||(Go[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Go[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Go[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Go[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Go[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Go[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Go[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Go[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Go)),this}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(s.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:(Zo=new i,function(t,e){var i=this.center;void 0!==e?i.copy(e):Zo.setFromPoints(t).getCenter(i);for(var n=e=0,o=t.length;n<o;n++)e=Math.max(e,i.distanceToSquared(t[n]));return this.radius=Math.sqrt(e),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new St),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new i),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(Ct.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:(tr=new St,er=new St,function(t,e,i){return e=tr.subVectors(i,e).cross(er.subVectors(t,e)).normalize(),this.setFromNormalAndCoplanarPoint(e,t),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new St),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:(Qo=new St,function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new St);var i=t.delta(Qo),n=this.normal.dot(i);if(0===n){if(0===this.distanceToPoint(t.start))return e.copy(t.start)}else if(!((n=-(t.start.dot(this.normal)+this.constant)/n)<0||1<n))return e.copy(i).multiplyScalar(n).add(t.start)}),intersectsLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),e<0&&0<t||t<0&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new St),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(Ko=new St,Jo=new Tt,function(t,e){return e=e||Jo.getNormalMatrix(t),t=this.coplanarPoint(Ko).applyMatrix4(t),e=this.normal.applyMatrix3(e).normalize(),this.constant=-t.dot(e),this}),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(At.prototype,{set:function(t,e,i,n,o,r){var s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(i),s[3].copy(n),s[4].copy(o),s[5].copy(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements;t=i[0];var n=i[1],o=i[2],r=i[3],s=i[4],a=i[5],l=i[6],c=i[7],h=i[8],u=i[9],d=i[10],p=i[11],f=i[12],m=i[13],g=i[14];return i=i[15],e[0].setComponents(r-t,c-s,p-h,i-f).normalize(),e[1].setComponents(r+t,c+s,p+h,i+f).normalize(),e[2].setComponents(r+n,c+a,p+u,i+m).normalize(),e[3].setComponents(r-n,c-a,p-u,i-m).normalize(),e[4].setComponents(r-o,c-l,p-d,i-g).normalize(),e[5].setComponents(r+o,c+l,p+d,i+g).normalize(),this},intersectsObject:(rr=new s,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),rr.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(rr)}),intersectsSprite:(or=new s,function(t){return or.center.set(0,0,0),or.radius=.7071067811865476,or.applyMatrix4(t.matrixWorld),this.intersectsSphere(or)}),intersectsSphere:function(t){var e=this.planes,i=t.center;t=-t.radius;for(var n=0;n<6;n++)if(e[n].distanceToPoint(i)<t)return!1;return!0},intersectsBox:(ir=new St,nr=new St,function(t){for(var e=this.planes,i=0;i<6;i++){var n=e[i];ir.x=0<n.normal.x?t.min.x:t.max.x,nr.x=0<n.normal.x?t.max.x:t.min.x,ir.y=0<n.normal.y?t.min.y:t.max.y,nr.y=0<n.normal.y?t.max.y:t.min.y,ir.z=0<n.normal.z?t.min.z:t.max.z,nr.z=0<n.normal.z?t.max.z:t.min.z;var o=n.distanceToPoint(ir);if(n=n.distanceToPoint(nr),o<0&&n<0)return!1}return!0}),containsPoint:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}});var ar,lr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},cr={merge:function(t){for(var e={},i=0;i<t.length;i++){var n,o=this.clone(t[i]);for(n in o)e[n]=o[n]}return e},clone:function(t){var e,i={};for(e in t)for(var n in i[e]={},t[e]){var o=t[e][n];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture)?i[e][n]=o.clone():Array.isArray(o)?i[e][n]=o.slice():i[e][n]=o}return i}},hr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(kt.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(){function n(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}return function(t,e,i){return t=Wo.euclideanModulo(t,1),e=Wo.clamp(e,0,1),i=Wo.clamp(i,0,1),0===e?this.r=this.g=this.b=i:(i=2*i-(e=i<=.5?i*(1+e):i+e-i*e),this.r=n(i,e,t+1/3),this.g=n(i,e,t),this.b=n(i,e,t-1/3)),this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n=i[2];switch(i[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){n=parseFloat(i[1])/360;var o=parseInt(i[2],10)/100,r=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(n,o,r)}}}else if(i=/^#([A-Fa-f0-9]+)$/.exec(e)){if(3===(n=(i=i[1]).length))return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&0<e.length&&(void 0!==(i=hr[e])?this.setHex(i):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return void 0===e&&(e=2),e=0<e?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(){var t=this.r,e=this.g,i=this.b;return this.r=t*t,this.g=e*e,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,i=this.r,n=this.g,o=this.b,r=Math.max(i,n,o),s=Math.min(i,n,o),a=(s+r)/2;if(s===r)s=e=0;else{var l=r-s;switch(s=a<=.5?l/(r+s):l/(2-r-s),r){case i:e=(n-o)/l+(n<o?6:0);break;case n:e=(o-i)/l+2;break;case o:e=(i-n)/l+4}e/=6}return t.h=e,t.s=s,t.l=a,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(ar={},function(t,e,i){return this.getHSL(ar),ar.h+=t,ar.s+=e,ar.l+=i,this.setHSL(ar.h,ar.s,ar.l),this}),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var ur,dr,pr={common:{diffuse:{value:new kt(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Tt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new V(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new kt(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new kt(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Tt}}},fr={basic:{uniforms:cr.merge([pr.common,pr.specularmap,pr.envmap,pr.aomap,pr.lightmap,pr.fog]),vertexShader:lr.meshbasic_vert,fragmentShader:lr.meshbasic_frag},lambert:{uniforms:cr.merge([pr.common,pr.specularmap,pr.envmap,pr.aomap,pr.lightmap,pr.emissivemap,pr.fog,pr.lights,{emissive:{value:new kt(0)}}]),vertexShader:lr.meshlambert_vert,fragmentShader:lr.meshlambert_frag},phong:{uniforms:cr.merge([pr.common,pr.specularmap,pr.envmap,pr.aomap,pr.lightmap,pr.emissivemap,pr.bumpmap,pr.normalmap,pr.displacementmap,pr.gradientmap,pr.fog,pr.lights,{emissive:{value:new kt(0)},specular:{value:new kt(1118481)},shininess:{value:30}}]),vertexShader:lr.meshphong_vert,fragmentShader:lr.meshphong_frag},standard:{uniforms:cr.merge([pr.common,pr.envmap,pr.aomap,pr.lightmap,pr.emissivemap,pr.bumpmap,pr.normalmap,pr.displacementmap,pr.roughnessmap,pr.metalnessmap,pr.fog,pr.lights,{emissive:{value:new kt(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:lr.meshphysical_vert,fragmentShader:lr.meshphysical_frag},points:{uniforms:cr.merge([pr.points,pr.fog]),vertexShader:lr.points_vert,fragmentShader:lr.points_frag},dashed:{uniforms:cr.merge([pr.common,pr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:lr.linedashed_vert,fragmentShader:lr.linedashed_frag},depth:{uniforms:cr.merge([pr.common,pr.displacementmap]),vertexShader:lr.depth_vert,fragmentShader:lr.depth_frag},normal:{uniforms:cr.merge([pr.common,pr.bumpmap,pr.normalmap,pr.displacementmap,{opacity:{value:1}}]),vertexShader:lr.normal_vert,fragmentShader:lr.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:lr.cube_vert,fragmentShader:lr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:lr.equirect_vert,fragmentShader:lr.equirect_frag},distanceRGBA:{uniforms:cr.merge([pr.common,pr.displacementmap,{referencePosition:{value:new St},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:lr.distanceRGBA_vert,fragmentShader:lr.distanceRGBA_frag},shadow:{uniforms:cr.merge([pr.lights,pr.fog,{color:{value:new kt(0)},opacity:{value:1}}]),vertexShader:lr.shadow_vert,fragmentShader:lr.shadow_frag}};fr.physical={uniforms:cr.merge([fr.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:lr.meshphysical_vert,fragmentShader:lr.meshphysical_frag},o.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),o.DefaultOrder="XYZ",Object.defineProperties(o.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(o.prototype,{isEuler:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=Wo.clamp,o=t.elements;t=o[0];var r=o[4],s=o[8],a=o[1],l=o[5],c=o[9],h=o[2],u=o[6];return o=o[10],"XYZ"===(e=e||this._order)?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,o),this._z=Math.atan2(-r,t)):(this._x=Math.atan2(u,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,o),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-h,t),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(-h,o),this._z=Math.atan2(-r,l)):(this._y=0,this._z=Math.atan2(a,t))):"ZYX"===e?(this._y=Math.asin(-n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(u,o),this._z=Math.atan2(a,t)):(this._x=0,this._z=Math.atan2(-r,l))):"YZX"===e?(this._z=Math.asin(n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,t)):(this._x=0,this._y=Math.atan2(s,o))):"XZY"===e?(this._z=Math.asin(-n(r,-1,1)),Math.abs(r)<.99999?(this._x=Math.atan2(u,l),this._y=Math.atan2(s,t)):(this._x=Math.atan2(-c,o),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:(dr=new _t,function(t,e,i){return dr.makeRotationFromQuaternion(t),this.setFromRotationMatrix(dr,e,i)}),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(ur=new xt,function(t){return ur.setFromEuler(this),this.setFromQuaternion(ur,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new St(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(r.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask=this.mask|1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var mr,gr,vr,yr,br,wr,_r,xr,Sr,Tr,Mr,Er,Cr,Ar,kr,Pr,Lr,Rr,Dr=0;h.DefaultUp=new St(0,1,0),h.DefaultMatrixAutoUpdate=!0,h.prototype=Object.assign(Object.create(e.prototype),{constructor:h,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:(Lr=new xt,function(t,e){return Lr.setFromAxisAngle(t,e),this.quaternion.multiply(Lr),this}),rotateOnWorldAxis:(Pr=new xt,function(t,e){return Pr.setFromAxisAngle(t,e),this.quaternion.premultiply(Pr),this}),rotateX:(kr=new St(1,0,0),function(t){return this.rotateOnAxis(kr,t)}),rotateY:(Ar=new St(0,1,0),function(t){return this.rotateOnAxis(Ar,t)}),rotateZ:(Cr=new St(0,0,1),function(t){return this.rotateOnAxis(Cr,t)}),translateOnAxis:(Er=new St,function(t,e){return Er.copy(t).applyQuaternion(this.quaternion),this.position.add(Er.multiplyScalar(e)),this}),translateX:(Mr=new St(1,0,0),function(t){return this.translateOnAxis(Mr,t)}),translateY:(Tr=new St(0,1,0),function(t){return this.translateOnAxis(Tr,t)}),translateZ:(Sr=new St(0,0,1),function(t){return this.translateOnAxis(Sr,t)}),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:(xr=new _t,function(t){return t.applyMatrix4(xr.getInverse(this.matrixWorld))}),lookAt:(wr=new _t,_r=new St,function(t,e,i){t.isVector3?_r.copy(t):_r.set(t,e,i),this.isCamera?wr.lookAt(this.position,_r,this.up):wr.lookAt(_r,this.position,this.up),this.quaternion.setFromRotationMatrix(wr)}),add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",t):t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this},remove:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}return-1!==(e=this.children.indexOf(t))&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(e,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var o=this.children[i].getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new St),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(yr=new St,br=new St,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new xt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(yr,t,br),t}),getWorldScale:(gr=new St,vr=new xt,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new St),this.updateMatrixWorld(!0),this.matrixWorld.decompose(gr,vr,t),t}),getWorldDirection:(mr=new xt,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new St),this.getWorldQuaternion(mr),t.set(0,0,1).applyQuaternion(mr)}),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},toJSON:function(i){function t(t,e){return void 0===t[e.uuid]&&(t[e.uuid]=e.toJSON(i)),e.uuid}function e(t){var e,i=[];for(e in t){var n=t[e];delete n.metadata,i.push(n)}return i}var n=void 0===i||"string"==typeof i,o={};n&&(i={geometries:{},materials:{},textures:{},images:{},shapes:{}},o.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.matrix=this.matrix.toArray(),void 0!==this.geometry){r.geometry=t(i.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes)if(s=s.shapes,Array.isArray(s))for(var a=0,l=s.length;a<l;a++)t(i.shapes,s[a]);else t(i.shapes,s)}if(void 0!==this.material)if(Array.isArray(this.material)){for(s=[],a=0,l=this.material.length;a<l;a++)s.push(t(i.materials,this.material[a]));r.material=s}else r.material=t(i.materials,this.material);if(0<this.children.length)for(r.children=[],a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(i).object);if(n){n=e(i.geometries),a=e(i.materials),l=e(i.textures);var c=e(i.images);s=e(i.shapes),0<n.length&&(o.geometries=n),0<a.length&&(o.materials=a),0<l.length&&(o.textures=l),0<c.length&&(o.images=c),0<s.length&&(o.shapes=s)}return o.object=r,o},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(e=0;e<t.children.length;e++)this.add(t.children[e].clone());return this}}),l.prototype=Object.assign(Object.create(h.prototype),{constructor:l,isCamera:!0,copy:function(t,e){return h.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},getWorldDirection:(Rr=new xt,function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new St),this.getWorldQuaternion(Rr),t.set(0,0,-1).applyQuaternion(Rr)}),updateMatrixWorld:function(t){h.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Lt.prototype=Object.assign(Object.create(l.prototype),{constructor:Lt,isOrthographicCamera:!0,copy:function(t,e){return l.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,o,r){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=o,this.view.height=r,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,o=i-t;if(i+=t,t=n+e,e=n-e,null!==this.view&&this.view.enabled){i=this.zoom/(this.view.width/this.view.fullWidth),e=this.zoom/(this.view.height/this.view.fullHeight);var r=(this.right-this.left)/this.view.width;n=(this.top-this.bottom)/this.view.height,i=(o+=this.view.offsetX/i*r)+this.view.width/i*r,e=(t-=this.view.offsetY/e*n)-this.view.height/e*n}this.projectionMatrix.makeOrthographic(o,i,t,e,this.near,this.far)},toJSON:function(t){return(t=h.prototype.toJSON.call(this,t)).object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(z.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Ir,Or,Nr,zr,Hr,Br,Fr,Ur=0;x.prototype=Object.assign(Object.create(e.prototype),{constructor:x,isGeometry:!0,applyMatrix:function(t){for(var e=(new Tt).getNormalMatrix(t),i=0,n=this.vertices.length;i<n;i++)this.vertices[i].applyMatrix4(t);for(i=0,n=this.faces.length;i<n;i++){(t=this.faces[i]).normal.applyMatrix3(e).normalize();for(var o=0,r=t.vertexNormals.length;o<r;o++)t.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:(Fr=new _t,function(t){return Fr.makeRotationX(t),this.applyMatrix(Fr),this}),rotateY:(Br=new _t,function(t){return Br.makeRotationY(t),this.applyMatrix(Br),this}),rotateZ:(Hr=new _t,function(t){return Hr.makeRotationZ(t),this.applyMatrix(Hr),this}),translate:(zr=new _t,function(t,e,i){return zr.makeTranslation(t,e,i),this.applyMatrix(zr),this}),scale:(Nr=new _t,function(t,e,i){return Nr.makeScale(t,e,i),this.applyMatrix(Nr),this}),lookAt:(Or=new h,function(t){Or.lookAt(t),Or.updateMatrix(),this.applyMatrix(Or.matrix)}),fromBufferGeometry:function(t){function e(t,e,i,n){n=new z(t,e,i,void 0!==s?[h[t].clone(),h[e].clone(),h[i].clone()]:[],void 0!==a?[o.colors[t].clone(),o.colors[e].clone(),o.colors[i].clone()]:[],n),o.faces.push(n),void 0!==l&&o.faceVertexUvs[0].push([u[t].clone(),u[e].clone(),u[i].clone()]),void 0!==c&&o.faceVertexUvs[1].push([d[t].clone(),d[e].clone(),d[i].clone()])}var o=this,i=null!==t.index?t.index.array:void 0,n=t.attributes,r=n.position.array,s=void 0!==n.normal?n.normal.array:void 0,a=void 0!==n.color?n.color.array:void 0,l=void 0!==n.uv?n.uv.array:void 0,c=void 0!==n.uv2?n.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var h=[],u=[],d=[],p=n=0;n<r.length;n+=3,p+=2)o.vertices.push(new St(r[n],r[n+1],r[n+2])),void 0!==s&&h.push(new St(s[n],s[n+1],s[n+2])),void 0!==a&&o.colors.push(new kt(a[n],a[n+1],a[n+2])),void 0!==l&&u.push(new V(l[p],l[p+1])),void 0!==c&&d.push(new V(c[p],c[p+1]));var f=t.groups;if(0<f.length)for(n=0;n<f.length;n++){var m=(r=f[n]).start;for(p=m,m+=r.count;p<m;p+=3)void 0!==i?e(i[p],i[p+1],i[p+2],r.materialIndex):e(p,p+1,p+2,r.materialIndex)}else if(void 0!==i)for(n=0;n<i.length;n+=3)e(i[n],i[n+1],i[n+2]);else for(n=0;n<r.length/3;n+=3)e(n,n+1,n+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:(Ir=new St,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ir).negate(),this.translate(Ir.x,Ir.y,Ir.z),this}),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius;e=0===e?1:1/e;var i=new _t;return i.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new St,e=new St,i=0,n=this.faces.length;i<n;i++){var o=this.faces[i],r=this.vertices[o.a],s=this.vertices[o.b];t.subVectors(this.vertices[o.c],s),e.subVectors(r,s),t.cross(e),t.normalize(),o.normal.copy(t)}},computeVertexNormals:function(t){var e;void 0===t&&(t=!0);var i=Array(this.vertices.length),n=0;for(e=this.vertices.length;n<e;n++)i[n]=new St;if(t){var o=new St,r=new St;for(t=0,n=this.faces.length;t<n;t++){e=this.faces[t];var s=this.vertices[e.a],a=this.vertices[e.b],l=this.vertices[e.c];o.subVectors(l,a),r.subVectors(s,a),o.cross(r),i[e.a].add(o),i[e.b].add(o),i[e.c].add(o)}}else for(this.computeFaceNormals(),t=0,n=this.faces.length;t<n;t++)i[(e=this.faces[t]).a].add(e.normal),i[e.b].add(e.normal),i[e.c].add(e.normal);for(n=0,e=this.vertices.length;n<e;n++)i[n].normalize();for(t=0,n=this.faces.length;t<n;t++)3===(s=(e=this.faces[t]).vertexNormals).length?(s[0].copy(i[e.a]),s[1].copy(i[e.b]),s[2].copy(i[e.c])):(s[0]=i[e.a].clone(),s[1]=i[e.b].clone(),s[2]=i[e.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t;this.computeFaceNormals();var e=0;for(t=this.faces.length;e<t;e++){var i=this.faces[e],n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i=0;for(e=this.faces.length;i<e;i++){var n=this.faces[i];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);var o=0;for(t=n.vertexNormals.length;o<t;o++)n.__originalVertexNormals[o]?n.__originalVertexNormals[o].copy(n.vertexNormals[o]):n.__originalVertexNormals[o]=n.vertexNormals[o].clone()}var r=new x;for(r.faces=this.faces,o=0,t=this.morphTargets.length;o<t;o++){if(!this.morphNormals[o]){this.morphNormals[o]={},this.morphNormals[o].faceNormals=[],this.morphNormals[o].vertexNormals=[],n=this.morphNormals[o].faceNormals;var s=this.morphNormals[o].vertexNormals;for(i=0,e=this.faces.length;i<e;i++){var a=new St,l={a:new St,b:new St,c:new St};n.push(a),s.push(l)}}for(s=this.morphNormals[o],r.vertices=this.morphTargets[o].vertices,r.computeFaceNormals(),r.computeVertexNormals(),i=0,e=this.faces.length;i<e;i++)n=this.faces[i],a=s.faceNormals[i],l=s.vertexNormals[i],a.copy(n.normal),l.a.copy(n.vertexNormals[0]),l.b.copy(n.vertexNormals[1]),l.c.copy(n.vertexNormals[2])}for(i=0,e=this.faces.length;i<e;i++)(n=this.faces[i]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new i),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new s),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t&&t.isGeometry){var n,o=this.vertices.length,r=this.vertices,s=t.vertices,a=this.faces,l=t.faces,c=this.faceVertexUvs[0],h=t.faceVertexUvs[0],u=this.colors,d=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new Tt).getNormalMatrix(e)),t=0;for(var p=s.length;t<p;t++){var f=s[t].clone();void 0!==e&&f.applyMatrix4(e),r.push(f)}for(t=0,p=d.length;t<p;t++)u.push(d[t].clone());for(t=0,p=l.length;t<p;t++){var m=(s=l[t]).vertexNormals;for(d=s.vertexColors,(u=new z(s.a+o,s.b+o,s.c+o)).normal.copy(s.normal),void 0!==n&&u.normal.applyMatrix3(n).normalize(),e=0,r=m.length;e<r;e++)f=m[e].clone(),void 0!==n&&f.applyMatrix3(n).normalize(),u.vertexNormals.push(f);for(u.color.copy(s.color),e=0,r=d.length;e<r;e++)f=d[e],u.vertexColors.push(f.clone());u.materialIndex=s.materialIndex+i,a.push(u)}for(t=0,p=h.length;t<p;t++)if(n=[],void 0!==(i=h[t])){for(e=0,r=i.length;e<r;e++)n.push(i[e].clone());c.push(n)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e={},i=[],n=[],o=Math.pow(10,4),r=0;for(t=this.vertices.length;r<t;r++){var s=this.vertices[r];void 0===e[s=Math.round(s.x*o)+"_"+Math.round(s.y*o)+"_"+Math.round(s.z*o)]?(e[s]=r,i.push(this.vertices[r]),n[r]=i.length-1):n[r]=n[e[s]]}for(e=[],r=0,t=this.faces.length;r<t;r++)for((o=this.faces[r]).a=n[o.a],o.b=n[o.b],o.c=n[o.c],o=[o.a,o.b,o.c],s=0;s<3;s++)if(o[s]===o[(s+1)%3]){e.push(r);break}for(r=e.length-1;0<=r;r--)for(o=e[r],this.faces.splice(o,1),n=0,t=this.faceVertexUvs.length;n<t;n++)this.faceVertexUvs[n].splice(o,1);return r=this.vertices.length-i.length,this.vertices=i,r},setFromPoints:function(t){this.vertices=[];for(var e=0,i=t.length;e<i;e++){var n=t[e];this.vertices.push(new St(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,i=0;i<e;i++)t[i]._id=i;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var n,o,r=this.faceVertexUvs[0],s=this.faceVertexUvs[1];for(r&&r.length===e&&(n=[]),s&&s.length===e&&(o=[]),i=0;i<e;i++){var a=t[i]._id;n&&n.push(r[a]),o&&o.push(s[a])}n&&(this.faceVertexUvs[0]=n),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==c[e]||(c[e]=l.length/3,l.push(t.x,t.y,t.z)),c[e]}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==u[e]||(u[e]=h.length,h.push(t.getHex())),u[e]}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]||(p[e]=d.length/2,d.push(t.x,t.y)),p[e]}var o={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),void 0!==this.parameters){var r,s=this.parameters;for(r in s)void 0!==s[r]&&(o[r]=s[r]);return o}for(s=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];s.push(a.x,a.y,a.z)}a=[];var l=[],c={},h=[],u={},d=[],p={};for(r=0;r<this.faces.length;r++){var f=this.faces[r],m=void 0!==this.faceVertexUvs[0][r],g=0<f.normal.length(),v=0<f.vertexNormals.length,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,b=0<f.vertexColors.length,w=0;w=t(w=t(w=t(w=t(w=t(w=t(w=t(w=t(w,0,0),1,!0),2,!1),3,m),4,g),5,v),6,y),7,b),a.push(w),a.push(f.a,f.b,f.c),a.push(f.materialIndex),m&&(m=this.faceVertexUvs[0][r],a.push(n(m[0]),n(m[1]),n(m[2]))),g&&a.push(e(f.normal)),v&&(g=f.vertexNormals,a.push(e(g[0]),e(g[1]),e(g[2]))),y&&a.push(i(f.color)),b&&(f=f.vertexColors,a.push(i(f[0]),i(f[1]),i(f[2])))}return o.data={},o.data.vertices=s,o.data.normals=l,0<h.length&&(o.data.colors=h),0<d.length&&(o.data.uvs=[d]),o.data.faces=a,o},clone:function(){return(new x).copy(this)},copy:function(t){var e,i,n;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var o=t.vertices,r=0;for(e=o.length;r<e;r++)this.vertices.push(o[r].clone());for(r=0,e=(o=t.colors).length;r<e;r++)this.colors.push(o[r].clone());for(r=0,e=(o=t.faces).length;r<e;r++)this.faces.push(o[r].clone());for(r=0,e=t.faceVertexUvs.length;r<e;r++){var s=t.faceVertexUvs[r];for(void 0===this.faceVertexUvs[r]&&(this.faceVertexUvs[r]=[]),o=0,i=s.length;o<i;o++){var a=s[o],l=[],c=0;for(n=a.length;c<n;c++)l.push(a[c].clone());this.faceVertexUvs[r].push(l)}}for(r=0,e=(c=t.morphTargets).length;r<e;r++){if((n={}).name=c[r].name,void 0!==c[r].vertices)for(n.vertices=[],o=0,i=c[r].vertices.length;o<i;o++)n.vertices.push(c[r].vertices[o].clone());if(void 0!==c[r].normals)for(n.normals=[],o=0,i=c[r].normals.length;o<i;o++)n.normals.push(c[r].normals[o].clone());this.morphTargets.push(n)}for(r=0,e=(c=t.morphNormals).length;r<e;r++){if(n={},void 0!==c[r].vertexNormals)for(n.vertexNormals=[],o=0,i=c[r].vertexNormals.length;o<i;o++)s=c[r].vertexNormals[o],(a={}).a=s.a.clone(),a.b=s.b.clone(),a.c=s.c.clone(),n.vertexNormals.push(a);if(void 0!==c[r].faceNormals)for(n.faceNormals=[],o=0,i=c[r].faceNormals.length;o<i;o++)n.faceNormals.push(c[r].faceNormals[o].clone());this.morphNormals.push(n)}for(r=0,e=(o=t.skinWeights).length;r<e;r++)this.skinWeights.push(o[r].clone());for(r=0,e=(o=t.skinIndices).length;r<e;r++)this.skinIndices.push(o[r].clone());for(r=0,e=(o=t.lineDistances).length;r<e;r++)this.lineDistances.push(o[r]);return null!==(r=t.boundingBox)&&(this.boundingBox=r.clone()),null!==(r=t.boundingSphere)&&(this.boundingSphere=r.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(v.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(v.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,o=this.itemSize;n<o;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,o=t.length;n<o;n++){var r=t[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),r=new kt),e[i++]=r.r,e[i++]=r.g,e[i++]=r.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,n=0,o=t.length;n<o;n++){var r=t[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),r=new V),e[i++]=r.x,e[i++]=r.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,o=t.length;n<o;n++){var r=t[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),r=new St),e[i++]=r.x,e[i++]=r.y,e[i++]=r.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,o=t.length;n<o;n++){var r=t[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),r=new Mt),e[i++]=r.x,e[i++]=r.y,e[i++]=r.z,e[i++]=r.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,o){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=o,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),a.prototype=Object.create(v.prototype),a.prototype.constructor=a,c.prototype=Object.create(v.prototype),c.prototype.constructor=c,u.prototype=Object.create(v.prototype),u.prototype.constructor=u,p.prototype=Object.create(v.prototype),p.prototype.constructor=p,Rt.prototype=Object.create(v.prototype),Rt.prototype.constructor=Rt,f.prototype=Object.create(v.prototype),f.prototype.constructor=f,Dt.prototype=Object.create(v.prototype),Dt.prototype.constructor=Dt,q.prototype=Object.create(v.prototype),q.prototype.constructor=q,m.prototype=Object.create(v.prototype),m.prototype.constructor=m,Object.assign(g.prototype,{computeGroups:function(t){var e=[],i=void 0;t=t.faces;for(var n=0;n<t.length;n++){var o=t[n];if(o.materialIndex!==i){i=o.materialIndex,void 0!==r&&(r.count=3*n-r.start,e.push(r));var r={start:3*n,materialIndex:i}}}void 0!==r&&(r.count=3*n-r.start,e.push(r)),this.groups=e},fromGeometry:function(t){var e=t.faces,i=t.vertices,n=t.faceVertexUvs,o=n[0]&&0<n[0].length,r=n[1]&&0<n[1].length,s=t.morphTargets,a=s.length;if(0<a){for(var l=[],c=0;c<a;c++)l[c]=[];this.morphTargets.position=l}var h=t.morphNormals,u=h.length;if(0<u){var d=[];for(c=0;c<u;c++)d[c]=[];this.morphTargets.normal=d}var p=t.skinIndices,f=t.skinWeights,m=p.length===i.length,g=f.length===i.length;for(c=0;c<e.length;c++){var v=e[c];this.vertices.push(i[v.a],i[v.b],i[v.c]);var y=v.vertexNormals;for(3===y.length?this.normals.push(y[0],y[1],y[2]):(y=v.normal,this.normals.push(y,y,y)),3===(y=v.vertexColors).length?this.colors.push(y[0],y[1],y[2]):(y=v.color,this.colors.push(y,y,y)),!0===o&&(void 0!==(y=n[0][c])?this.uvs.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new V,new V,new V))),!0===r&&(void 0!==(y=n[1][c])?this.uvs2.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new V,new V,new V))),y=0;y<a;y++){var b=s[y].vertices;l[y].push(b[v.a],b[v.b],b[v.c])}for(y=0;y<u;y++)b=h[y].vertexNormals[c],d[y].push(b.a,b.b,b.c);m&&this.skinIndices.push(p[v.a],p[v.b],p[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var Wr,jr,$r,Gr,Vr,qr,Yr,Xr,Zr,Kr,Jr=1;Ot.prototype=Object.assign(Object.create(e.prototype),{constructor:Ot,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<It(t)?Dt:Rt)(t,1):this.index=t},addAttribute:function(t,e,i){if(e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute){if("index"!==t)return this.attributes[t]=e,this;console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e)}else console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new v(e,i))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;return void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0),void 0!==(e=this.attributes.normal)&&((new Tt).getNormalMatrix(t).applyToBufferAttribute(e),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:(Kr=new _t,function(t){return Kr.makeRotationX(t),this.applyMatrix(Kr),this}),rotateY:(Zr=new _t,function(t){return Zr.makeRotationY(t),this.applyMatrix(Zr),this}),rotateZ:(Xr=new _t,function(t){return Xr.makeRotationZ(t),this.applyMatrix(Xr),this}),translate:(Yr=new _t,function(t,e,i){return Yr.makeTranslation(t,e,i),this.applyMatrix(Yr),this}),scale:(qr=new _t,function(t,e,i){return qr.makeScale(t,e,i),this.applyMatrix(qr),this}),lookAt:(Vr=new h,function(t){Vr.lookAt(t),Vr.updateMatrix(),this.applyMatrix(Vr.matrix)}),center:(Gr=new St,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gr).negate(),this.translate(Gr.x,Gr.y,Gr.z),this}),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){t=new q(3*e.vertices.length,3);var i=new q(3*e.colors.length,3);this.addAttribute("position",t.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length&&(t=new q(e.lineDistances.length,1),this.addAttribute("lineDistance",t.copyArray(e.lineDistances))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var o=t[i];e.push(o.x,o.y,o.z||0)}return this.addAttribute("position",new q(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var i=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(i=void 0,e.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}return!0===e.verticesNeedUpdate&&(void 0!==(i=this.attributes.position)&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(void 0!==(i=this.attributes.normal)&&(i.copyVector3sArray(e.normals),i.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(void 0!==(i=this.attributes.color)&&(i.copyColorsArray(e.colors),i.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(void 0!==(i=this.attributes.uv)&&(i.copyVector2sArray(e.uvs),i.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(void 0!==(i=this.attributes.lineDistance)&&(i.copyArray(e.lineDistances),i.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new g).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);for(var i in this.addAttribute("position",new v(e,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.addAttribute("normal",new v(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(e=new Float32Array(3*t.colors.length),this.addAttribute("color",new v(e,3).copyColorsArray(t.colors))),0<t.uvs.length&&(e=new Float32Array(2*t.uvs.length),this.addAttribute("uv",new v(e,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(e=new Float32Array(2*t.uvs2.length),this.addAttribute("uv2",new v(e,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){e=[];for(var n=t.morphTargets[i],o=0,r=n.length;o<r;o++){var s=n[o],a=new q(3*s.length,3);e.push(a.copyVector3sArray(s))}this.morphAttributes[i]=e}return 0<t.skinIndices.length&&(i=new q(4*t.skinIndices.length,4),this.addAttribute("skinIndex",i.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(i=new q(4*t.skinWeights.length,4),this.addAttribute("skinWeight",i.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new i);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:(jr=new i,$r=new St,function(){null===this.boundingSphere&&(this.boundingSphere=new s);var t=this.attributes.position;if(t){var e=this.boundingSphere.center;jr.setFromBufferAttribute(t),jr.getCenter(e);for(var i=0,n=0,o=t.count;n<o;n++)$r.x=t.getX(n),$r.y=t.getY(n),$r.z=t.getZ(n),i=Math.max(i,e.distanceToSquared($r));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,i=this.groups;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new v(new Float32Array(n.length),3));else for(var o=e.normal.array,r=0,s=o.length;r<s;r++)o[r]=0;o=e.normal.array;var a=new St,l=new St,c=new St,h=new St,u=new St;if(t){t=t.array,0===i.length&&this.addGroup(0,t.length);for(var d=0,p=i.length;d<p;++d){s=(r=i[d]).start;var f=r.count;for(r=s,s+=f;r<s;r+=3){f=3*t[r+0];var m=3*t[r+1],g=3*t[r+2];a.fromArray(n,f),l.fromArray(n,m),c.fromArray(n,g),h.subVectors(c,l),u.subVectors(a,l),h.cross(u),o[f]+=h.x,o[f+1]+=h.y,o[f+2]+=h.z,o[m]+=h.x,o[m+1]+=h.y,o[m+2]+=h.z,o[g]+=h.x,o[g+1]+=h.y,o[g+2]+=h.z}}}else for(r=0,s=n.length;r<s;r+=9)a.fromArray(n,r),l.fromArray(n,r+3),c.fromArray(n,r+6),h.subVectors(c,l),u.subVectors(a,l),h.cross(u),o[r]=h.x,o[r+1]=h.y,o[r+2]=h.z,o[r+3]=h.x,o[r+4]=h.y,o[r+5]=h.z,o[r+6]=h.x,o[r+7]=h.y,o[r+8]=h.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i,n=this.attributes;for(i in n)if(void 0!==t.attributes[i]){var o=n[i].array,r=t.attributes[i],s=r.array,a=0;for(r=r.itemSize*e;a<s.length;a++,r++)o[r]=s[a]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:(Wr=new St,function(){for(var t=this.attributes.normal,e=0,i=t.count;e<i;e++)Wr.x=t.getX(e),Wr.y=t.getY(e),Wr.z=t.getZ(e),Wr.normalize(),t.setXYZ(e,Wr.x,Wr.y,Wr.z)}),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t,e=new Ot,i=this.index.array,n=this.attributes;for(t in n){var o=n[t],r=o.array,s=o.itemSize,a=new r.constructor(i.length*s),l=0;o=0;for(var c=i.length;o<c;o++)for(var h=i[o]*s,u=0;u<s;u++)a[l++]=r[h++];e.addAttribute(t,new v(a,s))}for(o=0,c=(i=this.groups).length;o<c;o++)n=i[o],e.addGroup(n.start,n.count,n.materialIndex);return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(o in e)void 0!==e[o]&&(t[o]=e[o]);return t}t.data={attributes:{}};var i=this.index;for(o in null!==i&&(e=Array.prototype.slice.call(i.array),t.data.index={type:i.array.constructor.name,array:e}),i=this.attributes){var n=i[o];e=Array.prototype.slice.call(n.array),t.data.attributes[o]={itemSize:n.itemSize,type:n.array.constructor.name,array:e,normalized:n.normalized}}var o=this.groups;return 0<o.length&&(t.data.groups=JSON.parse(JSON.stringify(o))),null!==(o=this.boundingSphere)&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t},clone:function(){return(new Ot).copy(this)},copy:function(t){var e;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var i=t.index;for(s in null!==i&&this.setIndex(i.clone()),i=t.attributes)this.addAttribute(s,i[s].clone());var n=t.morphAttributes;for(s in n){var o=[],r=n[s];for(i=0,e=r.length;i<e;i++)o.push(r[i].clone());this.morphAttributes[s]=o}var s=t.groups;for(i=0,e=s.length;i<e;i++)n=s[i],this.addGroup(n.start,n.count,n.materialIndex);return null!==(s=t.boundingBox)&&(this.boundingBox=s.clone()),null!==(s=t.boundingSphere)&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),y.prototype=Object.create(x.prototype),y.prototype.constructor=y,Nt.prototype=Object.create(Ot.prototype),Nt.prototype.constructor=Nt,b.prototype=Object.create(x.prototype),b.prototype.constructor=b,zt.prototype=Object.create(Ot.prototype),zt.prototype.constructor=zt;var Qr,ts,es,is,ns,os,rs,ss,as,ls,cs,hs,us,ds,ps,fs,ms,gs,vs,ys,bs,ws,_s,xs,Ss=0;w.prototype=Object.assign(Object.create(e.prototype),{constructor:w,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0===i)console.warn("THREE.Material: '"+e+"' parameter is undefined.");else if("shading"===e)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;else{var n=this[e];void 0===n?console.warn("THREE."+this.type+": '"+e+"' is not a property of this material."):n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]="overdraw"===e?Number(i):i}}},toJSON:function(t){function e(t){var e,i=[];for(e in t){var n=t[e];delete n.metadata,i.push(n)}return i}var i=void 0===t||"string"==typeof t;i&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),i&&(i=e(t.textures),t=e(t.images),0<i.length&&(n.textures=i),0<t.length&&(n.images=t)),n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var n=e.length;i=Array(n);for(var o=0;o!==n;++o)i[o]=e[o].clone()}return this.clippingPlanes=i,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ht.prototype=Object.create(w.prototype),(Ht.prototype.constructor=Ht).prototype.isMeshBasicMaterial=!0,Ht.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Bt.prototype=Object.create(w.prototype),(Bt.prototype.constructor=Bt).prototype.isShaderMaterial=!0,Bt.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=cr.clone(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Bt.prototype.toJSON=function(t){return(t=w.prototype.toJSON.call(this,t)).uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(H.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new St),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:(cs=new St,function(t){return this.origin.copy(this.at(t,cs)),this}),closestPointToPoint:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new St),e.subVectors(t,this.origin),(t=e.dot(this.direction))<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:(ls=new St,function(t){var e=ls.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(ls.copy(this.direction).multiplyScalar(e).add(this.origin),ls.distanceToSquared(t))}),distanceSqToSegment:(rs=new St,ss=new St,as=new St,function(t,e,i,n){rs.copy(t).add(e).multiplyScalar(.5),ss.copy(e).sub(t).normalize(),as.copy(this.origin).sub(rs);var o=.5*t.distanceTo(e),r=-this.direction.dot(ss),s=as.dot(this.direction),a=-as.dot(ss),l=as.lengthSq(),c=Math.abs(1-r*r);if(0<c){e=r*s-a;var h=o*c;0<=(t=r*a-s)?-h<=e?e<=h?r=(t*=o=1/c)*(t+r*(e*=o)+2*s)+e*(r*t+e+2*a)+l:(e=o,r=-(t=Math.max(0,-(r*e+s)))*t+e*(e+2*a)+l):(e=-o,r=-(t=Math.max(0,-(r*e+s)))*t+e*(e+2*a)+l):e<=-h?r=-(t=Math.max(0,-(-r*o+s)))*t+(e=0<t?-o:Math.min(Math.max(-o,-a),o))*(e+2*a)+l:e<=h?(t=0,r=(e=Math.min(Math.max(-o,-a),o))*(e+2*a)+l):r=-(t=Math.max(0,-(r*o+s)))*t+(e=0<t?o:Math.min(Math.max(-o,-a),o))*(e+2*a)+l}else e=0<r?-o:o,r=-(t=Math.max(0,-(r*e+s)))*t+e*(e+2*a)+l;return i&&i.copy(this.direction).multiplyScalar(t).add(this.origin),n&&n.copy(ss).multiplyScalar(e).add(rs),r}),intersectSphere:(os=new St,function(t,e){os.subVectors(t.center,this.origin);var i=os.dot(this.direction),n=os.dot(os)-i*i;return(t=t.radius*t.radius)<n?null:(n=i-(t=Math.sqrt(t-n)),i+=t,n<0&&i<0?null:n<0?this.at(i,e):this.at(n,e))}),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var i=1/this.direction.x,n=1/this.direction.y,o=1/this.direction.z,r=this.origin;if(0<=i){var s=(t.min.x-r.x)*i;i*=t.max.x-r.x}else s=(t.max.x-r.x)*i,i*=t.min.x-r.x;if(0<=n){var a=(t.min.y-r.y)*n;n*=t.max.y-r.y}else a=(t.max.y-r.y)*n,n*=t.min.y-r.y;return n<s||i<a?null:((s<a||s!=s)&&(s=a),(n<i||i!=i)&&(i=n),0<=o?(a=(t.min.z-r.z)*o,t=(t.max.z-r.z)*o):(a=(t.max.z-r.z)*o,t=(t.min.z-r.z)*o),t<s||i<a?null:((s<a||s!=s)&&(s=a),(t<i||i!=i)&&(i=t),i<0?null:this.at(0<=s?s:i,e)))},intersectsBox:(ns=new St,function(t){return null!==this.intersectBox(t,ns)}),intersectTriangle:(Qr=new St,ts=new St,es=new St,is=new St,function(t,e,i,n,o){if(ts.subVectors(e,t),es.subVectors(i,t),is.crossVectors(ts,es),0<(e=this.direction.dot(is))){if(n)return null;n=1}else{if(!(e<0))return null;n=-1,e=-e}return Qr.subVectors(this.origin,t),(t=n*this.direction.dot(es.crossVectors(Qr,es)))<0?null:(i=n*this.direction.dot(ts.cross(Qr)))<0||e<t+i?null:(t=-n*Qr.dot(is))<0?null:this.at(t/e,o)}),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(_.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new St),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new St),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new St),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:(hs=new St,us=new St,function(t,e){return hs.subVectors(t,this.start),us.subVectors(this.end,this.start),t=us.dot(us),t=us.dot(hs)/t,e&&(t=Wo.clamp(t,0,1)),t}),closestPointToPoint:function(t,e,i){return t=this.closestPointToPointParameter(t,e),void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new St),this.delta(i).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Object.assign(B,{getNormal:(gs=new St,function(t,e,i,n){return void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new St),n.subVectors(i,e),gs.subVectors(t,e),n.cross(gs),0<(t=n.lengthSq())?n.multiplyScalar(1/Math.sqrt(t)):n.set(0,0,0)}),getBarycoord:(ps=new St,fs=new St,ms=new St,function(t,e,i,n,o){ps.subVectors(n,e),fs.subVectors(i,e),ms.subVectors(t,e),t=ps.dot(ps),e=ps.dot(fs),i=ps.dot(ms);var r=fs.dot(fs);n=fs.dot(ms);var s=t*r-e*e;return void 0===o&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),o=new St),0===s?o.set(-2,-1,-1):(r=(r*i-e*n)*(s=1/s),t=(t*n-e*i)*s,o.set(1-r-t,t,r))}),containsPoint:(ds=new St,function(t,e,i,n){return B.getBarycoord(t,e,i,n,ds),0<=ds.x&&0<=ds.y&&ds.x+ds.y<=1})}),Object.assign(B.prototype,{set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:(_s=new St,xs=new St,function(){return _s.subVectors(this.c,this.b),xs.subVectors(this.a,this.b),.5*_s.cross(xs).length()}),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new St),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return B.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new St),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return B.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return B.containsPoint(t,this.a,this.b,this.c)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:(vs=new Ct,ys=[new _,new _,new _],bs=new St,ws=new St,function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new St);var i=1/0;if(vs.setFromCoplanarPoints(this.a,this.b,this.c),vs.projectPoint(t,bs),!0===this.containsPoint(bs))e.copy(bs);else for(ys[0].set(this.a,this.b),ys[1].set(this.b,this.c),ys[2].set(this.c,this.a),t=0;t<ys.length;t++){ys[t].closestPointToPoint(bs,!0,ws);var n=bs.distanceToSquared(ws);n<i&&(i=n,e.copy(ws))}return e}),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),Ft.prototype=Object.assign(Object.create(h.prototype),{constructor:Ft,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return h.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var e=Object.keys(t);if(0<e.length){var i=t[e[0]];if(void 0!==i)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=i.length;t<e;t++){var n=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}else if(void 0!==(i=t.morphTargets)&&0<i.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=i.length;t<e;t++)n=i[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t},raycast:function(){function _(t,e,i,n,o,r,s){return B.getBarycoord(t,e,i,n,a),o.multiplyScalar(a.x),r.multiplyScalar(a.y),s.multiplyScalar(a.z),o.add(r).add(s),o.clone()}function x(t,e,i,n,o,r,s,a){return null===(1===e.side?n.intersectTriangle(s,r,o,!0,a):n.intersectTriangle(o,r,s,2!==e.side,a))?null:(l.copy(a),l.applyMatrix4(t.matrixWorld),(e=i.ray.origin.distanceTo(l))<i.near||e>i.far?null:{distance:e,point:l.clone(),object:t})}function S(t,e,i,n,o,r,s,a){return C.fromBufferAttribute(n,r),A.fromBufferAttribute(n,s),k.fromBufferAttribute(n,a),(t=x(t,t.material,e,i,C,A,k,N))&&(o&&(D.fromBufferAttribute(o,r),I.fromBufferAttribute(o,s),O.fromBufferAttribute(o,a),t.uv=_(N,C,A,k,D,I,O)),o=new z(r,s,a),B.getNormal(C,A,k,o.normal),t.face=o,t.faceIndex=r),t}var T=new _t,M=new H,E=new s,C=new St,A=new St,k=new St,P=new St,L=new St,R=new St,D=new V,I=new V,O=new V,a=new St,N=new St,l=new St;return function(t,e){var i,n=this.geometry,o=this.material,r=this.matrixWorld;if(void 0!==o&&(null===n.boundingSphere&&n.computeBoundingSphere(),E.copy(n.boundingSphere),E.applyMatrix4(r),!1!==t.ray.intersectsSphere(E)&&(T.getInverse(r),M.copy(t.ray).applyMatrix4(T),null===n.boundingBox||!1!==M.intersectsBox(n.boundingBox))))if(n.isBufferGeometry){o=n.index;var s,a=n.attributes.position;if(n=n.attributes.uv,null!==o)for(r=0,s=o.count;r<s;r+=3){var l=o.getX(r),c=o.getX(r+1),h=o.getX(r+2);(i=S(this,t,M,a,n,l,c,h))&&(i.faceIndex=Math.floor(r/3),e.push(i))}else if(void 0!==a)for(r=0,s=a.count;r<s;r+=3)(i=S(this,t,M,a,n,l=r,c=r+1,h=r+2))&&e.push(i)}else if(n.isGeometry){r=Array.isArray(o),s=n.vertices,l=n.faces,0<(c=n.faceVertexUvs[0]).length&&(a=c);for(var u=0,d=l.length;u<d;u++){var p=l[u];if(void 0!==(i=r?o[p.materialIndex]:o)){c=s[p.a],h=s[p.b];var f=s[p.c];if(!0===i.morphTargets){var m=n.morphTargets,g=this.morphTargetInfluences;C.set(0,0,0),A.set(0,0,0),k.set(0,0,0);for(var v=0,y=m.length;v<y;v++){var b=g[v];if(0!==b){var w=m[v].vertices;C.addScaledVector(P.subVectors(w[p.a],c),b),A.addScaledVector(L.subVectors(w[p.b],h),b),k.addScaledVector(R.subVectors(w[p.c],f),b)}}C.add(c),A.add(h),k.add(f),c=C,h=A,f=k}(i=x(this,i,t,M,c,h,f,N))&&(a&&a[u]&&(m=a[u],D.copy(m[0]),I.copy(m[1]),O.copy(m[2]),i.uv=_(N,c,h,f,D,I,O)),i.face=p,i.faceIndex=u,e.push(i))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),S.prototype=Object.create(d.prototype),(S.prototype.constructor=S).prototype.isCubeTexture=!0,Object.defineProperty(S.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Ts=new d,Ms=new S,Es=[],Cs=[],As=new Float32Array(16),ks=new Float32Array(9);nt.prototype.setValue=function(t,e){for(var i=this.seq,n=0,o=i.length;n!==o;++n){var r=i[n];r.setValue(t,e[r.id])}};var Ps=/([\w\d_]+)(\])?(\[|\.)?/g;Wt.prototype.setValue=function(t,e,i){void 0!==(e=this.map[e])&&e.setValue(t,i,this.renderer)},Wt.prototype.setOptional=function(t,e,i){void 0!==(e=e[i])&&this.setValue(t,i,e)},Wt.upload=function(t,e,i,n){for(var o=0,r=e.length;o!==r;++o){var s=e[o],a=i[s.id];!1!==a.needsUpdate&&s.setValue(t,a.value,n)}},Wt.seqWithValue=function(t,e){for(var i=[],n=0,o=t.length;n!==o;++n){var r=t[n];r.id in e&&i.push(r)}return i};var Ls,Rs,Ds,Is,Os,Ns,zs,Hs,Bs,Fs,Us,Ws,js,$s,Gs,Vs,qs,Ys,Xs=0,Zs=0;mt.prototype=Object.create(w.prototype),(mt.prototype.constructor=mt).prototype.isMeshDepthMaterial=!0,mt.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},gt.prototype=Object.create(w.prototype),(gt.prototype.constructor=gt).prototype.isMeshDistanceMaterial=!0,gt.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},qt.prototype=Object.create(d.prototype),qt.prototype.constructor=qt,vt.prototype=Object.assign(Object.create(l.prototype),{constructor:vt,isPerspectiveCamera:!0,copy:function(t,e){return l.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*Wo.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Wo.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Wo.RAD2DEG*Math.atan(Math.tan(.5*Wo.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,o,r){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=o,this.view.height=r,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Wo.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,o=-.5*n,r=this.view;if(null!==this.view&&this.view.enabled){var s=r.fullWidth,a=r.fullHeight;o+=r.offsetX*n/s,e-=r.offsetY*i/a,n*=r.width/s,i*=r.height/a}0!==(r=this.filmOffset)&&(o+=t*r/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+n,e,e-i,t,this.far)},toJSON:function(t){return(t=h.prototype.toJSON.call(this,t)).object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),yt.prototype=Object.assign(Object.create(vt.prototype),{constructor:yt,isArrayCamera:!0}),wt.prototype.isFogExp2=!0,wt.prototype.clone=function(){return new wt(this.color.getHex(),this.density)},wt.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Zt.prototype.isFog=!0,Zt.prototype.clone=function(){return new Zt(this.color.getHex(),this.near,this.far)},Zt.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Kt.prototype=Object.assign(Object.create(h.prototype),{constructor:Kt,copy:function(t,e){return h.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=h.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),Jt.prototype=Object.create(w.prototype),(Jt.prototype.constructor=Jt).prototype.isSpriteMaterial=!0,Jt.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},Qt.prototype=Object.assign(Object.create(h.prototype),{constructor:Qt,isSprite:!0,raycast:(Ls=new St,Rs=new St,Ds=new St,function(t,e){Rs.setFromMatrixPosition(this.matrixWorld),t.ray.closestPointToPoint(Rs,Ls),Ds.setFromMatrixScale(this.matrixWorld);var i=Ds.x*Ds.y/4;Rs.distanceToSquared(Ls)>i||(i=t.ray.origin.distanceTo(Ls))<t.near||i>t.far||e.push({distance:i,point:Ls.clone(),face:null,object:this})}),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return h.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),te.prototype=Object.assign(Object.create(h.prototype),{constructor:te,copy:function(t){h.prototype.copy.call(this,t,!1);for(var e=0,i=(t=t.levels).length;e<i;e++){var n=t[e];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,n=0;n<i.length&&!(e<i[n].distance);n++);i.splice(n,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object},raycast:(Ns=new St,function(t,e){Ns.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(Ns);this.getObjectForDistance(i).raycast(t,e)}),update:(Is=new St,Os=new St,function(t){var e=this.levels;if(1<e.length){Is.setFromMatrixPosition(t.matrixWorld),Os.setFromMatrixPosition(this.matrixWorld),t=Is.distanceTo(Os),e[0].object.visible=!0;for(var i=1,n=e.length;i<n&&t>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(;i<n;i++)e[i].object.visible=!1}}),toJSON:function(t){(t=h.prototype.toJSON.call(this,t)).object.levels=[];for(var e=this.levels,i=0,n=e.length;i<n;i++){var o=e[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(ee.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var i=new _t;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){var t,e,i=0;for(e=this.bones.length;i<e;i++)(t=this.bones[i])&&t.matrixWorld.getInverse(this.boneInverses[i]);for(i=0,e=this.bones.length;i<e;i++)(t=this.bones[i])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:(zs=new _t,Hs=new _t,function(){for(var t=this.bones,e=this.boneInverses,i=this.boneMatrices,n=this.boneTexture,o=0,r=t.length;o<r;o++)zs.multiplyMatrices(t[o]?t[o].matrixWorld:Hs,e[o]),zs.toArray(i,16*o);void 0!==n&&(n.needsUpdate=!0)}),clone:function(){return new ee(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,i=this.bones.length;e<i;e++){var n=this.bones[e];if(n.name===t)return n}}}),ie.prototype=Object.assign(Object.create(h.prototype),{constructor:ie,isBone:!0}),ne.prototype=Object.assign(Object.create(Ft.prototype),{constructor:ne,isSkinnedMesh:!0,initBones:function(){var t,e=[];if(this.geometry&&void 0!==this.geometry.bones){var i=0;for(t=this.geometry.bones.length;i<t;i++){var n=this.geometry.bones[i],o=new ie;e.push(o),o.name=n.name,o.position.fromArray(n.pos),o.quaternion.fromArray(n.rotq),void 0!==n.scl&&o.scale.fromArray(n.scl)}for(i=0,t=this.geometry.bones.length;i<t;i++)-1!==(n=this.geometry.bones[i]).parent&&null!==n.parent&&void 0!==e[n.parent]?e[n.parent].add(e[i]):this.add(e[i])}return this.updateMatrixWorld(!0),e},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t],i=1/e.manhattanLength();1/0!==i?e.multiplyScalar(i):e.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){e=new Mt;var n=this.geometry.attributes.skinWeight;for(t=0;t<n.count;t++)e.x=n.getX(t),e.y=n.getY(t),e.z=n.getZ(t),e.w=n.getW(t),1/0!==(i=1/e.manhattanLength())?e.multiplyScalar(i):e.set(1,0,0,0),n.setXYZW(t,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(t){Ft.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),oe.prototype=Object.create(w.prototype),(oe.prototype.constructor=oe).prototype.isLineBasicMaterial=!0,oe.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},re.prototype=Object.assign(Object.create(h.prototype),{constructor:re,isLine:!0,computeLineDistances:(Ws=new St,js=new St,function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,i=[0],n=1,o=e.count;n<o;n++)Ws.fromBufferAttribute(e,n-1),js.fromBufferAttribute(e,n),i[n]=i[n-1],i[n]+=Ws.distanceTo(js);t.addAttribute("lineDistance",new q(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(e=t.vertices,(i=t.lineDistances)[0]=0,n=1,o=e.length;n<o;n++)i[n]=i[n-1],i[n]+=e[n-1].distanceTo(e[n]);return this}),raycast:(Bs=new _t,Fs=new H,Us=new s,function(t,e){var i=t.linePrecision;i*=i;var n=this.geometry,o=this.matrixWorld;if(null===n.boundingSphere&&n.computeBoundingSphere(),Us.copy(n.boundingSphere),Us.applyMatrix4(o),!1!==t.ray.intersectsSphere(Us)){Bs.getInverse(o),Fs.copy(t.ray).applyMatrix4(Bs);var r=new St,s=new St;o=new St;var a=new St,l=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var c=n.index,h=n.attributes.position.array;if(null!==c){n=0;for(var u=(c=c.array).length-1;n<u;n+=l){var d=c[n+1];r.fromArray(h,3*c[n]),s.fromArray(h,3*d),i<(d=Fs.distanceSqToSegment(r,s,a,o))||(a.applyMatrix4(this.matrixWorld),(d=t.ray.origin.distanceTo(a))<t.near||d>t.far||e.push({distance:d,point:o.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}else for(n=0,u=h.length/3-1;n<u;n+=l)r.fromArray(h,3*n),s.fromArray(h,3*n+3),i<(d=Fs.distanceSqToSegment(r,s,a,o))||(a.applyMatrix4(this.matrixWorld),(d=t.ray.origin.distanceTo(a))<t.near||d>t.far||e.push({distance:d,point:o.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else if(n.isGeometry)for(s=(r=n.vertices).length,n=0;n<s-1;n+=l)i<(d=Fs.distanceSqToSegment(r[n],r[n+1],a,o))||(a.applyMatrix4(this.matrixWorld),(d=t.ray.origin.distanceTo(a))<t.near||d>t.far||e.push({distance:d,point:o.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),se.prototype=Object.assign(Object.create(re.prototype),{constructor:se,isLineSegments:!0,computeLineDistances:($s=new St,Gs=new St,function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,i=[],n=0,o=e.count;n<o;n+=2)$s.fromBufferAttribute(e,n),Gs.fromBufferAttribute(e,n+1),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+$s.distanceTo(Gs);t.addAttribute("lineDistance",new q(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(e=t.vertices,i=t.lineDistances,n=0,o=e.length;n<o;n+=2)$s.copy(e[n]),Gs.copy(e[n+1]),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+$s.distanceTo(Gs);return this})}),ae.prototype=Object.assign(Object.create(re.prototype),{constructor:ae,isLineLoop:!0}),le.prototype=Object.create(w.prototype),(le.prototype.constructor=le).prototype.isPointsMaterial=!0,le.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},ce.prototype=Object.assign(Object.create(h.prototype),{constructor:ce,isPoints:!0,raycast:(Vs=new _t,qs=new H,Ys=new s,function(n,o){function t(t,e){var i=qs.distanceSqToPoint(t);i<a&&(qs.closestPointToPoint(t,l),l.applyMatrix4(s),(t=n.ray.origin.distanceTo(l))<n.near||t>n.far||o.push({distance:t,distanceToRay:Math.sqrt(i),point:l.clone(),index:e,face:null,object:r}))}var r=this,e=this.geometry,s=this.matrixWorld,i=n.params.Points.threshold;if(null===e.boundingSphere&&e.computeBoundingSphere(),Ys.copy(e.boundingSphere),Ys.applyMatrix4(s),Ys.radius+=i,!1!==n.ray.intersectsSphere(Ys)){Vs.getInverse(s),qs.copy(n.ray).applyMatrix4(Vs);var a=(i/=(this.scale.x+this.scale.y+this.scale.z)/3)*i;i=new St;var l=new St;if(e.isBufferGeometry){var c=e.index;if(e=e.attributes.position.array,null!==c){var h=c.array;c=0;for(var u=h.length;c<u;c++){var d=h[c];i.fromArray(e,3*d),t(i,d)}}else for(c=0,h=e.length/3;c<h;c++)i.fromArray(e,3*c),t(i,c)}else for(c=0,h=(i=e.vertices).length;c<h;c++)t(i[c],c)}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),he.prototype=Object.assign(Object.create(h.prototype),{constructor:he,isGroup:!0}),ue.prototype=Object.assign(Object.create(d.prototype),{constructor:ue,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),de.prototype=Object.create(d.prototype),(de.prototype.constructor=de).prototype.isCompressedTexture=!0,pe.prototype=Object.create(d.prototype),(pe.prototype.constructor=pe).prototype.isDepthTexture=!0,fe.prototype=Object.create(Ot.prototype),fe.prototype.constructor=fe,me.prototype=Object.create(x.prototype),me.prototype.constructor=me,ge.prototype=Object.create(Ot.prototype),ge.prototype.constructor=ge,ve.prototype=Object.create(x.prototype),ve.prototype.constructor=ve,ye.prototype=Object.create(Ot.prototype),ye.prototype.constructor=ye,be.prototype=Object.create(x.prototype),be.prototype.constructor=be,we.prototype=Object.create(ye.prototype),we.prototype.constructor=we,_e.prototype=Object.create(x.prototype),_e.prototype.constructor=_e,xe.prototype=Object.create(ye.prototype),xe.prototype.constructor=xe,Se.prototype=Object.create(x.prototype),Se.prototype.constructor=Se,Te.prototype=Object.create(ye.prototype),Te.prototype.constructor=Te,Me.prototype=Object.create(x.prototype),Me.prototype.constructor=Me,Ee.prototype=Object.create(ye.prototype),Ee.prototype.constructor=Ee,Ce.prototype=Object.create(x.prototype),Ce.prototype.constructor=Ce,Ae.prototype=Object.create(Ot.prototype),Ae.prototype.constructor=Ae,ke.prototype=Object.create(x.prototype),ke.prototype.constructor=ke,Pe.prototype=Object.create(Ot.prototype),Pe.prototype.constructor=Pe,Le.prototype=Object.create(x.prototype),Le.prototype.constructor=Le,Re.prototype=Object.create(Ot.prototype),Re.prototype.constructor=Re;var Ks=function(t,e,i){i=i||2;var n,o=e&&e.length,r=o?e[0]*i:t.length,s=De(t,0,r,i,!0),a=[];if(!s)return a;if(o){var l,c=i;o=[];var h=0;for(l=e.length;h<l;h++){var u=e[h]*c;(u=De(t,u,h<l-1?e[h+1]*c:t.length,c,!1))===u.next&&(u.steiner=!0),o.push(He(u))}for(o.sort(Oe),h=0;h<o.length;h++)(c=Ne(e=o[h],c=s))&&Ie(e=$e(c,e),e.next),s=Ie(s,s.next)}if(t.length>80*i){var d=n=t[0],p=o=t[1];for(c=i;c<r;c+=i)(h=t[c])<d&&(d=h),(e=t[c+1])<p&&(p=e),n<h&&(n=h),o<e&&(o=e);n=0!==(n=Math.max(n-d,o-p))?1/n:0}return function t(e,i,n,o,r,s,a){if(e){if(!a&&s){for(var l=e,c=l;null===c.z&&(c.z=ze(c.x,c.y,o,r,s)),c.prevZ=c.prev,(c=c.nextZ=c.next)!==l;);c.prevZ.nextZ=null,c.prevZ=null,l=c;var h,u,d,p,f=1;do{c=l;var m=l=null;for(u=0;c;){u++;var g=c;for(h=d=0;h<f&&(d++,g=g.nextZ);h++);for(p=f;0<d||0<p&&g;)0!==d&&(0===p||!g||c.z<=g.z)?(c=(h=c).nextZ,d--):(g=(h=g).nextZ,p--),m?m.nextZ=h:l=h,h.prevZ=m,m=h;c=g}m.nextZ=null,f*=2}while(1<u)}for(l=e;e.prev!==e.next;){if(c=e.prev,g=e.next,s)t:{p=o;var v=r,y=s;if(0<=Fe(u=(m=e).prev,d=m,f=m.next))m=!1;else{var b=u.x>d.x?u.x>f.x?u.x:f.x:d.x>f.x?d.x:f.x,w=u.y>d.y?u.y>f.y?u.y:f.y:d.y>f.y?d.y:f.y;for(h=ze(u.x<d.x?u.x<f.x?u.x:f.x:d.x<f.x?d.x:f.x,u.y<d.y?u.y<f.y?u.y:f.y:d.y<f.y?d.y:f.y,p,v,y),p=ze(b,w,p,v,y),v=m.nextZ;v&&v.z<=p;){if(v!==m.prev&&v!==m.next&&Be(u.x,u.y,d.x,d.y,f.x,f.y,v.x,v.y)&&0<=Fe(v.prev,v,v.next)){m=!1;break t}v=v.nextZ}for(v=m.prevZ;v&&v.z>=h;){if(v!==m.prev&&v!==m.next&&Be(u.x,u.y,d.x,d.y,f.x,f.y,v.x,v.y)&&0<=Fe(v.prev,v,v.next)){m=!1;break t}v=v.prevZ}m=!0}}else t:if(m=e,u=m.prev,d=m,f=m.next,0<=Fe(u,d,f))m=!1;else{for(h=m.next.next;h!==m.prev;){if(Be(u.x,u.y,d.x,d.y,f.x,f.y,h.x,h.y)&&0<=Fe(h.prev,h,h.next)){m=!1;break t}h=h.next}m=!0}if(m)i.push(c.i/n),i.push(e.i/n),i.push(g.i/n),Ve(e),l=e=g.next;else if((e=g)===l){if(a){if(1===a){for(a=i,l=n,c=e;!Ue(g=c.prev,m=c.next.next)&&We(g,c,c.next,m)&&je(g,m)&&je(m,g)&&(a.push(g.i/l),a.push(c.i/l),a.push(m.i/l),Ve(c),Ve(c.next),c=e=m),(c=c.next)!==e;);t(e=c,i,n,o,r,s,2)}else if(2===a)t:{a=e;do{for(l=a.next.next;l!==a.prev;){if(c=a.i!==l.i){if(g=l,m=(c=a).next.i!==g.i&&c.prev.i!==g.i){e:{m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==g.i&&m.next.i!==g.i&&We(m,m.next,c,g)){m=!0;break e}m=m.next}while(m!==c);m=!1}m=!m}if(m=m&&je(c,g)&&je(g,c)){for(u=!1,d=((m=c).x+g.x)/2,g=(c.y+g.y)/2;m.y>g!=m.next.y>g&&m.next.y!==m.y&&d<(m.next.x-m.x)*(g-m.y)/(m.next.y-m.y)+m.x&&(u=!u),(m=m.next)!==c;);m=u}c=m}if(c){e=$e(a,l),a=Ie(a,a.next),e=Ie(e,e.next),t(a,i,n,o,r,s),t(e,i,n,o,r,s);break t}l=l.next}a=a.next}while(a!==e)}}else t(Ie(e),i,n,o,r,s,1);break}}}}(s,a,i,d,p,n),a},Js={area:function(t){for(var e=t.length,i=0,n=e-1,o=0;o<e;n=o++)i+=t[n].x*t[o].y-t[o].x*t[n].y;return.5*i},isClockWise:function(t){return Js.area(t)<0},triangulateShape:function(t,e){var i=[],n=[],o=[];Ye(t),Xe(i,t);var r=t.length;for(e.forEach(Ye),t=0;t<e.length;t++)n.push(r),r+=e[t].length,Xe(i,e[t]);for(e=Ks(i,n),t=0;t<e.length;t+=3)o.push(e.slice(t,t+3));return o}};Ze.prototype=Object.create(x.prototype),Ze.prototype.constructor=Ze,Ke.prototype=Object.create(Ot.prototype),(Ke.prototype.constructor=Ke).prototype.getArrays=function(){var t=this.getAttribute("position");t=t?Array.prototype.slice.call(t.array):[];var e=this.getAttribute("uv");e=e?Array.prototype.slice.call(e.array):[];var i=this.index;return{position:t,uv:e,index:i=i?Array.prototype.slice.call(i.array):[]}},Ke.prototype.addShapeList=function(t,e){var i=t.length;e.arrays=this.getArrays();for(var n=0;n<i;n++)this.addShape(t[n],e);this.setIndex(e.arrays.index),this.addAttribute("position",new q(e.arrays.position,3)),this.addAttribute("uv",new q(e.arrays.uv,2))},Ke.prototype.addShape=function(t,e){function i(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}function n(t,e,i){var n=t.x-e.x,o=t.y-e.y,r=i.x-t.x,s=i.y-t.y,a=n*n+o*o;if(Math.abs(n*s-o*r)>Number.EPSILON){var l=Math.sqrt(a),c=Math.sqrt(r*r+s*s);if(a=e.x-o/l,e=e.y+n/l,(o=(r=a+n*(s=((i.x-s/c-a)*s-(i.y+r/c-e)*r)/(n*s-o*r))-t.x)*r+(n=e+o*s-t.y)*n)<=2)return new V(r,n);o=Math.sqrt(o/2)}else t=!1,n>Number.EPSILON?r>Number.EPSILON&&(t=!0):n<-Number.EPSILON?r<-Number.EPSILON&&(t=!0):Math.sign(o)===Math.sign(s)&&(t=!0),t?(r=-o,o=Math.sqrt(a)):(r=n,n=o,o=Math.sqrt(a/2));return new V(r/o,n/o)}function o(t,e){for(B=t.length;0<=--B;){var i=B,n=B-1;n<0&&(n=t.length-1);var o,r=b+2*g;for(o=0;o<r;o++){var s=z*o,a=z*(o+1),l=e+n+s,c=e+n+a;a=e+i+a,h(e+i+s),h(l),h(a),h(l),h(c),h(a),s=d.length/3,u((s=x.generateSideWallUV(k,d,s-6,s-3,s-2,s-1))[0]),u(s[1]),u(s[3]),u(s[1]),u(s[2]),u(s[3])}}}function r(t,e,i){p.push(t),p.push(e),p.push(i)}function s(t,e,i){h(t),h(e),h(i),t=d.length/3,u((t=x.generateTopUV(k,d,t-3,t-2,t-1))[0]),u(t[1]),u(t[2])}function h(t){l.push(d.length/3),d.push(p[3*t]),d.push(p[3*t+1]),d.push(p[3*t+2])}function u(t){c.push(t.x),c.push(t.y)}var a=e.arrays?e.arrays:this.getArrays(),d=a.position,l=a.index,c=a.uv,p=[];a=void 0!==e.amount?e.amount:100;var f=void 0!==e.bevelThickness?e.bevelThickness:6,m=void 0!==e.bevelSize?e.bevelSize:f-2,g=void 0!==e.bevelSegments?e.bevelSegments:3,v=void 0===e.bevelEnabled||e.bevelEnabled,y=void 0!==e.curveSegments?e.curveSegments:12,b=void 0!==e.steps?e.steps:1,w=e.extrudePath,_=!1,x=void 0!==e.UVGenerator?e.UVGenerator:Ze.WorldUVGenerator;if(w){var S=w.getSpacedPoints(b);v=!(_=!0);var T=void 0!==e.frames?e.frames:w.computeFrenetFrames(b,!1),M=new St,E=new St,C=new St}v||(m=f=g=0);var A,k=this;t=(y=t.extractPoints(y)).shape;var P=y.holes;if(!Js.isClockWise(t)){t=t.reverse();var L=0;for(A=P.length;L<A;L++){var R=P[L];Js.isClockWise(R)&&(P[L]=R.reverse())}}var D=Js.triangulateShape(t,P),I=t;for(L=0,A=P.length;L<A;L++)R=P[L],t=t.concat(R);var O,N,z=t.length,H=D.length;y=[];var B=0,F=I.length,U=F-1;for(O=B+1;B<F;B++,U++,O++)U===F&&(U=0),O===F&&(O=0),y[B]=n(I[B],I[U],I[O]);w=[];var W=y.concat();for(L=0,A=P.length;L<A;L++){R=P[L];var j=[];for(B=0,U=(F=R.length)-1,O=B+1;B<F;B++,U++,O++)U===F&&(U=0),O===F&&(O=0),j[B]=n(R[B],R[U],R[O]);w.push(j),W=W.concat(j)}for(U=0;U<g;U++){F=U/g;var $=f*Math.cos(F*Math.PI/2);for(O=m*Math.sin(F*Math.PI/2),B=0,F=I.length;B<F;B++){var G=i(I[B],y[B],O);r(G.x,G.y,-$)}for(L=0,A=P.length;L<A;L++)for(R=P[L],j=w[L],B=0,F=R.length;B<F;B++)r((G=i(R[B],j[B],O)).x,G.y,-$)}for(O=m,B=0;B<z;B++)G=v?i(t[B],W[B],O):t[B],_?(E.copy(T.normals[0]).multiplyScalar(G.x),M.copy(T.binormals[0]).multiplyScalar(G.y),C.copy(S[0]).add(E).add(M),r(C.x,C.y,C.z)):r(G.x,G.y,0);for(F=1;F<=b;F++)for(B=0;B<z;B++)G=v?i(t[B],W[B],O):t[B],_?(E.copy(T.normals[F]).multiplyScalar(G.x),M.copy(T.binormals[F]).multiplyScalar(G.y),C.copy(S[F]).add(E).add(M),r(C.x,C.y,C.z)):r(G.x,G.y,a/b*F);for(U=g-1;0<=U;U--){for(F=U/g,$=f*Math.cos(F*Math.PI/2),O=m*Math.sin(F*Math.PI/2),B=0,F=I.length;B<F;B++)r((G=i(I[B],y[B],O)).x,G.y,a+$);for(L=0,A=P.length;L<A;L++)for(R=P[L],j=w[L],B=0,F=R.length;B<F;B++)G=i(R[B],j[B],O),_?r(G.x,G.y+S[b-1].y,S[b-1].x+$):r(G.x,G.y,a+$)}!function(){var t=d.length/3;if(v){var e=0*z;for(B=0;B<H;B++)s((N=D[B])[2]+e,N[1]+e,N[0]+e);for(e=z*(b+2*g),B=0;B<H;B++)s((N=D[B])[0]+e,N[1]+e,N[2]+e)}else{for(B=0;B<H;B++)s((N=D[B])[2],N[1],N[0]);for(B=0;B<H;B++)s((N=D[B])[0]+z*b,N[1]+z*b,N[2]+z*b)}k.addGroup(t,d.length/3-t,0)}(),function(){var t=d.length/3,e=0;for(o(I,e),e+=I.length,L=0,A=P.length;L<A;L++)o(R=P[L],e),e+=R.length;k.addGroup(t,d.length/3-t,1)}(),e.arrays||(this.setIndex(l),this.addAttribute("position",new q(d,3)),this.addAttribute("uv",new q(c,2)))},Ze.WorldUVGenerator={generateTopUV:function(t,e,i,n,o){t=e[3*n],n=e[3*n+1];var r=e[3*o];return o=e[3*o+1],[new V(e[3*i],e[3*i+1]),new V(t,n),new V(r,o)]},generateSideWallUV:function(t,e,i,n,o,r){t=e[3*i];var s=e[3*i+1];i=e[3*i+2];var a=e[3*n],l=e[3*n+1];n=e[3*n+2];var c=e[3*o],h=e[3*o+1];o=e[3*o+2];var u=e[3*r],d=e[3*r+1];return e=e[3*r+2],Math.abs(s-l)<.01?[new V(t,1-i),new V(a,1-n),new V(c,1-o),new V(u,1-e)]:[new V(s,1-i),new V(l,1-n),new V(h,1-o),new V(d,1-e)]}},Je.prototype=Object.create(x.prototype),Je.prototype.constructor=Je,Qe.prototype=Object.create(Ke.prototype),Qe.prototype.constructor=Qe,ti.prototype=Object.create(x.prototype),ti.prototype.constructor=ti,ei.prototype=Object.create(Ot.prototype),ei.prototype.constructor=ei,ii.prototype=Object.create(x.prototype),ii.prototype.constructor=ii,ni.prototype=Object.create(Ot.prototype),ni.prototype.constructor=ni,oi.prototype=Object.create(x.prototype),oi.prototype.constructor=oi,ri.prototype=Object.create(Ot.prototype),ri.prototype.constructor=ri,si.prototype=Object.create(x.prototype),(si.prototype.constructor=si).prototype.toJSON=function(){var t=x.prototype.toJSON.call(this);return li(this.parameters.shapes,t)},ai.prototype=Object.create(Ot.prototype),(ai.prototype.constructor=ai).prototype.toJSON=function(){var t=Ot.prototype.toJSON.call(this);return li(this.parameters.shapes,t)},ci.prototype=Object.create(Ot.prototype),ci.prototype.constructor=ci,hi.prototype=Object.create(x.prototype),hi.prototype.constructor=hi,ui.prototype=Object.create(Ot.prototype),ui.prototype.constructor=ui,di.prototype=Object.create(hi.prototype),di.prototype.constructor=di,pi.prototype=Object.create(ui.prototype),pi.prototype.constructor=pi,fi.prototype=Object.create(x.prototype),fi.prototype.constructor=fi,mi.prototype=Object.create(Ot.prototype),mi.prototype.constructor=mi;var Qs=Object.freeze({WireframeGeometry:fe,ParametricGeometry:me,ParametricBufferGeometry:ge,TetrahedronGeometry:be,TetrahedronBufferGeometry:we,OctahedronGeometry:_e,OctahedronBufferGeometry:xe,IcosahedronGeometry:Se,IcosahedronBufferGeometry:Te,DodecahedronGeometry:Me,DodecahedronBufferGeometry:Ee,PolyhedronGeometry:ve,PolyhedronBufferGeometry:ye,TubeGeometry:Ce,TubeBufferGeometry:Ae,TorusKnotGeometry:ke,TorusKnotBufferGeometry:Pe,TorusGeometry:Le,TorusBufferGeometry:Re,TextGeometry:Je,TextBufferGeometry:Qe,SphereGeometry:ti,SphereBufferGeometry:ei,RingGeometry:ii,RingBufferGeometry:ni,PlaneGeometry:b,PlaneBufferGeometry:zt,LatheGeometry:oi,LatheBufferGeometry:ri,ShapeGeometry:si,ShapeBufferGeometry:ai,ExtrudeGeometry:Ze,ExtrudeBufferGeometry:Ke,EdgesGeometry:ci,ConeGeometry:di,ConeBufferGeometry:pi,CylinderGeometry:hi,CylinderBufferGeometry:ui,CircleGeometry:fi,CircleBufferGeometry:mi,BoxGeometry:y,BoxBufferGeometry:Nt});gi.prototype=Object.create(w.prototype),(gi.prototype.constructor=gi).prototype.isShadowMaterial=!0,gi.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this},vi.prototype=Object.create(Bt.prototype),(vi.prototype.constructor=vi).prototype.isRawShaderMaterial=!0,yi.prototype=Object.create(w.prototype),(yi.prototype.constructor=yi).prototype.isMeshStandardMaterial=!0,yi.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},bi.prototype=Object.create(yi.prototype),(bi.prototype.constructor=bi).prototype.isMeshPhysicalMaterial=!0,bi.prototype.copy=function(t){return yi.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},wi.prototype=Object.create(w.prototype),(wi.prototype.constructor=wi).prototype.isMeshPhongMaterial=!0,wi.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},_i.prototype=Object.create(wi.prototype),(_i.prototype.constructor=_i).prototype.isMeshToonMaterial=!0,_i.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},xi.prototype=Object.create(w.prototype),(xi.prototype.constructor=xi).prototype.isMeshNormalMaterial=!0,xi.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Si.prototype=Object.create(w.prototype),(Si.prototype.constructor=Si).prototype.isMeshLambertMaterial=!0,Si.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ti.prototype=Object.create(oe.prototype),(Ti.prototype.constructor=Ti).prototype.isLineDashedMaterial=!0,Ti.prototype.copy=function(t){return oe.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var ta=Object.freeze({ShadowMaterial:gi,SpriteMaterial:Jt,RawShaderMaterial:vi,ShaderMaterial:Bt,PointsMaterial:le,MeshPhysicalMaterial:bi,MeshStandardMaterial:yi,MeshPhongMaterial:wi,MeshToonMaterial:_i,MeshNormalMaterial:xi,MeshLambertMaterial:Si,MeshDepthMaterial:mt,MeshDistanceMaterial:gt,MeshBasicMaterial:Ht,LineDashedMaterial:Ti,LineBasicMaterial:oe,Material:w}),ea={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},ia=new Mi,na={};Object.assign(Ei.prototype,{load:function(s,t,e,i){void 0===s&&(s=""),void 0!==this.path&&(s=this.path+s),s=this.manager.resolveURL(s);var a=this,n=ea.get(s);if(void 0!==n)return a.manager.itemStart(s),setTimeout(function(){t&&t(n),a.manager.itemEnd(s)},0),n;if(void 0===na[s]){var o=s.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){e=o[1];var r=!!o[2];o=o[3],o=window.decodeURIComponent(o),r&&(o=window.atob(o));try{var l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":var c=new Uint8Array(o.length);for(r=0;r<o.length;r++)c[r]=o.charCodeAt(r);var h="blob"===l?new Blob([c.buffer],{type:e}):c.buffer;break;case"document":h=(new DOMParser).parseFromString(o,e);break;case"json":h=JSON.parse(o);break;default:h=o}window.setTimeout(function(){t&&t(h),a.manager.itemEnd(s)},0)}catch(t){window.setTimeout(function(){i&&i(t),a.manager.itemEnd(s),a.manager.itemError(s)},0)}}else{na[s]=[],na[s].push({onLoad:t,onProgress:e,onError:i});var u=new XMLHttpRequest;for(r in u.open("GET",s,!0),u.addEventListener("load",function(t){var e=this.response;ea.add(s,e);var i=na[s];if(delete na[s],200===this.status){for(var n=0,o=i.length;n<o;n++){var r=i[n];r.onLoad&&r.onLoad(e)}a.manager.itemEnd(s)}else if(0===this.status){for(console.warn("THREE.FileLoader: HTTP Status 0 received."),n=0,o=i.length;n<o;n++)(r=i[n]).onLoad&&r.onLoad(e);a.manager.itemEnd(s)}else{for(n=0,o=i.length;n<o;n++)(r=i[n]).onError&&r.onError(t);a.manager.itemEnd(s),a.manager.itemError(s)}},!1),u.addEventListener("progress",function(t){for(var e=na[s],i=0,n=e.length;i<n;i++){var o=e[i];o.onProgress&&o.onProgress(t)}},!1),u.addEventListener("error",function(t){var e=na[s];delete na[s];for(var i=0,n=e.length;i<n;i++){var o=e[i];o.onError&&o.onError(t)}a.manager.itemEnd(s),a.manager.itemError(s)},!1),void 0!==this.responseType&&(u.responseType=this.responseType),void 0!==this.withCredentials&&(u.withCredentials=this.withCredentials),u.overrideMimeType&&u.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)u.setRequestHeader(r,this.requestHeader[r]);u.send(null)}return a.manager.itemStart(s),u}na[s].push({onLoad:t,onProgress:e,onError:i})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(Ci.prototype,{load:function(t,o,i,n){function e(e){l.load(t[e],function(t){t=r._parser(t,!0),s[e]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(c+=1)&&(1===t.mipmapCount&&(a.minFilter=1006),a.format=t.format,a.needsUpdate=!0,o&&o(a))},i,n)}var r=this,s=[],a=new de;a.image=s;var l=new Ei(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,h=0,u=t.length;h<u;++h)e(h);else l.load(t,function(t){if((t=r._parser(t,!0)).isCubemap)for(var e=t.mipmaps.length/t.mipmapCount,i=0;i<e;i++){s[i]={mipmaps:[]};for(var n=0;n<t.mipmapCount;n++)s[i].mipmaps.push(t.mipmaps[i*t.mipmapCount+n]),s[i].format=t.format,s[i].width=t.width,s[i].height=t.height}else a.image.width=t.width,a.image.height=t.height,a.mipmaps=t.mipmaps;1===t.mipmapCount&&(a.minFilter=1006),a.format=t.format,a.needsUpdate=!0,o&&o(a)},i,n);return a},setPath:function(t){return this.path=t,this}}),Object.assign(Ai.prototype,{load:function(t,e,i,n){var o=this,r=new Et,s=new Ei(this.manager);return s.setResponseType("arraybuffer"),s.load(t,function(t){(t=o._parser(t))&&(void 0!==t.image?r.image=t.image:void 0!==t.data&&(r.image.width=t.width,r.image.height=t.height,r.image.data=t.data),r.wrapS=void 0!==t.wrapS?t.wrapS:1001,r.wrapT=void 0!==t.wrapT?t.wrapT:1001,r.magFilter=void 0!==t.magFilter?t.magFilter:1006,r.minFilter=void 0!==t.minFilter?t.minFilter:1008,r.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(r.format=t.format),void 0!==t.type&&(r.type=t.type),void 0!==t.mipmaps&&(r.mipmaps=t.mipmaps),1===t.mipmapCount&&(r.minFilter=1006),r.needsUpdate=!0,e&&e(r,t))},i,n),r}}),Object.assign(ki.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var o=this,r=ea.get(e);return void 0!==r?(o.manager.itemStart(e),setTimeout(function(){t&&t(r),o.manager.itemEnd(e)},0),r):((i=document.createElementNS("http://www.w3.org/1999/xhtml","img")).addEventListener("load",function(){ea.add(e,this),t&&t(this),o.manager.itemEnd(e)},!1),i.addEventListener("error",function(t){n&&n(t),o.manager.itemEnd(e),o.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(i.crossOrigin=this.crossOrigin),o.manager.itemStart(e),i.src=e,i)},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Pi.prototype,{crossOrigin:"Anonymous",load:function(t,i,e,n){function o(e){s.load(t[e],function(t){r.images[e]=t,6===++a&&(r.needsUpdate=!0,i&&i(r))},void 0,n)}var r=new S,s=new ki(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var a=0;for(e=0;e<t.length;++e)o(e);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Li.prototype,{crossOrigin:"Anonymous",load:function(e,i,t,n){var o=new d,r=new ki(this.manager);return r.setCrossOrigin(this.crossOrigin),r.setPath(this.path),r.load(e,function(t){o.image=t,t=0<e.search(/\.(jpg|jpeg)$/)||0===e.search(/^data:image\/jpeg/),o.format=t?1022:1023,o.needsUpdate=!0,void 0!==i&&i(o)},t,n),o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ri.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i=[],n=this.getPoint(0),o=0;for(i.push(0),e=1;e<=t;e++){var r=this.getPoint(e/t);o+=r.distanceTo(n),i.push(o),n=r}return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i=this.getLengths(),n=i.length;e=e||t*i[n-1];for(var o,r=0,s=n-1;r<=s;)if((o=i[t=Math.floor(r+(s-r)/2)]-e)<0)r=t+1;else{if(!(0<o)){s=t;break}s=t-1}return i[t=s]===e?t/(n-1):(t+(e-(r=i[t]))/(i[t+1]-r))/(n-1)},getTangent:function(t){var e=t-1e-4;return e<0&&(e=0),1<(t+=1e-4)&&(t=1),e=this.getPoint(e),this.getPoint(t).clone().sub(e).normalize()},getTangentAt:function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},computeFrenetFrames:function(t,e){var i,n=new St,o=[],r=[],s=[],a=new St,l=new _t;for(i=0;i<=t;i++){var c=i/t;o[i]=this.getTangentAt(c),o[i].normalize()}r[0]=new St,s[0]=new St,i=Number.MAX_VALUE,c=Math.abs(o[0].x);var h=Math.abs(o[0].y),u=Math.abs(o[0].z);for(c<=i&&(i=c,n.set(1,0,0)),h<=i&&(i=h,n.set(0,1,0)),u<=i&&n.set(0,0,1),a.crossVectors(o[0],n).normalize(),r[0].crossVectors(o[0],a),s[0].crossVectors(o[0],r[0]),i=1;i<=t;i++)r[i]=r[i-1].clone(),s[i]=s[i-1].clone(),a.crossVectors(o[i-1],o[i]),a.length()>Number.EPSILON&&(a.normalize(),n=Math.acos(Wo.clamp(o[i-1].dot(o[i]),-1,1)),r[i].applyMatrix4(l.makeRotationAxis(a,n))),s[i].crossVectors(o[i],r[i]);if(!0===e)for(n=Math.acos(Wo.clamp(r[0].dot(r[t]),-1,1)),n/=t,0<o[0].dot(a.crossVectors(r[0],r[t]))&&(n=-n),i=1;i<=t;i++)r[i].applyMatrix4(l.makeRotationAxis(o[i],n*i)),s[i].crossVectors(o[i],r[i]);return{tangents:o,normals:r,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Di.prototype=Object.create(Ri.prototype),(Di.prototype.constructor=Di).prototype.isEllipseCurve=!0,Di.prototype.getPoint=function(t,e){e=e||new V;for(var i=2*Math.PI,n=this.aEndAngle-this.aStartAngle,o=Math.abs(n)<Number.EPSILON;n<0;)n+=i;for(;i<n;)n-=i;n<Number.EPSILON&&(n=o?0:i),!0!==this.aClockwise||o||(n=n===i?-i:n-i),i=this.aStartAngle+t*n,t=this.aX+this.xRadius*Math.cos(i);var r=this.aY+this.yRadius*Math.sin(i);return 0!==this.aRotation&&(i=Math.cos(this.aRotation),n=Math.sin(this.aRotation),t=(o=t-this.aX)*i-(r-=this.aY)*n+this.aX,r=o*n+r*i+this.aY),e.set(t,r)},Di.prototype.copy=function(t){return Ri.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Di.prototype.toJSON=function(){var t=Ri.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Di.prototype.fromJSON=function(t){return Ri.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ii.prototype=Object.create(Di.prototype),(Ii.prototype.constructor=Ii).prototype.isArcCurve=!0;var oa=new St,ra=new Oi,sa=new Oi,aa=new Oi;Ni.prototype=Object.create(Ri.prototype),(Ni.prototype.constructor=Ni).prototype.isCatmullRomCurve3=!0,Ni.prototype.getPoint=function(t,e){e=e||new St;var i=this.points,n=i.length;t*=n-(this.closed?0:1);var o=Math.floor(t);if(t-=o,this.closed?o+=0<o?0:(Math.floor(Math.abs(o)/i.length)+1)*i.length:0===t&&o===n-1&&(o=n-2,t=1),this.closed||0<o)var r=i[(o-1)%n];else oa.subVectors(i[0],i[1]).add(i[0]),r=oa;var s=i[o%n],a=i[(o+1)%n];if(this.closed||o+2<n?i=i[(o+2)%n]:(oa.subVectors(i[n-1],i[n-2]).add(i[n-1]),i=oa),"centripetal"===this.curveType||"chordal"===this.curveType){var l="chordal"===this.curveType?.5:.25;n=Math.pow(r.distanceToSquared(s),l),(o=Math.pow(s.distanceToSquared(a),l))<1e-4&&(o=1),n<1e-4&&(n=o),(l=Math.pow(a.distanceToSquared(i),l))<1e-4&&(l=o),ra.initNonuniformCatmullRom(r.x,s.x,a.x,i.x,n,o,l),sa.initNonuniformCatmullRom(r.y,s.y,a.y,i.y,n,o,l),aa.initNonuniformCatmullRom(r.z,s.z,a.z,i.z,n,o,l)}else"catmullrom"===this.curveType&&(ra.initCatmullRom(r.x,s.x,a.x,i.x,this.tension),sa.initCatmullRom(r.y,s.y,a.y,i.y,this.tension),aa.initCatmullRom(r.z,s.z,a.z,i.z,this.tension));return e.set(ra.calc(t),sa.calc(t),aa.calc(t)),e},Ni.prototype.copy=function(t){Ri.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Ni.prototype.toJSON=function(){var t=Ri.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Ni.prototype.fromJSON=function(t){Ri.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push((new St).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Fi.prototype=Object.create(Ri.prototype),(Fi.prototype.constructor=Fi).prototype.isCubicBezierCurve=!0,Fi.prototype.getPoint=function(t,e){e=e||new V;var i=this.v0,n=this.v1,o=this.v2,r=this.v3;return e.set(Bi(t,i.x,n.x,o.x,r.x),Bi(t,i.y,n.y,o.y,r.y)),e},Fi.prototype.copy=function(t){return Ri.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Fi.prototype.toJSON=function(){var t=Ri.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Fi.prototype.fromJSON=function(t){return Ri.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Ui.prototype=Object.create(Ri.prototype),(Ui.prototype.constructor=Ui).prototype.isCubicBezierCurve3=!0,Ui.prototype.getPoint=function(t,e){e=e||new St;var i=this.v0,n=this.v1,o=this.v2,r=this.v3;return e.set(Bi(t,i.x,n.x,o.x,r.x),Bi(t,i.y,n.y,o.y,r.y),Bi(t,i.z,n.z,o.z,r.z)),e},Ui.prototype.copy=function(t){return Ri.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Ui.prototype.toJSON=function(){var t=Ri.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Ui.prototype.fromJSON=function(t){return Ri.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Wi.prototype=Object.create(Ri.prototype),(Wi.prototype.constructor=Wi).prototype.isLineCurve=!0,Wi.prototype.getPoint=function(t,e){return e=e||new V,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},Wi.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Wi.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Wi.prototype.copy=function(t){return Ri.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Wi.prototype.toJSON=function(){var t=Ri.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Wi.prototype.fromJSON=function(t){return Ri.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ji.prototype=Object.create(Ri.prototype),(ji.prototype.constructor=ji).prototype.isLineCurve3=!0,ji.prototype.getPoint=function(t,e){return e=e||new St,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},ji.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},ji.prototype.copy=function(t){return Ri.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ji.prototype.toJSON=function(){var t=Ri.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ji.prototype.fromJSON=function(t){return Ri.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},$i.prototype=Object.create(Ri.prototype),($i.prototype.constructor=$i).prototype.isQuadraticBezierCurve=!0,$i.prototype.getPoint=function(t,e){e=e||new V;var i=this.v0,n=this.v1,o=this.v2;return e.set(Hi(t,i.x,n.x,o.x),Hi(t,i.y,n.y,o.y)),e},$i.prototype.copy=function(t){return Ri.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},$i.prototype.toJSON=function(){var t=Ri.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},$i.prototype.fromJSON=function(t){return Ri.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Gi.prototype=Object.create(Ri.prototype),(Gi.prototype.constructor=Gi).prototype.isQuadraticBezierCurve3=!0,Gi.prototype.getPoint=function(t,e){e=e||new St;var i=this.v0,n=this.v1,o=this.v2;return e.set(Hi(t,i.x,n.x,o.x),Hi(t,i.y,n.y,o.y),Hi(t,i.z,n.z,o.z)),e},Gi.prototype.copy=function(t){return Ri.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Gi.prototype.toJSON=function(){var t=Ri.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Gi.prototype.fromJSON=function(t){return Ri.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Vi.prototype=Object.create(Ri.prototype),(Vi.prototype.constructor=Vi).prototype.isSplineCurve=!0,Vi.prototype.getPoint=function(t,e){e=e||new V;var i=this.points,n=(i.length-1)*t;n-=t=Math.floor(n);var o=i[0===t?t:t-1],r=i[t],s=i[t>i.length-2?i.length-1:t+1];return i=i[t>i.length-3?i.length-1:t+2],e.set(zi(n,o.x,r.x,s.x,i.x),zi(n,o.y,r.y,s.y,i.y)),e},Vi.prototype.copy=function(t){Ri.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this},Vi.prototype.toJSON=function(){var t=Ri.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t},Vi.prototype.fromJSON=function(t){Ri.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push((new V).fromArray(n))}return this};var la=Object.freeze({ArcCurve:Ii,CatmullRomCurve3:Ni,CubicBezierCurve:Fi,CubicBezierCurve3:Ui,EllipseCurve:Di,LineCurve:Wi,LineCurve3:ji,QuadraticBezierCurve:$i,QuadraticBezierCurve3:Gi,SplineCurve:Vi});qi.prototype=Object.assign(Object.create(Ri.prototype),{constructor:qi,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Wi(e,t))},getPoint:function(t){var e=t*this.getLength(),i=this.getCurveLengths();for(t=0;t<i.length;){if(i[t]>=e)return e=i[t]-e,i=(t=this.curves[t]).getLength(),t.getPointAt(0===i?0:1-e/i);t++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],n=0,o=this.curves;n<o.length;n++){var r=o[n];r=r.getPoints(r&&r.isEllipseCurve?2*t:r&&r.isLineCurve?1:r&&r.isSplineCurve?t*r.points.length:t);for(var s=0;s<r.length;s++){var a=r[s];e&&e.equals(a)||(i.push(a),e=a)}}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(t){Ri.prototype.copy.call(this,t),this.curves=[];for(var e=0,i=t.curves.length;e<i;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=Ri.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,i=this.curves.length;e<i;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){Ri.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var n=t.curves[e];this.curves.push((new la[n.type]).fromJSON(n))}return this}}),Yi.prototype=Object.assign(Object.create(qi.prototype),{constructor:Yi,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var i=new Wi(this.currentPoint.clone(),new V(t,e));this.curves.push(i),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,i,n){t=new $i(this.currentPoint.clone(),new V(t,e),new V(i,n)),this.curves.push(t),this.currentPoint.set(i,n)},bezierCurveTo:function(t,e,i,n,o,r){t=new Fi(this.currentPoint.clone(),new V(t,e),new V(i,n),new V(o,r)),this.curves.push(t),this.currentPoint.set(o,r)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t);e=new Vi(e),this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,i,n,o,r){this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,i,n,o,r)},absarc:function(t,e,i,n,o,r){this.absellipse(t,e,i,i,n,o,r)},ellipse:function(t,e,i,n,o,r,s,a){this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,i,n,o,r,s,a)},absellipse:function(t,e,i,n,o,r,s,a){t=new Di(t,e,i,n,o,r,s,a),0<this.curves.length&&((e=t.getPoint(0)).equals(this.currentPoint)||this.lineTo(e.x,e.y)),this.curves.push(t),t=t.getPoint(1),this.currentPoint.copy(t)},copy:function(t){return qi.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=qi.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return qi.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Xi.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Xi,getPointsHoles:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Yi.prototype.copy.call(this,t),this.holes=[];for(var e=0,i=t.holes.length;e<i;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){var t=Yi.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,i=this.holes.length;e<i;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){Yi.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var n=t.holes[e];this.holes.push((new Yi).fromJSON(n))}return this}}),Zi.prototype=Object.assign(Object.create(h.prototype),{constructor:Zi,isLight:!0,copy:function(t){return h.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){return(t=h.prototype.toJSON.call(this,t)).object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Ki.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Ki,isHemisphereLight:!0,copy:function(t){return Zi.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Ji.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Qi.prototype=Object.assign(Object.create(Ji.prototype),{constructor:Qi,isSpotLightShadow:!0,update:function(t){var e=this.camera,i=2*Wo.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height;t=t.distance||e.far,i===e.fov&&n===e.aspect&&t===e.far||(e.fov=i,e.aspect=n,e.far=t,e.updateProjectionMatrix())}}),tn.prototype=Object.assign(Object.create(Zi.prototype),{constructor:tn,isSpotLight:!0,copy:function(t){return Zi.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),en.prototype=Object.assign(Object.create(Zi.prototype),{constructor:en,isPointLight:!0,copy:function(t){return Zi.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),nn.prototype=Object.assign(Object.create(Ji.prototype),{constructor:nn}),on.prototype=Object.assign(Object.create(Zi.prototype),{constructor:on,isDirectionalLight:!0,copy:function(t){return Zi.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),rn.prototype=Object.assign(Object.create(Zi.prototype),{constructor:rn,isAmbientLight:!0}),sn.prototype=Object.assign(Object.create(Zi.prototype),{constructor:sn,isRectAreaLight:!0,copy:function(t){return Zi.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){return(t=Zi.prototype.toJSON.call(this,t)).object.width=this.width,t.object.height=this.height,t}}),an.prototype=Object.assign(Object.create(vn.prototype),{constructor:an,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ln.prototype=Object.assign(Object.create(vn.prototype),{constructor:ln,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(cn.prototype,{evaluate:function(t){var e=this.parameterPositions,i=this._cachedIndex,n=e[i],o=e[i-1];t:{e:{i:{n:if(!(t<n)){for(var r=i+2;;){if(void 0===n){if(t<o)break n;return this._cachedIndex=i=e.length,this.afterEnd_(i-1,t,o)}if(i===r)break;if(o=n,t<(n=e[++i]))break e}n=e.length;break i}if(o<=t)break t;for(t<(r=e[1])&&(i=2,o=r),r=i-2;;){if(void 0===o)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===r)break;if(n=o,(o=e[--i-1])<=t)break e}n=i,i=0}for(;i<n;)t<e[o=i+n>>>1]?n=o:i=o+1;if(n=e[i],void 0===(o=e[i-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return this._cachedIndex=i=e.length,this.afterEnd_(i-1,o,t)}this._cachedIndex=i,this.intervalChanged_(i,o,n)}return this.interpolate_(i,o,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize;t*=n;for(var o=0;o!==n;++o)e[o]=i[t+o];return e},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(cn.prototype,{beforeStart_:cn.prototype.copySampleValue_,afterEnd_:cn.prototype.copySampleValue_}),hn.prototype=Object.assign(Object.create(cn.prototype),{constructor:hn,interpolate_:function(t,e,i,n){var o=this.resultBuffer,r=this.sampleValues,s=this.valueSize;for(e=(i-e)/(n-e),i=(t*=s)+s;t!==i;t+=4)xt.slerpFlat(o,0,r,t-s,r,t,e);return o}}),un.prototype=Object.assign(Object.create(vn.prototype),{constructor:un,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new hn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),dn.prototype=Object.assign(Object.create(vn.prototype),{constructor:dn,ValueTypeName:"color"}),pn.prototype=Object.assign(Object.create(vn.prototype),{constructor:pn,ValueTypeName:"number"}),fn.prototype=Object.assign(Object.create(cn.prototype),{constructor:fn,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,i){var n=this.parameterPositions,o=t-2,r=t+1,s=n[o],a=n[r];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:o=t,s=2*e-i;break;case 2402:s=e+n[o=n.length-2]-n[o+1];break;default:o=t,s=i}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:r=t,a=2*i-e;break;case 2402:a=i+n[r=1]-n[0];break;default:r=t-1,a=e}t=.5*(i-e),n=this.valueSize,this._weightPrev=t/(e-s),this._weightNext=t/(a-i),this._offsetPrev=o*n,this._offsetNext=r*n},interpolate_:function(t,e,i,n){var o=this.resultBuffer,r=this.sampleValues,s=this.valueSize,a=(t*=s)-s,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,u=this._weightNext,d=(i-e)/(n-e);for(e=-h*(n=(i=d*d)*d)+2*h*i-h*d,h=(1+h)*n+(-1.5-2*h)*i+(-.5+h)*d+1,d=(-1-u)*n+(1.5+u)*i+.5*d,u=u*n-u*i,i=0;i!==s;++i)o[i]=e*r[l+i]+h*r[a+i]+d*r[t+i]+u*r[c+i];return o}}),mn.prototype=Object.assign(Object.create(cn.prototype),{constructor:mn,interpolate_:function(t,e,i,n){var o=this.resultBuffer,r=this.sampleValues,s=this.valueSize,a=(t*=s)-s;for(i=1-(e=(i-e)/(n-e)),n=0;n!==s;++n)o[n]=r[a+n]*i+r[t+n]*e;return o}}),gn.prototype=Object.assign(Object.create(cn.prototype),{constructor:gn,interpolate_:function(t){return this.copySampleValue_(t-1)}});var ca={arraySlice:function(t,e,i){return ca.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(i){for(var t=i.length,e=Array(t),n=0;n!==t;++n)e[n]=n;return e.sort(function(t,e){return i[t]-i[e]}),e},sortedArray:function(t,e,i){for(var n=t.length,o=new t.constructor(n),r=0,s=0;s!==n;++r)for(var a=i[r]*e,l=0;l!==e;++l)o[s++]=t[a+l];return o},flattenJSON:function(t,e,i,n){for(var o=1,r=t[0];void 0!==r&&void 0===r[n];)r=t[o++];if(void 0!==r){var s=r[n];if(void 0!==s)if(Array.isArray(s))for(;void 0!==(s=r[n])&&(e.push(r.time),i.push.apply(i,s)),void 0!==(r=t[o++]););else if(void 0!==s.toArray)for(;void 0!==(s=r[n])&&(e.push(r.time),s.toArray(i,i.length)),void 0!==(r=t[o++]););else for(;void 0!==(s=r[n])&&(e.push(r.time),i.push(s)),void 0!==(r=t[o++]););}}};Object.assign(vn,{parse:function(t){if(void 0===t.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=vn._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var i=[],n=[];ca.flattenJSON(t.keys,i,n,"value"),t.times=i,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e=t.constructor;if(void 0!==e.toJSON)e=e.toJSON(t);else{e={name:t.name,times:ca.convertArray(t.times,Array),values:ca.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return pn;case"vector":case"vector2":case"vector3":case"vector4":return yn;case"color":return dn;case"quaternion":return un;case"bool":case"boolean":return ln;case"string":return an}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}}),Object.assign(vn.prototype,{constructor:vn,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new gn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new mn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new fn(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){switch(t){case 2300:var e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){if(e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw Error(e);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",e)}else this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,o=0,r=n-1;o!==n&&i[o]<t;)++o;for(;-1!==r&&i[r]>e;)--r;return++r,0===o&&r===n||(r<=o&&(o=(r=Math.max(r,1))-1),t=this.getValueSize(),this.times=ca.arraySlice(i,o,r),this.values=ca.arraySlice(this.values,o*t,r*t)),this},validate:function(){var t=!0,e=this.getValueSize();0!=e-Math.floor(e)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var i=this.times;e=this.values;var n=i.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,r=0;r!==n;r++){var s=i[r];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,r,s),t=!1;break}if(null!==o&&s<o){console.error("THREE.KeyframeTrack: Out of order keys.",this,r,s,o),t=!1;break}o=s}if(void 0!==e&&ca.isTypedArray(e))for(r=0,i=e.length;r!==i;++r)if(n=e[r],isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,r,n),t=!1;break}return t},optimize:function(){for(var t=this.times,e=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),o=1,r=t.length-1,s=1;s<r;++s){var a=!1,l=t[s];if(l!==t[s+1]&&(1!==s||l!==l[0]))if(n)a=!0;else{var c=s*i,h=c-i,u=c+i;for(l=0;l!==i;++l){var d=e[c+l];if(d!==e[h+l]||d!==e[u+l]){a=!0;break}}}if(a){if(s!==o)for(t[o]=t[s],a=s*i,c=o*i,l=0;l!==i;++l)e[c+l]=e[a+l];++o}}if(0<r){for(t[o]=t[r],a=r*i,c=o*i,l=0;l!==i;++l)e[c+l]=e[a+l];++o}return o!==t.length&&(this.times=ca.arraySlice(t,0,o),this.values=ca.arraySlice(e,0,o*i)),this}}),yn.prototype=Object.assign(Object.create(vn.prototype),{constructor:yn,ValueTypeName:"vector"}),Object.assign(bn,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),o=0,r=i.length;o!==r;++o)e.push(vn.parse(i[o]).scale(n));return new bn(t.name,t.duration,e)},toJSON:function(t){var e=[],i=t.tracks;t={name:t.name,duration:t.duration,tracks:e};for(var n=0,o=i.length;n!==o;++n)e.push(vn.toJSON(i[n]));return t},CreateFromMorphTargetSequence:function(t,e,i,n){for(var o=e.length,r=[],s=0;s<o;s++){var a=[],l=[];a.push((s+o-1)%o,s,(s+1)%o),l.push(0,1,0);var c=ca.getKeyframeOrder(a);a=ca.sortedArray(a,1,c),l=ca.sortedArray(l,1,c),n||0!==a[0]||(a.push(o),l.push(l[0])),r.push(new pn(".morphTargetInfluences["+e[s].name+"]",a,l).scale(1/i))}return new bn(t,-1,r)},findByName:function(t,e){var i=t;for(Array.isArray(t)||(i=t.geometry&&t.geometry.animations||t.animations),t=0;t<i.length;t++)if(i[t].name===e)return i[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n={},o=/^([\w-]*?)([\d]+)$/,r=0,s=t.length;r<s;r++){var a=t[r],l=a.name.match(o);if(l&&1<l.length){var c=l[1];(l=n[c])||(n[c]=l=[]),l.push(a)}}for(c in t=[],n)t.push(bn.CreateFromMorphTargetSequence(c,n[c],e,i));return t},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var i=function(t,e,i,n,o){if(0!==i.length){var r=[],s=[];ca.flattenJSON(i,r,s,n),0!==r.length&&o.push(new t(e,r,s))}},n=[],o=t.name||"default",r=t.length||-1,s=t.fps||30;t=t.hierarchy||[];for(var a=0;a<t.length;a++){var l=t[a].keys;if(l&&0!==l.length)if(l[0].morphTargets){r={};for(var c=0;c<l.length;c++)if(l[c].morphTargets)for(var h=0;h<l[c].morphTargets.length;h++)r[l[c].morphTargets[h]]=-1;for(var u in r){var d=[],p=[];for(h=0;h!==l[c].morphTargets.length;++h){var f=l[c];d.push(f.time),p.push(f.morphTarget===u?1:0)}n.push(new pn(".morphTargetInfluence["+u+"]",d,p))}r=r.length*(s||1)}else i(yn,(c=".bones["+e[a].name+"]")+".position",l,"pos",n),i(un,c+".quaternion",l,"rot",n),i(yn,c+".scale",l,"scl",n)}return 0===n.length?null:new bn(o,r,n)}}),Object.assign(bn.prototype,{resetDuration:function(){for(var t=0,e=0,i=this.tracks.length;e!==i;++e){var n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}this.duration=t},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}}),Object.assign(wn.prototype,{load:function(t,e,i,n){var o=this;new Ei(o.manager).load(t,function(t){e(o.parse(JSON.parse(t)))},i,n)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===i[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),i[t]}var i=this.textures,n=new ta[t.type];if(void 0!==t.uuid&&(n.uuid=t.uuid),void 0!==t.name&&(n.name=t.name),void 0!==t.color&&n.color.setHex(t.color),void 0!==t.roughness&&(n.roughness=t.roughness),void 0!==t.metalness&&(n.metalness=t.metalness),void 0!==t.emissive&&n.emissive.setHex(t.emissive),void 0!==t.specular&&n.specular.setHex(t.specular),void 0!==t.shininess&&(n.shininess=t.shininess),void 0!==t.clearCoat&&(n.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(n.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(n.uniforms=t.uniforms),void 0!==t.vertexShader&&(n.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(n.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(n.vertexColors=t.vertexColors),void 0!==t.fog&&(n.fog=t.fog),void 0!==t.flatShading&&(n.flatShading=t.flatShading),void 0!==t.blending&&(n.blending=t.blending),void 0!==t.side&&(n.side=t.side),void 0!==t.opacity&&(n.opacity=t.opacity),void 0!==t.transparent&&(n.transparent=t.transparent),void 0!==t.alphaTest&&(n.alphaTest=t.alphaTest),void 0!==t.depthTest&&(n.depthTest=t.depthTest),void 0!==t.depthWrite&&(n.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(n.colorWrite=t.colorWrite),void 0!==t.wireframe&&(n.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(n.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(n.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(n.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(n.rotation=t.rotation),1!==t.linewidth&&(n.linewidth=t.linewidth),void 0!==t.dashSize&&(n.dashSize=t.dashSize),void 0!==t.gapSize&&(n.gapSize=t.gapSize),void 0!==t.scale&&(n.scale=t.scale),void 0!==t.polygonOffset&&(n.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(n.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(n.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(n.skinning=t.skinning),void 0!==t.morphTargets&&(n.morphTargets=t.morphTargets),void 0!==t.dithering&&(n.dithering=t.dithering),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.shading&&(n.flatShading=1===t.shading),void 0!==t.size&&(n.size=t.size),void 0!==t.sizeAttenuation&&(n.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(n.map=e(t.map)),void 0!==t.alphaMap&&(n.alphaMap=e(t.alphaMap),n.transparent=!0),void 0!==t.bumpMap&&(n.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(n.bumpScale=t.bumpScale),void 0!==t.normalMap&&(n.normalMap=e(t.normalMap)),void 0!==t.normalScale){var o=t.normalScale;!1===Array.isArray(o)&&(o=[o,o]),n.normalScale=(new V).fromArray(o)}return void 0!==t.displacementMap&&(n.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(n.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(n.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(n.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(n.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(n.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(n.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(n.specularMap=e(t.specularMap)),void 0!==t.envMap&&(n.envMap=e(t.envMap)),void 0!==t.reflectivity&&(n.reflectivity=t.reflectivity),void 0!==t.lightMap&&(n.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(n.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(n.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(n.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(n.gradientMap=e(t.gradientMap)),n}}),Object.assign(_n.prototype,{load:function(t,e,i,n){var o=this;new Ei(o.manager).load(t,function(t){e(o.parse(JSON.parse(t)))},i,n)},parse:function(t){var e=new Ot,i=t.data.index;void 0!==i&&(i=new fa[i.type](i.array),e.setIndex(new v(i,1)));var n=t.data.attributes;for(r in n){var o=n[r];i=new fa[o.type](o.array),e.addAttribute(r,new v(i,o.itemSize,o.normalized))}var r=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==r)for(i=0,n=r.length;i!==n;++i)o=r[i],e.addGroup(o.start,o.count,o.materialIndex);return void 0!==(t=t.data.boundingSphere)&&(r=new St,void 0!==t.center&&r.fromArray(t.center),e.boundingSphere=new s(r,t.radius)),e}});var ha,ua,da,pa,fa={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};xn.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;i<n;i+=2){var o=e[i+1];if(e[i].test(t))return o}return null}},Object.assign(xn.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,i){for(var n=[],o=0;o<t.length;++o)n[o]=this.createMaterial(t[o],e,i);return n},createMaterial:(ha={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},ua=new kt,da=new Li,pa=new wn,function(t,s,a){function e(t,e,i,n,o){t=s+t;var r=xn.Handlers.get(t);return null!==r?t=r.load(t):(da.setCrossOrigin(a),t=da.load(t)),void 0!==e&&(t.repeat.fromArray(e),1!==e[0]&&(t.wrapS=1e3),1!==e[1]&&(t.wrapT=1e3)),void 0!==i&&t.offset.fromArray(i),void 0!==n&&("repeat"===n[0]&&(t.wrapS=1e3),"mirror"===n[0]&&(t.wrapS=1002),"repeat"===n[1]&&(t.wrapT=1e3),"mirror"===n[1]&&(t.wrapT=1002)),void 0!==o&&(t.anisotropy=o),e=Wo.generateUUID(),l[e]=t,e}var i,l={},n={uuid:Wo.generateUUID(),type:"MeshLambertMaterial"};for(i in t){var o=t[i];switch(i){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":n.name=o;break;case"blending":n.blending=ha[o];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",i,"is no longer supported.");break;case"colorDiffuse":n.color=ua.fromArray(o).getHex();break;case"colorSpecular":n.specular=ua.fromArray(o).getHex();break;case"colorEmissive":n.emissive=ua.fromArray(o).getHex();break;case"specularCoef":n.shininess=o;break;case"shading":"basic"===o.toLowerCase()&&(n.type="MeshBasicMaterial"),"phong"===o.toLowerCase()&&(n.type="MeshPhongMaterial"),"standard"===o.toLowerCase()&&(n.type="MeshStandardMaterial");break;case"mapDiffuse":n.map=e(o,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":n.emissiveMap=e(o,t.mapEmissiveRepeat,t.mapEmissiveOffset,t.mapEmissiveWrap,t.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":n.lightMap=e(o,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":n.aoMap=e(o,t.mapAORepeat,t.mapAOOffset,t.mapAOWrap,t.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":n.bumpMap=e(o,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy);break;case"mapBumpScale":n.bumpScale=o;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":n.normalMap=e(o,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy);break;case"mapNormalFactor":n.normalScale=o;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":n.specularMap=e(o,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":n.metalnessMap=e(o,t.mapMetalnessRepeat,t.mapMetalnessOffset,t.mapMetalnessWrap,t.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":n.roughnessMap=e(o,t.mapRoughnessRepeat,t.mapRoughnessOffset,t.mapRoughnessWrap,t.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":n.alphaMap=e(o,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":n.side=1;break;case"doubleSided":n.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),n.opacity=o;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":n[i]=o;break;case"vertexColors":!0===o&&(n.vertexColors=2),"face"===o&&(n.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",i,o)}}return"MeshBasicMaterial"===n.type&&delete n.emissive,"MeshPhongMaterial"!==n.type&&delete n.specular,n.opacity<1&&(n.transparent=!0),pa.setTextures(l),pa.parse(n)})});var ma={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",i=0,n=t.length;i<n;i++)e+=String.fromCharCode(t[i]);return decodeURIComponent(escape(e))},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};Object.assign(Sn.prototype,{load:function(i,n,t,e){var o=this,r=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:ma.extractUrlBase(i),s=new Ei(this.manager);s.setWithCredentials(this.withCredentials),s.load(i,function(t){var e=(t=JSON.parse(t)).metadata;void 0===e||(void 0===(e=e.type)||"object"!==e.toLowerCase())?(t=o.parse(t,r),n(t.geometry,t.materials)):console.error("THREE.JSONLoader: "+i+" should be loaded with THREE.ObjectLoader instead.")},t,e)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){void 0!==t.data&&(t=t.data),t.scale=void 0!==t.scale?1/t.scale:1;var i,n,o,r=new x,s=t,a=s.faces,l=s.vertices,c=s.normals,h=s.colors,u=s.scale,d=0;if(void 0!==s.uvs){for(i=0;i<s.uvs.length;i++)s.uvs[i].length&&d++;for(i=0;i<d;i++)r.faceVertexUvs[i]=[]}var p=0;for(o=l.length;p<o;)(i=new St).x=l[p++]*u,i.y=l[p++]*u,i.z=l[p++]*u,r.vertices.push(i);for(p=0,o=a.length;p<o;){var f=1&(l=a[p++]),m=2&l;i=8&l;var g=16&l,v=32&l;if(u=64&l,l&=128,f){(f=new z).a=a[p],f.b=a[p+1],f.c=a[p+3];var y=new z;if(y.a=a[p+1],y.b=a[p+2],y.c=a[p+3],p+=4,m&&(m=a[p++],f.materialIndex=m,y.materialIndex=m),m=r.faces.length,i)for(i=0;i<d;i++){var b=s.uvs[i];for(r.faceVertexUvs[i][m]=[],r.faceVertexUvs[i][m+1]=[],n=0;n<4;n++){var w=a[p++],_=b[2*w];_=new V(_,w=b[2*w+1]),2!==n&&r.faceVertexUvs[i][m].push(_),0!==n&&r.faceVertexUvs[i][m+1].push(_)}}if(g&&(g=3*a[p++],f.normal.set(c[g++],c[g++],c[g]),y.normal.copy(f.normal)),v)for(i=0;i<4;i++)g=3*a[p++],v=new St(c[g++],c[g++],c[g]),2!==i&&f.vertexNormals.push(v),0!==i&&y.vertexNormals.push(v);if(u&&(u=h[u=a[p++]],f.color.setHex(u),y.color.setHex(u)),l)for(i=0;i<4;i++)u=h[u=a[p++]],2!==i&&f.vertexColors.push(new kt(u)),0!==i&&y.vertexColors.push(new kt(u));r.faces.push(f),r.faces.push(y)}else{if((f=new z).a=a[p++],f.b=a[p++],f.c=a[p++],m&&(m=a[p++],f.materialIndex=m),m=r.faces.length,i)for(i=0;i<d;i++)for(b=s.uvs[i],r.faceVertexUvs[i][m]=[],n=0;n<3;n++)_=new V(_=b[2*(w=a[p++])],w=b[2*w+1]),r.faceVertexUvs[i][m].push(_);if(g&&(g=3*a[p++],f.normal.set(c[g++],c[g++],c[g])),v)for(i=0;i<3;i++)g=3*a[p++],v=new St(c[g++],c[g++],c[g]),f.vertexNormals.push(v);if(u&&(u=a[p++],f.color.setHex(h[u])),l)for(i=0;i<3;i++)u=a[p++],f.vertexColors.push(new kt(h[u]));r.faces.push(f)}}if(p=void 0!==(s=t).influencesPerVertex?s.influencesPerVertex:2,s.skinWeights)for(o=0,a=s.skinWeights.length;o<a;o+=p)r.skinWeights.push(new Mt(s.skinWeights[o],1<p?s.skinWeights[o+1]:0,2<p?s.skinWeights[o+2]:0,3<p?s.skinWeights[o+3]:0));if(s.skinIndices)for(o=0,a=s.skinIndices.length;o<a;o+=p)r.skinIndices.push(new Mt(s.skinIndices[o],1<p?s.skinIndices[o+1]:0,2<p?s.skinIndices[o+2]:0,3<p?s.skinIndices[o+3]:0));if(r.bones=s.bones,r.bones&&0<r.bones.length&&(r.skinWeights.length!==r.skinIndices.length||r.skinIndices.length!==r.vertices.length)&&console.warn("When skinning, number of vertices ("+r.vertices.length+"), skinIndices ("+r.skinIndices.length+"), and skinWeights ("+r.skinWeights.length+") should match."),a=(o=t).scale,void 0!==o.morphTargets)for(s=0,p=o.morphTargets.length;s<p;s++)for(r.morphTargets[s]={},r.morphTargets[s].name=o.morphTargets[s].name,r.morphTargets[s].vertices=[],c=r.morphTargets[s].vertices,d=0,l=(h=o.morphTargets[s].vertices).length;d<l;d+=3)(u=new St).x=h[d]*a,u.y=h[d+1]*a,u.z=h[d+2]*a,c.push(u);if(void 0!==o.morphColors&&0<o.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),a=r.faces,o=o.morphColors[0].colors,s=0,p=a.length;s<p;s++)a[s].color.fromArray(o,3*s);for(s=[],p=[],void 0!==(o=t).animation&&p.push(o.animation),void 0!==o.animations&&(o.animations.length?p=p.concat(o.animations):p.push(o.animations)),o=0;o<p.length;o++)(a=bn.parseAnimation(p[o],r.bones))&&s.push(a);return r.morphTargets&&(p=bn.CreateClipsFromMorphTargetSequences(r.morphTargets,10),s=s.concat(p)),0<s.length&&(r.animations=s),r.computeFaceNormals(),r.computeBoundingSphere(),void 0===t.materials||0===t.materials.length?{geometry:r}:{geometry:r,materials:t=xn.prototype.initMaterials(t.materials,e,this.crossOrigin)}}}),Object.assign(Tn.prototype,{load:function(i,n,t,o){""===this.texturePath&&(this.texturePath=i.substring(0,i.lastIndexOf("/")+1));var r=this;new Ei(r.manager).load(i,function(t){var e=null;try{e=JSON.parse(t)}catch(t){return void 0!==o&&o(t),void console.error("THREE:ObjectLoader: Can't parse "+i+".",t.message)}void 0===(t=e.metadata)||void 0===t.type||"geometry"===t.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+i+". Use THREE.JSONLoader instead."):r.parse(e,n)},t,o)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var i=this.parseShape(t.shapes);i=this.parseGeometries(t.geometries,i);var n=this.parseImages(t.images,function(){void 0!==e&&e(o)});n=this.parseTextures(t.textures,n),n=this.parseMaterials(t.materials,n);var o=this.parseObject(t.object,i,n);return t.animations&&(o.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0===e||e(o),o},parseShape:function(t){var e={};if(void 0!==t)for(var i=0,n=t.length;i<n;i++){var o=(new Xi).fromJSON(t[i]);e[o.uuid]=o}return e},parseGeometries:function(t,e){var i={};if(void 0!==t)for(var n=new Sn,o=new _n,r=0,s=t.length;r<s;r++){var a=t[r];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":var l=new Qs[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":l=new Qs[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":l=new Qs[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":l=new Qs[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":l=new Qs[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":l=new Qs[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":l=new Qs[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":l=new Qs[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":l=new Qs[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":l=new Qs[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"LatheGeometry":case"LatheBufferGeometry":l=new Qs[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":l=new Qs[a.type](a.vertices,a.indices,a.radius,a.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":l=[];for(var c=0,h=a.shapes.length;c<h;c++)l.push(e[a.shapes[c]]);l=new Qs[a.type](l,a.curveSegments);break;case"BufferGeometry":l=o.parse(a);break;case"Geometry":l=n.parse(a,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+a.type+'"');continue}l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),i[a.uuid]=l}return i},parseMaterials:function(t,e){var i={};if(void 0!==t){var n=new wn;n.setTextures(e),e=0;for(var o=t.length;e<o;e++){var r=t[e];if("MultiMaterial"===r.type){for(var s=[],a=0;a<r.materials.length;a++)s.push(n.parse(r.materials[a]));i[r.uuid]=s}else i[r.uuid]=n.parse(r)}}return i},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var n=bn.parse(t[i]);e.push(n)}return e},parseImages:function(t,e){function i(t){return n.manager.itemStart(t),r.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemEnd(t),n.manager.itemError(t)})}var n=this,o={};if(void 0!==t&&0<t.length){var r=new ki(e=new Mi(e));r.setCrossOrigin(this.crossOrigin),e=0;for(var s=t.length;e<s;e++){var a=t[e],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a.url)?a.url:n.texturePath+a.url;o[a.uuid]=i(l)}}return o},parseTextures:function(t,e){function i(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var n={};if(void 0!==t)for(var o=0,r=t.length;o<r;o++){var s=t[o];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var a=new d(e[s.image]);a.needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=i(s.mapping,ga)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=i(s.wrap[0],va),a.wrapT=i(s.wrap[1],va)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=i(s.minFilter,ya)),void 0!==s.magFilter&&(a.magFilter=i(s.magFilter,ya)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),n[s.uuid]=a}return n},parseObject:function(t,e,r){function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function n(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,n=t.length;i<n;i++){var o=t[i];void 0===r[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(r[o])}return e}return void 0===r[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),r[t]}}switch(t.type){case"Scene":var o=new Kt;void 0!==t.background&&Number.isInteger(t.background)&&(o.background=new kt(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new Zt(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new wt(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new vt(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new Lt(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new rn(t.color,t.intensity);break;case"DirectionalLight":o=new on(t.color,t.intensity);break;case"PointLight":o=new en(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new sn(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new tn(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new Ki(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":o=i(t.geometry);var s=n(t.material);o=o.bones&&0<o.bones.length?new ne(o,s):new Ft(o,s);break;case"LOD":o=new te;break;case"Line":o=new re(i(t.geometry),n(t.material),t.mode);break;case"LineLoop":o=new ae(i(t.geometry),n(t.material));break;case"LineSegments":o=new se(i(t.geometry),n(t.material));break;case"PointCloud":case"Points":o=new ce(i(t.geometry),n(t.material));break;case"Sprite":o=new Qt(n(t.material));break;case"Group":o=new he;break;default:o=new h}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children){s=t.children;for(var a=0;a<s.length;a++)o.add(this.parseObject(s[a],e,r))}if("LOD"===t.type)for(t=t.levels,s=0;s<t.length;s++){a=t[s];var l=o.getObjectByProperty("uuid",a.object);void 0!==l&&o.addLevel(l,a.distance)}return o}});var ga={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},va={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},ya={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};Mn.prototype={constructor:Mn,setOptions:function(t){return this.options=t,this},load:function(e,i,t,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var o=this,r=ea.get(e);if(void 0!==r)return o.manager.itemStart(e),setTimeout(function(){i&&i(r),o.manager.itemEnd(e)},0),r;fetch(e).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,o.options)}).then(function(t){ea.add(e,t),i&&i(t),o.manager.itemEnd(e)}).catch(function(t){n&&n(t),o.manager.itemEnd(e),o.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(En.prototype,{moveTo:function(t,e){this.currentPath=new Yi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,i,n){this.currentPath.quadraticCurveTo(t,e,i,n)},bezierCurveTo:function(t,e,i,n,o,r){this.currentPath.bezierCurveTo(t,e,i,n,o,r)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function i(t){for(var e=[],i=0,n=t.length;i<n;i++){var o=t[i],r=new Xi;r.curves=o.curves,e.push(r)}return e}function n(t,e){for(var i=e.length,n=!1,o=i-1,r=0;r<i;o=r++){var s=e[o],a=e[r],l=a.x-s.x,c=a.y-s.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(s=e[r],l=-l,a=e[o],c=-c),!(t.y<s.y||t.y>a.y))if(t.y===s.y){if(t.x===s.x)return!0}else{if(0===(o=c*(t.x-s.x)-l*(t.y-s.y)))return!0;o<0||(n=!n)}}else if(t.y===s.y&&(a.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=a.x))return!0}return n}var o=Js.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===e)return i(r);if(e=[],1===r.length){var s=r[0],a=new Xi;return a.curves=s.curves,e.push(a),e}var l=!o(r[0].getPoints());l=t?!l:l,a=[];var c=[],h=[],u=0;c[u]=void 0,h[u]=[];for(var d=0,p=r.length;d<p;d++){var f=(s=r[d]).getPoints(),m=o(f);(m=t?!m:m)?(!l&&c[u]&&u++,c[u]={s:new Xi,p:f},c[u].s.curves=s.curves,l&&u++,h[u]=[]):h[u].push({h:s,p:f[0]})}if(!c[0])return i(r);if(1<c.length){for(d=!1,t=[],o=0,r=c.length;o<r;o++)a[o]=[];for(o=0,r=c.length;o<r;o++)for(s=h[o],m=0;m<s.length;m++){for(l=s[m],u=!0,f=0;f<c.length;f++)n(l.p,c[f].p)&&(o!==f&&t.push({froms:o,tos:f,hole:m}),u?(u=!1,a[f].push(l)):d=!0);u&&a[o].push(l)}0<t.length&&(d||(h=a))}for(d=0,o=c.length;d<o;d++)for(a=c[d].s,e.push(a),r=0,s=(t=h[d]).length;r<s;r++)a.holes.push(t[r].h);return e}}),Object.assign(Cn.prototype,{isFont:!0,generateShapes:function(t,e,i){void 0===e&&(e=100),i=[];var n=e;e=this.data;var o=String(t).split("");n/=e.resolution;var r=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*n;t=[];for(var s=0,a=0,l=0;l<o.length;l++){var c=o[l];if("\n"===c)s=0,a-=r;else{var h=n,u=s,d=a;if(c=e.glyphs[c]||e.glyphs["?"]){var p=new En;if(c.o)for(var f=c._cachedOutline||(c._cachedOutline=c.o.split(" ")),m=0,g=f.length;m<g;)switch(f[m++]){case"m":var v=f[m++]*h+u,y=f[m++]*h+d;p.moveTo(v,y);break;case"l":v=f[m++]*h+u,y=f[m++]*h+d,p.lineTo(v,y);break;case"q":var b=f[m++]*h+u,w=f[m++]*h+d,_=f[m++]*h+u,x=f[m++]*h+d;p.quadraticCurveTo(_,x,b,w);break;case"b":b=f[m++]*h+u,w=f[m++]*h+d,_=f[m++]*h+u,x=f[m++]*h+d,v=f[m++]*h+u,y=f[m++]*h+d,p.bezierCurveTo(_,x,v,y,b,w)}h={offsetX:c.ha*h,path:p}}else h=void 0;s+=h.offsetX,t.push(h.path)}}for(e=0,o=t.length;e<o;e++)Array.prototype.push.apply(i,t[e].toShapes());return i}}),Object.assign(An.prototype,{load:function(t,n,e,i){var o=this,r=new Ei(this.manager);r.setPath(this.path),r.load(t,function(e){try{var i=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(e.substring(65,e.length-2))}e=o.parse(i),n&&n(e)},e,i)},parse:function(t){return new Cn(t)},setPath:function(t){return this.path=t,this}});var ba,wa,_a,xa,Sa,Ta,Ma,Ea,Ca,Aa,ka,Pa,La,Ra,Da,Ia,Oa,Na,za,Ha,Ba,Fa,Ua,Wa,ja,$a,Ga,Va,qa,Ya,Xa,Za,Ka,Ja,Qa,tl,el,il,nl,ol,rl,sl,al={getContext:function(){return void 0===ba&&(ba=new(window.AudioContext||window.webkitAudioContext)),ba},setContext:function(t){ba=t}};Object.assign(kn.prototype,{load:function(t,e,i,n){var o=new Ei(this.manager);o.setResponseType("arraybuffer"),o.load(t,function(t){al.getContext().decodeAudioData(t,function(t){e(t)})},i,n)}}),Object.assign(Pn.prototype,{update:(Aa=new _t,ka=new _t,function(t){if(wa!==this||_a!==t.focus||xa!==t.fov||Sa!==t.aspect*this.aspect||Ta!==t.near||Ma!==t.far||Ea!==t.zoom||Ca!==this.eyeSep){wa=this,_a=t.focus,xa=t.fov,Sa=t.aspect*this.aspect,Ta=t.near,Ma=t.far,Ea=t.zoom;var e=t.projectionMatrix.clone(),i=(Ca=this.eyeSep/2)*Ta/_a,n=Ta*Math.tan(Wo.DEG2RAD*xa*.5)/Ea;ka.elements[12]=-Ca,Aa.elements[12]=Ca;var o=-n*Sa+i,r=n*Sa+i;e.elements[0]=2*Ta/(r-o),e.elements[8]=(r+o)/(r-o),this.cameraL.projectionMatrix.copy(e),o=-n*Sa-i,r=n*Sa-i,e.elements[0]=2*Ta/(r-o),e.elements[8]=(r+o)/(r-o),this.cameraR.projectionMatrix.copy(e)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(ka),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Aa)})}),Ln.prototype=Object.create(h.prototype),Ln.prototype.constructor=Ln,Rn.prototype=Object.assign(Object.create(h.prototype),{constructor:Rn,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:(Pa=new St,La=new xt,Ra=new St,Da=new St,function(t){h.prototype.updateMatrixWorld.call(this,t),t=this.context.listener;var e=this.up;this.matrixWorld.decompose(Pa,La,Ra),Da.set(0,0,-1).applyQuaternion(La),t.positionX?(t.positionX.setValueAtTime(Pa.x,this.context.currentTime),t.positionY.setValueAtTime(Pa.y,this.context.currentTime),t.positionZ.setValueAtTime(Pa.z,this.context.currentTime),t.forwardX.setValueAtTime(Da.x,this.context.currentTime),t.forwardY.setValueAtTime(Da.y,this.context.currentTime),t.forwardZ.setValueAtTime(Da.z,this.context.currentTime),t.upX.setValueAtTime(e.x,this.context.currentTime),t.upY.setValueAtTime(e.y,this.context.currentTime),t.upZ.setValueAtTime(e.z,this.context.currentTime)):(t.setPosition(Pa.x,Pa.y,Pa.z),t.setOrientation(Da.x,Da.y,Da.z,e.x,e.y,e.z))})}),Dn.prototype=Object.assign(Object.create(h.prototype),{constructor:Dn,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),In.prototype=Object.assign(Object.create(Dn.prototype),{constructor:In,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:(Ia=new St,function(t){h.prototype.updateMatrixWorld.call(this,t),Ia.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(Ia.x,Ia.y,Ia.z)})}),Object.assign(On.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),i=0;i<e.length;i++)t+=e[i];return t/e.length}}),Object.assign(Nn.prototype,{accumulate:function(t,e){var i=this.buffer,n=this.valueSize;t=t*n+n;var o=this.cumulativeWeight;if(0===o){for(o=0;o!==n;++o)i[t+o]=i[o];o=e}else o+=e,this._mixBufferRegion(i,t,0,e/o,n);this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,i=this.buffer;t=t*e+e;var n=this.cumulativeWeight,o=this.binding;this.cumulativeWeight=0,n<1&&this._mixBufferRegion(i,t,3*e,1-n,e);for(var r=(n=e)+e;n!==r;++n)if(i[n]!==i[n+e]){o.setValue(i,t);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,i=3*e;this.binding.getValue(t,i);for(var n=e;n!==i;++n)t[n]=t[i+n%e];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,e,i,n,o){if(.5<=n)for(n=0;n!==o;++n)t[e+n]=t[i+n]},_slerp:function(t,e,i,n){xt.slerpFlat(t,e,t,e,t,i,n)},_lerp:function(t,e,i,n,o){for(var r=1-n,s=0;s!==o;++s){var a=e+s;t[a]=t[a]*r+t[i+s]*n}}}),Object.assign(zn.prototype,{getValue:function(t,e){this.bind();var i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,o=i.length;n!==o;++n)i[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}),Object.assign(Hn,{Composite:zn,create:function(t,e,i){return t&&t.isAnimationObjectGroup?new Hn.Composite(t,e,i):new Hn(t,e,i)},sanitizeNodeName:(Oa=/[\[\]\.:\/]/g,function(t){return t.replace(/\s/g,"_").replace(Oa,"")}),parseTrackName:function(){var t="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",e=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");t=/(WCOD+)?/.source.replace("WCOD",t);var i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),n=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),o=new RegExp("^"+e+t+i+n+"$"),r=["material","materials","bones"];return function(t){var e=o.exec(t);if(!e)throw Error("PropertyBinding: Cannot parse trackName: "+t);var i=(e={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]}).nodeName&&e.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=e.nodeName.substring(i+1);-1!==r.indexOf(n)&&(e.nodeName=e.nodeName.substring(0,i),e.objectName=n)}if(null===e.propertyName||0===e.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+t);return e}}(),findNode:function(t,n){if(!n||""===n||"root"===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){var e=t.skeleton.getBoneByName(n);if(void 0!==e)return e}if(t.children){var o=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.name===n||i.uuid===n||(i=o(i.children)))return i}return null};if(t=o(t.children))return t}return null}}),Object.assign(Hn.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,n=0,o=i.length;n!==o;++n)t[e++]=i[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,n=0,o=i.length;n!==o;++n)i[n]=t[e++]},function(t,e){for(var i=this.resolvedProperty,n=0,o=i.length;n!==o;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,n=0,o=i.length;n!==o;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,i=e.objectName,n=e.propertyName,o=e.propertyIndex;if(t||(this.node=t=Hn.findNode(this.rootNode,e.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var r=e.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(t=t.skeleton.bones,i=0;i<t.length;i++)if(t[i].name===r){r=i;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}if(void 0===(r=t[n]))console.error("THREE.PropertyBinding: Trying to update property for track: "+e.nodeName+"."+n+" but it wasn't found.",t);else{if(e=this.Versioning.None,void 0!==t.needsUpdate?(e=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(e=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t),i=this.BindingType.Direct,void 0!==o){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(i=0;i<this.node.geometry.morphAttributes.position.length;i++)if(t.geometry.morphAttributes.position[i].name===o){o=i;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(i=0;i<this.node.geometry.morphTargets.length;i++)if(t.geometry.morphTargets[i].name===o){o=i;break}}}i=this.BindingType.ArrayElement,this.resolvedProperty=r,this.propertyIndex=o}else void 0!==r.fromArray&&void 0!==r.toArray?(i=this.BindingType.HasFromToArray,this.resolvedProperty=r):Array.isArray(r)?(i=this.BindingType.EntireArray,this.resolvedProperty=r):this.propertyName=n;this.getValue=this.GetterByBindingType[i],this.setValue=this.SetterByBindingTypeAndVersioning[i][e]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Hn.prototype,{_getValue_unbound:Hn.prototype.getValue,_setValue_unbound:Hn.prototype.setValue}),Object.assign(Bn.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,o=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length,l=void 0,c=0,h=arguments.length;c!==h;++c){var u=arguments[c],d=u.uuid,p=n[d];if(void 0===p){p=e++,n[d]=p,t.push(u),d=0;for(var f=a;d!==f;++d)s[d].push(new Hn(u,o[d],r[d]))}else if(p<i){l=t[p];var m=--i;for(t[n[(f=t[m]).uuid]=p]=f,t[n[d]=m]=u,d=0,f=a;d!==f;++d){var g=s[d],v=g[p];g[p]=g[m],void 0===v&&(v=new Hn(u,o[d],r[d])),g[m]=v}}else t[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,o=n.length,r=0,s=arguments.length;r!==s;++r){var a=arguments[r],l=a.uuid,c=i[l];if(void 0!==c&&e<=c){var h=e++,u=t[h];for(t[i[u.uuid]=c]=u,t[i[l]=h]=a,a=0,l=o;a!==l;++a){var d=(u=n[a])[c];u[c]=u[h],u[h]=d}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,o=this._bindings,r=o.length,s=0,a=arguments.length;s!==a;++s){var l=arguments[s].uuid,c=n[l];if(void 0!==c)if(delete n[l],c<i){var h=t[l=--i],u=--e,d=t[u];for(t[n[h.uuid]=c]=h,t[n[d.uuid]=l]=d,t.pop(),h=0,d=r;h!==d;++h){var p=o[h],f=p[u];p[c]=p[l],p[l]=f,p.pop()}}else for(t[n[(d=t[u=--e]).uuid]=c]=d,t.pop(),h=0,d=r;h!==d;++h)(p=o[h])[c]=p[u],p.pop()}this.nCachedObjects_=i},subscribe_:function(t,e){var i=this._bindingsIndicesByPath,n=i[t],o=this._bindings;if(void 0!==n)return o[n];var r=this._paths,s=this._parsedPaths,a=this._objects,l=this.nCachedObjects_,c=Array(a.length);for(n=o.length,i[t]=n,r.push(t),s.push(e),o.push(c),i=l,n=a.length;i!==n;++i)c[i]=new Hn(a[i],t,e);return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){var n=this._paths,o=this._parsedPaths,r=this._bindings,s=r.length-1,a=r[s];r[e[t[s]]=i]=a,r.pop(),o[i]=o[s],o.pop(),n[i]=n[s],n.pop()}}}),Object.assign(Fn.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){i=this._clip.duration;var n=t._clip.duration,o=i/n;t.warp(1,n/i,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,i){return t.crossFadeFrom(this,e,i)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,i){var n=this._mixer,o=n.time,r=this._timeScaleInterpolant,s=this.timeScale;return null===r&&(this._timeScaleInterpolant=r=n._lendControlInterpolant()),n=r.parameterPositions,r=r.sampleValues,n[0]=o,n[1]=o+i,r[0]=t/s,r[1]=e/s,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,i,n){if(this.enabled){var o=this._startTime;if(null!==o){if((e=(t-o)*i)<0||0===i)return;this._startTime=null,e*=i}if(e*=this._updateTimeScale(t),i=this._updateTime(e),0<(t=this._updateWeight(t))){e=this._interpolants,o=this._propertyBindings;for(var r=0,s=e.length;r!==s;++r)e[r].evaluate(i),o[r].accumulate(n,t)}}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i)e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var i=this._clip.duration,n=this.loop,o=this._loopCount;if(2200===n)t:{if(-1===o&&(this._loopCount=0,this._setEndings(!0,!0,!1)),i<=e)e=i;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}else{if(n=2202===n,-1===o&&(0<=t?(o=0,this._setEndings(!0,0===this.repetitions,n)):this._setEndings(0===this.repetitions,!0,n)),i<=e||e<0){var r=Math.floor(e/i);e-=i*r,o+=Math.abs(r);var s=this.repetitions-o;s<=0?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=0<t?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(1===s?(t=t<0,this._setEndings(t,!t,n)):this._setEndings(!1,!1,n),this._loopCount=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:r}))}if(n&&1==(1&o))return i-(this.time=e)}return this.time=e},_setEndings:function(t,e,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,e,i){var n=this._mixer,o=n.time,r=this._weightInterpolant;return null===r&&(this._weightInterpolant=r=n._lendControlInterpolant()),n=r.parameterPositions,r=r.sampleValues,n[0]=o,r[0]=e,n[1]=o+t,r[1]=i,this}}),Un.prototype=Object.assign(Object.create(e.prototype),{constructor:Un,_bindAction:function(t,e){var i=t._localRoot||this._root,n=t._clip.tracks,o=n.length,r=t._propertyBindings;t=t._interpolants;var s=i.uuid,a=this._bindingsByRootAndName,l=a[s];for(void 0===l&&(l={},a[s]=l),a=0;a!==o;++a){var c=n[a],h=c.name,u=l[h];if(void 0===u){if(void 0!==(u=r[a])){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,h));continue}++(u=new Nn(Hn.create(i,h,e&&e._propertyBindings[a].binding.parsedPath),c.ValueTypeName,c.getValueSize())).referenceCount,this._addInactiveBinding(u,s,h)}r[a]=u,t[a].resultBuffer=u.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e)}for(i=0,n=(e=t._propertyBindings).length;i!==n;++i){var o=e[i];0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var o=e[i];0==--o.useCount&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){return null!==(t=t._cacheIndex)&&t<this._nActiveActions},_addInactiveAction:function(t,e,i){var n=this._actions,o=this._actionsByClip,r=o[e];void 0===r?(r={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=r):(e=r.knownActions,t._byClipCacheIndex=e.length,e.push(t)),t._cacheIndex=n.length,n.push(t),r.actionByRoot[i]=t},_removeInactiveAction:function(t){var e=this._actions,i=e[e.length-1],n=t._cacheIndex;e[i._cacheIndex=n]=i,e.pop(),t._cacheIndex=null,e=t._clip.uuid;var o=(n=(i=this._actionsByClip)[e]).knownActions,r=o[o.length-1],s=t._byClipCacheIndex;o[r._byClipCacheIndex=s]=r,o.pop(),t._byClipCacheIndex=null,delete n.actionByRoot[(t._localRoot||this._root).uuid],0===o.length&&delete i[e],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=0,i=(t=t._propertyBindings).length;e!==i;++e){var n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(t){var e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,o=e[n];e[t._cacheIndex=n]=t,e[o._cacheIndex=i]=o},_takeBackAction:function(t){var e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,o=e[n];e[t._cacheIndex=n]=t,e[o._cacheIndex=i]=o},_addInactiveBinding:function(t,e,i){var n=this._bindingsByRootAndName,o=n[e],r=this._bindings;void 0===o&&(o={},n[e]=o),(o[i]=t)._cacheIndex=r.length,r.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,i=t.binding,n=i.rootNode.uuid;i=i.path;var o=this._bindingsByRootAndName,r=o[n],s=e[e.length-1];t=t._cacheIndex,e[s._cacheIndex=t]=s,e.pop(),delete r[i];t:{for(var a in r)break t;delete o[n]}},_lendBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,o=e[n];e[t._cacheIndex=n]=t,e[o._cacheIndex=i]=o},_takeBackBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,o=e[n];e[t._cacheIndex=n]=t,e[o._cacheIndex=i]=o},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return void 0===i&&(t[(i=new mn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e]=i),i},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,o=e[n];e[t.__cacheIndex=n]=t,e[o.__cacheIndex=i]=o},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var i=e||this._root,n=i.uuid;t=null!==(i="string"==typeof t?bn.findByName(i,t):t)?i.uuid:t;var o=this._actionsByClip[t],r=null;if(void 0!==o){if(void 0!==(r=o.actionByRoot[n]))return r;r=o.knownActions[0],null===i&&(i=r._clip)}return null===i?null:(e=new Fn(this,i,e),this._bindAction(e,r),this._addInactiveAction(e,t,n),e)},existingAction:function(t,e){var i=e||this._root;return e=i.uuid,i="string"==typeof t?bn.findByName(i,t):t,void 0!==(t=this._actionsByClip[i?i.uuid:t])&&t.actionByRoot[e]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions,i=this._bindings,n=this._nActiveBindings,o=this._nActiveBindings=this._nActiveActions=0;o!==e;++o)t[o].reset();for(o=0;o!==n;++o)i[o].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,i=this._nActiveActions,n=this.time+=t,o=Math.sign(t),r=this._accuIndex^=1,s=0;s!==i;++s)e[s]._update(n,t,o,r);for(t=this._bindings,e=this._nActiveBindings,s=0;s!==e;++s)t[s].apply(r);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions;t=t.uuid;var i=this._actionsByClip,n=i[t];if(void 0!==n){for(var o=0,r=(n=n.knownActions).length;o!==r;++o){var s=n[o];this._deactivateAction(s);var a=s._cacheIndex,l=e[e.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,e[l._cacheIndex=a]=l,e.pop(),this._removeInactiveBindingsForAction(s)}delete i[t]}},uncacheRoot:function(t){t=t.uuid;var e=this._actionsByClip;for(n in e){var i=e[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var n=this._bindingsByRootAndName[t];if(void 0!==n)for(var o in n)(t=n[o]).restoreOriginalState(),this._removeInactiveBinding(t)},uncacheAction:function(t,e){null!==(t=this.existingAction(t,e))&&(this._deactivateAction(t),this._removeInactiveAction(t))}}),Wn.prototype.clone=function(){return new Wn(void 0===this.value.clone?this.value:this.value.clone())},jn.prototype=Object.assign(Object.create(Ot.prototype),{constructor:jn,isInstancedBufferGeometry:!0,copy:function(t){return Ot.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties($n.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign($n.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,o){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=o,this}}),Object.defineProperty(Gn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Gn.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var n=0,o=this.stride;n<o;n++)this.array[t+n]=e.array[i+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Vn.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Vn,isInstancedInterleavedBuffer:!0,copy:function(t){return Gn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),qn.prototype=Object.assign(Object.create(v.prototype),{constructor:qn,isInstancedBufferAttribute:!0,copy:function(t){return v.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Yn.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,i){return Zn(t,this,i=i||[],e),i.sort(Xn),i},intersectObjects:function(t,e,i){if(i=i||[],!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,o=t.length;n<o;n++)Zn(t[n],this,i,e);return i.sort(Xn),i}}),Object.assign(Kn.prototype,{start:function(){this.oldTime=this.startTime=("undefined"==typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Object.assign(Jn.prototype,{set:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(Wo.clamp(t.y/this.radius,-1,1))),this}}),Object.assign(Qn.prototype,{set:function(t,e,i){return this.radius=t,this.theta=e,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}}),Object.assign(to.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:(za=new V,function(t,e){return e=za.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new V),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new V),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new V),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new V),e.copy(t).clamp(this.min,this.max)},distanceToPoint:(Na=new V,function(t){return Na.copy(t).clamp(this.min,this.max).sub(t).length()}),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),eo.prototype=Object.create(h.prototype),(eo.prototype.constructor=eo).prototype.isImmediateRenderObject=!0,io.prototype=Object.create(se.prototype),(io.prototype.constructor=io).prototype.update=(Ha=new St,Ba=new St,Fa=new Tt,function(){var t=["a","b","c"];this.object.updateMatrixWorld(!0),Fa.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,i=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var o=n.vertices,r=n.faces,s=n=0,a=r.length;s<a;s++)for(var l=r[s],c=0,h=l.vertexNormals.length;c<h;c++){var u=l.vertexNormals[c];Ha.copy(o[l[t[c]]]).applyMatrix4(e),Ba.copy(u).applyMatrix3(Fa).normalize().multiplyScalar(this.size).add(Ha),i.setXYZ(n,Ha.x,Ha.y,Ha.z),n+=1,i.setXYZ(n,Ba.x,Ba.y,Ba.z),n+=1}else if(n&&n.isBufferGeometry)for(t=n.attributes.position,o=n.attributes.normal,c=n=0,h=t.count;c<h;c++)Ha.set(t.getX(c),t.getY(c),t.getZ(c)).applyMatrix4(e),Ba.set(o.getX(c),o.getY(c),o.getZ(c)),Ba.applyMatrix3(Fa).normalize().multiplyScalar(this.size).add(Ha),i.setXYZ(n,Ha.x,Ha.y,Ha.z),n+=1,i.setXYZ(n,Ba.x,Ba.y,Ba.z),n+=1;i.needsUpdate=!0}),no.prototype=Object.create(h.prototype),(no.prototype.constructor=no).prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},no.prototype.update=(Ua=new St,Wa=new St,function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Ua.setFromMatrixPosition(this.light.matrixWorld),Wa.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Wa.sub(Ua)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}),oo.prototype=Object.create(se.prototype),(oo.prototype.constructor=oo).prototype.updateMatrixWorld=(ja=new St,$a=new _t,Ga=new _t,function(t){var e=this.bones,i=this.geometry,n=i.getAttribute("position");Ga.getInverse(this.root.matrixWorld);for(var o=0,r=0;o<e.length;o++){var s=e[o];s.parent&&s.parent.isBone&&($a.multiplyMatrices(Ga,s.matrixWorld),ja.setFromMatrixPosition($a),n.setXYZ(r,ja.x,ja.y,ja.z),$a.multiplyMatrices(Ga,s.parent.matrixWorld),ja.setFromMatrixPosition($a),n.setXYZ(r+1,ja.x,ja.y,ja.z),r+=2)}i.getAttribute("position").needsUpdate=!0,h.prototype.updateMatrixWorld.call(this,t)}),ro.prototype=Object.create(Ft.prototype),(ro.prototype.constructor=ro).prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ro.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},so.prototype=Object.create(h.prototype),(so.prototype.constructor=so).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},so.prototype.update=function(){var t=.5*this.light.width,e=.5*this.light.height,i=this.line.geometry.attributes.position,n=i.array;n[0]=t,n[1]=-e,n[2]=0,n[3]=t,n[4]=e,n[5]=0,n[6]=-t,n[7]=e,n[8]=0,n[9]=-t,n[10]=-e,n[11]=0,n[12]=t,n[13]=-e,n[14]=0,i.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},ao.prototype=Object.create(h.prototype),(ao.prototype.constructor=ao).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ao.prototype.update=(Va=new St,qa=new kt,Ya=new kt,function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");qa.copy(this.light.color),Ya.copy(this.light.groundColor);for(var i=0,n=e.count;i<n;i++){var o=i<n/2?qa:Ya;e.setXYZ(i,o.r,o.g,o.b)}e.needsUpdate=!0}t.lookAt(Va.setFromMatrixPosition(this.light.matrixWorld).negate())}),lo.prototype=Object.create(se.prototype),lo.prototype.constructor=lo,co.prototype=Object.create(se.prototype),co.prototype.constructor=co,ho.prototype=Object.create(se.prototype),(ho.prototype.constructor=ho).prototype.update=(Xa=new St,Za=new St,Ka=new Tt,function(){this.object.updateMatrixWorld(!0),Ka.getNormalMatrix(this.object.matrixWorld);for(var t=this.object.matrixWorld,e=this.geometry.attributes.position,i=this.object.geometry,n=i.vertices,o=0,r=0,s=(i=i.faces).length;r<s;r++){var a=i[r],l=a.normal;Xa.copy(n[a.a]).add(n[a.b]).add(n[a.c]).divideScalar(3).applyMatrix4(t),Za.copy(l).applyMatrix3(Ka).normalize().multiplyScalar(this.size).add(Xa),e.setXYZ(o,Xa.x,Xa.y,Xa.z),o+=1,e.setXYZ(o,Za.x,Za.y,Za.z),o+=1}e.needsUpdate=!0}),uo.prototype=Object.create(h.prototype),(uo.prototype.constructor=uo).prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},uo.prototype.update=(Ja=new St,Qa=new St,tl=new St,function(){Ja.setFromMatrixPosition(this.light.matrixWorld),Qa.setFromMatrixPosition(this.light.target.matrixWorld),tl.subVectors(Qa,Ja),this.lightPlane.lookAt(tl),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(tl),this.targetLine.scale.z=tl.length()}),po.prototype=Object.create(se.prototype),(po.prototype.constructor=po).prototype.update=function(){function t(t,e,i,n){if(s.set(e,i,n).unproject(a),void 0!==(t=r[t]))for(e=o.getAttribute("position"),i=0,n=t.length;i<n;i++)e.setXYZ(t[i],s.x,s.y,s.z)}var o,r,s=new St,a=new l;return function(){o=this.geometry,r=this.pointMap,a.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),o.getAttribute("position").needsUpdate=!0}}(),fo.prototype=Object.create(se.prototype),(fo.prototype.constructor=fo).prototype.update=(el=new i,function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&el.setFromObject(this.object),!el.isEmpty()){t=el.min;var e=el.max,i=this.geometry.attributes.position,n=i.array;n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=t.x,n[4]=e.y,n[5]=e.z,n[6]=t.x,n[7]=t.y,n[8]=e.z,n[9]=e.x,n[10]=t.y,n[11]=e.z,n[12]=e.x,n[13]=e.y,n[14]=t.z,n[15]=t.x,n[16]=e.y,n[17]=t.z,n[18]=t.x,n[19]=t.y,n[20]=t.z,n[21]=e.x,n[22]=t.y,n[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}),fo.prototype.setFromObject=function(t){return this.object=t,this.update(),this},mo.prototype=Object.create(se.prototype),(mo.prototype.constructor=mo).prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),h.prototype.updateMatrixWorld.call(this,t))},go.prototype=Object.create(re.prototype),(go.prototype.constructor=go).prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.lookAt(this.plane.normal),h.prototype.updateMatrixWorld.call(this,t)},vo.prototype=Object.create(h.prototype),(vo.prototype.constructor=vo).prototype.setDirection=(rl=new St,function(t){.99999<t.y?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(rl.set(t.z,0,-t.x).normalize(),ol=Math.acos(t.y),this.quaternion.setFromAxisAngle(rl,ol))}),vo.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},vo.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},yo.prototype=Object.create(se.prototype),yo.prototype.constructor=yo,Ri.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ri.prototype),(t.prototype.constructor=t).prototype.getPoint=e,t},Object.assign(qi.prototype,{createPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getPoints(t),this.createGeometry(t)},createSpacedPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getSpacedPoints(t),this.createGeometry(t)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new x,i=0,n=t.length;i<n;i++){var o=t[i];e.vertices.push(new St(o.x,o.y,o.z||0))}return e}}),Object.assign(Yi.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),bo.prototype=Object.create(Ni.prototype),wo.prototype=Object.create(Ni.prototype),_o.prototype=Object.create(Ni.prototype),Object.assign(_o.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),lo.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},oo.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(xn.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ma.extractUrlBase(t)}}),Object.assign(to.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(i.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),_.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Wo,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Wo.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Wo.ceilPowerOfTwo(t)}}),Object.assign(Tt.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(_t.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return void 0===sl&&(sl=new St),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),sl.setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,i,n,o,r){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,i,o,r)}}),Ct.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},xt.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(H.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(B.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(B,{barycoordFromPoint:function(t,e,i,n,o){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),B.getBarycoord(t,e,i,n,o)},normal:function(t,e,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),B.getNormal(t,e,i,n)}}),Object.assign(Xi.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ze(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new si(this,t)}}),Object.assign(V.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(St.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Mt.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(x.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(h.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(h.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(te.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ee.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Ri.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),vt.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Zi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(v.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Ot.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Ot.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Wn.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(w.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new kt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}}}),Object.defineProperties(wi.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Bt.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(bt.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(bt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Vt.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(C.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Xt.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Dn.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new kn).load(t,function(t){e.setBuffer(t)}),this},On.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Ln.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},t.WebGLRenderTargetCube=n,t.WebGLRenderTarget=C,t.WebGLRenderer=bt,t.ShaderLib=fr,t.UniformsLib=pr,t.UniformsUtils=cr,t.ShaderChunk=lr,t.FogExp2=wt,t.Fog=Zt,t.Scene=Kt,t.Sprite=Qt,t.LOD=te,t.SkinnedMesh=ne,t.Skeleton=ee,t.Bone=ie,t.Mesh=Ft,t.LineSegments=se,t.LineLoop=ae,t.Line=re,t.Points=ce,t.Group=he,t.VideoTexture=ue,t.DataTexture=Et,t.CompressedTexture=de,t.CubeTexture=S,t.CanvasTexture=qt,t.DepthTexture=pe,t.Texture=d,t.CompressedTextureLoader=Ci,t.DataTextureLoader=Ai,t.CubeTextureLoader=Pi,t.TextureLoader=Li,t.ObjectLoader=Tn,t.MaterialLoader=wn,t.BufferGeometryLoader=_n,t.DefaultLoadingManager=ia,t.LoadingManager=Mi,t.JSONLoader=Sn,t.ImageLoader=ki,t.ImageBitmapLoader=Mn,t.FontLoader=An,t.FileLoader=Ei,t.Loader=xn,t.LoaderUtils=ma,t.Cache=ea,t.AudioLoader=kn,t.SpotLightShadow=Qi,t.SpotLight=tn,t.PointLight=en,t.RectAreaLight=sn,t.HemisphereLight=Ki,t.DirectionalLightShadow=nn,t.DirectionalLight=on,t.AmbientLight=rn,t.LightShadow=Ji,t.Light=Zi,t.StereoCamera=Pn,t.PerspectiveCamera=vt,t.OrthographicCamera=Lt,t.CubeCamera=Ln,t.ArrayCamera=yt,t.Camera=l,t.AudioListener=Rn,t.PositionalAudio=In,t.AudioContext=al,t.AudioAnalyser=On,t.Audio=Dn,t.VectorKeyframeTrack=yn,t.StringKeyframeTrack=an,t.QuaternionKeyframeTrack=un,t.NumberKeyframeTrack=pn,t.ColorKeyframeTrack=dn,t.BooleanKeyframeTrack=ln,t.PropertyMixer=Nn,t.PropertyBinding=Hn,t.KeyframeTrack=vn,t.AnimationUtils=ca,t.AnimationObjectGroup=Bn,t.AnimationMixer=Un,t.AnimationClip=bn,t.Uniform=Wn,t.InstancedBufferGeometry=jn,t.BufferGeometry=Ot,t.Geometry=x,t.InterleavedBufferAttribute=$n,t.InstancedInterleavedBuffer=Vn,t.InterleavedBuffer=Gn,t.InstancedBufferAttribute=qn,t.Face3=z,t.Object3D=h,t.Raycaster=Yn,t.Layers=r,t.EventDispatcher=e,t.Clock=Kn,t.QuaternionLinearInterpolant=hn,t.LinearInterpolant=mn,t.DiscreteInterpolant=gn,t.CubicInterpolant=fn,t.Interpolant=cn,t.Triangle=B,t.Math=Wo,t.Spherical=Jn,t.Cylindrical=Qn,t.Plane=Ct,t.Frustum=At,t.Sphere=s,t.Ray=H,t.Matrix4=_t,t.Matrix3=Tt,t.Box3=i,t.Box2=to,t.Line3=_,t.Euler=o,t.Vector4=Mt,t.Vector3=St,t.Vector2=V,t.Quaternion=xt,t.Color=kt,t.ImmediateRenderObject=eo,t.VertexNormalsHelper=io,t.SpotLightHelper=no,t.SkeletonHelper=oo,t.PointLightHelper=ro,t.RectAreaLightHelper=so,t.HemisphereLightHelper=ao,t.GridHelper=lo,t.PolarGridHelper=co,t.FaceNormalsHelper=ho,t.DirectionalLightHelper=uo,t.CameraHelper=po,t.BoxHelper=fo,t.Box3Helper=mo,t.PlaneHelper=go,t.ArrowHelper=vo,t.AxesHelper=yo,t.Shape=Xi,t.Path=Yi,t.ShapePath=En,t.Font=Cn,t.CurvePath=qi,t.Curve=Ri,t.ShapeUtils=Js,t.WebGLUtils=Yt,t.WireframeGeometry=fe,t.ParametricGeometry=me,t.ParametricBufferGeometry=ge,t.TetrahedronGeometry=be,t.TetrahedronBufferGeometry=we,t.OctahedronGeometry=_e,t.OctahedronBufferGeometry=xe,t.IcosahedronGeometry=Se,t.IcosahedronBufferGeometry=Te,t.DodecahedronGeometry=Me,t.DodecahedronBufferGeometry=Ee,t.PolyhedronGeometry=ve,t.PolyhedronBufferGeometry=ye,t.TubeGeometry=Ce,t.TubeBufferGeometry=Ae,t.TorusKnotGeometry=ke,t.TorusKnotBufferGeometry=Pe,t.TorusGeometry=Le,t.TorusBufferGeometry=Re,t.TextGeometry=Je,t.TextBufferGeometry=Qe,t.SphereGeometry=ti,t.SphereBufferGeometry=ei,t.RingGeometry=ii,t.RingBufferGeometry=ni,t.PlaneGeometry=b,t.PlaneBufferGeometry=zt,t.LatheGeometry=oi,t.LatheBufferGeometry=ri,t.ShapeGeometry=si,t.ShapeBufferGeometry=ai,t.ExtrudeGeometry=Ze,t.ExtrudeBufferGeometry=Ke,t.EdgesGeometry=ci,t.ConeGeometry=di,t.ConeBufferGeometry=pi,t.CylinderGeometry=hi,t.CylinderBufferGeometry=ui,t.CircleGeometry=fi,t.CircleBufferGeometry=mi,t.BoxGeometry=y,t.BoxBufferGeometry=Nt,t.ShadowMaterial=gi,t.SpriteMaterial=Jt,t.RawShaderMaterial=vi,t.ShaderMaterial=Bt,t.PointsMaterial=le,t.MeshPhysicalMaterial=bi,t.MeshStandardMaterial=yi,t.MeshPhongMaterial=wi,t.MeshToonMaterial=_i,t.MeshNormalMaterial=xi,t.MeshLambertMaterial=Si,t.MeshDepthMaterial=mt,t.MeshDistanceMaterial=gt,t.MeshBasicMaterial=Ht,t.LineDashedMaterial=Ti,t.LineBasicMaterial=oe,t.Material=w,t.Float64BufferAttribute=m,t.Float32BufferAttribute=q,t.Uint32BufferAttribute=Dt,t.Int32BufferAttribute=f,t.Uint16BufferAttribute=Rt,t.Int16BufferAttribute=p,t.Uint8ClampedBufferAttribute=u,t.Uint8BufferAttribute=c,t.Int8BufferAttribute=a,t.BufferAttribute=v,t.ArcCurve=Ii,t.CatmullRomCurve3=Ni,t.CubicBezierCurve=Fi,t.CubicBezierCurve3=Ui,t.EllipseCurve=Di,t.LineCurve=Wi,t.LineCurve3=ji,t.QuadraticBezierCurve=$i,t.QuadraticBezierCurve3=Gi,t.SplineCurve=Vi,t.REVISION="92dev",t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.CullFaceNone=0,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.FrontSide=0,t.BackSide=1,t.DoubleSide=2,t.FlatShading=1,t.SmoothShading=2,t.NoColors=0,t.FaceColors=1,t.VertexColors=2,t.NoBlending=0,t.NormalBlending=1,t.AdditiveBlending=2,t.SubtractiveBlending=3,t.MultiplyBlending=4,t.CustomBlending=5,t.AddEquation=100,t.SubtractEquation=101,t.ReverseSubtractEquation=102,t.MinEquation=103,t.MaxEquation=104,t.ZeroFactor=200,t.OneFactor=201,t.SrcColorFactor=202,t.OneMinusSrcColorFactor=203,t.SrcAlphaFactor=204,t.OneMinusSrcAlphaFactor=205,t.DstAlphaFactor=206,t.OneMinusDstAlphaFactor=207,t.DstColorFactor=208,t.OneMinusDstColorFactor=209,t.SrcAlphaSaturateFactor=210,t.NeverDepth=0,t.AlwaysDepth=1,t.LessDepth=2,t.LessEqualDepth=3,t.EqualDepth=4,t.GreaterEqualDepth=5,t.GreaterDepth=6,t.NotEqualDepth=7,t.MultiplyOperation=0,t.MixOperation=1,t.AddOperation=2,t.NoToneMapping=0,t.LinearToneMapping=1,t.ReinhardToneMapping=2,t.Uncharted2ToneMapping=3,t.CineonToneMapping=4,t.UVMapping=300,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.SphericalReflectionMapping=305,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.RepeatWrapping=1e3,t.ClampToEdgeWrapping=1001,t.MirroredRepeatWrapping=1002,t.NearestFilter=1003,t.NearestMipMapNearestFilter=1004,t.NearestMipMapLinearFilter=1005,t.LinearFilter=1006,t.LinearMipMapNearestFilter=1007,t.LinearMipMapLinearFilter=1008,t.UnsignedByteType=1009,t.ByteType=1010,t.ShortType=1011,t.UnsignedShortType=1012,t.IntType=1013,t.UnsignedIntType=1014,t.FloatType=1015,t.HalfFloatType=1016,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedInt248Type=1020,t.AlphaFormat=1021,t.RGBFormat=1022,t.RGBAFormat=1023,t.LuminanceFormat=1024,t.LuminanceAlphaFormat=1025,t.RGBEFormat=1023,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.RGB_S3TC_DXT1_Format=33776,t.RGBA_S3TC_DXT1_Format=33777,t.RGBA_S3TC_DXT3_Format=33778,t.RGBA_S3TC_DXT5_Format=33779,t.RGB_PVRTC_4BPPV1_Format=35840,t.RGB_PVRTC_2BPPV1_Format=35841,t.RGBA_PVRTC_4BPPV1_Format=35842,t.RGBA_PVRTC_2BPPV1_Format=35843,t.RGB_ETC1_Format=36196,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.LoopOnce=2200,t.LoopRepeat=2201,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=2400,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=0,t.TriangleStripDrawMode=1,t.TriangleFanDrawMode=2,t.LinearEncoding=3e3,t.sRGBEncoding=3001,t.GammaEncoding=3007,t.RGBEEncoding=3002,t.LogLuvEncoding=3003,t.RGBM7Encoding=3004,t.RGBM16Encoding=3005,t.RGBDEncoding=3006,t.BasicDepthPacking=3200,t.RGBADepthPacking=3201,t.CubeGeometry=y,t.Face4=function(t,e,i,n,o,r,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new z(t,e,i,o,r,s)},t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,(t.materials=t).clone=function(){return t.slice()},t},t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new ce(t,e)},t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Qt(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new ce(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new le(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new le(t)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new le(t)},t.Vertex=function(t,e,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new St(t,e,i)},t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new v(t,e).setDynamic(!0)},t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new a(t,e)},t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new c(t,e)},t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new u(t,e)},t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new p(t,e)},t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Rt(t,e)},t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new f(t,e)},t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Dt(t,e)},t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new q(t,e)},t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new m(t,e)},t.ClosedSplineCurve3=bo,t.SplineCurve3=wo,t.Spline=_o,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new yo(t)},t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new fo(t,e)},t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new se(new ci(t.geometry),new oe({color:void 0!==e?e:16777215}))},t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new se(new fe(t.geometry),new oe({color:void 0!==e?e:16777215}))},t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Ei(t)},t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Ai(t)},t.GeometryUtils={merge:function(t,e,i){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh){e.matrixAutoUpdate&&e.updateMatrix();var n=e.matrix;e=e.geometry}t.merge(e,n,i)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},t.ImageUtils={crossOrigin:void 0,loadTexture:function(t,e,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var o=new Li;return o.setCrossOrigin(this.crossOrigin),t=o.load(t,i,void 0,n),e&&(t.mapping=e),t},loadTextureCube:function(t,e,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var o=new Pi;return o.setCrossOrigin(this.crossOrigin),t=o.load(t,i,void 0,n),e&&(t.mapping=e),t},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},t.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},t.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}},t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(t,"__esModule",{value:!0})}),function(i){"use strict";function t(t){g(function(){throw t})}function e(t){return this.then(t,i)}function n(t){return this.then(i,t)}function d(e,t){return this.then(function(t){return v(e)?e.apply(null,c(t)?t:[t]):_.onlyFuncs?t:e},t||i)}function p(t){function e(){t()}return this.then(e,e),this}function f(e){return this.then(function(t){return v(e)?e.apply(null,c(t)?t.splice(0,0,void 0)&&t:[void 0,t]):_.onlyFuncs?t:e},function(t){return e(t)})}function m(e){return this.then(i,e?function(t){throw e(t),t}:t)}function o(t,i){var n=h(t);if(1===n.length&&c(n[0])){if(!n[0].length)return _.fulfilled([]);n=n[0]}var o=[],r=_(),s=n.length;if(s)for(var e=function(e){n[e]=_.promisify(n[e]),n[e].then(function(t){o[e]=i?n[e]:t,--s||r.resolve(o)},function(t){i?(o[e]=n[e],--s||r.resolve(o)):r.reject(t)})},a=0,l=s;a<l;a++)e(a);else r.resolve(o);return r.promise}function s(t,e){return t.then(v(e)?e:function(){return e})}var g,v=function(t){return"function"==typeof t},c=function(t){return Array.isArray?Array.isArray(t):t instanceof Array},y=function(t){return!(!t||!(typeof t).match(/function|object/))},b=function(t){return!1===t||t===i||null===t},h=function(t,e){return[].slice.call(t,e)},r="undefined",w=typeof TypeError===r?Error:TypeError;if(typeof process!==r&&process.nextTick)g=process.nextTick;else if(typeof MessageChannel!==r){var a=new MessageChannel,l=[];a.port1.onmessage=function(){l.length&&l.shift()()},g=function(t){l.push(t),a.port2.postMessage(0)}}else g=function(t){setTimeout(t,0)};var _=function(t){function o(){if(0!==c){var t,e=h,i=0,n=e.length,o=~c?0:1;for(h=[];i<n;i++)(t=e[i][o])&&t(a)}}function r(t){function e(e){return function(t){return i?void 0:(i=!0,e(t))}}var i=!1;if(c)return this;try{var n=y(t)&&t.then;if(v(n)){if(t===u)throw new w("Promise can't resolve itself");return n.call(t,e(r),e(s)),this}}catch(t){return e(s)(t),this}return l(function(){a=t,c=1,o()}),this}function s(t){return c||l(function(){try{throw t}catch(t){a=t}c=-1,o()}),this}var a,l=(i!==t?t:_.alwaysAsync)?g:function(t){t()},c=0,h=[],u={then:function(e,i){var n=_();return h.push([function(t){try{b(e)?n.resolve(t):n.resolve(v(e)?e(t):_.onlyFuncs?t:e)}catch(t){n.reject(t)}},function(t){if((b(i)||!v(i)&&_.onlyFuncs)&&n.reject(t),i)try{n.resolve(v(i)?i(t):i)}catch(t){n.reject(t)}}]),0!==c&&l(o),n.promise},success:e,error:n,otherwise:n,apply:d,spread:d,ensure:p,nodify:f,rethrow:m,isPending:function(){return 0===c},getStatus:function(){return c}};return u.toSource=u.toString=u.valueOf=function(){return a===i?this:a},{promise:u,resolve:r,fulfill:r,reject:s}};if(_.deferred=_.defer=_,_.nextTick=g,_.alwaysAsync=!0,_.onlyFuncs=!0,_.resolve=_.resolved=_.fulfilled=function(t){return _(!0).resolve(t).promise},_.reject=_.rejected=function(t){return _(!0).reject(t).promise},_.wait=function(t){var e=_();return setTimeout(e.resolve,t||0),e.promise},_.delay=function(t,e){var i=_();return setTimeout(function(){try{i.resolve(v(t)?t.apply(null):t)}catch(t){i.reject(t)}},e||0),i.promise},_.promisify=function(t){return t&&v(t.then)?t:_.resolved(t)},_.all=function(){return o(arguments,!1)},_.resolveAll=function(){return o(arguments,!0)},_.sequence=function(){return function(t){var e=h(t);1===e.length&&c(e[0])&&(e=e[0]);for(var i=_(),n=0,o=e.length,r=_.resolved();n<o;n++)r=s(r,e[n]);return i.resolve(r),i.promise}(arguments)},_.nodeCapsule=function(e,n){return n||(n=e,e=void 0),function(){var i=_(),t=h(arguments);t.push(function(t,e){t?i.reject(t):i.resolve(2<arguments.length?h(arguments,1):e)});try{n.apply(e,t)}catch(t){i.reject(t)}return i.promise}},"function"==typeof define&&define.amd)define("D.js",[],function(){return _});else if(typeof module!==r&&module.exports)module.exports=_;else if(typeof window!==r){var u=window.D;_.noConflict=function(){return window.D=u,_},window.D=_}}(),function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define([],e):t.uEvent=e()}(this,function(){"use strict";var t=function(){return!0},e=function(){return!1},a=function(){};return a.Event=function(t,e){var i=t,n=e;Object.defineProperties(this,{type:{get:function(){return i},set:function(t){},enumerable:!0},args:{get:function(){return n},set:function(t){},enumerable:!0}})},a.Event.prototype={constructor:a.Event,isDefaultPrevented:e,isPropagationStopped:e,preventDefault:function(){this.isDefaultPrevented=t},stopPropagation:function(){this.isPropagationStopped=t}},a.prototype={constructor:a,on:function(t,e){if(this.__events=this.__events||{},"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(this.__events[i]=this.__events[i]||[],this.__events[i].push(t[i]));else t.split(" ").forEach(function(t){this.__events[t]=this.__events[t]||[],this.__events[t].push(e)},this);return this},off:function(t,i){if(this.__events=this.__events||{},"object"==typeof t){for(var e in t)if(t.hasOwnProperty(e)&&e in this.__events){var n=this.__events[e].indexOf(t[e]);-1!==n&&this.__events[e].splice(n,1)}}else t?t.split(" ").forEach(function(t){if(t in this.__events)if(i){var e=this.__events[t].indexOf(i);-1!==e&&this.__events[t].splice(e,1)}else this.__events[t].length=0},this):this.__events={};return this},once:function(t,e){if(this.__once=this.__once||{},"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(this.__once[i]=this.__once[i]||[],this.__once[i].push(t[i]));else t.split(" ").forEach(function(t){this.__once[t]=this.__once[t]||[],this.__once[t].push(e)},this);return this},trigger:function(t){var e,i,n,o=Array.prototype.slice.call(arguments,1),r=new a.Event(t,o);if(o.push(r),this.__events&&t in this.__events)for(e=0,i=this.__events[t].length;e<i;e++)if("object"==typeof(n=this.__events[t][e])?n.handleEvent(r):n.apply(this,o),r.isPropagationStopped())return r;if(this.__once&&t in this.__once){for(e=0,i=this.__once[t].length;e<i;e++)if("object"==typeof(n=this.__once[t][e])?n.handleEvent(r):n.apply(this,o),r.isPropagationStopped())return delete this.__once[t],r;delete this.__once[t]}return r},change:function(t,e){var i,n,o,r=Array.prototype.slice.call(arguments,1),s=new a.Event(t,r);if(r.push(s),this.__events&&t in this.__events)for(i=0,n=this.__events[t].length;i<n;i++)if(r[0]=e,e="object"==typeof(o=this.__events[t][i])?o.handleEvent(s):o.apply(this,r),s.isPropagationStopped())return e;return e}},a.mixin=function(i,n){n=n||{},i="function"==typeof i?i.prototype:i,["on","off","once","trigger","change"].forEach(function(t){var e=n[t]||t;i[e]=a.prototype[t]}),Object.defineProperties(i,{__events:{value:null,writable:!0},__once:{value:null,writable:!0}})},a}),function(){"use strict";function l(t){return t.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var c,h={engine:"doT",version:"1.1.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0,log:!0,encodeHTMLSource:function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=t?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(i,function(t){return e[t]||t}):""}}};c=function(){return this||(0,eval)("this")}(),"undefined"!=typeof module&&module.exports?module.exports=h:"function"==typeof define&&define.amd?define(function(){return h}):c.doT=h;var u={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},d=/$^/;h.template=function(t,e,i){var n,o,r=(e=e||h.templateSettings).append?u.append:u.split,s=0,a=e.use||e.define?function n(o,t,r){return("string"==typeof t?t:t.toString()).replace(o.define||d,function(t,n,e,i){return 0===n.indexOf("def.")&&(n=n.substring(4)),n in r||(":"===e?(o.defineParams&&i.replace(o.defineParams,function(t,e,i){r[n]={arg:e,text:i}}),n in r||(r[n]=i)):new Function("def","def['"+n+"']="+i)(r)),""}).replace(o.use||d,function(t,e){o.useParams&&(e=e.replace(o.useParams,function(t,e,i,n){if(r[i]&&r[i].arg&&n){var o=(i+":"+n).replace(/'|\\/g,"_");return r.__exp=r.__exp||{},r.__exp[o]=r[i].text.replace(new RegExp("(^|[^\\w$])"+r[i].arg+"([^\\w$])","g"),"$1"+n+"$2"),e+"def.__exp['"+o+"']"}}));var i=new Function("def","return "+e)(r);return i?n(o,i,r):i})}(e,t,i||{}):t;a=("var out='"+(e.strip?a.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):a).replace(/'|\\/g,"\\$&").replace(e.interpolate||d,function(t,e){return r.start+l(e)+r.end}).replace(e.encode||d,function(t,e){return n=!0,r.startencode+l(e)+r.end}).replace(e.conditional||d,function(t,e,i){return e?i?"';}else if("+l(i)+"){out+='":"';}else{out+='":i?"';if("+l(i)+"){out+='":"';}out+='"}).replace(e.iterate||d,function(t,e,i,n){return e?(s+=1,o=n||"i"+s,e=l(e),"';var arr"+s+"="+e+";if(arr"+s+"){var "+i+","+o+"=-1,l"+s+"=arr"+s+".length-1;while("+o+"<l"+s+"){"+i+"=arr"+s+"["+o+"+=1];out+='"):"';} } out+='"}).replace(e.evaluate||d,function(t,e){return"';"+l(e)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),n&&(e.selfcontained||!c||c._encodeHTML||(c._encodeHTML=h.encodeHTMLSource(e.doNotSkipEncoded)),a="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+h.encodeHTMLSource.toString()+"("+(e.doNotSkipEncoded||"")+"));"+a);try{return new Function(e.varname,a)}catch(t){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+a),t}},h.compile=function(t,e){return h.template(t,null,e)}}(),function(t,e){"function"==typeof define&&define.amd?define(["three","d.js","uevent","dot/doT"],e):"object"==typeof module&&module.exports?module.exports=e(require("three"),require("d.js"),require("uevent"),require("dot/doT")):t.PhotoSphereViewer=e(t.THREE,t.D,t.uEvent,t.doT)}(this,function(u,d,t,n){"use strict";function p(t){if(!(this instanceof p))return new p(t);if(p.SYSTEM.loaded||p._loadSystem(),this.config=T.clone(p.DEFAULTS),T.deepmerge(this.config,t),!t.container)throw new x("No value given for container.");if(!p.SYSTEM.isCanvasSupported)throw new x("Canvas is not supported.");if(!(p.SYSTEM.isWebGLSupported&&this.config.webgl||T.checkTHREE("CanvasRenderer","Projector")))throw new x("Missing Three.js components: CanvasRenderer, Projector. Get them from three.js-examples package.");if(this.config.longitude_range&&2!==this.config.longitude_range.length&&(this.config.longitude_range=null,console.warn("PhotoSphereViewer: longitude_range must have exactly two elements.")),this.config.latitude_range?2!==this.config.latitude_range.length?(this.config.latitude_range=null,console.warn("PhotoSphereViewer: latitude_range must have exactly two elements.")):this.config.latitude_range[0]>this.config.latitude_range[1]&&(this.config.latitude_range=[this.config.latitude_range[1],this.config.latitude_range[0]],console.warn("PhotoSphereViewer: latitude_range values must be ordered.")):void 0===this.config.tilt_up_max&&void 0===this.config.tilt_down_max||(this.config.latitude_range=[void 0!==this.config.tilt_down_max?this.config.tilt_down_max-Math.PI/4:-T.HalfPI,void 0!==this.config.tilt_up_max?this.config.tilt_up_max+Math.PI/4:T.HalfPI],console.warn("PhotoSphereViewer: tilt_up_max and tilt_down_max are deprecated, use latitude_range instead.")),this.config.max_fov<this.config.min_fov){var e=this.config.max_fov;this.config.max_fov=this.config.min_fov,this.config.min_fov=e,console.warn("PhotoSphereViewer: max_fov cannot be lower than min_fov.")}this.config.cache_texture&&(!T.isInteger(this.config.cache_texture)||this.config.cache_texture<0)&&(this.config.cache_texture=p.DEFAULTS.cache_texture,console.warn("PhotoSphereViewer: invalid value for cache_texture")),"panorama_roll"in this.config&&(this.config.sphere_correction.roll=this.config.panorama_roll,console.warn("PhotoSphereViewer: panorama_roll is deprecated, use sphere_correction.roll instead")),this.config.min_fov=T.bound(this.config.min_fov,1,179),this.config.max_fov=T.bound(this.config.max_fov,1,179),null===this.config.default_fov?this.config.default_fov=this.config.max_fov/2+this.config.min_fov/2:this.config.default_fov=T.bound(this.config.default_fov,this.config.min_fov,this.config.max_fov),this.config.default_long=T.parseAngle(this.config.default_long),this.config.default_lat=T.parseAngle(this.config.default_lat,!0),this.config.sphere_correction.pan=T.parseAngle(this.config.sphere_correction.pan,!0),this.config.sphere_correction.tilt=T.parseAngle(this.config.sphere_correction.tilt,!0),this.config.sphere_correction.roll=T.parseAngle(this.config.sphere_correction.roll,!0),null===this.config.anim_lat?this.config.anim_lat=this.config.default_lat:this.config.anim_lat=T.parseAngle(this.config.anim_lat,!0),this.config.longitude_range&&(this.config.longitude_range=this.config.longitude_range.map(function(t){return T.parseAngle(t)})),this.config.latitude_range&&(this.config.latitude_range=this.config.latitude_range.map(function(t){return T.parseAngle(t,!0)})),this.config.anim_speed=T.parseSpeed(this.config.anim_speed),this.config.caption&&!this.config.navbar&&(this.config.navbar=["caption"]),!0===this.config.fisheye?this.config.fisheye=1:!1===this.config.fisheye&&(this.config.fisheye=0),this.parent="string"==typeof t.container?document.getElementById(t.container):t.container,this.container=null,this.loader=null,this.navbar=null,this.hud=null,this.panel=null,this.tooltip=null,this.canvas_container=null,this.renderer=null,this.scene=null,this.camera=null,this.mesh=null,this.raycaster=null,this.doControls=null,this.prop={isCubemap:void 0,longitude:0,latitude:0,direction:null,anim_speed:0,zoom_lvl:0,vFov:0,hFov:0,aspect:0,move_speed:.1,moving:!1,zooming:!1,start_mouse_x:0,start_mouse_y:0,mouse_x:0,mouse_y:0,mouse_history:[],pinch_dist:0,orientation_reqid:null,autorotate_reqid:null,animation_promise:null,loading_promise:null,start_timeout:null,dblclick_data:null,dblclick_timeout:null,cache:[],size:{width:0,height:0},pano_data:{full_width:0,full_height:0,cropped_width:0,cropped_height:0,cropped_x:0,cropped_y:0}},Object.keys(p.TEMPLATES).forEach(function(t){this.config.templates[t]||(this.config.templates[t]=p.TEMPLATES[t]),"string"==typeof this.config.templates[t]&&(this.config.templates[t]=n.template(this.config.templates[t]))},this),(this.parent.photoSphereViewer=this).container=document.createElement("div"),this.container.classList.add("psv-container"),this.parent.appendChild(this.container),null!==this.config.size&&this._setViewerSize(this.config.size),this._onResize();var i=Math.round((this.config.default_fov-this.config.min_fov)/(this.config.max_fov-this.config.min_fov)*100);this.zoom(i-2*(i-50),!1),this.prop.move_speed=u.Math.degToRad(this.config.move_speed/p.SYSTEM.pixelRatio),this.rotate({longitude:this.config.default_long,latitude:this.config.default_lat},!1),this.loader=new s(this),this.loader.hide(),this.navbar=new a(this),this.navbar.hide(),this.hud=new r(this),this.hud.hide(),this.panel=new c(this),this.tooltip=new f(this.hud),this._bindEvents(),this.config.panorama&&this.load(),this.once("render",function(){this.config.navbar&&(this.container.classList.add("psv-container--has-navbar"),this.navbar.show()),this.hud.show(),this.config.markers&&(this.config.markers.forEach(function(t){this.hud.addMarker(t,!1)},this),this.hud.renderMarkers()),!1!==this.config.time_anim&&(this.prop.start_timeout=window.setTimeout(this.startAutorotate.bind(this),this.config.time_anim)),this.trigger("ready")}.bind(this))}function o(t){this.psv=t instanceof p?t:t.psv,this.parent=t,this.container=null,this.constructor.publicMethods&&this.constructor.publicMethods.forEach(function(t){this.psv[t]=this[t].bind(this)},this)}function r(t){o.call(this,t),this.svgContainer=null,this.markers={},this.currentMarker=null,this.hoveringMarker=null,this.prop={panelOpened:!1,panelOpening:!1,markersButton:this.psv.navbar.getNavbarButton("markers",!0)},this.create()}function s(t){o.call(this,t),this.canvas=null,this.loader=null,this.create()}function a(t){if(o.call(this,t),this.config=this.psv.config.navbar,this.items=[],!0===this.config)this.config=T.clone(p.DEFAULTS.navbar);else if("string"==typeof this.config)this.config=this.config.split(" ");else if(!Array.isArray(this.config)){console.warn('PhotoSphereViewer: hashmap form of "navbar" is deprecated, use an array instead.');var e=this.config;for(var i in this.config=[],e)e[i]&&this.config.push(i);this.config.sort(function(t,e){return p.DEFAULTS.navbar.indexOf(t)-p.DEFAULTS.navbar.indexOf(e)})}this.create()}function i(t,e){o.call(this,t),this.create(),this.setCaption(e)}function l(t,e){o.call(this,t),this.weight=e||5,this.create(),this.container.classList.add("psv-spacer--weight-"+this.weight)}function c(t){o.call(this,t),this.content=null,this.prop={mouse_x:0,mouse_y:0,mousedown:!1,opened:!1},this.create()}function f(t){o.call(this,t),this.config=this.psv.config.tooltip,this.prop={timeout:null},this.create()}function h(t){o.call(this,t),this.id=void 0,this.constructor.id&&(this.id=this.constructor.id),this.enabled=!0}function m(t){h.call(this,t),this.create()}function g(t,e){h.call(this,t),this.config=e,this.config.id&&(this.id=this.config.id),this.create()}function v(t){h.call(this,t),this.create()}function y(t){h.call(this,t),this.create()}function b(t){h.call(this,t),this.create()}function w(t){h.call(this,t),this.create()}function _(t){h.call(this,t),this.zoom_range=null,this.zoom_value=null,this.prop={mousedown:!1,buttondown:!1,longPressInterval:null,longPressTimeout:null},this.create()}function x(t){this.message=t,"captureStackTrace"in Error?Error.captureStackTrace(this,x):this.stack=(new Error).stack}function S(t,e){if(!t.id)throw new x("missing marker id");if(t.image&&(!t.width||!t.height))throw new x("missing marker width/height");if((t.image||t.html)&&!(t.hasOwnProperty("x")&&t.hasOwnProperty("y")||t.hasOwnProperty("latitude")&&t.hasOwnProperty("longitude")))throw new x("missing marker position, latitude/longitude or x/y");this.psv=e,this.visible=!0,this._dynamicSize=!1;var i,n=t.id,o=S.getType(t,!1);Object.defineProperties(this,{id:{configurable:!1,enumerable:!0,get:function(){return n},set:function(t){}},type:{configurable:!1,enumerable:!0,get:function(){return o},set:function(t){}},$el:{configurable:!1,enumerable:!0,get:function(){return i},set:function(t){}},_def:{configurable:!1,enumerable:!0,get:function(){return this[o]},set:function(t){this[o]=t}}}),(i=this.isNormal()?document.createElement("div"):this.isPolygon()?document.createElementNS(T.svgNS,"polygon"):this.isPolyline()?document.createElementNS(T.svgNS,"polyline"):document.createElementNS(T.svgNS,this.type)).id="psv-marker-"+this.id,(i.psvMarker=this).update(t)}t.mixin(p),p.prototype._loadXMP=function(t){if(!this.config.usexmpdata)return d.resolved(null);var r=d(),s=new XMLHttpRequest,a=this,l=0;return s.onreadystatechange=function(){if(4===s.readyState){if(200!==s.status&&201!==s.status&&202!==s.status&&0!==s.status)throw new x(a.container.textContent="Cannot load image");a.loader.setProgress(100);var t=s.responseText,e=t.indexOf("<x:xmpmeta"),i=t.indexOf("</x:xmpmeta>"),n=t.substring(e,i);if(-1===e||-1===i||-1===n.indexOf("GPano:"))r.resolve(null);else{var o={full_width:parseInt(T.getXMPValue(n,"FullPanoWidthPixels")),full_height:parseInt(T.getXMPValue(n,"FullPanoHeightPixels")),cropped_width:parseInt(T.getXMPValue(n,"CroppedAreaImageWidthPixels")),cropped_height:parseInt(T.getXMPValue(n,"CroppedAreaImageHeightPixels")),cropped_x:parseInt(T.getXMPValue(n,"CroppedAreaLeftPixels")),cropped_y:parseInt(T.getXMPValue(n,"CroppedAreaTopPixels"))};o.full_width&&o.full_height&&o.cropped_width&&o.cropped_height?r.resolve(o):(console.warn("PhotoSphereViewer: invalid XMP data"),r.resolve(null))}}else 3===s.readyState&&a.loader.setProgress(l+=10)},s.onprogress=function(t){if(t.lengthComputable){var e=parseInt(t.loaded/t.total*100);l<e&&(l=e,a.loader.setProgress(l))}},s.onerror=function(){throw new x(a.container.textContent="Cannot load image")},s.open("GET",t,!0),s.send(null),r.promise},p.prototype._loadTexture=function(i){var n=[];if(Array.isArray(i)){if(6!==i.length)throw new x("Must provide exactly 6 image paths when using cubemap.");for(var t=0;t<6;t++)n[t]=i[p.CUBE_MAP[t]];i=n}else if("object"==typeof i){if(!p.CUBE_HASHMAP.every(function(t){return!!i[t]}))throw new x("Must provide exactly left, front, right, back, top, bottom when using cubemap.");p.CUBE_HASHMAP.forEach(function(t,e){n[e]=i[t]}),i=n}if(Array.isArray(i)){if(!1===this.prop.isCubemap)throw new x("The viewer was initialized with an equirectangular panorama, cannot switch to cubemap.");return this.config.fisheye&&console.warn("PhotoSphereViewer: fisheye effect with cubemap texture can generate distorsions."),this.config.cache_texture===p.DEFAULTS.cache_texture&&(this.config.cache_texture*=6),this.prop.isCubemap=!0,this._loadCubemapTexture(i)}if(!0===this.prop.isCubemap)throw new x("The viewer was initialized with an cubemap, cannot switch to equirectangular panorama.");return this.prop.isCubemap=!1,this._loadEquirectangularTexture(i)},p.prototype._loadEquirectangularTexture=function(l){if(this.config.cache_texture){var t=this.getPanoramaCache(l);if(t)return this.prop.pano_data=t.pano_data,d.resolved(t.image)}return this._loadXMP(l).then(function(r){var s=d(),t=new u.ImageLoader,a=r?100:0;return t.setCrossOrigin("anonymous"),t.load(l,function(t){a=100,this.loader.setProgress(a),this.trigger("panorama-load-progress",l,a),!r&&this.config.pano_data&&(r=T.clone(this.config.pano_data)),r||(r={full_width:t.width,full_height:t.height,cropped_width:t.width,cropped_height:t.height,cropped_x:0,cropped_y:0}),this.prop.pano_data=r;var e,i=Math.min(r.full_width,p.SYSTEM.maxTextureWidth)/r.full_width;if(1!==i||r.cropped_width!=r.full_width||r.cropped_height!=r.full_height){var n=T.clone(r);n.full_width*=i,n.full_height*=i,n.cropped_width*=i,n.cropped_height*=i,n.cropped_x*=i,n.cropped_y*=i,t.width=n.cropped_width,t.height=n.cropped_height;var o=document.createElement("canvas");o.width=n.full_width,o.height=n.full_height,o.getContext("2d").drawImage(t,n.cropped_x,n.cropped_y,n.cropped_width,n.cropped_height),e=new u.Texture(o)}else e=new u.Texture(t);e.needsUpdate=!0,e.minFilter=u.LinearFilter,e.generateMipmaps=!1,this.config.cache_texture&&this._putPanoramaCache({panorama:l,image:e,pano_data:r}),s.resolve(e)}.bind(this),function(t){if(t.lengthComputable){var e=parseInt(t.loaded/t.total*100);a<e&&(a=e,this.loader.setProgress(a),this.trigger("panorama-load-progress",l,a))}}.bind(this),function(t){throw this.container.textContent="Cannot load image",s.reject(t),new x("Cannot load image")}.bind(this)),s.promise}.bind(this))},p.prototype._loadCubemapTexture=function(o){var r=d(),t=new u.ImageLoader,s=[0,0,0,0,0,0],a=[],l=0;t.setCrossOrigin("anonymous");for(var e=function(t,e){l++,s[t]=100,this.loader.setProgress(T.sum(s)/6),this.trigger("panorama-load-progress",o[t],s[t]);var i=Math.min(e.width,p.SYSTEM.maxTextureWidth/2)/e.width;if(1!==i){var n=document.createElement("canvas");n.width=e.width*i,n.height=e.height*i,n.getContext("2d").drawImage(e,0,0,n.width,n.height),a[t]=new u.Texture(n)}else a[t]=new u.Texture(e);this.config.cache_texture&&this._putPanoramaCache({panorama:o[t],image:a[t]}),6===l&&(a.forEach(function(t){t.needsUpdate=!0,t.minFilter=u.LinearFilter,t.generateMipmaps=!1}),r.resolve(a))},i=function(t,e){if(e.lengthComputable){var i=parseInt(e.loaded/e.total*100);i>s[t]&&(s[t]=i,this.loader.setProgress(T.sum(s)/6),this.trigger("panorama-load-progress",o[t],s[t]))}},n=function(t,e){throw this.container.textContent="Cannot load image",r.reject(e),new x("Cannot load image "+t)},c=0;c<6;c++){if(this.config.cache_texture){var h=this.getPanoramaCache(o[c]);if(h){l++,s[c]=100,a[c]=h.image;continue}}t.load(o[c],e.bind(this,c),i.bind(this,c),n.bind(this,c))}return 6===l&&r.resolve(a),r.promise},p.prototype._setTexture=function(t){if(this.scene||this._createScene(),this.prop.isCubemap)for(var e=0;e<6;e++)this.mesh.material[e].map&&this.mesh.material[e].map.dispose(),this.mesh.material[e].map=t[e];else this.mesh.material.map&&this.mesh.material.map.dispose(),this.mesh.material.map=t;this.trigger("panorama-loaded"),this.render()},p.prototype._createScene=function(){this.raycaster=new u.Raycaster,this.renderer=p.SYSTEM.isWebGLSupported&&this.config.webgl?new u.WebGLRenderer:new u.CanvasRenderer,this.renderer.setSize(this.prop.size.width,this.prop.size.height),this.renderer.setPixelRatio(p.SYSTEM.pixelRatio);var t=p.SPHERE_RADIUS;this.prop.isCubemap&&(t*=Math.sqrt(3)),this.config.fisheye&&(t+=p.SPHERE_RADIUS),this.camera=new u.PerspectiveCamera(this.config.default_fov,this.prop.size.width/this.prop.size.height,1,t),this.camera.position.set(0,0,0),this.config.gyroscope&&T.checkTHREE("DeviceOrientationControls")&&(this.doControls=new u.DeviceOrientationControls(this.camera)),this.scene=new u.Scene,this.scene.add(this.camera),this.prop.isCubemap?this._createCubemap():this._createSphere(),this.canvas_container=document.createElement("div"),this.canvas_container.className="psv-canvas-container",this.renderer.domElement.className="psv-canvas",this.container.appendChild(this.canvas_container),this.canvas_container.appendChild(this.renderer.domElement)},p.prototype._createSphere=function(){var t=new u.SphereGeometry(p.SPHERE_RADIUS,p.SPHERE_VERTICES,p.SPHERE_VERTICES,-T.HalfPI),e=new u.MeshBasicMaterial({side:u.DoubleSide,overdraw:p.SYSTEM.isWebGLSupported&&this.config.webgl?0:1});this.mesh=new u.Mesh(t,e),this.mesh.scale.x=-1,this.mesh.rotation.x=this.config.sphere_correction.tilt,this.mesh.rotation.y=this.config.sphere_correction.pan,this.mesh.rotation.z=this.config.sphere_correction.roll,this.scene.add(this.mesh)},p.prototype._createCubemap=function(){for(var t=new u.BoxGeometry(2*p.SPHERE_RADIUS,2*p.SPHERE_RADIUS,2*p.SPHERE_RADIUS,p.CUBE_VERTICES,p.CUBE_VERTICES,p.CUBE_VERTICES),e=[],i=0;i<6;i++)e.push(new u.MeshBasicMaterial({side:u.BackSide,overdraw:p.SYSTEM.isWebGLSupported&&this.config.webgl?0:1}));this.mesh=new u.Mesh(t,e),this.mesh.position.x-=p.SPHERE_RADIUS,this.mesh.position.y-=p.SPHERE_RADIUS,this.mesh.position.z-=p.SPHERE_RADIUS,this.mesh.applyMatrix((new u.Matrix4).makeScale(1,1,-1)),this.scene.add(this.mesh)},p.prototype._transition=function(t,e){if(this.prop.isCubemap)throw new x("Transition is not available with cubemap.");var i=this,n=new u.SphereGeometry(.9*p.SPHERE_RADIUS,p.SPHERE_VERTICES,p.SPHERE_VERTICES,-T.HalfPI),o=new u.MeshBasicMaterial({side:u.DoubleSide,overdraw:p.SYSTEM.isWebGLSupported&&this.config.webgl?0:1,map:t,transparent:!0,opacity:0}),r=new u.Mesh(n,o);if(r.scale.x=-1,e){r.rotateY(e.longitude-this.prop.longitude);var s=new u.Vector3(0,1,0).cross(this.camera.getWorldDirection()).normalize(),a=(new u.Quaternion).setFromAxisAngle(s,e.latitude-this.prop.latitude);r.quaternion.multiplyQuaternions(a,r.quaternion)}return this.scene.add(r),this.render(),T.animation({properties:{opacity:{start:0,end:1}},duration:i.config.transition.duration,easing:"outCubic",onTick:function(t){o.opacity=t.opacity,i.render()}}).then(function(){i.mesh.material.map.dispose(),i.mesh.material.map=t,i.scene.remove(r),r.geometry.dispose(),r.geometry=null,r.material.dispose(),r.material=null,e?((i.config.latitude_range||i.config.longitude_range)&&(i.config.longitude_range=i.config.latitude_range=null,console.warn("PhotoSphereViewer: trying to perform transition with longitude_range and/or latitude_range, ranges cleared.")),i.rotate(e)):i.render()})},p.prototype._reverseAutorotate=function(){var e=this,t=-this.config.anim_speed,i=this.config.longitude_range;this.config.longitude_range=null,T.animation({properties:{speed:{start:this.config.anim_speed,end:0}},duration:300,easing:"inSine",onTick:function(t){e.config.anim_speed=t.speed}}).then(function(){return T.animation({properties:{speed:{start:0,end:t}},duration:300,easing:"outSine",onTick:function(t){e.config.anim_speed=t.speed}})}).then(function(){e.config.longitude_range=i,e.config.anim_speed=t})},p.prototype._putPanoramaCache=function(t){if(!this.config.cache_texture)throw new x("Cannot add panorama to cache, cache_texture is disabled");var e=this.getPanoramaCache(t.panorama);e?(e.image=t.image,e.pano_data=t.pano_data):(this.prop.cache=this.prop.cache.slice(0,this.config.cache_texture-1),this.prop.cache.unshift(t)),this.trigger("panorama-cached",t.panorama)},p.prototype._stopAll=function(){this.stopAutorotate(),this.stopAnimation(),this.stopGyroscopeControl()},p.MOVE_THRESHOLD=4,p.ANGLE_THRESHOLD=.003,p.DBLCLICK_DELAY=300,p.INERTIA_WINDOW=300,p.SPHERE_RADIUS=100,p.SPHERE_VERTICES=64,p.CUBE_VERTICES=8,p.CUBE_MAP=[0,2,4,5,3,1],p.CUBE_HASHMAP=["left","right","top","bottom","back","front"],p.KEYMAP={33:"PageUp",34:"PageDown",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",107:"+",109:"-"},p.SYSTEM={loaded:!1,pixelRatio:1,isWebGLSupported:!1,isCanvasSupported:!1,deviceOrientationSupported:null,maxTextureWidth:0,mouseWheelEvent:null,fullscreenEvent:null},p.ICONS={},p.DEFAULTS={panorama:null,container:null,caption:null,usexmpdata:!0,pano_data:null,webgl:!0,min_fov:30,max_fov:90,default_fov:null,default_long:0,default_lat:0,sphere_correction:{pan:0,tilt:0,roll:0},longitude_range:null,latitude_range:null,move_speed:1,time_anim:2e3,anim_speed:"2rpm",anim_lat:null,fisheye:!1,navbar:["autorotate","zoom","download","markers","caption","gyroscope","fullscreen"],tooltip:{offset:5,arrow_size:7,delay:100},lang:{autorotate:"Automatic rotation",zoom:"Zoom",zoomOut:"Zoom out",zoomIn:"Zoom in",download:"Download",fullscreen:"Fullscreen",markers:"Markers",gyroscope:"Gyroscope"},mousewheel:!0,mousewheel_factor:1,mousemove:!0,keyboard:!0,gyroscope:!1,move_inertia:!0,click_event_on_marker:!1,transition:{duration:1500,loader:!0},loading_img:null,loading_txt:"Loading...",size:null,cache_texture:0,templates:{},markers:[]},p.TEMPLATES={markersList:'<div class="psv-markers-list-container">   <h1 class="psv-markers-list-title">{{= it.config.lang.markers }}</h1>   <ul class="psv-markers-list">   {{~ it.markers: marker }}     <li data-psv-marker="{{= marker.id }}" class="psv-markers-list-item {{? marker.className }}{{= marker.className }}{{?}}">       {{? marker.image }}<img class="psv-markers-list-image" src="{{= marker.image }}"/>{{?}}       <p class="psv-markers-list-name">{{? marker.tooltip }}{{= marker.tooltip.content }}{{?? marker.html }}{{= marker.html }}{{??}}{{= marker.id }}{{?}}</p>     </li>   {{~}}   </ul> </div>'},p.prototype._bindEvents=function(){window.addEventListener("resize",this),this.config.mousemove&&(this.hud.container.style.cursor="move",this.hud.container.addEventListener("mousedown",this),this.hud.container.addEventListener("touchstart",this),window.addEventListener("mouseup",this),window.addEventListener("touchend",this),this.hud.container.addEventListener("mousemove",this),this.hud.container.addEventListener("touchmove",this)),p.SYSTEM.fullscreenEvent&&document.addEventListener(p.SYSTEM.fullscreenEvent,this),this.config.mousewheel&&this.hud.container.addEventListener(p.SYSTEM.mouseWheelEvent,this),this.on("_side-reached",function(t){this.isAutorotateEnabled()&&("left"!==t&&"right"!==t||this._reverseAutorotate())})},p.prototype.handleEvent=function(t){switch(t.type){case"resize":T.throttle(this._onResize(),50);break;case"keydown":this._onKeyDown(t);break;case"mousedown":this._onMouseDown(t);break;case"touchstart":this._onTouchStart(t);break;case"mouseup":this._onMouseUp(t);break;case"touchend":this._onTouchEnd(t);break;case"mousemove":this._onMouseMove(t);break;case"touchmove":this._onTouchMove(t);break;case p.SYSTEM.fullscreenEvent:this._fullscreenToggled();break;case p.SYSTEM.mouseWheelEvent:this._onMouseWheel(t)}},p.prototype._onResize=function(){this.container.clientWidth==this.prop.size.width&&this.container.clientHeight==this.prop.size.height||(this.prop.size.width=parseInt(this.container.clientWidth),this.prop.size.height=parseInt(this.container.clientHeight),this.prop.aspect=this.prop.size.width/this.prop.size.height,this.renderer&&(this.renderer.setSize(this.prop.size.width,this.prop.size.height),this.composer&&this.composer.reset(new u.WebGLRenderTarget(this.prop.size.width,this.prop.size.height)),this.render()),this.trigger("size-updated",this.getSize()))},p.prototype._onKeyDown=function(t){var e=0,i=0,n=0;switch(t.key||p.KEYMAP[t.keyCode||t.which]){case"ArrowUp":i=.01;break;case"ArrowDown":i=-.01;break;case"ArrowRight":e=.01;break;case"ArrowLeft":e=-.01;break;case"PageUp":case"+":n=1;break;case"PageDown":case"-":n=-1}0!==n?this.zoom(this.prop.zoom_lvl+n):0===i&&0===e||this.rotate({longitude:this.prop.longitude+e*this.prop.move_speed*this.prop.hFov,latitude:this.prop.latitude+i*this.prop.move_speed*this.prop.vFov})},p.prototype._onMouseDown=function(t){this._startMove(t)},p.prototype._onMouseUp=function(t){this._stopMove(t)},p.prototype._onMouseMove=function(t){0!==t.buttons&&(t.preventDefault(),this._move(t))},p.prototype._onTouchStart=function(t){1===t.touches.length?this._startMove(t.touches[0]):2===t.touches.length&&this._startZoom(t)},p.prototype._onTouchEnd=function(t){this._stopMove(t.changedTouches[0])},p.prototype._onTouchMove=function(t){1===t.touches.length?(t.preventDefault(),this._move(t.touches[0])):2===t.touches.length&&(t.preventDefault(),this._zoom(t))},p.prototype._startMove=function(t){this.isGyroscopeEnabled()||(this._stopAll(),this.prop.mouse_x=this.prop.start_mouse_x=parseInt(t.clientX),this.prop.mouse_y=this.prop.start_mouse_y=parseInt(t.clientY),this.prop.moving=!0,this.prop.zooming=!1,this.prop.mouse_history.length=0,this._logMouseMove(t))},p.prototype._startZoom=function(t){var e=[{x:parseInt(t.touches[0].clientX),y:parseInt(t.touches[0].clientY)},{x:parseInt(t.touches[1].clientX),y:parseInt(t.touches[1].clientY)}];this.prop.pinch_dist=Math.sqrt(Math.pow(e[0].x-e[1].x,2)+Math.pow(e[0].y-e[1].y,2)),this.prop.moving=!1,this.prop.zooming=!0},p.prototype._stopMove=function(t){T.getClosest(t.target,".psv-hud")&&(this.isGyroscopeEnabled()?this._click(t):(this.prop.moving&&(Math.abs(t.clientX-this.prop.start_mouse_x)<p.MOVE_THRESHOLD&&Math.abs(t.clientY-this.prop.start_mouse_y)<p.MOVE_THRESHOLD?(this._click(t),this.prop.moving=!1):this.config.move_inertia?(this._logMouseMove(t),this._stopMoveInertia(t)):this.prop.moving=!1,this.prop.mouse_history.length=0),this.prop.zooming=!1))},p.prototype._stopMoveInertia=function(t){var e=this,i=t.clientX-this.prop.mouse_history[0][1],n=t.clientY-this.prop.mouse_history[0][2],o=Math.sqrt(i*i+n*n);this.prop.animation_promise=T.animation({properties:{clientX:{start:t.clientX,end:t.clientX+i},clientY:{start:t.clientY,end:t.clientY+n}},duration:o*p.INERTIA_WINDOW/100,easing:"outCirc",onTick:function(t){e._move(t,!1)}}).ensure(function(){e.prop.moving=!1})},p.prototype._click=function(t){var e=this.container.getBoundingClientRect(),i={target:t.target,client_x:t.clientX,client_y:t.clientY,viewer_x:parseInt(t.clientX-e.left),viewer_y:parseInt(t.clientY-e.top)},n=this.viewerCoordsToVector3({x:i.viewer_x,y:i.viewer_y});if(n){var o=this.vector3ToSphericalCoords(n);if(i.longitude=o.longitude,i.latitude=o.latitude,!this.prop.isCubemap){var r=this.sphericalCoordsToTextureCoords({longitude:i.longitude,latitude:i.latitude});i.texture_x=r.x,i.texture_y=r.y}this.prop.dblclick_timeout?(Math.abs(this.prop.dblclick_data.client_x-i.client_x)<p.MOVE_THRESHOLD&&Math.abs(this.prop.dblclick_data.client_y-i.client_y)<p.MOVE_THRESHOLD&&this.trigger("dblclick",this.prop.dblclick_data),clearTimeout(this.prop.dblclick_timeout),this.prop.dblclick_timeout=null,this.prop.dblclick_data=null):(this.trigger("click",i),this.prop.dblclick_data=T.clone(i),this.prop.dblclick_timeout=setTimeout(function(){this.prop.dblclick_timeout=null,this.prop.dblclick_data=null}.bind(this),p.DBLCLICK_DELAY))}},p.prototype._move=function(t,e){if(this.prop.moving){var i=parseInt(t.clientX),n=parseInt(t.clientY);this.rotate({longitude:this.prop.longitude-(i-this.prop.mouse_x)/this.prop.size.width*this.prop.move_speed*this.prop.hFov,latitude:this.prop.latitude+(n-this.prop.mouse_y)/this.prop.size.height*this.prop.move_speed*this.prop.vFov}),this.prop.mouse_x=i,this.prop.mouse_y=n,!1!==e&&this._logMouseMove(t)}},p.prototype._zoom=function(t){if(this.prop.zooming){var e=[{x:parseInt(t.touches[0].clientX),y:parseInt(t.touches[0].clientY)},{x:parseInt(t.touches[1].clientX),y:parseInt(t.touches[1].clientY)}],i=Math.sqrt(Math.pow(e[0].x-e[1].x,2)+Math.pow(e[0].y-e[1].y,2)),n=80*(i-this.prop.pinch_dist)/this.prop.size.width;this.zoom(this.prop.zoom_lvl+n),this.prop.pinch_dist=i}},p.prototype._onMouseWheel=function(t){t.preventDefault(),t.stopPropagation();var e=5*T.normalizeWheel(t).spinY;0!==e&&this.zoom(this.prop.zoom_lvl-e*this.config.mousewheel_factor)},p.prototype._fullscreenToggled=function(){var t=this.isFullscreenEnabled();this.config.keyboard&&(t?this.startKeyboardControl():this.stopKeyboardControl()),this.trigger("fullscreen-updated",t)},p.prototype._logMouseMove=function(t){var e=Date.now();this.prop.mouse_history.push([e,t.clientX,t.clientY]);for(var i=null,n=0;n<this.prop.mouse_history.length;)this.prop.mouse_history[0][n]<e-p.INERTIA_WINDOW?this.prop.mouse_history.splice(n,1):(i&&this.prop.mouse_history[0][n]-i>p.INERTIA_WINDOW/10?(this.prop.mouse_history.splice(0,n),n=0):n++,i=this.prop.mouse_history[0][n])},p.prototype.load=function(){if(!this.config.panorama)throw new x("No value given for panorama.");return this.setPanorama(this.config.panorama,!1)},p.prototype.getPosition=function(){return{longitude:this.prop.longitude,latitude:this.prop.latitude}},p.prototype.getZoomLevel=function(){return this.prop.zoom_lvl},p.prototype.getSize=function(){return{width:this.prop.size.width,height:this.prop.size.height}},p.prototype.isAutorotateEnabled=function(){return!!this.prop.autorotate_reqid},p.prototype.isGyroscopeEnabled=function(){return!!this.prop.orientation_reqid},p.prototype.isFullscreenEnabled=function(){return T.isFullscreenEnabled(this.container)},p.prototype.render=function(t){!1!==t&&(this.prop.direction=this.sphericalCoordsToVector3(this.prop),this.camera.position.set(0,0,0),this.camera.lookAt(this.prop.direction)),this.config.fisheye&&this.camera.position.copy(this.prop.direction).multiplyScalar(this.config.fisheye/2).negate(),this.camera.aspect=this.prop.aspect,this.camera.fov=this.prop.vFov,this.camera.updateProjectionMatrix(),this.composer?this.composer.render():this.renderer.render(this.scene,this.camera),this.trigger("render")},p.prototype.destroy=function(){this._stopAll(),this.stopKeyboardControl(),this.isFullscreenEnabled()&&T.exitFullscreen(),window.removeEventListener("resize",this),this.config.mousemove&&(this.hud.container.removeEventListener("mousedown",this),this.hud.container.removeEventListener("touchstart",this),window.removeEventListener("mouseup",this),window.removeEventListener("touchend",this),this.hud.container.removeEventListener("mousemove",this),this.hud.container.removeEventListener("touchmove",this)),p.SYSTEM.fullscreenEvent&&document.removeEventListener(p.SYSTEM.fullscreenEvent,this),this.config.mousewheel&&this.hud.container.removeEventListener(p.SYSTEM.mouseWheelEvent,this),this.tooltip&&this.tooltip.destroy(),this.hud&&this.hud.destroy(),this.loader&&this.loader.destroy(),this.navbar&&this.navbar.destroy(),this.panel&&this.panel.destroy(),this.doControls&&this.doControls.disconnect(),this.scene&&T.cleanTHREEScene(this.scene),this.canvas_container&&this.container.removeChild(this.canvas_container),this.parent.removeChild(this.container),delete this.parent.photoSphereViewer,delete this.parent,delete this.container,delete this.loader,delete this.navbar,delete this.hud,delete this.panel,delete this.tooltip,delete this.canvas_container,delete this.renderer,delete this.composer,delete this.scene,delete this.camera,delete this.mesh,delete this.doControls,delete this.raycaster,delete this.passes,delete this.config,this.prop.cache.length=0},p.prototype.setPanorama=function(t,e,i){if(null!==this.prop.loading_promise)throw new x("Loading already in progress");if("boolean"==typeof e&&(i=e,e=void 0),i&&this.prop.isCubemap)throw new x("Transition is not available with cubemap.");e&&(this.cleanPosition(e),this._stopAll()),this.config.panorama=t;var n=this;return i&&this.config.transition&&this.scene?(this.config.transition.loader&&this.loader.show(),this.prop.loading_promise=this._loadTexture(this.config.panorama).then(function(t){return n.loader.hide(),n._transition(t,e)}).ensure(function(){n.loader.hide(),n.prop.loading_promise=null}).rethrow()):(this.loader.show(),this.canvas_container&&(this.canvas_container.style.opacity=0),this.prop.loading_promise=this._loadTexture(this.config.panorama).then(function(t){n._setTexture(t),e&&n.rotate(e)}).ensure(function(){n.loader.hide(),n.canvas_container.style.opacity=1,n.prop.loading_promise=null}).rethrow()),this.prop.loading_promise},p.prototype.startAutorotate=function(){this._stopAll();var i=this,n=null,o=null;!function t(e){e&&(o=null===n?0:e-n,n=e,i.rotate({longitude:i.prop.longitude+i.config.anim_speed*o/1e3,latitude:i.prop.latitude-(i.prop.latitude-i.config.anim_lat)/200})),i.prop.autorotate_reqid=window.requestAnimationFrame(t)}(null),this.trigger("autorotate",!0)},p.prototype.stopAutorotate=function(){this.prop.start_timeout&&(window.clearTimeout(this.prop.start_timeout),this.prop.start_timeout=null),this.prop.autorotate_reqid&&(window.cancelAnimationFrame(this.prop.autorotate_reqid),this.prop.autorotate_reqid=null,this.trigger("autorotate",!1))},p.prototype.toggleAutorotate=function(){this.isAutorotateEnabled()?this.stopAutorotate():this.startAutorotate()},p.prototype.startGyroscopeControl=function(){if(this.doControls&&this.doControls.enabled&&this.doControls.deviceOrientation){this._stopAll();var i=this;!function t(){i.doControls.update(),i.prop.direction=i.camera.getWorldDirection();var e=i.vector3ToSphericalCoords(i.prop.direction);i.prop.longitude=e.longitude,i.prop.latitude=e.latitude,i.render(!1),i.prop.orientation_reqid=window.requestAnimationFrame(t)}(),this.trigger("gyroscope-updated",!0)}else console.warn("PhotoSphereViewer: gyroscope disabled")},p.prototype.stopGyroscopeControl=function(){this.prop.orientation_reqid&&(window.cancelAnimationFrame(this.prop.orientation_reqid),this.prop.orientation_reqid=null,this.trigger("gyroscope-updated",!1),this.render())},p.prototype.toggleGyroscopeControl=function(){this.isGyroscopeEnabled()?this.stopGyroscopeControl():this.startGyroscopeControl()},p.prototype.rotate=function(t,e){this.cleanPosition(t),this.applyRanges(t).forEach(this.trigger.bind(this,"_side-reached")),this.prop.longitude=t.longitude,this.prop.latitude=t.latitude,!1!==e&&this.renderer&&(this.render(),this.trigger("position-updated",this.getPosition()))},p.prototype.animate=function(t,e){if(this._stopAll(),this.cleanPosition(t),!e||Math.abs(t.longitude-this.prop.longitude)<p.ANGLE_THRESHOLD&&Math.abs(t.latitude-this.prop.latitude)<p.ANGLE_THRESHOLD)return this.rotate(t),d.resolved();this.applyRanges(t).forEach(this.trigger.bind(this,"_side-reached")),e||"number"==typeof e||(e=e?T.parseSpeed(e):this.config.anim_speed,e=Math.acos(Math.cos(this.prop.latitude)*Math.cos(t.latitude)*Math.cos(this.prop.longitude-t.longitude)+Math.sin(this.prop.latitude)*Math.sin(t.latitude))/e*1e3);var i=T.getShortestArc(this.prop.longitude,t.longitude);return this.prop.animation_promise=T.animation({properties:{longitude:{start:this.prop.longitude,end:this.prop.longitude+i},latitude:{start:this.prop.latitude,end:t.latitude}},duration:e,easing:"inOutSine",onTick:this.rotate.bind(this)}),this.prop.animation_promise},p.prototype.stopAnimation=function(){this.prop.animation_promise&&(this.prop.animation_promise.cancel(),this.prop.animation_promise=null)},p.prototype.zoom=function(t,e){this.prop.zoom_lvl=T.bound(Math.round(t),0,100),this.prop.vFov=this.config.max_fov+this.prop.zoom_lvl/100*(this.config.min_fov-this.config.max_fov),this.prop.hFov=u.Math.radToDeg(2*Math.atan(Math.tan(u.Math.degToRad(this.prop.vFov)/2)*this.prop.aspect)),!1!==e&&this.renderer&&(this.render(),this.trigger("zoom-updated",this.getZoomLevel()))},p.prototype.zoomIn=function(){this.prop.zoom_lvl<100&&this.zoom(this.prop.zoom_lvl+1)},p.prototype.zoomOut=function(){0<this.prop.zoom_lvl&&this.zoom(this.prop.zoom_lvl-1)},p.prototype.resize=function(t){t.width&&(this.container.style.width=t.width),t.height&&(this.container.style.height=t.height),this._onResize()},p.prototype.toggleFullscreen=function(){this.isFullscreenEnabled()?T.exitFullscreen():T.requestFullscreen(this.container)},p.prototype.startKeyboardControl=function(){window.addEventListener("keydown",this)},p.prototype.stopKeyboardControl=function(){window.removeEventListener("keydown",this)},p.prototype.preloadPanorama=function(t){if(!this.config.cache_texture)throw new x("Cannot preload panorama, cache_texture is disabled");return this._loadTexture(t)},p.prototype.clearPanoramaCache=function(t){if(!this.config.cache_texture)throw new x("Cannot clear cache, cache_texture is disabled");if(t){for(var e=0,i=this.prop.cache.length;e<i;e++)if(this.prop.cache[e].panorama===t){this.prop.cache.splice(e,1);break}}else this.prop.cache.length=0},p.prototype.getPanoramaCache=function(e){if(!this.config.cache_texture)throw new x("Cannot query cache, cache_texture is disabled");return this.prop.cache.filter(function(t){return t.panorama===e}).shift()},p._loadSystem=function(){var t=p.SYSTEM;t.loaded=!0,t.pixelRatio=window.devicePixelRatio||1,t.isWebGLSupported=T.isWebGLSupported(),t.isCanvasSupported=T.isCanvasSupported(),t.maxTextureWidth=t.isWebGLSupported?T.getMaxTextureWidth():4096,t.mouseWheelEvent=T.mouseWheelEvent(),t.fullscreenEvent=T.fullscreenEvent(),t.deviceOrientationSupported=d(),"DeviceOrientationEvent"in window?window.addEventListener("deviceorientation",p._deviceOrientationListener,!1):t.deviceOrientationSupported.reject()},p._deviceOrientationListener=function(t){null===t.alpha||isNaN(t.alpha)?p.SYSTEM.deviceOrientationSupported.reject():p.SYSTEM.deviceOrientationSupported.resolve(),window.removeEventListener("deviceorientation",p._deviceOrientationListener)},p.prototype._setViewerSize=function(e){["width","height"].forEach(function(t){e[t]&&(/^[0-9.]+$/.test(e[t])&&(e[t]+="px"),this.parent.style[t]=e[t])},this)},p.prototype.textureCoordsToSphericalCoords=function(t){if(this.prop.isCubemap)throw new x("Unable to use texture coords with cubemap.");var e=(t.x+this.prop.pano_data.cropped_x)/this.prop.pano_data.full_width*T.TwoPI,i=(t.y+this.prop.pano_data.cropped_y)/this.prop.pano_data.full_height*Math.PI;return{longitude:e>=Math.PI?e-Math.PI:e+Math.PI,latitude:T.HalfPI-i}},p.prototype.sphericalCoordsToTextureCoords=function(t){if(this.prop.isCubemap)throw new x("Unable to use texture coords with cubemap.");var e=t.longitude/T.TwoPI*this.prop.pano_data.full_width,i=t.latitude/Math.PI*this.prop.pano_data.full_height;return{x:parseInt(t.longitude<Math.PI?e+this.prop.pano_data.full_width/2:e-this.prop.pano_data.full_width/2)-this.prop.pano_data.cropped_x,y:parseInt(this.prop.pano_data.full_height/2-i)-this.prop.pano_data.cropped_y}},p.prototype.sphericalCoordsToVector3=function(t){return new u.Vector3(p.SPHERE_RADIUS*-Math.cos(t.latitude)*Math.sin(t.longitude),p.SPHERE_RADIUS*Math.sin(t.latitude),p.SPHERE_RADIUS*Math.cos(t.latitude)*Math.cos(t.longitude))},p.prototype.vector3ToSphericalCoords=function(t){var e=Math.acos(t.y/Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)),i=Math.atan2(t.x,t.z);return{longitude:i<0?-i:T.TwoPI-i,latitude:T.HalfPI-e}},p.prototype.viewerCoordsToVector3=function(t){var e=new u.Vector2(2*t.x/this.prop.size.width-1,-2*t.y/this.prop.size.height+1);this.raycaster.setFromCamera(e,this.camera);var i=this.raycaster.intersectObjects(this.scene.children);return 1===i.length?i[0].point:null},p.prototype.vector3ToViewerCoords=function(t){return(t=t.clone()).project(this.camera),{x:parseInt((t.x+1)/2*this.prop.size.width),y:parseInt((1-t.y)/2*this.prop.size.height)}},p.prototype.cleanPosition=function(t){t.hasOwnProperty("x")&&t.hasOwnProperty("y")&&T.deepmerge(t,this.textureCoordsToSphericalCoords(t)),t.longitude=T.parseAngle(t.longitude),t.latitude=T.parseAngle(t.latitude,!0)},p.prototype.applyRanges=function(t){var e,i,n=[];return this.config.longitude_range&&(e=T.clone(this.config.longitude_range),i=u.Math.degToRad(this.prop.hFov)/2,e[0]=T.parseAngle(e[0]+i),e[1]=T.parseAngle(e[1]-i),e[0]>e[1]?t.longitude>e[1]&&t.longitude<e[0]&&(t.longitude>e[0]/2+e[1]/2?(t.longitude=e[0],n.push("left")):(t.longitude=e[1],n.push("right"))):t.longitude<e[0]?(t.longitude=e[0],n.push("left")):t.longitude>e[1]&&(t.longitude=e[1],n.push("right"))),this.config.latitude_range&&(e=T.clone(this.config.latitude_range),i=u.Math.degToRad(this.prop.vFov)/2,e[0]=T.parseAngle(Math.min(e[0]+i,e[1]),!0),e[1]=T.parseAngle(Math.max(e[1]-i,e[0]),!0),t.latitude<e[0]?(t.latitude=e[0],n.push("bottom")):t.latitude>e[1]&&(t.latitude=e[1],n.push("top"))),n},o.className=null,o.publicMethods=[],o.prototype.create=function(){this.container=document.createElement("div"),this.constructor.className&&(this.container.className=this.constructor.className),this.parent.container.appendChild(this.container)},o.prototype.destroy=function(){this.parent.container.removeChild(this.container),this.constructor.publicMethods&&this.constructor.publicMethods.forEach(function(t){delete this.psv[t]},this),delete this.container,delete this.psv,delete this.parent},o.prototype.hide=function(){this.container.style.display="none"},o.prototype.show=function(){this.container.style.display=""},r.prototype=Object.create(o.prototype),(r.prototype.constructor=r).className="psv-hud",r.publicMethods=["addMarker","removeMarker","updateMarker","clearMarkers","getMarker","getCurrentMarker","gotoMarker","hideMarker","showMarker","toggleMarker","toggleMarkersList","showMarkersList","hideMarkersList"],r.prototype.create=function(){o.prototype.create.call(this),this.svgContainer=document.createElementNS(T.svgNS,"svg"),this.svgContainer.setAttribute("class","psv-hud-svg-container"),this.container.appendChild(this.svgContainer),this.container.addEventListener("mouseenter",this,!0),this.container.addEventListener("mouseleave",this,!0),this.container.addEventListener("mousemove",this,!0),this.psv.on("click",this),this.psv.on("dblclick",this),this.psv.on("render",this),this.psv.on("open-panel",this),this.psv.on("close-panel",this)},r.prototype.destroy=function(){this.clearMarkers(!1),this.container.removeEventListener("mouseenter",this),this.container.removeEventListener("mouseleave",this),this.container.removeEventListener("mousemove",this),this.psv.off("click",this),this.psv.off("dblclick",this),this.psv.off("render",this),this.psv.off("open-panel",this),this.psv.off("close-panel",this),delete this.svgContainer,o.prototype.destroy.call(this)},r.prototype.handleEvent=function(t){switch(t.type){case"mouseenter":this._onMouseEnter(t);break;case"mouseleave":this._onMouseLeave(t);break;case"mousemove":this._onMouseMove(t);break;case"click":this._onClick(t.args[0],t,!1);break;case"dblclick":this._onClick(t.args[0],t,!0);break;case"render":this.renderMarkers();break;case"open-panel":this._onPanelOpened();break;case"close-panel":this._onPanelClosed()}},r.prototype.addMarker=function(t,e){if(!t.id)throw new x("missing marker id");if(this.markers[t.id])throw new x('marker "'+t.id+'" already exists');var i=new S(t,this.psv);return i.isNormal()?this.container.appendChild(i.$el):this.svgContainer.appendChild(i.$el),this.markers[i.id]=i,!1!==e&&this.renderMarkers(),i},r.prototype.getMarker=function(t){var e="object"==typeof t?t.id:t;if(!this.markers[e])throw new x('cannot find marker "'+e+'"');return this.markers[e]},r.prototype.getCurrentMarker=function(){return this.currentMarker},r.prototype.updateMarker=function(t,e){var i=this.getMarker(t);return i.update(t),!1!==e&&this.renderMarkers(),i},r.prototype.removeMarker=function(t,e){(t=this.getMarker(t)).isNormal()?this.container.removeChild(t.$el):this.svgContainer.removeChild(t.$el),this.hoveringMarker==t&&this.psv.tooltip.hideTooltip(),t.destroy(),delete this.markers[t.id],!1!==e&&this.renderMarkers()},r.prototype.clearMarkers=function(t){Object.keys(this.markers).forEach(function(t){this.removeMarker(t,!1)},this),!1!==t&&this.renderMarkers()},r.prototype.gotoMarker=function(t,e){return t=this.getMarker(t),this.psv.animate(t,e).then(function(){this.psv.trigger("goto-marker-done",t)}.bind(this))},r.prototype.hideMarker=function(t){this.getMarker(t).visible=!1,this.renderMarkers()},r.prototype.showMarker=function(t){this.getMarker(t).visible=!0,this.renderMarkers()},r.prototype.toggleMarker=function(t){this.getMarker(t).visible^=!0,this.renderMarkers()},r.prototype.toggleMarkersList=function(){this.prop.panelOpened?this.hideMarkersList():this.showMarkersList()},r.prototype.showMarkersList=function(){var t=[];for(var e in this.markers)t.push(this.markers[e]);var i=this.psv.config.templates.markersList({markers:this.psv.change("render-markers-list",t),config:this.psv.config});this.prop.panelOpening=!0,this.psv.panel.showPanel(i,!0),this.psv.panel.container.querySelector(".psv-markers-list").addEventListener("click",this._onClickItem.bind(this))},r.prototype.hideMarkersList=function(){this.prop.panelOpened&&this.psv.panel.hidePanel()},r.prototype.renderMarkers=function(){var t=this.psv.isGyroscopeEnabled()?u.Math.radToDeg(this.psv.camera.rotation.z):0;for(var e in this.markers){var i=this.markers[e],n=i.visible;if(n&&i.isPoly()){var o=this._getPolyPositions(i);if(n=o.length>(i.isPolygon()?2:1)){i.position2D=this._getPolyDimensions(i,o);var r="";o.forEach(function(t){r+=t.x+","+t.y+" "}),i.$el.setAttributeNS(null,"points",r)}}else if(n){var s=this._getMarkerPosition(i);if(n=this._isMarkerVisible(i,s)){i.position2D=s;var a=i.getScale(this.psv.getZoomLevel());i.isSvg()?i.$el.setAttributeNS(null,"transform","translate("+s.x+", "+s.y+")"+(1!==a?" scale("+a+", "+a+")":"")+(!i.lockRotation&&t?" rotate("+t+")":"")):i.$el.style.transform="translate3D("+s.x+"px, "+s.y+"px, 0px)"+(1!==a?" scale("+a+", "+a+")":"")+(!i.lockRotation&&t?" rotateZ("+t+"deg)":"")}}T.toggleClass(i.$el,"psv-marker--visible",n)}},r.prototype._isMarkerVisible=function(t,e){return 0<t.position3D.dot(this.psv.prop.direction)&&0<=e.x+t.width&&e.x-t.width<=this.psv.prop.size.width&&0<=e.y+t.height&&e.y-t.height<=this.psv.prop.size.height},r.prototype._getMarkerPosition=function(t){if(t._dynamicSize){T.toggleClass(t.$el,"psv-marker--transparent",!0);var e=t.$el.style.transform;t.$el.style.transform=null;var i=t.$el.getBoundingClientRect();t.$el.style.transform=e,T.toggleClass(t.$el,"psv-marker--transparent",!1),t.width=i.right-i.left,t.height=i.bottom-i.top}var n=this.psv.vector3ToViewerCoords(t.position3D);return n.x-=t.width*t.anchor.left,n.y-=t.height*t.anchor.top,n},r.prototype._getPolyPositions=function(t){var n=t.positions3D.length,o=t.positions3D.map(function(t){return{vector:t,visible:0<t.dot(this.psv.prop.direction)}},this),r=[];return o.forEach(function(e,i){e.visible||[0===i?o[n-1]:o[i-1],i===n-1?o[0]:o[i+1]].forEach(function(t){t.visible&&r.push({visible:t,invisible:e,index:i})})}),r.reverse().forEach(function(t){o.splice(t.index,0,{vector:this._getPolyIntermediaryPoint(t.visible.vector,t.invisible.vector),visible:!0})},this),o.filter(function(t){return t.visible}).map(function(t){return this.psv.vector3ToViewerCoords(t.vector)},this)},r.prototype._getPolyIntermediaryPoint=function(t,e){var i=this.psv.prop.direction.clone().normalize(),n=(new u.Vector3).crossVectors(t,e).normalize(),o=(new u.Vector3).crossVectors(n,t).normalize(),r=(new u.Vector3).addVectors(t.clone().multiplyScalar(-i.dot(o)),o.clone().multiplyScalar(i.dot(t))).normalize(),s=(new u.Vector3).crossVectors(r,i);return r.applyAxisAngle(s,.01).multiplyScalar(p.SPHERE_RADIUS)},r.prototype._getPolyDimensions=function(t,e){var i=1/0,n=1/0,o=-1/0,r=-1/0;return e.forEach(function(t){i=Math.min(i,t.x),n=Math.min(n,t.y),o=Math.max(o,t.x),r=Math.max(r,t.y)}),t.width=o-i,t.height=r-n,{x:i,y:n}},r.prototype._onMouseEnter=function(t){var e;t.target&&(e=t.target.psvMarker)&&!e.isPoly()&&(this.hoveringMarker=e,this.psv.trigger("over-marker",e),e.tooltip&&this.psv.tooltip.showTooltip({content:e.tooltip.content,position:e.tooltip.position,left:e.position2D.x,top:e.position2D.y,box:{width:e.width,height:e.height}}))},r.prototype._onMouseLeave=function(t){var e;if(t.target&&(e=t.target.psvMarker)){if(e.isPoly()&&t.relatedTarget&&T.hasParent(t.relatedTarget,this.psv.tooltip.container))return;this.psv.trigger("leave-marker",e),this.hoveringMarker=null,this.psv.tooltip.hideTooltip()}},r.prototype._onMouseMove=function(t){var e;if(!this.psv.prop.moving)if(t.target&&(e=t.target.psvMarker)&&e.isPoly()||t.target&&T.hasParent(t.target,this.psv.tooltip.container)&&(e=this.hoveringMarker)){this.hoveringMarker||(this.psv.trigger("over-marker",e),this.hoveringMarker=e);var i=this.psv.container.getBoundingClientRect();e.tooltip&&this.psv.tooltip.showTooltip({content:e.tooltip.content,position:e.tooltip.position,top:t.clientY-i.top-this.psv.config.tooltip.arrow_size/2,left:t.clientX-i.left-this.psv.config.tooltip.arrow_size,box:{width:2*this.psv.config.tooltip.arrow_size,height:2*this.psv.config.tooltip.arrow_size}})}else this.hoveringMarker&&this.hoveringMarker.isPoly()&&(this.psv.trigger("leave-marker",e),this.hoveringMarker=null,this.psv.tooltip.hideTooltip())},r.prototype._onClick=function(t,e,i){var n;t.target&&(n=T.getClosest(t.target,".psv-marker"))&&n.psvMarker?(this.currentMarker=n.psvMarker,this.psv.trigger("select-marker",this.currentMarker,i),this.psv.config.click_event_on_marker?t.marker=n.psvMarker:e.stopPropagation()):this.currentMarker&&(this.psv.trigger("unselect-marker",this.currentMarker),this.currentMarker=null),n&&n.psvMarker&&n.psvMarker.content?this.psv.panel.showPanel(n.psvMarker.content):this.psv.panel.prop.opened&&(e.stopPropagation(),this.psv.panel.hidePanel())},r.prototype._onClickItem=function(t){var e;if(t.target&&(e=T.getClosest(t.target,"li"))&&e.dataset.psvMarker){var i=this.getMarker(e.dataset.psvMarker);this.psv.trigger("select-marker-list",i),this.gotoMarker(i,1e3),this.psv.panel.hidePanel()}},r.prototype._onPanelOpened=function(){this.prop.panelOpening?(this.prop.panelOpening=!1,this.prop.panelOpened=!0):this.prop.panelOpened=!1,this.prop.markersButton&&this.prop.markersButton.toggleActive(this.prop.panelOpened)},r.prototype._onPanelClosed=function(){this.prop.panelOpened=!1,this.prop.panelOpening=!1,this.prop.markersButton&&this.prop.markersButton.toggleActive(!1)},s.prototype=Object.create(o.prototype),(s.prototype.constructor=s).className="psv-loader-container",s.prototype.create=function(){var t;if(o.prototype.create.call(this),this.loader=document.createElement("div"),this.loader.className="psv-loader",this.container.appendChild(this.loader),this.canvas=document.createElement("canvas"),this.canvas.className="psv-loader-canvas",this.canvas.width=this.loader.clientWidth,this.canvas.height=this.loader.clientWidth,this.loader.appendChild(this.canvas),this.tickness=(this.loader.offsetWidth-this.loader.clientWidth)/2,this.psv.config.loading_img?((t=document.createElement("img")).className="psv-loader-image",t.src=this.psv.config.loading_img):this.psv.config.loading_txt&&((t=document.createElement("div")).className="psv-loader-text",t.innerHTML=this.psv.config.loading_txt),t){var e=Math.round(Math.sqrt(2*Math.pow(this.canvas.width/2-this.tickness/2,2)));t.style.maxWidth=e+"px",t.style.maxHeight=e+"px",this.loader.appendChild(t)}},s.prototype.destroy=function(){delete this.loader,delete this.canvas,o.prototype.destroy.call(this)},s.prototype.setProgress=function(t){var e=this.canvas.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height),e.lineWidth=this.tickness,e.strokeStyle=T.getStyle(this.loader,"color"),e.beginPath(),e.arc(this.canvas.width/2,this.canvas.height/2,this.canvas.width/2-this.tickness/2,-Math.PI/2,t/100*2*Math.PI-Math.PI/2),e.stroke()},a.prototype=Object.create(o.prototype),(a.prototype.constructor=a).className="psv-navbar psv-navbar--open",a.publicMethods=["showNavbar","hideNavbar","toggleNavbar","getNavbarButton"],a.prototype.create=function(){o.prototype.create.call(this),this.config.forEach(function(t){if("object"==typeof t)this.items.push(new g(this,t));else switch(t){case m.id:this.items.push(new m(this));break;case _.id:this.items.push(new _(this));break;case v.id:this.items.push(new v(this));break;case w.id:this.items.push(new w(this));break;case y.id:this.items.push(new y(this));break;case b.id:this.psv.config.gyroscope&&this.items.push(new b(this));break;case"caption":this.items.push(new i(this,this.psv.config.caption));break;case"spacer":t="spacer-5";default:var e=t.match(/^spacer\-([0-9]+)$/);if(null===e)throw new x("Unknown button "+t);this.items.push(new l(this,e[1]))}},this)},a.prototype.destroy=function(){this.items.forEach(function(t){t.destroy()}),delete this.items,delete this.config,o.prototype.destroy.call(this)},a.prototype.getNavbarButton=function(e,t){var i=null;return this.items.some(function(t){if(t.id===e)return i=t,!0}),i||t||console.warn('PhotoSphereViewer: button "'+e+'" not found in the navbar.'),i},a.prototype.showNavbar=function(){this.toggleNavbar(!0)},a.prototype.hideNavbar=function(){this.toggleNavbar(!1)},a.prototype.toggleNavbar=function(t){T.toggleClass(this.container,"psv-navbar--open",t)},i.prototype=Object.create(o.prototype),(i.prototype.constructor=i).className="psv-caption",i.publicMethods=["setCaption"],i.prototype.setCaption=function(t){this.container.innerHTML=t||""},l.prototype=Object.create(o.prototype),(l.prototype.constructor=l).className="psv-spacer",c.prototype=Object.create(o.prototype),(c.prototype.constructor=c).className="psv-panel",c.publicMethods=["showPanel","hidePanel"],c.prototype.create=function(){o.prototype.create.call(this),this.container.innerHTML='<div class="psv-panel-resizer"></div><div class="psv-panel-close-button"></div><div class="psv-panel-content"></div>',this.content=this.container.querySelector(".psv-panel-content"),this.container.querySelector(".psv-panel-close-button").addEventListener("click",this.hidePanel.bind(this)),this.psv.config.mousewheel&&this.container.addEventListener(p.SYSTEM.mouseWheelEvent,function(t){t.stopPropagation()});var t=this.container.querySelector(".psv-panel-resizer");t.addEventListener("mousedown",this),t.addEventListener("touchstart",this),this.psv.container.addEventListener("mouseup",this),this.psv.container.addEventListener("touchend",this),this.psv.container.addEventListener("mousemove",this),this.psv.container.addEventListener("touchmove",this)},c.prototype.destroy=function(){this.psv.container.removeEventListener("mousemove",this),this.psv.container.removeEventListener("touchmove",this),this.psv.container.removeEventListener("mouseup",this),this.psv.container.removeEventListener("touchend",this),delete this.prop,delete this.content,o.prototype.destroy.call(this)},c.prototype.handleEvent=function(t){switch(t.type){case"mousedown":this._onMouseDown(t);break;case"touchstart":this._onTouchStart(t);break;case"mousemove":this._onMouseMove(t);break;case"touchmove":this._onTouchMove(t);break;case"mouseup":case"touchend":this._onMouseUp(t)}},c.prototype.showPanel=function(t,e){this.content.innerHTML=t,this.content.scrollTop=0,this.container.classList.add("psv-panel--open"),T.toggleClass(this.content,"psv-panel-content--no-margin",!!e),this.prop.opened=!0,this.psv.trigger("open-panel")},c.prototype.hidePanel=function(){this.content.innerHTML=null,this.prop.opened=!1,this.container.classList.remove("psv-panel--open"),this.psv.trigger("close-panel")},c.prototype._onMouseDown=function(t){t.stopPropagation(),this._startResize(t)},c.prototype._onTouchStart=function(t){t.stopPropagation(),this._startResize(t.changedTouches[0])},c.prototype._onMouseUp=function(t){this.prop.mousedown&&(t.stopPropagation(),this.prop.mousedown=!1,this.content.classList.remove("psv-panel-content--no-interaction"))},c.prototype._onMouseMove=function(t){this.prop.mousedown&&(t.stopPropagation(),this._resize(t))},c.prototype._onTouchMove=function(t){this.prop.mousedown&&(t.stopPropagation(),this._resize(t.touches[0]))},c.prototype._startResize=function(t){this.prop.mouse_x=parseInt(t.clientX),this.prop.mouse_y=parseInt(t.clientY),this.prop.mousedown=!0,this.content.classList.add("psv-panel-content--no-interaction")},c.prototype._resize=function(t){var e=parseInt(t.clientX),i=parseInt(t.clientY);this.container.style.width=this.container.offsetWidth-(e-this.prop.mouse_x)+"px",this.prop.mouse_x=e,this.prop.mouse_y=i},f.prototype=Object.create(o.prototype),(f.prototype.constructor=f).className="psv-tooltip",f.publicMethods=["showTooltip","hideTooltip","isTooltipVisible"],f.leftMap={0:"left",.5:"center",1:"right"},f.topMap={0:"top",.5:"center",1:"bottom"},f.prototype.create=function(){o.prototype.create.call(this),this.container.innerHTML='<div class="psv-tooltip-arrow"></div><div class="psv-tooltip-content"></div>',this.container.style.top="-1000px",this.container.style.left="-1000px",this.content=this.container.querySelector(".psv-tooltip-content"),this.arrow=this.container.querySelector(".psv-tooltip-arrow"),this.psv.on("render",this)},f.prototype.destroy=function(){this.psv.off("render",this),delete this.config,delete this.prop,o.prototype.destroy.call(this)},f.prototype.handleEvent=function(t){switch(t.type){case"render":this.hideTooltip()}},f.prototype.isTooltipVisible=function(){return this.container.classList.contains("psv-tooltip--visible")},f.prototype.showTooltip=function(t){this.prop.timeout&&(window.clearTimeout(this.prop.timeout),this.prop.timeout=null);var e=this.isTooltipVisible(),i=this.container,n=this.content,o=this.arrow;if(t.position||(t.position=["top","center"]),t.box||(t.box={width:0,height:0}),"string"==typeof t.position){var r=T.parsePosition(t.position);if(!(r.left in f.leftMap&&r.top in f.topMap))throw new x('unable to parse tooltip position "'+tooltip.position+'"');t.position=[f.topMap[r.top],f.leftMap[r.left]]}if("center"==t.position[0]&&"center"==t.position[1])throw new x('unable to parse tooltip position "center center"');if(e)for(var s=i.classList.length-1;0<=s;s--){var a=i.classList.item(s);"psv-tooltip"!=a&&"psv-tooltip--visible"!=a&&i.classList.remove(a)}else i.className="psv-tooltip";t.className&&T.addClasses(i,t.className),n.innerHTML=t.content,i.style.top="0px",i.style.left="0px";var l=i.getBoundingClientRect(),c={posClass:t.position.slice(),width:l.right-l.left,height:l.bottom-l.top,top:0,left:0,arrow_top:0,arrow_left:0};this._computeTooltipPosition(c,t);var h=!1;if(c.top<this.config.offset?(c.posClass[0]="bottom",h=!0):c.top+c.height>this.psv.prop.size.height-this.config.offset&&(c.posClass[0]="top",h=!0),c.left<this.config.offset?(c.posClass[1]="right",h=!0):c.left+c.width>this.psv.prop.size.width-this.config.offset&&(c.posClass[1]="left",h=!0),h&&this._computeTooltipPosition(c,t),i.style.top=c.top+"px",i.style.left=c.left+"px",o.style.top=c.arrow_top+"px",o.style.left=c.arrow_left+"px",i.classList.add("psv-tooltip--"+c.posClass.join("-")),!e){var u=this;this.prop.timeout=window.setTimeout(function(){i.classList.add("psv-tooltip--visible"),u.prop.timeout=null,u.psv.trigger("show-tooltip")},this.config.delay)}},f.prototype.hideTooltip=function(){if(this.prop.timeout&&(window.clearTimeout(this.prop.timeout),this.prop.timeout=null),this.isTooltipVisible()){this.container.classList.remove("psv-tooltip--visible");var t=this;this.prop.timeout=window.setTimeout(function(){t.content.innerHTML=null,t.container.style.top="-1000px",t.container.style.left="-1000px",t.prop.timeout=null},this.config.delay),this.psv.trigger("hide-tooltip")}},f.prototype._computeTooltipPosition=function(t,e){var i=!1;switch(t.posClass[0]){case"bottom":t.top=e.top+e.box.height+this.config.offset+this.config.arrow_size,t.arrow_top=2*-this.config.arrow_size,i=!0;break;case"center":t.top=e.top+e.box.height/2-t.height/2,t.arrow_top=t.height/2-this.config.arrow_size;break;case"top":t.top=e.top-t.height-this.config.offset-this.config.arrow_size,t.arrow_top=t.height,i=!0}switch(t.posClass[1]){case"right":i?(t.left=e.left+e.box.width/2-this.config.offset-this.config.arrow_size,t.arrow_left=this.config.offset):(t.left=e.left+e.box.width+this.config.offset+this.config.arrow_size,t.arrow_left=2*-this.config.arrow_size);break;case"center":t.left=e.left+e.box.width/2-t.width/2,t.arrow_left=t.width/2-this.config.arrow_size;break;case"left":i?(t.left=e.left-t.width+e.box.width/2+this.config.offset+this.config.arrow_size,t.arrow_left=t.width-this.config.offset-2*this.config.arrow_size):(t.left=e.left-t.width-this.config.offset-this.config.arrow_size,t.arrow_left=t.width)}},h.prototype=Object.create(o.prototype),(h.prototype.constructor=h).id=null,h.icon=null,h.iconActive=null,h.prototype.create=function(){o.prototype.create.call(this),this.constructor.icon&&this._setIcon(this.constructor.icon),this.id&&this.psv.config.lang[this.id]&&(this.container.title=this.psv.config.lang[this.id]),this.container.addEventListener("click",function(t){this.enabled&&this._onClick(),t.stopPropagation()}.bind(this))},h.prototype.destroy=function(){o.prototype.destroy.call(this)},h.prototype.toggleActive=function(t){T.toggleClass(this.container,"psv-button--active",t),this.constructor.iconActive&&this._setIcon(t?this.constructor.iconActive:this.constructor.icon)},h.prototype.disable=function(){this.container.classList.add("psv-button--disabled"),this.enabled=!1},h.prototype.enable=function(){this.container.classList.remove("psv-button--disabled"),this.enabled=!0},h.prototype._setIcon=function(t,e){e||(e=this.container),t?(e.innerHTML=p.ICONS[t],e.querySelector("svg").setAttribute("class","psv-button-svg")):e.innerHTML=""},h.prototype._onClick=function(){},m.prototype=Object.create(h.prototype),(m.prototype.constructor=m).id="autorotate",m.className="psv-button psv-button--hover-scale psv-autorotate-button",m.icon="play.svg",m.iconActive="play-active.svg",m.prototype.create=function(){h.prototype.create.call(this),this.psv.on("autorotate",this)},m.prototype.destroy=function(){this.psv.off("autorotate",this),h.prototype.destroy.call(this)},m.prototype.handleEvent=function(t){switch(t.type){case"autorotate":this.toggleActive(t.args[0])}},m.prototype._onClick=function(){this.psv.toggleAutorotate()},g.prototype=Object.create(h.prototype),(g.prototype.constructor=g).className="psv-button psv-custom-button",g.prototype.create=function(){h.prototype.create.call(this),this.config.className&&T.addClasses(this.container,this.config.className),this.config.title&&(this.container.title=this.config.title),this.config.content&&(this.container.innerHTML=this.config.content),!1!==this.config.enabled&&!0!==this.config.disabled||this.disable(),!1!==this.config.visible&&!0!==this.config.hidden||this.hide()},g.prototype.destroy=function(){delete this.config,h.prototype.destroy.call(this)},g.prototype._onClick=function(){this.config.onClick&&this.config.onClick.apply(this.psv)},v.prototype=Object.create(h.prototype),(v.prototype.constructor=v).id="download",v.className="psv-button psv-button--hover-scale psv-download-button",v.icon="download.svg",v.prototype._onClick=function(){var t=document.createElement("a");t.href=this.psv.config.panorama,t.download=this.psv.config.panorama,this.psv.container.appendChild(t),t.click()},y.prototype=Object.create(h.prototype),(y.prototype.constructor=y).id="fullscreen",y.className="psv-button psv-button--hover-scale psv-fullscreen-button",y.icon="fullscreen-in.svg",y.iconActive="fullscreen-out.svg",y.prototype.create=function(){h.prototype.create.call(this),p.SYSTEM.fullscreenEvent||(this.hide(),console.warn("PhotoSphereViewer: fullscreen not supported.")),this.psv.on("fullscreen-updated",this)},y.prototype.destroy=function(){this.psv.off("fullscreen-updated",this),h.prototype.destroy.call(this)},y.prototype.handleEvent=function(t){switch(t.type){case"fullscreen-updated":this.toggleActive(t.args[0])}},y.prototype._onClick=function(){this.psv.toggleFullscreen()},b.prototype=Object.create(h.prototype),(b.prototype.constructor=b).id="gyroscope",b.className="psv-button psv-button--hover-scale psv-gyroscope-button",b.icon="compass.svg",b.prototype.create=function(){h.prototype.create.call(this),p.SYSTEM.deviceOrientationSupported.promise.then(this._onAvailabilityChange.bind(this,!0),this._onAvailabilityChange.bind(this,!1)),this.hide(),this.psv.on("gyroscope-updated",this)},b.prototype.destroy=function(){this.psv.off("gyroscope-updated",this),h.prototype.destroy.call(this)},b.prototype.handleEvent=function(t){switch(t.type){case"gyroscope-updated":this.toggleActive(t.args[0])}},b.prototype._onClick=function(){this.psv.toggleGyroscopeControl()},b.prototype._onAvailabilityChange=function(t){if(t){if(!T.checkTHREE("DeviceOrientationControls"))throw new x("Missing Three.js components: DeviceOrientationControls. Get them from three.js-examples package.");this.show()}},w.prototype=Object.create(h.prototype),(w.prototype.constructor=w).id="markers",w.className="psv-button psv-button--hover-scale psv-markers-button",w.icon="pin.svg",w.prototype._onClick=function(){this.psv.hud.toggleMarkersList()},_.prototype=Object.create(h.prototype),(_.prototype.constructor=_).id="zoom",_.className="psv-button psv-zoom-button",_.prototype.create=function(){h.prototype.create.call(this);var t=document.createElement("div");t.className="psv-zoom-button-minus",t.title=this.psv.config.lang.zoomOut,this._setIcon("zoom-out.svg",t),this.container.appendChild(t);var e=document.createElement("div");e.className="psv-zoom-button-range",this.container.appendChild(e),this.zoom_range=document.createElement("div"),this.zoom_range.className="psv-zoom-button-line",e.appendChild(this.zoom_range),this.zoom_value=document.createElement("div"),this.zoom_value.className="psv-zoom-button-handle",this.zoom_range.appendChild(this.zoom_value);var i=document.createElement("div");i.className="psv-zoom-button-plus",i.title=this.psv.config.lang.zoomIn,this._setIcon("zoom-in.svg",i),this.container.appendChild(i),this.zoom_range.addEventListener("mousedown",this),this.zoom_range.addEventListener("touchstart",this),this.psv.container.addEventListener("mousemove",this),this.psv.container.addEventListener("touchmove",this),this.psv.container.addEventListener("mouseup",this),this.psv.container.addEventListener("touchend",this),t.addEventListener("mousedown",this._zoomOut.bind(this)),i.addEventListener("mousedown",this._zoomIn.bind(this)),this.psv.on("zoom-updated",this),this.psv.once("ready",function(){this._moveZoomValue(this.psv.prop.zoom_lvl)}.bind(this))},_.prototype.destroy=function(){this._stopZoomChange(),this.psv.container.removeEventListener("mousemove",this),this.psv.container.removeEventListener("touchmove",this),this.psv.container.removeEventListener("mouseup",this),this.psv.container.removeEventListener("touchend",this),delete this.zoom_range,delete this.zoom_value,this.psv.off("zoom-updated",this),h.prototype.destroy.call(this)},_.prototype.handleEvent=function(t){switch(t.type){case"mousedown":this._initZoomChangeWithMouse(t);break;case"touchstart":this._initZoomChangeByTouch(t);break;case"mousemove":this._changeZoomWithMouse(t);break;case"touchmove":this._changeZoomByTouch(t);break;case"mouseup":case"touchend":this._stopZoomChange(t);break;case"zoom-updated":this._moveZoomValue(t.args[0])}},_.prototype._moveZoomValue=function(t){this.zoom_value.style.left=t/100*this.zoom_range.offsetWidth-this.zoom_value.offsetWidth/2+"px"},_.prototype._initZoomChangeWithMouse=function(t){this.enabled&&(this.prop.mousedown=!0,this._changeZoom(t.clientX))},_.prototype._initZoomChangeByTouch=function(t){this.enabled&&(this.prop.mousedown=!0,this._changeZoom(t.changedTouches[0].clientX))},_.prototype._zoomIn=function(){this.enabled&&(this.prop.buttondown=!0,this.psv.zoomIn(),this.prop.longPressTimeout=window.setTimeout(this._startLongPressInterval.bind(this,1),200))},_.prototype._zoomOut=function(){this.enabled&&(this.prop.buttondown=!0,this.psv.zoomOut(),this.prop.longPressTimeout=window.setTimeout(this._startLongPressInterval.bind(this,-1),200))},_.prototype._startLongPressInterval=function(t){this.prop.buttondown&&(this.prop.longPressInterval=window.setInterval(function(){this.psv.zoom(this.psv.prop.zoom_lvl+t)}.bind(this),50))},_.prototype._stopZoomChange=function(){this.enabled&&(window.clearInterval(this.prop.longPressInterval),window.clearTimeout(this.prop.longPressTimeout),this.prop.longPressInterval=null,this.prop.mousedown=!1,this.prop.buttondown=!1)},_.prototype._changeZoomWithMouse=function(t){this.enabled&&(t.preventDefault(),this._changeZoom(t.clientX))},_.prototype._changeZoomByTouch=function(t){this.enabled&&(t.preventDefault(),this._changeZoom(t.changedTouches[0].clientX))},_.prototype._changeZoom=function(t){if(this.prop.mousedown){var e=(parseInt(t)-this.zoom_range.getBoundingClientRect().left)/this.zoom_range.offsetWidth*100;this.psv.zoom(e)}},x.prototype=Object.create(Error.prototype),x.prototype.name="PSVError",x.prototype.constructor=x,p.Error=x,S.types=["image","html","polygon_px","polygon_rad","polyline_px","polyline_rad","rect","circle","ellipse","path"],S.getType=function(e,t){var i=[];if(S.types.forEach(function(t){e[t]&&i.push(t)}),0===i.length&&!t)throw new x("missing marker content, either "+S.types.join(", "));if(1<i.length)throw new x("multiple marker content, either "+S.types.join(", "));return i[0]},S.prototype.destroy=function(){delete this.$el.psvMarker},S.prototype.isNormal=function(){return"image"==this.type||"html"==this.type},S.prototype.isPoly=function(){return this.isPolygon()||this.isPolyline()},S.prototype.isPolygon=function(){return"polygon_px"==this.type||"polygon_rad"==this.type},S.prototype.isPolyline=function(){return"polyline_px"==this.type||"polyline_rad"==this.type},S.prototype.isSvg=function(){return"rect"==this.type||"circle"==this.type||"ellipse"==this.type||"path"==this.type},S.prototype.getScale=function(t){return Array.isArray(this.scale)?this.scale[0]+(this.scale[1]-this.scale[0])*T.animation.easings.inQuad(t/100):"function"==typeof this.scale?this.scale(t):"number"==typeof this.scale?this.scale*T.animation.easings.inQuad(t/100):1},S.prototype.update=function(t){if(t&&t!==this){var e=S.getType(t,!0);if(void 0!==e&&e!==this.type)throw new x("cannot change marker type");T.deepmerge(this,t)}this.isNormal()?this.$el.setAttribute("class","psv-marker psv-marker--normal"):this.$el.setAttribute("class","psv-marker psv-marker--svg"),this.className&&T.addClasses(this.$el,this.className),this.tooltip&&(T.addClasses(this.$el,"has-tooltip"),"string"==typeof this.tooltip&&(this.tooltip={content:this.tooltip})),this.style&&T.deepmerge(this.$el.style,this.style),this.anchor=T.parsePosition(this.anchor),this.isNormal()?this._updateNormal():this.isPolygon()?this._updatePoly("polygon_rad","polygon_px"):this.isPolyline()?this._updatePoly("polyline_rad","polyline_px"):this._updateSvg()},S.prototype._updateNormal=function(){this.width&&this.height?(this.$el.style.width=this.width+"px",this.$el.style.height=this.height+"px",this._dynamicSize=!1):this._dynamicSize=!0,this.image?this.$el.style.backgroundImage="url("+this.image+")":this.$el.innerHTML=this.html,this.$el.style.transformOrigin=100*this.anchor.left+"% "+100*this.anchor.top+"%",this.psv.cleanPosition(this),this.position3D=this.psv.sphericalCoordsToVector3(this)},S.prototype._updateSvg=function(){switch(this._dynamicSize=!0,this.type){case"rect":"number"==typeof this._def?this._def={x:0,y:0,width:this._def,height:this._def}:Array.isArray(this._def)?this._def={x:0,y:0,width:this._def[0],height:this._def[1]}:this._def.x=this._def.y=0;break;case"circle":"number"==typeof this._def?this._def={cx:this._def,cy:this._def,r:this._def}:Array.isArray(this._def)?this._def={cx:this._def[0],cy:this._def[0],r:this._def[0]}:this._def.cx=this._def.cy=this._def.r;break;case"ellipse":"number"==typeof this._def?this._def={cx:this._def,cy:this._def,rx:this._def,ry:this._def}:Array.isArray(this._def)?this._def={cx:this._def[0],cy:this._def[1],rx:this._def[0],ry:this._def[1]}:(this._def.cx=this._def.rx,this._def.cy=this._def.ry);break;case"path":"string"==typeof this._def&&(this._def={d:this._def})}Object.getOwnPropertyNames(this._def).forEach(function(t){this.$el.setAttributeNS(null,t,this._def[t])},this),this.svgStyle?Object.getOwnPropertyNames(this.svgStyle).forEach(function(t){this.$el.setAttributeNS(null,t,this.svgStyle[t])},this):this.$el.setAttributeNS(null,"fill","rgba(0,0,0,0.5)"),this.psv.cleanPosition(this),this.position3D=this.psv.sphericalCoordsToVector3(this)},S.prototype._updatePoly=function(t,e){this._dynamicSize=!0,this.svgStyle?(Object.getOwnPropertyNames(this.svgStyle).forEach(function(t){this.$el.setAttributeNS(null,t,this.svgStyle[t])},this),this.isPolyline()&&!this.svgStyle.fill&&this.$el.setAttributeNS(null,"fill","none")):this.isPolygon()?this.$el.setAttributeNS(null,"fill","rgba(0,0,0,0.5)"):this.isPolyline()&&(this.$el.setAttributeNS(null,"fill","none"),this.$el.setAttributeNS(null,"stroke","rgb(0,0,0)")),[this[t],this[e]].forEach(function(t){if(t&&"object"!=typeof t[0])for(var e=0;e<t.length;e++)t.splice(e,2,[t[e],t[e+1]])}),this[e]?this[t]=this[e].map(function(t){var e=this.psv.textureCoordsToSphericalCoords({x:t[0],y:t[1]});return[e.longitude,e.latitude]},this):this[t]=this[t].map(function(t){return[T.parseAngle(t[0]),T.parseAngle(t[1],!0)]}),this.longitude=this[t][0][0],this.latitude=this[t][0][1],this.positions3D=this[t].map(function(t){return this.psv.sphericalCoordsToVector3({longitude:t[0],latitude:t[1]})},this)};var T={};return(p.Utils=T).TwoPI=2*Math.PI,T.HalfPI=Math.PI/2,T.svgNS="http://www.w3.org/2000/svg",T.checkTHREE=function(t){for(var e=0,i=arguments.length;e<i;e++)if(!(arguments[e]in u))return!1;return!0},T.isCanvasSupported=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},T.getWebGLCtx=function(){var e=document.createElement("canvas"),i=null;return e.getContext&&["webgl","experimental-webgl","moz-webgl","webkit-3d"].some(function(t){try{return(i=e.getContext(t))&&"function"==typeof i.getParameter}catch(t){return!1}})?i:null},T.isWebGLSupported=function(){return!!window.WebGLRenderingContext&&null!==T.getWebGLCtx()},T.getMaxTextureWidth=function(){var t=T.getWebGLCtx();if(null!==t)return t.getParameter(t.MAX_TEXTURE_SIZE)},T.toggleClass=function(t,e,i){if(t.classList)void 0===i?t.classList.toggle(e):i&&!t.classList.contains(e)?t.classList.add(e):i||t.classList.remove(e);else{var n=t.getAttribute("class")||"",o=-1!==n.indexOf(e),r=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)");void 0!==i&&!i||o?i||(n=n.replace(r," ")):n+=0<n.length?" "+e:e,t.setAttribute("class",n)}},T.addClasses=function(e,t){t&&t.split(" ").forEach(function(t){T.toggleClass(e,t,!0)})},T.removeClasses=function(e,t){t&&t.split(" ").forEach(function(t){T.toggleClass(e,t,!1)})},T.hasParent=function(t,e){do{if(t===e)return!0}while(t=t.parentNode);return!1},T.getClosest=function(t,e){var i=t.matches||t.msMatchesSelector;do{if(i.bind(t)(e))return t}while(t=t.parentElement);return null},T.mouseWheelEvent=function(){return"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},T.fullscreenEvent=function(){var t={exitFullscreen:"fullscreenchange",webkitExitFullscreen:"webkitfullscreenchange",mozCancelFullScreen:"mozfullscreenchange",msExitFullscreen:"MSFullscreenChange"};for(var e in t)if(e in document)return t[e]},T.bound=function(t,e,i){return Math.max(e,Math.min(i,t))},T.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},T.sum=function(t){return t.reduce(function(t,e){return t+e},0)},T.getXMPValue=function(t,e){var i;return null!==(i=t.match("<GPano:"+e+">(.*)</GPano:"+e+">"))?i[1]:null!==(i=t.match("GPano:"+e+'="(.*?)"'))?i[1]:null},T.isFullscreenEnabled=function(t){return(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)===t},T.requestFullscreen=function(t){(t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen||t.msRequestFullscreen).call(t)},T.exitFullscreen=function(){(document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen).call(document)},T.getStyle=function(t,e){return window.getComputedStyle(t,null)[e]},T.getShortestArc=function(i,n){return[0,T.TwoPI,-T.TwoPI].reduce(function(t,e){return e=n-i+e,Math.abs(e)<Math.abs(t)?e:t},1/0)},T.parsePosition=function(t){if(!t)return{top:.5,left:.5};if("object"==typeof t)return t;var e=t.toLocaleLowerCase().split(" ").slice(0,2);1===e.length&&(e=void 0!==T.parsePosition.positions[e[0]]?[e[0],"center"]:[e[0],e[0]]);var i="left"!=e[1]&&"right"!=e[1]&&"top"!=e[0]&&"bottom"!=e[0];e=e.map(function(t){return T.parsePosition.positions[t]||t}),i||e.reverse();var n=e.join(" ").match(/^([0-9.]+)% ([0-9.]+)%$/);return n?{left:n[1]/100,top:n[2]/100}:{top:.5,left:.5}},T.parsePosition.positions={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},T.parseSpeed=function(t){if("string"==typeof t){t=t.toString().trim();var e=parseFloat(t.replace(/^(-?[0-9]+(?:\.[0-9]*)?).*$/,"$1")),i=t.replace(/^-?[0-9]+(?:\.[0-9]*)?(.*)$/,"$1").trim();switch(i.match(/(pm|per minute)$/)&&(e/=60),i){case"dpm":case"degrees per minute":case"dps":case"degrees per second":t=u.Math.degToRad(e);break;case"radians per minute":case"radians per second":t=e;break;case"rpm":case"revolutions per minute":case"rps":case"revolutions per second":t=e*T.TwoPI;break;default:throw new x('unknown speed unit "'+i+'"')}}return t},T.parseAngle=function(t,e){if("string"==typeof t){var i=t.toLowerCase().trim().match(/^(-?[0-9]+(?:\.[0-9]*)?)(.*)$/);if(!i)throw new x('unknown angle "'+t+'"');var n=parseFloat(i[1]),o=i[2];if(o)switch(o){case"deg":case"degs":t=u.Math.degToRad(n);break;case"rad":case"rads":t=n;break;default:throw new x('unknown angle unit "'+o+'"')}else t=n}return(t=(e?t+Math.PI:t)%T.TwoPI)<0&&(t=T.TwoPI+t),e?T.bound(t-Math.PI,-T.HalfPI,T.HalfPI):t},T.cleanTHREEScene=function(t){t.children.forEach(function(t){t instanceof u.Mesh&&(t.geometry&&(t.geometry.dispose(),t.geometry=null),t.material&&(t.material.materials?(t.material.materials.forEach(function(t){t.map&&(t.map.dispose(),t.map=null),t.dispose()}),t.material.materials.length=0):(t.material.map&&(t.material.map.dispose(),t.material.map=null),t.material.dispose()),t.material=null))}),t.children.length=0},T.animation=function(o){function r(t){if(-1!==s.promise.getStatus()){null===a&&(a=t);var e,i=(t-a)/o.duration,n={};if(i<1){for(e in o.properties)n[e]=o.properties[e].start+(o.properties[e].end-o.properties[e].start)*o.easing(i);o.onTick(n,i),window.requestAnimationFrame(r)}else{for(e in o.properties)n[e]=o.properties[e].end;o.onTick(n,1),window.requestAnimationFrame(function(){s.resolve()})}}}var s=d(!1),a=null;o.easing&&"string"!=typeof o.easing||(o.easing=T.animation.easings[o.easing||"linear"]),void 0!==o.delay?window.setTimeout(function(){window.requestAnimationFrame(r)},o.delay):window.requestAnimationFrame(r);var t=s.promise;return t.cancel=function(){s.reject()},t},T.animation.easings={linear:function(t){return t},inQuad:function(t){return t*t},outQuad:function(t){return t*(2-t)},inOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},inQuart:function(t){return t*t*t*t},outQuart:function(t){return 1- --t*t*t*t},inOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return 1+--t*t*t*t*t},inOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},inSine:function(t){return 1-Math.cos(t*(Math.PI/2))},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return.5-.5*Math.cos(Math.PI*t)},inExpo:function(t){return Math.pow(2,10*(t-1))},outExpo:function(t){return 1-Math.pow(2,-10*t)},inOutExpo:function(t){return(t=2*t-1)<0?.5*Math.pow(2,10*t):1-.5*Math.pow(2,-10*t)},inCirc:function(t){return 1-Math.sqrt(1-t*t)},outCirc:function(t){return t--,Math.sqrt(1-t*t)},inOutCirc:function(t){return(t*=2)<1?.5-.5*Math.sqrt(1-t*t):.5+.5*Math.sqrt(1-(t-=2)*t)}},T.throttle=function(i,n){var o,r,s,a=null,l=0,c=function(){l=Date.now(),a=null,s=i.apply(o,r),a||(o=r=null)};return function(){var t=Date.now();l||(l=t);var e=n-(t-l);return o=this,r=arguments,e<=0||n<e?(a&&(clearTimeout(a),a=null),l=t,s=i.apply(o,r),a||(o=r=null)):a||(a=setTimeout(c,e)),s}},T.isPlainObject=function(t){if("object"==typeof t&&null!==t){if("function"==typeof Object.getPrototypeOf){var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}return"[object Object]"==Object.prototype.toString.call(t)}return!1},T.deepmerge=function(t,e){var o=e;return function i(n,e){return Array.isArray(e)?(n&&Array.isArray(n)?n.length=0:n=[],e.forEach(function(t,e){n[e]=i(null,t)})):"object"==typeof e?(n&&!Array.isArray(n)||(n={}),Object.keys(e).forEach(function(t){"object"==typeof e[t]&&e[t]&&T.isPlainObject(e[t])?e[t]!=o&&(n[t]?i(n[t],e[t]):n[t]=i(null,e[t])):n[t]=e[t]})):n=e,n}(t,e)},T.clone=function(t){return T.deepmerge(null,t)},T.normalizeWheel=function(t){var e=0,i=0,n=0,o=0;return"detail"in t&&(i=t.detail),"wheelDelta"in t&&(i=-t.wheelDelta/120),"wheelDeltaY"in t&&(i=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=i,i=0),n=10*e,o=10*i,"deltaY"in t&&(o=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||o)&&t.deltaMode&&(1==t.deltaMode?(n*=40,o*=40):(n*=800,o*=800)),n&&!e&&(e=n<1?-1:1),o&&!i&&(i=o<1?-1:1),{spinX:e,spinY:i,pixelX:n,pixelY:o}},function(t){if(t.requestAnimationFrame=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,t.cancelAnimationFrame=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.msCancelAnimationFrame,!t.requestAnimationFrame){var i,n=[],o=[],e=0;t.requestAnimationFrame=function(t){return n.push([++e,t]),i||(i=setInterval(function(){if(n.length){var t=+new Date,e=o;for(o=n,n=e;o.length;)o.shift()[1](t)}else clearInterval(i),i=void 0},20)),e},t.cancelAnimationFrame=function(t){var e,i;for(e=0,i=n.length;e<i;e+=1)if(n[e][0]===t)return void n.splice(e,1);for(e=0,i=o.length;e<i;e+=1)if(o[e][0]===t)return void o.splice(e,1)}}}(window),p.ICONS["compass.svg"]='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M49.997,0C22.38,0.004,0.005,22.383,0,50.002C0.005,77.614,22.38,99.995,49.997,100C77.613,99.995,99.996,77.614,100,50.002C99.996,22.383,77.613,0.004,49.997,0z M49.997,88.81c-21.429-0.04-38.772-17.378-38.809-38.807c0.037-21.437,17.381-38.775,38.809-38.812C71.43,11.227,88.769,28.567,88.81,50.002C88.769,71.432,71.43,88.77,49.997,88.81z"/><path d="M72.073,25.891L40.25,41.071l-0.003-0.004l-0.003,0.009L27.925,74.109l31.82-15.182l0.004,0.004l0.002-0.007l-0.002-0.004L72.073,25.891z M57.837,54.411L44.912,42.579l21.092-10.062L57.837,54.411z"/><!--Created by iconoci from the Noun Project--></svg>',p.ICONS["download.svg"]='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M83.285,35.575H66.271L66.277,3H32.151v32.575H16.561l33.648,32.701L83.285,35.575z"/><path d="M83.316,64.199v16.32H16.592v-16.32H-0.094v32.639H100V64.199H83.316z"/><!--Created by Michael Zenaty from the Noun Project--></svg>',p.ICONS["fullscreen-in.svg"]='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><polygon points="100,39.925 87.105,39.925 87.105,18.895 66.075,18.895 66.075,6 100,6"/><polygon points="100,93.221 66.075,93.221 66.075,80.326 87.105,80.326 87.105,59.295 100,59.295"/><polygon points="33.925,93.221 0,93.221 0,59.295 12.895,59.295 12.895,80.326 33.925,80.326"/><polygon points="12.895,39.925 0,39.925 0,6 33.925,6 33.925,18.895 12.895,18.895"/><!--Created by Garrett Knoll from the Noun Project--></svg>',p.ICONS["fullscreen-out.svg"]='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><polygon points="66.075,7 78.969,7 78.969,28.031 100,28.031 100,40.925 66.075,40.925"/><polygon points="66.075,60.295 100,60.295 100,73.19 78.969,73.19 78.969,94.221 66.075,94.221"/><polygon points="0,60.295 33.925,60.295 33.925,94.221 21.031,94.221 21.031,73.19 0,73.19"/><polygon points="21.031,7 33.925,7 33.925,40.925 0,40.925 0,28.031 21.031,28.031"/><!--Created by Garrett Knoll from the Noun Project--></svg>',p.ICONS["pin.svg"]='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"><path d="M24,0C13.798,0,5.499,8.3,5.499,18.501c0,10.065,17.57,28.635,18.318,29.421C23.865,47.972,23.931,48,24,48s0.135-0.028,0.183-0.078c0.748-0.786,18.318-19.355,18.318-29.421C42.501,8.3,34.202,0,24,0z M24,7.139c5.703,0,10.342,4.64,10.342,10.343c0,5.702-4.639,10.342-10.342,10.342c-5.702,0-10.34-4.64-10.34-10.342C13.66,11.778,18.298,7.139,24,7.139z"/><!--Created by Daniele Marucci from the Noun Project--></svg>',p.ICONS["play-active.svg"]='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 41 41" enable-background="new 0 0 41 41" xml:space="preserve"><path d="M40.5,14.1c-0.1-0.1-1.2-0.5-2.898-1C37.5,13.1,37.4,13,37.4,12.9C34.5,6.5,28,2,20.5,2S6.6,6.5,3.7,12.9c0,0.1-0.1,0.1-0.2,0.2c-1.7,0.6-2.8,1-2.9,1L0,14.4v12.1l0.6,0.2c0.1,0,1.1,0.399,2.7,0.899c0.1,0,0.2,0.101,0.2,0.199C6.3,34.4,12.9,39,20.5,39c7.602,0,14.102-4.6,16.9-11.1c0-0.102,0.1-0.102,0.199-0.2c1.699-0.601,2.699-1,2.801-1l0.6-0.3V14.3L40.5,14.1z M6.701,11.5C9.7,7,14.8,4,20.5,4c5.8,0,10.9,3,13.8,7.5c0.2,0.3-0.1,0.6-0.399,0.5c-3.799-1-8.799-2-13.6-2c-4.7,0-9.5,1-13.2,2C6.801,12.1,6.601,11.8,6.701,11.5z M25.1,20.3L18.7,24c-0.3,0.2-0.7,0-0.7-0.5v-7.4c0-0.4,0.4-0.6,0.7-0.4 l6.399,3.8C25.4,19.6,25.4,20.1,25.1,20.3z M34.5,29.201C31.602,33.9,26.4,37,20.5,37c-5.9,0-11.1-3.1-14-7.898c-0.2-0.302,0.1-0.602,0.4-0.5c3.9,1,8.9,2.1,13.6,2.1c5,0,9.9-1,13.602-2C34.4,28.602,34.602,28.9,34.5,29.201z"/><!--Created by Nick Bluth from the Noun Project--></svg>',p.ICONS["play.svg"]='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 41 41" enable-background="new 0 0 41 41" xml:space="preserve"><path d="M40.5,14.1c-0.1-0.1-1.2-0.5-2.899-1c-0.101,0-0.2-0.1-0.2-0.2C34.5,6.5,28,2,20.5,2S6.6,6.5,3.7,12.9c0,0.1-0.1,0.1-0.2,0.2c-1.7,0.6-2.8,1-2.9,1L0,14.4v12.1l0.6,0.2c0.1,0,1.1,0.4,2.7,0.9c0.1,0,0.2,0.1,0.2,0.199C6.3,34.4,12.9,39,20.5,39c7.601,0,14.101-4.6,16.9-11.1c0-0.101,0.1-0.101,0.2-0.2c1.699-0.6,2.699-1,2.8-1l0.6-0.3V14.3L40.5,14.1zM20.5,4c5.8,0,10.9,3,13.8,7.5c0.2,0.3-0.1,0.6-0.399,0.5c-3.8-1-8.8-2-13.6-2c-4.7,0-9.5,1-13.2,2c-0.3,0.1-0.5-0.2-0.4-0.5C9.7,7,14.8,4,20.5,4z M20.5,37c-5.9,0-11.1-3.1-14-7.899c-0.2-0.301,0.1-0.601,0.4-0.5c3.9,1,8.9,2.1,13.6,2.1c5,0,9.9-1,13.601-2c0.3-0.1,0.5,0.2,0.399,0.5C31.601,33.9,26.4,37,20.5,37z M39.101,24.9c0,0.1-0.101,0.3-0.2,0.3c-2.5,0.9-10.4,3.6-18.4,3.6c-7.1,0-15.6-2.699-18.3-3.6C2.1,25.2,2,25,2,24.9V16c0-0.1,0.1-0.3,0.2-0.3c2.6-0.9,10.6-3.6,18.2-3.6c7.5,0,15.899,2.7,18.5,3.6c0.1,0,0.2,0.2,0.2,0.3V24.9z"/><path d="M18.7,24l6.4-3.7c0.3-0.2,0.3-0.7,0-0.8l-6.4-3.8c-0.3-0.2-0.7,0-0.7,0.4v7.4C18,24,18.4,24.2,18.7,24z"/><!--Created by Nick Bluth from the Noun Project--></svg>',p.ICONS["zoom-in.svg"]='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><path d="M14.043,12.22c2.476-3.483,1.659-8.313-1.823-10.789C8.736-1.044,3.907-0.228,1.431,3.255c-2.475,3.482-1.66,8.312,1.824,10.787c2.684,1.908,6.281,1.908,8.965,0l4.985,4.985c0.503,0.504,1.32,0.504,1.822,0c0.505-0.503,0.505-1.319,0-1.822L14.043,12.22z M7.738,13.263c-3.053,0-5.527-2.475-5.527-5.525c0-3.053,2.475-5.527,5.527-5.527c3.05,0,5.524,2.474,5.524,5.527C13.262,10.789,10.788,13.263,7.738,13.263z"/><polygon points="8.728,4.009 6.744,4.009 6.744,6.746 4.006,6.746 4.006,8.73 6.744,8.73 6.744,11.466 8.728,11.466 8.728,8.73 11.465,8.73 11.465,6.746 8.728,6.746"/><!--Created by Ryan Canning from the Noun Project--></svg>',p.ICONS["zoom-out.svg"]='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><path d="M14.043,12.22c2.476-3.483,1.659-8.313-1.823-10.789C8.736-1.044,3.907-0.228,1.431,3.255c-2.475,3.482-1.66,8.312,1.824,10.787c2.684,1.908,6.281,1.908,8.965,0l4.985,4.985c0.503,0.504,1.32,0.504,1.822,0c0.505-0.503,0.505-1.319,0-1.822L14.043,12.22z M7.738,13.263c-3.053,0-5.527-2.475-5.527-5.525c0-3.053,2.475-5.527,5.527-5.527c3.05,0,5.524,2.474,5.524,5.527C13.262,10.789,10.788,13.263,7.738,13.263z"/><rect x="4.006" y="6.746" width="7.459" height="1.984"/><!--Created by Ryan Canning from the Noun Project--></svg>',p});var _waypoint={homeW:function(){$(".activity_nav").waypoint({handler:function(){$(".activity_nav").addClass("show")},offset:"90%"})},newsW:function(){$(".newsBoxs>*").each(function(t,e){$(e).waypoint({handler:function(){$(e).addClass("show")},offset:"50%"})})},menuW:function(){$("body").hasClass("index")&&$("._imgs").each(function(t,e){$(e).addClass("hide"),$(e).waypoint({handler:function(){$(e).removeClass("hide"),$(e).addClass("show")},offset:"60%"})})},aboutW:function(){$(".top ._text>*").each(function(t,e){$(e).waypoint({handler:function(){$(e).addClass("show")},offset:"80%"})}),$(".botttom .wordWithImg ._text").each(function(t,e){$(e).addClass("hide"),$(e).waypoint({handler:function(){$(e).removeClass("hide"),$(e).addClass("show")},offset:"80%"})})},storeholdW:function(){$("body").hasClass("detail")&&$(".content").waypoint({handler:function(){$(".content").addClass("show")},offset:"60%"})}},_Blazy={homeW:function(){new Blazy({offset:100,success:function(t){Waypoint.refreshAll(),1024<$(window).width()&&$("body").getNiceScroll().resize(),$(t).closest(".smallImg").addClass("show"),$(t).closest("._img").addClass("show"),$(t).closest("._img").hasClass("_img")&&$(t).closest("a").find("._text").addClass("show")}})},newsW:function(){new Blazy({offset:300,success:function(t){Waypoint.refreshAll(),1024<$(window).width()&&$("body").getNiceScroll().resize()}})},menuW:function(){new Blazy({offset:300,success:function(t){$(t).parent().addClass("show"),1024<$(window).width()&&$("body").getNiceScroll().resize(),Waypoint.refreshAll()}})},storeholdW:function(){new Blazy({offset:10,success:function(t){$(t).closest(".box").addClass("show"),$(t).closest("._img").addClass("in")}})},reservationW:function(){new Blazy({offset:10,success:function(t){$(t).closest("._img").addClass("show"),$(t).closest(".infBg").addClass("show")}})},contactW:function(){new Blazy({offset:100,success:function(t){$(t).closest("._img").addClass("show"),$(t).closest(".infBg").addClass("show")}})},aboutW:function(){new Blazy({offset:100,success:function(t){1024<$(window).width()&&$("body").getNiceScroll().resize(),$(t).addClass("show")}})}},slick={homeSlick:function(){$(".activity_nav ul").slick({slidesToShow:1,speed:1200,centerMode:!0,arrows:!1,centerPadding:"33.33%",dots:!0,focusOnSelect:!0,autoplay:!0,autoplaySpeed:4e3,pauseOnHover:!1,responsive:[{breakpoint:1280,settings:{centerPadding:"25%"}},{breakpoint:900,settings:{centerPadding:"15%"}},{breakpoint:700,settings:{centerPadding:"0%"}}]}),$(".storeHold .mainSlick ul").slick({slidesToShow:1,slidesToScroll:1,speed:1500,lazyLoad:"ondemand",asNavFor:".storeHold .sideSlick ul",arrows:!1}),$(".storeHold .icon-arrow_left").click(function(){$(".storeHold  .mainSlick ul").slick("getSlick").slickPrev()}),$(".storeHold .sideSlick:nth-child(3)").click(function(){$(".storeHold  .mainSlick ul").slick("getSlick").slickPrev()}),$(".storeHold .icon-arrow_right").click(function(){$(".storeHold  .mainSlick ul").slick("getSlick").slickNext()}),$(".storeHold .sideSlick:nth-child(5)").click(function(){$(".storeHold  .mainSlick ul").slick("getSlick").slickNext()}),$(".storeHold .sideSlick ul").slick({slidesToShow:1,slidesToScroll:1,speed:1500,arrows:!1,lazyLoad:"ondemand",asNavFor:".storeHold .mainSlick ul"})},storeholdSlick:function(){$("body").hasClass("detail")&&($(".imgSlick ul").slick({arrows:!1,slidesToShow:1,slidesToScroll:1,speed:1e3,centerMode:!0,variableWidth:!0,autoplay:!0,autoplaySpeed:2e3}),$(".sideSlick ul").slick({slidesToShow:1,slidesToScroll:1,speed:1500,centerMode:!0,swipe:!1,lazyLoad:"ondemand",arrows:!1,variableWidth:!0,asNavFor:".slick360 .picture"}))}},load={hd:function(){headerWordColor(),headerFixed(),bannerScrollDown()},ft:function(){BackToTop(),openPrivacy()}};$(".smallImg").each(function(){var t="translate("+$(this).attr("data-X")+","+$(this).attr("data-Y")+")";$(this).css("transform",t)});var home={activity_navWord:function(){$(".activity_nav ._text p").each(function(){if(35<$(this).text().length){var t=$(this).text().substring(0,34)+"...";$(this).text(t)}})},scrollMove:function(){$(window).scroll(function(){scrollMove(".news ._title",.08),scrollMove(".category ._title",-.08),scrollMove(".brandspirit ._title",.08),scrollMove(".storeHold ._title",-.08)})},changCatagory:function(){var i=document.querySelectorAll(".category .slick_area ._slick");$(".category ._nav ul li").click(function(){var t=$(this),e=t.index();t.addClass("active"),t.siblings().removeClass("active"),$(i[e]).addClass("active"),$(i[e]).siblings().removeClass("active"),t.data("clicked")||home.slick(),t.attr("data-clicked","true")})},slick:function(){$(".category ._slick.active ul").slick({slidesToShow:1,slidesToScroll:1,speed:800,centerMode:!0,infinite:!1,initialSlide:1,variableWidth:!0,arrows:!1,responsive:[{breakpoint:1601,settings:{initialSlide:0}},{breakpoint:700,settings:{initialSlide:0,infinite:!0}}]}),$(".category .icon-arrow_left").click(function(){$(".category ._slick.active ul").each(function(){$(this).slick("getSlick").slickPrev()})}),$(".category .icon-arrow_right").click(function(){$(".category ._slick.active ul").each(function(){$(this).slick("getSlick").slickNext()})})},niceScroll:function(){var t=document.querySelector(".category ._nav ul");new PerfectScrollbar(t,{suppressScrollY:!0,maxScrollbarLength:1})},all:function(){home.activity_navWord(),home.scrollMove(),home.changCatagory(),home.slick(),home.niceScroll()}},news={selectNews:function(){$(".topNav ._title ul li").click(function(){$(this).addClass("active"),$(this).siblings().removeClass("active"),news.smallImg(),_waypoint.newsW(),news.newsBoxs(),_Blazy.newsW()})},newsBoxs:function(){1260<$(window).width()?$(".newsBoxs>div").each(function(){switch($(this).index()%3){case 0:$(this).addClass("item1");break;case 1:$(this).addClass("item2"),$(this).css("transition-delay",".3s");break;case 2:$(this).addClass("item3"),$(this).css("transition-delay",".6s")}}):$(".newsBoxs>div").each(function(){$(this).removeClass("item1"),$(this).removeClass("item2"),$(this).removeClass("item3")})},niceScroll:function(){var t=document.querySelector(".content .topNav ._title ul");new PerfectScrollbar(t,{suppressScrollY:!0,maxScrollbarLength:1})},indexWordlatest:function(){$(".newsBoxs ._text p").each(function(){if(45<$(this).text().length){var t=$(this).text().substring(0,44)+"...";$(this).text(t)}})},smallImg:function(){$(".smallImg_area .smallImg").each(function(){var t=$(this).index(),e=$(window).width();if(1499<e)var i=150+650*t+"px";else if(e<1500&&1024<e)i=10+45*t+"vw";else if(e<1025&&650<e)i=10+95*t+"vh";else i=300*t+300+"vw";$(this).css("top",i)})},imgReset:function(){$(".cross").click(function(){news.smallImg(),_waypoint.newsW(),news.newsBoxs(),_Blazy.newsW()}),$(window).resize(function(){news.smallImg()})},scrollMove:function(){$(window).scroll(function(){scrollMove(".smallImg_area .smallImg:nth-child(odd)",.1),scrollMove(".smallImg_area .smallImg:nth-child(even)",-.1),scrollMove(".smallImg.first",-.04)})},wordAnimation:function(){wordAnimation(".topNav ._title h2",.6,.1),wordAnimation(".topNav ._title h3",.6,.1)},detailWordlatest:function(){$(".next ._text h2").each(function(){if(50<$(this).text().length){var t=$(this).text().substring(0,49)+"...";$(this).text(t)}})},video:function(){var t="https://www.youtube.com/embed/"+$(".onlyVideo iframe").attr("data-videoId")+"?rel=0";$(".onlyVideo iframe").attr("src",t)},scrollChangPage:function(){function o(){$("main").animate({opacity:0},500),setTimeout(function(){location.href="../../views/news/detail.html"},1e3)}$(window).bind("mousewheel",function(t){var e=$("body").height()-$(window).height()-1,i=$(window).scrollTop(),n=t.originalEvent.wheelDelta;e<=i&&n<0&&o()}),document.body.addEventListener("touchend",function(t){$("body").height()-$(window).height()-100<=$(window).scrollTop()&&o()})},topNav:function(){$(".topNav .selectList").click(function(){var e=$(this);e.closest(".list").find("ul").slideToggle(700),e.toggleClass("open"),$(document).click(function(t){0===e.closest(".list").has(t.target).length&&(e.closest(".list").find("ul").slideUp(700),e.removeClass("open"))})}),$(".topNav .list ul li").click(function(){$(this).closest("ul").slideUp(700),$(this).closest(".list").find(".selectList").removeClass("open"),$(this).closest(".list").find(".selectList p").text($(this).text())}),$(".topNav .list ul").mCustomScrollbar({mouseWheel:{preventDefault:!0,scrollAmount:800}})},all:function(){$("body").hasClass("index")&&(news.selectNews(),news.newsBoxs(),news.niceScroll(),news.indexWordlatest(),news.imgReset(),news.smallImg(),news.scrollMove(),news.wordAnimation(),news.topNav()),$("body").hasClass("detail")&&(news.detailWordlatest(),news.video(),news.scrollChangPage())}},menu={scrollMove:function(){scrollMove(".banner .banner_text",-.2),$(window).scroll(function(){scrollMove(".banner .banner_text",-.2)})},indexScrollMove:function(){$(window).scroll(function(){scrollMove(".type:nth-child(odd) ._imgs",.08),scrollMove(".type:nth-child(even) ._imgs",.1)})},menuNavShow:function(){var i=$(window).height()/2-170,n=$(window).height()/2+170,o=document.querySelector(".menuType");$(window).scroll(function(){var t=o.getBoundingClientRect().top,e=o.getBoundingClientRect().bottom;t<i&&n<e?$(".menu_nav").addClass("open"):$(".menu_nav").removeClass("open")})},menuNavClick:function(){$(".scroll-next").click(function(t){for(var e=document.querySelectorAll(".menuType .type"),i=$(window).scrollTop(),n=0;n<e.length;n++){if(i<$(e[n]).offset().top+$(e[n]).height()/2){var o=n;break}}var r=o+1;r<e.length?$("html,body").animate({scrollTop:$(e[r]).offset().top-$(window).height()/2+$(e[r]).height()/2},800):$("html,body").animate({scrollTop:$(e[0]).offset().top-$(window).height()/2+$(e[0]).height()/2},800)})},header:function(){var n=$("main article:nth-child(2)").height(),t=parseInt($("main article:nth-child(2)").css("padding-top")),e=parseInt($("main article:nth-child(2)").css("padding-bottom")),o=n+t+e,r=$(".header").height(),s=0;$(window).scroll(function(){var t=$(this).scrollTop(),e=t<s,i=$(window).scrollTop();r<=i?$(".header").addClass("prepare"):i<r&&$(".header").removeClass("prepare"),o<=i&&e?$(".header").addClass("fixed"):i<n?$(".header").removeClass("fixed"):e||$(".header").removeClass("fixed"),setTimeout(function(){s=t},100)})},overflow:function(){if(1024<$(window).width())$(".dish_menu ul").niceScroll({cursorcolor:"#ccc",cursorborder:"none",cursorwidth:"4px",railpadding:{top:0,right:0,left:0,bottom:-10}});else{var t=document.querySelector(".dish_menu ul");new PerfectScrollbar(t,{suppressScrollY:!0})}},scrollChangPage:function(){function o(){$("html,body").animate({scrollTop:$(".content").offset().top},{duration:1e3,complete:function(){setTimeout(function(){$("body").getNiceScroll().resize(),$(".header").removeClass("fixed"),_Blazy.menuW()},100)}})}$(window).bind("mousewheel",function(t){var e=$("body ").height()-$(window).height()-1,i=$(window).scrollTop(),n=t.originalEvent.wheelDelta;e<=i&&n<0&&o()}),document.body.addEventListener("touchend",function(t){$("body").height()-$(window).height()-100<=$(window).scrollTop()&&o()})},dishTypeSelect:function(){$(".dish_menu ul li,.header .dish_nav ul li").click(function(){$(this).addClass("active"),$(this).siblings().removeClass("active")})},all:function(){menu.scrollMove(),$("body").hasClass("index")&&(menu.indexScrollMove(),menu.menuNavShow(),menu.menuNavClick()),$("body").hasClass("detail")&&(menu.header(),menu.overflow(),dish_detail.all(),dish_detail.scrollChangPage(),dish_detail.dishTypeSelect())}},storehold={indexScrollMove:function(){scrollMove(".banner .banner_text",-.2),$(window).scroll(function(){scrollMove(".banner .banner_text",-.2),scrollMove(".box:nth-child(odd) .smallImg img",-.1),scrollMove(".box:nth-child(even) .smallImg img",.1)})},storeholdNavFixed:function(){$(window).scroll(function(){var t=$(".stores").offset().top+$(".storeNav").height()/2,e=$(".stores").offset().top+$(".stores").height(),i=$(window).scrollTop()+$(window).height()/2;t<i&&i<e?($(".storeNav").addClass("fixed"),$(".storeNav").removeClass("bottom")):e<i?($(".storeNav").removeClass("fixed"),$(".storeNav").addClass("bottom")):i<=t&&($(".storeNav").removeClass("fixed"),$(".storeNav").removeClass("bottom"))})},storeholdNavClick:function(){$(".stores .storeNav span").click(function(){for(var t=document.querySelectorAll(".stores .box"),e=$(window).scrollTop()+$(window).height()/2,i=0;i<t.length;i++){if(e<$(t[i]).offset().top+$(t[i]).height()/2){var n=i;break}}var o=n+1;o<t.length?$("html,body").animate({scrollTop:$(t[o]).offset().top-$(window).height()/2+$(t[o]).height()/2},800):$("html,body").animate({scrollTop:$(t[0]).offset().top-$(window).height()/2+$(t[0]).height()/2},800)})},wordAnimation:function(){$(".stores .box ._text h2").each(function(){$this=$(this),wordAnimation($this,.6,.1)}),$(".stores .box ._text p").each(function(){$this=$(this),wordAnimation($this,.8,.1)})},pointNavScroll:function(){if($(window).width()<650){var t=document.querySelector(".pointNav ul");new PerfectScrollbar(t,{suppressScrollY:!0})}},pointNavClick:function(){$(".pointNav ul li").click(function(){var t=$(this).attr("id"),e=document.getElementsByClassName(t);$("html,body").animate({scrollTop:$(e).offset().top},1500,"easeOutCubic")})},detailScrollMove:function(){scrollMove(".banner .banner_text",-.1),$(window).scroll(function(){scrollMove(".banner .banner_text",-.1)})},pictureSlick:function(){$(".slick360 .picture").slick({slidesToShow:1,slidesToScroll:1,speed:1500,centerMode:!0,variableWidth:!0,swipe:!1,lazyLoad:"ondemand",arrows:!1,asNavFor:".sideSlick ul",responsive:[{breakpoint:1300,settings:{speed:1e3,swipe:!0}}]}),$(".slick360 .isImg .icon-arrow_left").click(function(){$(".slick360 .picture").slick("getSlick").slickPrev()}),$(".slick360 .isImg .icon-arrow_right").click(function(){$(".slick360 .picture").slick("getSlick").slickNext()})},deg360:function(){$(".slick360 .deg360").slick({slidesToShow:1,slidesToScroll:1,speed:1500,centerMode:!0,variableWidth:!0,swipe:!1,infinite:!1,arrows:!1,responsive:[{breakpoint:1300,settings:{speed:1e3}}]})},changImg:function(){$(".turn360").click(function(){$(this).removeClass("active"),$(".turnImg").addClass("active"),$(".slick360 .picture").removeClass("active"),$(".slick360 .deg360").addClass("active"),$(".slick360 .arrow").addClass("is360"),$(".slick360 .arrow").removeClass("isImg"),$(".slick360 .is360 .icon-arrow_left").click(function(){$(".slick360 .deg360").slick("getSlick").slickPrev()}),$(".slick360 .is360 .icon-arrow_right").click(function(){$(".slick360 .deg360").slick("getSlick").slickNext()}),1300<$(window).width()&&($(".sideSlick:first-child").addClass("_prev"),$(".sideSlick:last-child").addClass("_next"))}),$(".turnImg").click(function(){$(this).removeClass("active"),$(".turn360").addClass("active"),$(".slick360 .deg360").removeClass("active"),$(".slick360 .picture").addClass("active"),$(".slick360 .arrow").addClass("isImg"),$(".slick360 .arrow").removeClass("is360"),1300<$(window).width()&&($(".sideSlick:first-child").removeClass("_prev"),$(".sideSlick:last-child").removeClass("_next"))}),storehold.Img360()},header:function(){var n=$("main article:nth-child(2)").height(),t=parseInt($("main article:nth-child(2)").css("padding-top")),e=parseInt($("main article:nth-child(2)").css("padding-bottom")),o=n+t+e,r=$(".header").height(),s=0;$(window).scroll(function(){var t=$(this).scrollTop(),e=t<s,i=$(window).scrollTop();r<=i?$(".header").addClass("prepare"):i<r&&$(".header").removeClass("prepare"),o<=i&&e?$(".header").addClass("fixed"):i<n?$(".header").removeClass("fixed"):e||$(".header").removeClass("fixed"),setTimeout(function(){s=t},100)})},scrollChangPage:function(){function o(){$("main").animate({opacity:0},500),setTimeout(function(){location.href="../reservation/index.html"},1e3)}$(window).bind("mousewheel",function(t){var e=$("body").height()-$(window).height()-1,i=$(window).scrollTop(),n=t.originalEvent.wheelDelta;e<=i&&n<0&&o()}),document.body.addEventListener("touchend",function(t){$("body").height()-$(window).height()-60<=$(window).scrollTop()&&o()})},Img360:function(){$(".deg360 li").each(function(){var t=$(this),e=t.find(".img360").attr("src"),i=t.find(".img360").attr("id");if(0<t.find(".img360").length)PhotoSphereViewer({panorama:e,container:i,navbar:!1,fisheye:!1,anim_speed:"1rpm",mousewheel:!1,mousewheel_factor:0,loading_img:"../../assets/img/photosphere-logo.gif"})})},dropDown:function(){$(".content ._title .dropDown .list .selectList").click(function(){var e=$(this);e.closest(".list").find("ul").slideToggle(700),e.toggleClass("open"),$(document).click(function(t){0===e.closest(".list").has(t.target).length&&(e.closest(".list").find("ul").slideUp(700),e.removeClass("open"))})}),$(".dropDown .list ul li").click(function(){$(this).closest("ul").slideUp(700),$(this).closest(".list").find(".selectList").removeClass("open"),$(this).closest(".list").find(".selectList p").text($(this).text())}),$(".dropDown .list ul").mCustomScrollbar({mouseWheel:{preventDefault:!0,scrollAmount:800}})},all:function(){$("body").hasClass("index")&&(storehold.indexScrollMove(),storehold.storeholdNavFixed(),storehold.storeholdNavClick(),storehold.wordAnimation(),storehold.dropDown()),$("body").hasClass("detail")&&(storehold.pointNavScroll(),storehold.pointNavClick(),storehold.detailScrollMove(),storehold.header(),storehold.pictureSlick(),storehold.deg360(),storehold.changImg(),storehold.scrollChangPage())}},reservation={changWords:function(){$(window).width()<450&&$(".childrenSeat h5").text("需要兒童座椅"),$(window).width()<380&&($(".tableContent .code input").attr("placeholder","點擊圖片獲得新驗證碼"),$(".tableContent .tel h5").text("聯繫電話 Tel")),$(window).width()<351&&$(".tableContent .birthday p").text("是否有當月壽星")},dateDropper:function(){if($(window).width()<700)var t=1;else t=2;var e=1;if(20<(new Date).getHours())e=2;$("#sel_date").datepicker({minDate:e,maxDate:61,numberOfMonths:t}),$("#sel_date").datepicker("option","showAnim","slideDown"),$("#sel_date").datepicker("option","dateFormat","yy-mm-dd"),$("#sel_date").datepicker("option",$.datepicker.regional["zh-TW"])},wordAnimation:function(){wordAnimation(".topNav ._text h3",.6,.1),wordAnimation(".topNav ._text h2",.6,.1)},dropDown:function(){$(".dropdown .selectList").click(function(){var e=$(this);e.closest(".dropdown").find("ul").slideToggle(600),e.toggleClass("open"),$(document).click(function(t){0===e.closest(".dropdown").has(t.target).length&&(e.closest(".dropdown").find("ul").slideUp(600),e.removeClass("open"))})}),$(".dropdown ul li").click(function(){$(this).closest("ul").slideUp(600),$(this).closest(".dropdown").find(".selectList").removeClass("open"),$(this).closest(".dropdown").find(".selectList p").text($(this).text())}),$(".dropdown ul").mCustomScrollbar({mouseWheel:{preventDefault:!0,scrollAmount:800}}),$(".dropdown .selectList p").each(function(){var t=$(this),e=t.text();$("._btn button[type='reset']").click(function(){t.text(e)})})},changStore:function(){function t(){$(".inf ._title h2").remove(),$(".inf ._title p").remove(),$(".inf ._title").append("<h2>Taichung</h2><p>台中公益店</p>"),$(".storeinf .tel").remove(),$(".storeinf .address").remove(),$(".storeinf .openTime").remove()}1023<$(window).width()&&($(".tableContent .store ul li:first-child").click(function(){$(".storeinf").removeClass("type2"),$(".storeinf").addClass("type1"),t(),$.ajax({url:"../../views/layout/test1.html"}).done(function(t){$(".storeinf").html(t)})}),$(".tableContent .store ul li:last-child").click(function(){$(".storeinf").removeClass("type1"),$(".storeinf").addClass("type2"),t(),$.ajax({url:"../../views/layout/test2.html"}).done(function(t){$(".storeinf").html(t)})}))},all:function(){reservation.changWords(),reservation.wordAnimation(),reservation.dateDropper(),reservation.dropDown(),reservation.changStore(),$(window).resize(function(){reservation.dateDropper()})}},contact={changWords:function(){$(window).width()<380&&($(".tableContent .code input").attr("placeholder","點擊圖片獲得新驗證碼"),$(".tableContent .tel h5").text("聯繫電話 Tel"))},wordAnimation:function(){wordAnimation(".topNav ._text h3",.6,.1),wordAnimation(".topNav ._text h2",.6,.1)},dropDown:function(){$(".dropdown .selectList").click(function(){var e=$(this);e.closest(".dropdown").find("ul").slideToggle(600),e.toggleClass("open"),$(document).click(function(t){0===e.closest(".dropdown").has(t.target).length&&(e.closest(".dropdown").find("ul").slideUp(600),e.removeClass("open"))})}),$(".dropdown ul li").click(function(){$(this).closest("ul").slideUp(600),$(this).closest(".dropdown").find(".selectList").removeClass("open"),$(this).closest(".dropdown").find(".selectList p").text($(this).text())}),$(".dropdown ul").mCustomScrollbar({mouseWheel:{preventDefault:!0,scrollAmount:800}}),$(".dropdown .selectList p").each(function(){var t=$(this),e=t.text();$("._btn ul li button[type='reset']").click(function(){t.text(e)})})},all:function(){contact.changWords(),contact.wordAnimation(),$("body").hasClass("index")&&contact.dropDown()}},about={scrollMove:function(){scrollMove(".banner .banner_text",-.2),$(window).scroll(function(){scrollMove(".banner .banner_text",-.2)})},wordAnimation:function(){wordAnimation(".top ._text h2",.6,.1)},all:function(){about.scrollMove(),about.wordAnimation()}},navMenu={open:function(){1024<$(window).width()&&$("body").getNiceScroll().remove(),$("body").css("overflow-y","hidden")},close_click:function(){$(".navMenu .liboxClose").click(function(){navMenu.close()})},close:function(){$(".navMenu").removeClass("open"),$(".navMenu").addClass("close"),$("body").css("overflow-y","visible"),1024<$(window).width()&&bodyscrollbar(),setTimeout(function(){$(".navMenu").remove()},1100)},scrollbar:function(){1023<$(window).width()&&$(".navMenu").niceScroll({nativeparentscrolling:!1,cursorborder:"none",cursorwidth:"4px",railpadding:{top:0,right:2,left:0,bottom:0}})},all:function(){navMenu.open(),navMenu.close_click(),navMenu.scrollbar()}},privacy={open:function(){1024<$(window).width()&&$("body").getNiceScroll().remove(),$("body").css("overflow-y","hidden")},close_click:function(){$(".privacy .close").click(function(){privacy.close()})},close:function(){$(".privacy").removeClass("open"),$(".privacy").addClass("close"),$("body").css("overflow-y","visible"),1024<$(window).width()&&bodyscrollbar(),setTimeout(function(){$(".privacy").remove()},800)},scrollbar:function(){$(".privacy").niceScroll({nativeparentscrolling:!1,cursorborder:"none",cursorwidth:"4px",railpadding:{top:0,right:2,left:0,bottom:0}})},goTop:function(){$(".toTop").click(function(){$(".privacy").animate({scrollTop:0},1500,"easeOutCubic")})},all:function(){privacy.open(),privacy.close_click(),privacy.scrollbar(),privacy.goTop()}};$(document).ready(function(){appleDebug();var t=$("body").attr("id");"home"==t&&(bodyscrollbar(),header(),footer(),_waypoint.homeW(),_Blazy.homeW(),slick.homeSlick(),home.all()),"news"==t&&(bodyscrollbar(),header(),footer(),_waypoint.newsW(),_Blazy.newsW(),news.all(),$(window).resize(function(){news.newsBoxs()})),"menu"==t&&(bodyscrollbar(),header(),footer(),_waypoint.menuW(),_Blazy.menuW(),menu.all()),"storehold"==t&&(bodyscrollbar(),header(),footer(),_waypoint.storeholdW(),_Blazy.storeholdW(),slick.storeholdSlick(),storehold.all()),"reservation"==t&&(bodyscrollbar(),header(),footer(),_Blazy.reservationW(),reservation.all()),"contact"==t&&(bodyscrollbar(),header(),footer(),_Blazy.contactW(),contact.all()),"about"==t&&(bodyscrollbar(),header(),footer(),_waypoint.aboutW(),_Blazy.aboutW(),about.all())});var dish_detail={overflow:function(){if(1024<$(window).width())$(".dish_detail ._title ul").niceScroll({cursorcolor:"transparent",cursorborder:"none",cursorwidth:"4px",railpadding:{top:0,right:0,left:0,bottom:-10}});else{var t=document.querySelector(".dish_detail ._title ul");new PerfectScrollbar(t,{suppressScrollY:!0})}},backgrounColor:function(){$(window).scroll(function(){dish_detail.backgrounColorChang()})},backgrounColorChang:function(){for(var t=$(window).scrollTop(),e=document.querySelectorAll(".dishes"),i=e.length-1;0<=i;i--){if($(e[i]).offset().top-$(window).height()/2<t){var n=i;break}}var o=$(e[n]).data("bgcolor");$(".dish_detail").css("background-color",o)},dishesSelect:function(){var i=document.querySelectorAll(".dishes");$(".dish_detail ._title ul li").click(function(){var t=$(this).index(),e=$(i[t]).offset().top;$("html,body").animate({scrollTop:e},1e3,"easeOutCubic")})},mobileCrossClick:function(){$(".mobileCross").click(function(){$(this).closest(".dishes").find("ul").slideDown(1e3),$(this).hide(),$(this).closest(".dishes").siblings().find("ul").slideUp(1e3),$(this).closest(".dishes").siblings().find(".mobileCross").show(),setTimeout(function(){$("body").getNiceScroll().resize()},1e3)})},all:function(){dish_detail.overflow(),dish_detail.backgrounColor(),dish_detail.dishesSelect(),dish_detail.mobileCrossClick()}};$(document).ready(function(){$(".openDetailLibox").click(function(){$("body").append("<article class='dishMoreLibox'></article>"),$(".dishMoreLibox").addClass("open"),$.ajax({url:"../../views/menu/dishMoreLibox.html"}).done(function(t){$(".dishMoreLibox").html(t),dishMoreLibox.all()})})});var dishMoreLibox={open:function(){$("body").getNiceScroll().resize().hide()},close_click:function(){$(".dishMoreLibox .liboxClose").click(function(){dishMoreLibox.close()})},close:function(){$(".dishMoreLibox").removeClass("open"),$(".dishMoreLibox").addClass("close"),setTimeout(function(){$(".dishMoreLibox").remove()},1e3)},scrollbar:function(){$(".dishMoreLibox").niceScroll({nativeparentscrolling:!1,cursorborder:"none",cursorwidth:"4px",railpadding:{top:0,right:2,left:0,bottom:0}})},all:function(){dishMoreLibox.open(),dishMoreLibox.close_click(),dishMoreLibox.scrollbar()}},$indexSilder=$(".banner ._slick ul");$($indexSilder).slick({cssEase:"linear",adaptiveHeight:!0,pauseOnHover:!1,autoplay:!0,autoplaySpeed:5e3,slidesToShow:1,speed:800,arrows:!1,dots:!0,fade:!0,appendDots:$(".banner .dots")});var $videoApi,$videoItem=$(".banner ._slick ul .video-item"),$video_length=$videoItem.length,$videoId=$indexSilder.find(".slick-current").attr("data-value"),$firstLoad=1,is_safari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);is_safari&&($videoItem.find("span").css("display","none"),$videoItem.find(".open-box").addClass("safari"));isAndroid=-1<(u=navigator.userAgent).indexOf("Android")||-1<u.indexOf("Adr"),isiOS=!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);var u,mobile=(device=isAndroid||isiOS)&&$(window).width()<850,tag=document.createElement("script");tag.src="https://www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var player1,player2,player=Array();$state="",window.onYouTubeIframeAPIReady=function(){player1=new YT.Player("player1",{videoId:"wzclxenwTNc",playerVars:{controls:0,showinfo:0,modestbranding:1,enablejsapi:1,rel:0},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}}),player2=new YT.Player("player2",{videoId:"z-NGwhrfi98",playerVars:{controls:0,showinfo:0,modestbranding:1,enablejsapi:1,rel:0},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})},$($indexSilder).on("beforeChange",function(t,e,i,n){$videoId=$(this).find(".list-item").eq(i).attr("data-value"),$player1=$(this).find(".list-item").eq(i).has("#player1").length,$player2=$(this).find(".list-item").eq(i).has("#player2").length,($videoId=1==$player1&&!mobile&&!is_safari)&&(player1.pauseVideo(),$indexSilder.slick("slickPlay")),($videoId=1==$player2&&!mobile&&!is_safari)&&(player2.pauseVideo(),$indexSilder.slick("slickPlay"))}),$($indexSilder).on("afterChange",function(t,e,i,n){return $firstLoad="0",$videoId=$(this).find(".list-item").eq(i).attr("data-value"),$player1=$(this).find(".list-item").eq(i).has("#player1").length,$player2=$(this).find(".list-item").eq(i).has("#player2").length,"img"==$videoId||1!==$player1||mobile||is_safari||($indexSilder.slick("slickPause"),player1.playVideo()),"img"==$videoId||1!==$player2||mobile||is_safari?$videoId="img":($indexSilder.slick("slickPause"),player2.playVideo()),$firstLoad}),$(window).scroll(function(){var t=$("body, html").scrollTop();$player1=$indexSilder.find(".slick-current").has("#player1").length,$player2=$indexSilder.find(".slick-current").has("#player2").length,75<t?(($videoId=1===$player1&&!mobile&&!is_safari)?player1.pauseVideo():($videoId=1===$player2&&!mobile&&!is_safari)&&player2.pauseVideo(),$indexSilder.slick("slickPause")):($videoId=1===$player1&&!mobile&&!is_safari)?(player1.playVideo(),$indexSilder.slick("slickPause")):($videoId=1===$player2&&!mobile&&!is_safari)?(player2.playVideo(),$indexSilder.slick("slickPause")):$indexSilder.slick("slickPlay")}),$(".open-box").click(function(){$indexSilder.slick("slickPause"),$("body").append('<div class="videoLibox"><iframe src="" frameborder="0"></iframe><div class="liboxClose"><span></span></div></div>');var t="https://www.youtube.com/embed/"+$(this).data("videoid")+"?rel=0;autoplay=1";$(".videoLibox iframe").attr("src",t),$(".videoLibox").addClass("open"),$(".videoLibox .liboxClose").click(function(){videoLiboxClose()}),$(document).click(function(t){$(t.target).hasClass("videoLibox")&&videoLiboxClose()})}),$(document).ready(function(){$(".openReservationLibox").click(function(){openReservationLibox()})});var reservationLibox={open:function(){1024<$(window).width()?$("body").getNiceScroll().resize().hide():$(window).width()<1025&&$("body").css("overflow-y","hidden")},close_click:function(){$(".reservationLibox .liboxClose,.reservationLibox .btn").click(function(){reservationLibox.close()})},click_other:function(){$(".reservationLibox").click(function(t){t.target==this&&reservationLibox.close()})},close:function(){$(".reservationLibox").removeClass("open"),$(".reservationLibox").addClass("close"),$(window).width()<1025&&$("body").css("overflow-y","visible"),setTimeout(function(){$(".reservationLibox").remove()},1100)},scrollbar:function(){1023<$(window).width()&&$(".reservationLibox").niceScroll({nativeparentscrolling:!1,cursorborder:"none",cursorwidth:"4px",railpadding:{top:0,right:2,left:0,bottom:0}})},resize:function(){setTimeout(function(){$(".reservationLibox .box").innerHeight()>$(".reservationLibox").height()?$(".reservationLibox").css("align-items","flex-start"):$(".reservationLibox").css("align-items","center")},100)},all:function(){reservationLibox.open(),reservationLibox.close_click(),reservationLibox.click_other(),reservationLibox.scrollbar(),reservationLibox.resize()}};$(document).ready(function(){$(".cancel button").click(function(){openCancelLibox()})});var cancelLibox={open:function(){1024<$(window).width()?$("body").getNiceScroll().resize().hide():$(window).width()<1025&&$("body").css("overflow-y","hidden")},close_click:function(){$(".cancelLibox .liboxClose,.cancelLibox .btn").click(function(){cancelLibox.close()})},click_other:function(){$(".cancelLibox").click(function(t){t.target==this&&cancelLibox.close()})},close:function(){$(".cancelLibox").removeClass("open"),$(".cancelLibox").addClass("close"),$(window).width()<1025&&$("body").css("overflow-y","visible"),setTimeout(function(){$(".cancelLibox").remove()},1e3)},scrollbar:function(){1023<$(window).width()&&$(".cancelLibox").niceScroll({nativeparentscrolling:!1,cursorborder:"none",cursorwidth:"4px",railpadding:{top:0,right:2,left:0,bottom:0}})},send:function(){$(".cancelLibox .box").addClass("finish").removeClass("form"),$(".cancelLibox h2.form,.cancelLibox .px22.form,.cancelLibox h3.form,.cancelLibox form").delay(200).slideUp(800),$(".cancelLibox h2.finish,.cancelLibox .px22.finish,.cancelLibox h3.finish,.cancelLibox .btn.finish").delay(200).slideDown(800)},resize:function(){setTimeout(function(){$(".cancelLibox .box").innerHeight()>$(".cancelLibox").height()?$(".cancelLibox").css("align-items","flex-start"):$(".cancelLibox").css("align-items","center")},100)},input:function(){$(".cancelLibox .tableContent input").each(function(){$(this).closest("div").click(function(){$(this).find("input").focus()})}),$(".cancelLibox .tableContent input").on("keypress",function(){13==event.keyCode&&(event.preventDefault(),$(this).closest("form").find("button").click())})},all:function(){cancelLibox.open(),cancelLibox.close_click(),cancelLibox.click_other(),cancelLibox.scrollbar(),cancelLibox.resize(),cancelLibox.input()}};document.createElement("picture");