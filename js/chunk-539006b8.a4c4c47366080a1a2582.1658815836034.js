(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-539006b8"],{"0325":function(e,t,r){var a=r("f3e6");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=r("499e").default;n("72b0e139",a,!0,{sourceMap:!1,shadowMode:!1})},"131b":function(e,t,r){"use strict";r("0325")},28686:function(e,t,r){"use strict";r.r(t);var a=r("7a23"),n=function(e){return Object(a["pushScopeId"])("data-v-59b3452f"),e=e(),Object(a["popScopeId"])(),e},o={class:"panelContent"},c={class:"contentWrapper"},l={class:"row"},u={class:"buttonWrapper"},i=Object(a["createTextVNode"])("取消"),d=n((function(){return Object(a["createElementVNode"])("span",null,"儲存",-1)}));function s(e,t,r,n,s,p){var b=Object(a["resolveComponent"])("el-option"),f=Object(a["resolveComponent"])("el-select"),m=Object(a["resolveComponent"])("el-form-item"),j=Object(a["resolveComponent"])("el-input"),O=Object(a["resolveComponent"])("el-slider"),h=Object(a["resolveComponent"])("el-form"),v=Object(a["resolveComponent"])("el-button"),w=Object(a["resolveDirective"])("loading");return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",c,[Object(a["createVNode"])(h,{class:"contentInner",ref:"editForm",model:n.formData,rules:n.rules,disabled:"view"===n.action},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",l,[Object(a["createVNode"])(m,{label:"年分",prop:"year"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(f,{modelValue:n.formData.year,"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.formData.year=e}),placeholder:"請選擇年分...",filterable:"","allow-create":"","default-first-option":""},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(n.yearRange,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(b,{key:e,label:e,value:e},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e),1)]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(a["createVNode"])(m,{label:"月分",prop:"month"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(f,{modelValue:n.formData.month,"onUpdate:modelValue":t[1]||(t[1]=function(e){return n.formData.month=e}),placeholder:"請選擇月分..."},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(12,(function(e){return Object(a["createVNode"])(b,{key:e,label:e,value:e},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e),1)]})),_:2},1032,["label","value"])})),64))]})),_:1},8,["modelValue"])]})),_:1}),Object(a["createVNode"])(m,{label:"新客戶數",prop:"new_customer",rules:[{required:!0,message:"↑此項必填"},{validator:n.checkNumber,trigger:"change"}]},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(j,{type:"number",modelValue:n.formData.new_customer,"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.formData.new_customer=e}),modelModifiers:{number:!0},placeholder:" 0 ~ 999999"},null,8,["modelValue"])]})),_:1},8,["rules"])]),Object(a["createVNode"])(m,{class:"slider",label:"行銷預算執行比率",prop:"marketing_budget_ratio"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(O,{modelValue:n.formData.marketing_budget_ratio,"onUpdate:modelValue":t[3]||(t[3]=function(e){return n.formData.marketing_budget_ratio=e}),"show-input":"","show-input-controls":!1,marks:n.marks},null,8,["modelValue","marks"])]})),_:1}),Object(a["createVNode"])(m,{class:"slider",label:"銷售計劃達成率",prop:"sales_path_rate"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(O,{modelValue:n.formData.sales_path_rate,"onUpdate:modelValue":t[4]||(t[4]=function(e){return n.formData.sales_path_rate=e}),"show-input":"","show-input-controls":!1,marks:n.marks},null,8,["modelValue","marks"])]})),_:1})]})),_:1},8,["model","rules","disabled"])]),Object(a["createElementVNode"])("div",u,[Object(a["createVNode"])(v,{type:"danger",onClick:n.closePanel},{default:Object(a["withCtx"])((function(){return[i]})),_:1},8,["onClick"]),Object(a["createVNode"])(v,{type:"success",onClick:n.checkValidate},{default:Object(a["withCtx"])((function(){return[d]})),_:1},8,["onClick"])])])),[[w,n.loading]])}var p=r("5530"),b=r("1da1"),f=(r("d3b7"),r("159b"),r("b64b"),r("96cf"),r("d902")),m=r("7864"),j=r("c5f8"),O={name:"EditSalestarget",props:{configProps:{type:Object,default:null}},setup:function(e,t){var r,n=t.emit,o=Object(a["ref"])(null),c=Object(a["ref"])(!1),l=null!==(r=e.configProps)&&void 0!==r?r:null,u=l.id,i=l.action,d={0:"0",50:"50",100:"100"},s=Object(a["reactive"])({new_customer:0,marketing_budget_ratio:0,sales_path_rate:0,year:"",month:""}),O=Object(f["c"])(s),h=Object(a["computed"])((function(){for(var e=[],t=new Date,r=t.getFullYear(),a=3;a>0;a--)e.push(r-a);for(var n=0;n<10;n++)e.push(r+n);return e})),v=function(){o.value.validate((function(e){e&&w()}))},w=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[Object(p["a"])({},s)],r=j["default"].addSaleskpi,a="資料新增成功","edit"===i&&(t.push(u),r=j["default"].updatePartOfSaleskpi,a="資料更新成功"),e.prev=4,c.value=!0,e.next=8,r.apply(void 0,t);case 8:Object(m["b"])({type:"success",message:a}),n("eventEmit",{name:"refresh-page"}),_(),e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](4);case 15:return e.prev=15,c.value=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,13,15,18]])})));return function(){return e.apply(this,arguments)}}(),_=function(){n("close")},k=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j["default"].getSaleskpi(u);case 2:t=e.sent,Object.keys(s).forEach((function(e){t[e]&&(s[e]=t[e])}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a["onMounted"])((function(){u&&k()})),{action:i,closePanel:_,rules:O,editForm:o,loading:c,formData:s,checkValidate:v,marks:d,yearRange:h,checkNumber:f["b"]}}},h=(r("131b"),r("6b0d")),v=r.n(h);const w=v()(O,[["render",s],["__scopeId","data-v-59b3452f"]]);t["default"]=w},f3e6:function(e,t,r){var a=r("24fb");t=a(!1),t.push([e.i,".panel .panelContent .contentWrapper[data-v-59b3452f]{padding:2rem 1.8rem 0 1rem}.contentWrapper[data-v-59b3452f] .el-form .row .el-form-item__label{width:auto;padding:0 5px 0 10px;justify-content:flex-end;align-items:center}.contentWrapper[data-v-59b3452f] .el-form .el-form-item__label{width:150px}.contentWrapper[data-v-59b3452f] .el-form .el-form-item.slider{margin:0 0 30px}",""]),e.exports=t}}]);