{"version":3,"sources":["webpack:///./src/assets/img/creeper_face.png","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/Creeper/WithExplose.vue","webpack:///./src/hooks/useCreeper.js","webpack:///./src/hooks/useExplosion.js","webpack:///./src/hooks/cameraSet.js","webpack:///./src/views/Creeper/WithExplose.vue?c07b","webpack:///./src/assets/img/smoke.png","webpack:///./src/assets/img/creeper_skin.png"],"names":["module","exports","DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","uncurryThis","defineProperty","f","FunctionPrototype","Function","prototype","functionToString","toString","nameRE","regExpExec","exec","NAME","configurable","get","this","error","class","ref","_createElementBlock","Creeper","headGeo","THREE","bodyGeo","footGeo","faceImg","require","headMap","load","skinImg","skinMap","skinMat","map","headMaterials","i","push","head","position","set","body","foot1","foot2","clone","foot3","foot4","feet","add","creeper","name","traverse","object","castShadow","receiveShadow","useCreeper","scene","scaleHeadOffset","creeperObj","createCreeper","creeperScaleBody","scaleRate","Math","abs","sin","scale","onMounted","useExplosion","pointCount","movementSpeed","explosion","size","smoke","smokeTexture","Explosion","x","y","z","color","geometry","material","blending","depthTest","transparent","opacity","pCount","dirs","positions","r","randFloat","theta","random","PI","phi","cos","setAttribute","points","p","d","attributes","array","needsUpdate","dispose","remove","length","explosionTrigger","children","len","destroy","resetCreeper","cameraSet","camera","renderer","cameraControl","setSize","window","innerWidth","innerHeight","shadowMap","enabled","type","OrbitControls","domElement","enableDamping","dampingFactor","setup","gui","controls","init","lookAt","baseSet","axes","planeGeometry","planeMaterial","plane","rotation","ambientLight","spotLight","pointLight","dat","value","appendChild","render","update","requestAnimationFrame","__exports__"],"mappings":"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","file":"js/chunk-fa68fcbc.f6973534.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/creeper_face.7aa30c06.png\";","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","<template lang=\"pug\">\r\n.Creeper(ref=\"creeper\")\r\n</template>\r\n<script>\r\nimport { onMounted, ref } from 'vue'\r\nimport * as THREE from 'three'\r\n\r\nimport * as dat from 'dat.gui'\r\n\r\nimport { useCreeper, useExplosion, cameraSet } from '@/hooks'\r\n\r\nexport default {\r\n  name: 'WithExplose',\r\n  setup() {\r\n    const creeper = ref(null)\r\n\r\n    let camera, renderer, cameraControl, gui\r\n    let scene = new THREE.Scene()\r\n\r\n    // 製作苦力怕\r\n    const { creeperScaleBody, creeperObj } = useCreeper(scene)\r\n    const { explosionTrigger, resetCreeper, explosion } = useExplosion(\r\n      scene,\r\n      creeperObj\r\n    )\r\n\r\n    // dat.GUI\r\n    let controls = new (function () {\r\n      this.explosionTrigger = explosionTrigger\r\n      this.resetCreeper = resetCreeper\r\n    })()\r\n\r\n    const init = () => {\r\n      // \b相機設定與 OrbitControls\r\n      camera = new THREE.PerspectiveCamera(\r\n        60,\r\n        window.innerWidth / window.innerHeight,\r\n        20,\r\n        1000\r\n      )\r\n      camera.position.set(50, 50, 50)\r\n      camera.lookAt(scene.position)\r\n\r\n      const baseSet = cameraSet(camera)\r\n      renderer = baseSet.renderer\r\n      cameraControl = baseSet.cameraControl\r\n\r\n      // 三軸座標輔助\r\n      let axes = new THREE.AxesHelper(10)\r\n      scene.add(axes)\r\n\r\n      // \b簡單的地板\r\n      const planeGeometry = new THREE.PlaneGeometry(60, 60)\r\n      const planeMaterial = new THREE.MeshLambertMaterial({ color: 0xffffff })\r\n      let plane = new THREE.Mesh(planeGeometry, planeMaterial)\r\n      plane.rotation.x = -0.5 * Math.PI\r\n      plane.position.set(0, -7, 0)\r\n      plane.receiveShadow = true\r\n      scene.add(plane)\r\n\r\n      // light\r\n      let ambientLight = new THREE.AmbientLight(0x404040)\r\n      scene.add(ambientLight)\r\n      let spotLight = new THREE.SpotLight(0xf0f0f0)\r\n      spotLight.position.set(-10, 30, 20)\r\n      // spotLight.castShadow = true\r\n      scene.add(spotLight)\r\n      let pointLight = new THREE.PointLight(0xccffcc, 1, 100) // 顏色, 強度, 距離\r\n      pointLight.castShadow = true // 投影\r\n      pointLight.position.set(-30, 30, 30)\r\n      scene.add(pointLight)\r\n\r\n      gui = new dat.GUI()\r\n      gui.add(controls, 'explosionTrigger')\r\n      gui.add(controls, 'resetCreeper')\r\n\r\n      // 將渲染出來的畫面放到網頁上的 DOM\r\n      creeper.value.appendChild(renderer.domElement)\r\n    }\r\n\r\n    function render() {\r\n      if (explosion) {\r\n        const len = explosion.length\r\n        if (len > 0) {\r\n          for (let i = 0; i < len; i++) {\r\n            explosion[i].update()\r\n          }\r\n        }\r\n      }\r\n      cameraControl.update() // 需設定 update\r\n      creeperScaleBody()\r\n\r\n      requestAnimationFrame(render)\r\n      renderer.render(scene, camera)\r\n    }\r\n\r\n    onMounted(() => {\r\n      init()\r\n      render()\r\n    })\r\n\r\n    return {\r\n      creeper,\r\n    }\r\n  },\r\n}\r\n</script>\r\n","import * as THREE from 'three'\r\nimport { onMounted } from 'vue'\r\n\r\nclass Creeper {\r\n  constructor() {\r\n    // 宣告頭、身體、腳幾何體大小\r\n    const headGeo = new THREE.BoxGeometry(4, 4, 4)\r\n    const bodyGeo = new THREE.BoxGeometry(4, 8, 2)\r\n    const footGeo = new THREE.BoxGeometry(2, 3, 2)\r\n\r\n    // 苦力怕臉部貼圖\r\n    const faceImg = require('@img/creeper_face.png')\r\n    const headMap = new THREE.TextureLoader().load(faceImg)\r\n    // 苦力怕皮膚貼圖\r\n    const skinImg = require('@img/creeper_skin.png')\r\n    const skinMap = new THREE.TextureLoader().load(skinImg)\r\n\r\n    // 身體與腳的材質設定\r\n    const skinMat = new THREE.MeshStandardMaterial({\r\n      map: skinMap, // 皮膚貼圖\r\n    })\r\n\r\n    // 準備頭部與臉的材質\r\n    const headMaterials = []\r\n    for (let i = 0; i < 6; i++) {\r\n      let map\r\n\r\n      if (i === 1) map = headMap\r\n      else map = skinMap\r\n\r\n      headMaterials.push(new THREE.MeshStandardMaterial({ map: map }))\r\n    }\r\n\r\n    // 頭\r\n    this.head = new THREE.Mesh(headGeo, headMaterials)\r\n\r\n    this.head.position.set(0, 6, 0)\r\n\r\n    // 身體\r\n    this.body = new THREE.Mesh(bodyGeo, skinMat)\r\n    this.body.position.set(0, 0, 0)\r\n\r\n    // 四隻腳\r\n    this.foot1 = new THREE.Mesh(footGeo, skinMat)\r\n    this.foot1.position.set(-1, -5.5, 2)\r\n    this.foot2 = this.foot1.clone() // 剩下三隻腳都複製第一隻的 Mesh\r\n    this.foot2.position.set(-1, -5.5, -2)\r\n    this.foot3 = this.foot1.clone()\r\n    this.foot3.position.set(1, -5.5, 2)\r\n    this.foot4 = this.foot1.clone()\r\n    this.foot4.position.set(1, -5.5, -2)\r\n\r\n    // 將四隻腳組合為一個 group\r\n    this.feet = new THREE.Group()\r\n    this.feet.add(this.foot1)\r\n    this.feet.add(this.foot2)\r\n    this.feet.add(this.foot3)\r\n    this.feet.add(this.foot4)\r\n\r\n    // 將頭、身體、腳組合為一個 group\r\n    this.creeper = new THREE.Group()\r\n    this.creeper.add(this.head)\r\n    this.creeper.add(this.body)\r\n    this.creeper.add(this.feet)\r\n    this.creeper.name = 'creeper'\r\n    // 苦力怕投影設定，利用 traverse 遍歷各個子元件設定陰影\r\n    this.creeper.traverse(function (object) {\r\n      if (object instanceof THREE.Mesh) {\r\n        object.castShadow = true\r\n        object.receiveShadow = true\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nfunction useCreeper(scene) {\r\n  let scaleHeadOffset = 0\r\n  let creeperObj = new Creeper()\r\n\r\n  // 生成苦力怕並加到場景\r\n  function createCreeper() {\r\n    scene.add(creeperObj.creeper)\r\n  }\r\n\r\n  // 苦力怕膨脹\r\n  function creeperScaleBody() {\r\n    scaleHeadOffset += 0.04\r\n    let scaleRate = Math.abs(Math.sin(scaleHeadOffset)) / 16 + 1\r\n    creeperObj.creeper.scale.set(scaleRate, scaleRate, scaleRate)\r\n  }\r\n\r\n  onMounted(() => {\r\n    createCreeper()\r\n  })\r\n\r\n  return {\r\n    creeperObj,\r\n    creeperScaleBody,\r\n  }\r\n}\r\n\r\nexport default useCreeper\r\n","import * as THREE from 'three'\r\n\r\nfunction useExplosion(scene, creeperObj) {\r\n  // 變數宣告\r\n  const pointCount = 1000 // 粒子總數\r\n  const movementSpeed = 10 // 移速種子\r\n  let explosion = [] // 爆炸物件\r\n  let size = 10 // 粒子尺寸\r\n  const smoke = require('@img/smoke.png')\r\n  const smokeTexture = new THREE.TextureLoader().load(smoke)\r\n\r\n  // 爆炸類別\r\n  class Explosion {\r\n    constructor(x, y, z, color) {\r\n      // 幾何體\r\n      const geometry = new THREE.BufferGeometry()\r\n\r\n      // 材質\r\n      this.material = new THREE.PointsMaterial({\r\n        size: size,\r\n        color: color,\r\n        map: smokeTexture,\r\n        blending: THREE.CustomBlending,\r\n        depthTest: false,\r\n        transparent: true,\r\n        opacity: 0.7,\r\n      })\r\n\r\n      this.pCount = pointCount\r\n      this.movementSpeed = movementSpeed\r\n      this.dirs = []\r\n      this.positions = []\r\n\r\n      // 建立粒子系統所需頂點\r\n      for (let i = 0; i < this.pCount; i++) {\r\n        this.positions.push(x, y, z)\r\n        const r = this.movementSpeed * THREE.Math.randFloat(0, 1)\r\n        // 噴射方向隨機 -> 不規則球體\r\n        const theta = Math.random() * Math.PI * 2\r\n        const phi = Math.random() * Math.PI\r\n        this.dirs.push({\r\n          x: r * Math.sin(phi) * Math.cos(theta),\r\n          y: r * Math.sin(phi) * Math.sin(theta),\r\n          z: r * Math.cos(phi),\r\n        })\r\n      }\r\n\r\n      geometry.setAttribute(\r\n        'position',\r\n        new THREE.Float32BufferAttribute(this.positions, 3)\r\n      )\r\n\r\n      let points = new THREE.Points(geometry, this.material)\r\n\r\n      this.object = points\r\n\r\n      scene.add(this.object)\r\n    }\r\n    update() {\r\n      let p = this.pCount\r\n      const d = this.dirs\r\n      const positions = this.object.geometry.attributes.position.array\r\n      while (p--) {\r\n        positions[3 * p] += d[p].x\r\n        positions[3 * p + 1] += d[p].y\r\n        positions[3 * p + 2] += d[p].z\r\n      }\r\n      this.object.geometry.attributes.position.needsUpdate = true\r\n    }\r\n    destroy() {\r\n      this.object.geometry.dispose()\r\n      scene.remove(this.object)\r\n      this.dirs.length = 0\r\n    }\r\n  }\r\n\r\n  const explosionTrigger = function () {\r\n    for (let i = 0; i < scene.children.length; i++) {\r\n      const object = scene.children[i]\r\n\r\n      // 場景內有苦力怕才爆炸\r\n      if (object.name === 'creeper') {\r\n        // 清除之前爆炸粒子\r\n        if (explosion) {\r\n          const len = explosion.length\r\n          if (len > 0) {\r\n            for (let i = 0; i < len; i++) {\r\n              explosion[i].destroy()\r\n            }\r\n          }\r\n          explosion.length = 0\r\n        }\r\n        // 移除苦力怕\r\n        scene.remove(creeperObj.creeper)\r\n\r\n        // 產生爆炸\r\n        explosion[0] = new Explosion(0, 0, 0, 0x000000)\r\n        explosion[1] = new Explosion(5, 5, 5, 0x333333)\r\n        explosion[2] = new Explosion(-5, 5, 10, 0x666666)\r\n        explosion[3] = new Explosion(-5, 5, 5, 0x999999)\r\n        explosion[4] = new Explosion(5, 5, -5, 0xcccccc)\r\n      }\r\n    }\r\n  }\r\n\r\n  const resetCreeper = function () {\r\n    scene.add(creeperObj.creeper)\r\n  }\r\n\r\n  return {\r\n    explosionTrigger,\r\n    resetCreeper,\r\n    explosion,\r\n  }\r\n}\r\n\r\nexport default useExplosion\r\n","import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\n\r\nfunction cameraSet(camera) {\r\n  let renderer, cameraControl\r\n  // 渲染器設定\r\n  renderer = new THREE.WebGLRenderer()\r\n  renderer.setSize(window.innerWidth, window.innerHeight)\r\n  renderer.shadowMap.enabled = true // 設定需渲染陰影效果\r\n  renderer.shadowMap.type = 2 // THREE.PCFSoftShadowMap\r\n\r\n  // 建立 OrbitControls\r\n  cameraControl = new OrbitControls(camera, renderer.domElement)\r\n  cameraControl.enableDamping = true // 啟用阻尼效果\r\n  cameraControl.dampingFactor = 0.25 // 阻尼系數\r\n\r\n  return {\r\n    renderer,\r\n    cameraControl,\r\n  }\r\n}\r\n\r\nexport default cameraSet\r\n","import { render } from \"./WithExplose.vue?vue&type=template&id=7991bb3a&lang=pug\"\nimport script from \"./WithExplose.vue?vue&type=script&lang=js\"\nexport * from \"./WithExplose.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\2100332\\\\Desktop\\\\project\\\\three-test\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"img/creeper_skin.fb8a4e2f.png\";"],"sourceRoot":""}