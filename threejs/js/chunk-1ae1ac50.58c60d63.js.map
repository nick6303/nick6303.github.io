{"version":3,"sources":["webpack:///./src/views/Creeper/Head.vue?15df","webpack:///./src/views/Creeper/Head.vue?85c7","webpack:///./src/views/Creeper/Head.vue?1ef2","webpack:///./src/views/Creeper/Head.vue","webpack:///./src/views/Creeper/Head.vue?94b5"],"names":["___CSS_LOADER_API_IMPORT___","exports","push","module","i","content","__esModule","default","locals","add","class","ref","_createElementVNode","id","_createElementBlock","_hoisted_2","Creeper","headGeo","THREE","bodyGeo","footGeo","headMap","load","skinMap","skinMat","roughness","metalness","transparent","opacity","side","map","headMaterials","this","head","position","set","body","foot1","foot2","clone","foot3","foot4","feet","creeper","traverse","object","castShadow","receiveShadow","name","setup","camera","scene","renderer","cameraControl","pointLight","creeperObj","rotateHeadOffset","walkOffset","scaleHeadOffset","init","window","innerWidth","innerHeight","lookAt","axes","setSize","shadowMap","enabled","type","OrbitControls","domElement","enableDamping","dampingFactor","planeGeometry","planeMaterial","color","plane","rotation","x","Math","PI","ambientLight","spotLight","createCreeper","value","appendChild","render","update","requestAnimationFrame","creeperHeadRotate","creeperFeetWalk","creeperScaleBody","y","sin","scaleRate","abs","scale","onMounted","addEventListener","aspect","updateProjectionMatrix","__exports__"],"mappings":"mGACA,IAAIA,EAA8B,EAAQ,QAC1CC,EAAUD,GAA4B,GAEtCC,EAAQC,KAAK,CAACC,EAAOC,EAAI,0DAA2D,KAEpFD,EAAOF,QAAUA,G,qBCHjB,IAAII,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,kBAAZF,IAAsBA,EAAU,CAAC,CAACF,EAAOC,EAAIC,EAAS,MAC7DA,EAAQG,SAAQL,EAAOF,QAAUI,EAAQG,QAE5C,IAAIC,EAAM,EAAQ,QAAkEF,QACvEE,EAAI,WAAYJ,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,kCCT5E,W,6ICAKK,MAAM,UAAUC,IAAI,W,uBAAgBC,eAAsB,OAAjBC,GAAG,SAAO,Y,gDAAxDC,2CAAyC,MAAzC,EAAyC,UAAAC,GAAzC,I,oDASMC,E,gBACJ,aAAc,uBA2BZ,IAzBA,IAAMC,EAAU,IAAIC,OAAkB,EAAG,EAAG,GACtCC,EAAU,IAAID,OAAkB,EAAG,EAAG,GACtCE,EAAU,IAAIF,OAAkB,EAAG,EAAG,GAGtCG,GAAU,IAAIH,QAAsBI,KACxC,wEAGIC,GAAU,IAAIL,QAAsBI,KACxC,wEAIIE,EAAU,IAAIN,OAA2B,CAC7CO,UAAW,GACXC,UAAW,GACXC,aAAa,EACbC,QAAS,GACTC,KAAMX,OACNY,IAAKP,IAIDQ,EAAgB,GACb3B,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAI0B,OAAE,EAEOA,EAAH,IAAN1B,EAAeiB,EACRE,EAEXQ,EAAc7B,KAAK,IAAIgB,OAA2B,CAAEY,IAAKA,KAI3DE,KAAKC,KAAO,IAAIf,OAAWD,EAASc,GAEpCC,KAAKC,KAAKC,SAASC,IAAI,EAAG,EAAG,GAG7BH,KAAKI,KAAO,IAAIlB,OAAWC,EAASK,GACpCQ,KAAKI,KAAKF,SAASC,IAAI,EAAG,EAAG,GAG7BH,KAAKK,MAAQ,IAAInB,OAAWE,EAASI,GACrCQ,KAAKK,MAAMH,SAASC,KAAK,GAAI,IAAK,GAClCH,KAAKM,MAAQN,KAAKK,MAAME,QACxBP,KAAKM,MAAMJ,SAASC,KAAK,GAAI,KAAM,GACnCH,KAAKQ,MAAQR,KAAKK,MAAME,QACxBP,KAAKQ,MAAMN,SAASC,IAAI,GAAI,IAAK,GACjCH,KAAKS,MAAQT,KAAKK,MAAME,QACxBP,KAAKS,MAAMP,SAASC,IAAI,GAAI,KAAM,GAGlCH,KAAKU,KAAO,IAAIxB,OAChBc,KAAKU,KAAKjC,IAAIuB,KAAKK,OACnBL,KAAKU,KAAKjC,IAAIuB,KAAKM,OACnBN,KAAKU,KAAKjC,IAAIuB,KAAKQ,OACnBR,KAAKU,KAAKjC,IAAIuB,KAAKS,OAGnBT,KAAKW,QAAU,IAAIzB,OACnBc,KAAKW,QAAQlC,IAAIuB,KAAKC,MACtBD,KAAKW,QAAQlC,IAAIuB,KAAKI,MACtBJ,KAAKW,QAAQlC,IAAIuB,KAAKU,MAEtBV,KAAKW,QAAQC,UAAS,SAAUC,GAC1BA,aAAkB3B,SACpB2B,EAAOC,YAAa,EACpBD,EAAOE,eAAgB,SAMhB,GACbC,KAAM,OACNC,MAFa,WAGX,IACIC,EAAQC,EAAOC,EAAUC,EAAeC,EAAYC,EADlDZ,EAAUhC,eAAI,MAEhB6C,EAAmB,EACnBC,EAAa,EACbC,EAAkB,EAEhBC,EAAO,WACXR,EAAQ,IAAIjC,OAGZgC,EAAS,IAAIhC,OACX,GACA0C,OAAOC,WAAaD,OAAOE,YAC3B,GACA,KAEFZ,EAAOhB,SAASC,IAAI,GAAI,GAAI,IAC5Be,EAAOa,OAAOZ,EAAMjB,UAGpB,IAAI8B,EAAO,IAAI9C,OAAiB,IAChCiC,EAAM1C,IAAIuD,GAGVZ,EAAW,IAAIlC,OACfkC,EAASa,QAAQL,OAAOC,WAAYD,OAAOE,aAC3CV,EAASc,UAAUC,SAAU,EAC7Bf,EAASc,UAAUE,KAAO,EAG1Bf,EAAgB,IAAIgB,OAAcnB,EAAQE,EAASkB,YACnDjB,EAAckB,eAAgB,EAC9BlB,EAAcmB,cAAgB,IAI9B,IAAMC,EAAgB,IAAIvD,OAAoB,GAAI,IAC5CwD,EAAgB,IAAIxD,OAA0B,CAAEyD,MAAO,WACzDC,EAAQ,IAAI1D,OAAWuD,EAAeC,GAC1CE,EAAMC,SAASC,GAAK,GAAMC,KAAKC,GAC/BJ,EAAM1C,SAASC,IAAI,GAAI,EAAG,GAC1ByC,EAAM7B,eAAgB,EACtBI,EAAM1C,IAAImE,GAGV,IAAIK,EAAe,IAAI/D,OAAmB,SAC1CiC,EAAM1C,IAAIwE,GAGV,IAAIC,EAAY,IAAIhE,OAAgB,UACpCgE,EAAUhD,SAASC,KAAK,GAAI,GAAI,IAChCgB,EAAM1C,IAAIyE,GAGV5B,EAAa,IAAIpC,OAAiB,SAAU,GAAK,KACjDoC,EAAWR,YAAa,EACxBQ,EAAWpB,SAASC,KAAK,GAAI,GAAI,IACjCgB,EAAM1C,IAAI6C,GAGV6B,IAGAxC,EAAQyC,MAAMC,YAAYjC,EAASkB,aAGrC,SAASgB,IACPjC,EAAckC,SACdC,sBAAsBF,GACtBG,IACAC,IACAC,IACAvC,EAASkC,OAAOnC,EAAOD,GAIzB,SAASuC,IACPjC,GAAoB,IACpBD,EAAWtB,KAAK4C,SAASe,EAAIb,KAAKc,IAAIrC,GAIxC,SAASkC,IACPjC,GAAc,IAEdF,EAAWlB,MAAMwC,SAASC,EAAIC,KAAKc,IAAIpC,GAAc,EACrDF,EAAWjB,MAAMuC,SAASC,GAAKC,KAAKc,IAAIpC,GAAc,EACtDF,EAAWf,MAAMqC,SAASC,GAAKC,KAAKc,IAAIpC,GAAc,EACtDF,EAAWd,MAAMoC,SAASC,EAAIC,KAAKc,IAAIpC,GAAc,EAIvD,SAASkC,IACPjC,GAAmB,IACnB,IAAIoC,EAAYf,KAAKgB,IAAIhB,KAAKc,IAAInC,IAAoB,GAAK,EAC3DH,EAAWZ,QAAQqD,MAAM7D,IAAI2D,EAAWA,EAAWA,GAIrD,SAASX,IACP5B,EAAa,IAAIvC,EACjBmC,EAAM1C,IAAI8C,EAAWZ,SAYvB,OATAsD,gBAAU,WACRtC,IACA2B,IACA1B,OAAOsC,iBAAiB,UAAU,WAChChD,EAAOiD,OAASvC,OAAOC,WAAaD,OAAOE,YAC3CZ,EAAOkD,yBACPhD,EAASa,QAAQL,OAAOC,WAAYD,OAAOE,mBAGxC,CAAEnB,a,iCCpMb,MAAM0D,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAE1E","file":"js/chunk-1ae1ac50.58c60d63.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#stats[data-v-4af948fc]{position:absolute;left:0;top:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Head.vue?vue&type=style&index=0&id=4af948fc&lang=sass&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"82f8833e\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Head.vue?vue&type=style&index=0&id=4af948fc&lang=sass&scoped=true\"","<template lang=\"pug\">\r\n.Creeper(ref=\"creeper\")\r\n#stats\r\n</template>\r\n<script>\r\nimport { onMounted, ref } from 'vue'\r\nimport * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\n\r\nclass Creeper {\r\n  constructor() {\r\n    // 宣告頭、身體、腳幾何體大小\r\n    const headGeo = new THREE.BoxGeometry(4, 4, 4)\r\n    const bodyGeo = new THREE.BoxGeometry(4, 8, 2)\r\n    const footGeo = new THREE.BoxGeometry(2, 3, 2)\r\n\r\n    // 苦力怕臉部貼圖\r\n    const headMap = new THREE.TextureLoader().load(\r\n      'https://dl.dropboxusercontent.com/s/bkqu0tty04epc46/creeper_face.png'\r\n    )\r\n    // 苦力怕皮膚貼圖\r\n    const skinMap = new THREE.TextureLoader().load(\r\n      'https://dl.dropboxusercontent.com/s/eev6wxdxfmukkt8/creeper_skin.png'\r\n    )\r\n\r\n    // 身體與腳的材質設定\r\n    const skinMat = new THREE.MeshStandardMaterial({\r\n      roughness: 0.3, // 粗糙度\r\n      metalness: 0.8, // 金屬感\r\n      transparent: true, // 透明與否\r\n      opacity: 0.9, // 透明度\r\n      side: THREE.DoubleSide, // 雙面材質\r\n      map: skinMap, // 皮膚貼圖\r\n    })\r\n\r\n    // 準備頭部與臉的材質\r\n    const headMaterials = []\r\n    for (let i = 0; i < 6; i++) {\r\n      let map\r\n\r\n      if (i === 1) map = headMap\r\n      else map = skinMap\r\n\r\n      headMaterials.push(new THREE.MeshStandardMaterial({ map: map }))\r\n    }\r\n\r\n    // 頭\r\n    this.head = new THREE.Mesh(headGeo, headMaterials)\r\n\r\n    this.head.position.set(0, 6, 0)\r\n\r\n    // 身體\r\n    this.body = new THREE.Mesh(bodyGeo, skinMat)\r\n    this.body.position.set(0, 0, 0)\r\n\r\n    // 四隻腳\r\n    this.foot1 = new THREE.Mesh(footGeo, skinMat)\r\n    this.foot1.position.set(-1, -5.5, 2)\r\n    this.foot2 = this.foot1.clone() // 剩下三隻腳都複製第一隻的 Mesh\r\n    this.foot2.position.set(-1, -5.5, -2)\r\n    this.foot3 = this.foot1.clone()\r\n    this.foot3.position.set(1, -5.5, 2)\r\n    this.foot4 = this.foot1.clone()\r\n    this.foot4.position.set(1, -5.5, -2)\r\n\r\n    // 將四隻腳組合為一個 group\r\n    this.feet = new THREE.Group()\r\n    this.feet.add(this.foot1)\r\n    this.feet.add(this.foot2)\r\n    this.feet.add(this.foot3)\r\n    this.feet.add(this.foot4)\r\n\r\n    // 將頭、身體、腳組合為一個 group\r\n    this.creeper = new THREE.Group()\r\n    this.creeper.add(this.head)\r\n    this.creeper.add(this.body)\r\n    this.creeper.add(this.feet)\r\n    // 苦力怕投影設定，利用 traverse 遍歷各個子元件設定陰影\r\n    this.creeper.traverse(function (object) {\r\n      if (object instanceof THREE.Mesh) {\r\n        object.castShadow = true\r\n        object.receiveShadow = true\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport default {\r\n  name: 'Head',\r\n  setup() {\r\n    const creeper = ref(null)\r\n    let camera, scene, renderer, cameraControl, pointLight, creeperObj\r\n    let rotateHeadOffset = 0\r\n    let walkOffset = 0\r\n    let scaleHeadOffset = 0\r\n\r\n    const init = () => {\r\n      scene = new THREE.Scene()\r\n\r\n      // \b相機設定與 OrbitControls\r\n      camera = new THREE.PerspectiveCamera(\r\n        60,\r\n        window.innerWidth / window.innerHeight,\r\n        0.1,\r\n        1000\r\n      )\r\n      camera.position.set(30, 30, 30)\r\n      camera.lookAt(scene.position)\r\n\r\n      // 三軸座標輔助\r\n      let axes = new THREE.AxesHelper(10)\r\n      scene.add(axes)\r\n\r\n      // 渲染器設定\r\n      renderer = new THREE.WebGLRenderer()\r\n      renderer.setSize(window.innerWidth, window.innerHeight)\r\n      renderer.shadowMap.enabled = true // 設定需渲染陰影效果\r\n      renderer.shadowMap.type = 2 // THREE.PCFSoftShadowMap\r\n\r\n      // 建立 OrbitControls\r\n      cameraControl = new OrbitControls(camera, renderer.domElement)\r\n      cameraControl.enableDamping = true // 啟用阻尼效果\r\n      cameraControl.dampingFactor = 0.25 // 阻尼系數\r\n      // cameraControl.autoRotate = true // 啟用自動旋轉\r\n\r\n      // \b簡單的地板\r\n      const planeGeometry = new THREE.PlaneGeometry(60, 60)\r\n      const planeMaterial = new THREE.MeshLambertMaterial({ color: 0xffffff })\r\n      let plane = new THREE.Mesh(planeGeometry, planeMaterial)\r\n      plane.rotation.x = -0.5 * Math.PI\r\n      plane.position.set(0, -7, 0)\r\n      plane.receiveShadow = true\r\n      scene.add(plane)\r\n\r\n      // 設置環境光提供輔助柔和白光\r\n      let ambientLight = new THREE.AmbientLight(0x404040)\r\n      scene.add(ambientLight)\r\n\r\n      // 設置聚光燈幫忙照亮物體\r\n      let spotLight = new THREE.SpotLight(0xf0f0f0)\r\n      spotLight.position.set(-10, 30, 20)\r\n      scene.add(spotLight)\r\n\r\n      // 移動點光源\r\n      pointLight = new THREE.PointLight(0xccffcc, 0.5, 100) // 顏色, 強度, 距離\r\n      pointLight.castShadow = true // 投影\r\n      pointLight.position.set(-10, 16, 10)\r\n      scene.add(pointLight)\r\n\r\n      // 產生苦力怕物件並加到場景\r\n      createCreeper()\r\n\r\n      // 將渲染出來的畫面放到網頁上的 DOM\r\n      creeper.value.appendChild(renderer.domElement)\r\n    }\r\n\r\n    function render() {\r\n      cameraControl.update() // 需設定 update\r\n      requestAnimationFrame(render)\r\n      creeperHeadRotate()\r\n      creeperFeetWalk()\r\n      creeperScaleBody()\r\n      renderer.render(scene, camera)\r\n    }\r\n\r\n    // 苦力怕擺頭\r\n    function creeperHeadRotate() {\r\n      rotateHeadOffset += 0.04\r\n      creeperObj.head.rotation.y = Math.sin(rotateHeadOffset)\r\n    }\r\n\r\n    // 苦力怕走動\r\n    function creeperFeetWalk() {\r\n      walkOffset += 0.04\r\n\r\n      creeperObj.foot1.rotation.x = Math.sin(walkOffset) / 4 // 前腳左\r\n      creeperObj.foot2.rotation.x = -Math.sin(walkOffset) / 4 // 後腳左\r\n      creeperObj.foot3.rotation.x = -Math.sin(walkOffset) / 4 // 前腳右\r\n      creeperObj.foot4.rotation.x = Math.sin(walkOffset) / 4 // 後腳右\r\n    }\r\n\r\n    // 苦力怕膨脹\r\n    function creeperScaleBody() {\r\n      scaleHeadOffset += 0.04\r\n      let scaleRate = Math.abs(Math.sin(scaleHeadOffset)) / 16 + 1\r\n      creeperObj.creeper.scale.set(scaleRate, scaleRate, scaleRate)\r\n    }\r\n\r\n    // 生成苦力怕並加到場景\r\n    function createCreeper() {\r\n      creeperObj = new Creeper()\r\n      scene.add(creeperObj.creeper)\r\n    }\r\n\r\n    onMounted(() => {\r\n      init()\r\n      render()\r\n      window.addEventListener('resize', function () {\r\n        camera.aspect = window.innerWidth / window.innerHeight\r\n        camera.updateProjectionMatrix()\r\n        renderer.setSize(window.innerWidth, window.innerHeight)\r\n      })\r\n    })\r\n    return { creeper }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"sass\" scoped>\r\n#stats\r\n  position: absolute\r\n  left: 0\r\n  top: 0\r\n</style>\r\n","import { render } from \"./Head.vue?vue&type=template&id=4af948fc&scoped=true&lang=pug\"\nimport script from \"./Head.vue?vue&type=script&lang=js\"\nexport * from \"./Head.vue?vue&type=script&lang=js\"\n\nimport \"./Head.vue?vue&type=style&index=0&id=4af948fc&lang=sass&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\2100332\\\\Desktop\\\\project\\\\three-test\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4af948fc\"]])\n\nexport default __exports__"],"sourceRoot":""}